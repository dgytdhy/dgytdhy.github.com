<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh_CN"><generator uri="https://jekyllrb.com/" version="4.1.1">Jekyll</generator><link href="https://www.desgard.com/feed.xml" rel="self" type="application/atom+xml" /><link href="https://www.desgard.com/" rel="alternate" type="text/html" hreflang="zh_CN" /><updated>2020-10-12T18:42:41-08:00</updated><id>https://www.desgard.com/feed.xml</id><title type="html">ä¸€ç‰‡ç“œç”°</title><subtitle>I write more code to write less.
</subtitle><author><name>å†¬ç“œ</name><email>gua@desgard.com</email></author><entry><title type="html">Podspec æ–‡ä»¶åˆ†æ</title><link href="https://www.desgard.com/2020/10/12/cocoapods-story-5.html" rel="alternate" type="text/html" title="Podspec æ–‡ä»¶åˆ†æ" /><published>2020-10-12T00:00:00-08:00</published><updated>2020-10-12T00:00:00-08:00</updated><id>https://www.desgard.com/2020/10/12/cocoapods-story-5</id><content type="html" xml:base="https://www.desgard.com/2020/10/12/cocoapods-story-5.html">&lt;h1 id=&quot;å¼•å­&quot;&gt;å¼•å­&lt;/h1&gt;

&lt;p&gt;åœ¨ä¸Šæ–‡ &lt;a href=&quot;https://zhuanlan.zhihu.com/p/248308670&quot;&gt;Podfile è§£æé€»è¾‘&lt;/a&gt; ä¸­ï¼ˆå»ºè®®å…ˆé˜…è¯»è¿™ç¯‡æ–‡ç« ï¼‰ï¼Œæˆ‘ä»¬ä»¥ Xcode å·¥ç¨‹ç»“æ„ä½œä¸ºåˆ‡å…¥ç‚¹ä»‹ç»äº† Podfile èƒŒåå¯¹åº”çš„æ•°æ®ç»“æ„ï¼Œå‰–æäº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; æ–‡ä»¶æ˜¯å¦‚ä½•è§£æä¸åŠ è½½ï¼Œå¹¶æœ€ç»ˆ &lt;em&gt;â€œå…¥ä¾µâ€&lt;/em&gt; é¡¹ç›®å½±å“å…¶å·¥ç¨‹ç»“æ„çš„ã€‚ä»Šå¤©æˆ‘ä»¬æ¥èŠä¸€èŠ &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/CocoaPods/Core&quot;&gt;CocoaPods-Core&lt;/a&gt; ä¸­çš„å¦ä¸€ä¸ªé‡è¦æ–‡ä»¶ â€” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt; ä»¥åŠå®ƒæ‰€æ’‘èµ·çš„ CocoaPods ä¸–ç•Œã€‚&lt;/p&gt;

&lt;p&gt;ä¸€ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod&lt;/code&gt; çš„åˆ›å»ºå’Œå‘å¸ƒç¦»ä¸å¼€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.podspec&lt;/code&gt; æ–‡ä»¶ï¼Œå®ƒå¯ä»¥å¾ˆç®€å•ä¹Ÿèƒ½å¤æ‚ï¼Œå¦‚ &lt;a href=&quot;https://github.com/Tencent/QMUI_iOS/blob/master/QMUIKit.podspec&quot;&gt;QMUIKit&lt;/a&gt;ï¼ˆåç»­ä»‹ç»)ã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå¤©æˆ‘ä»¬å°±ç›´å¥”ä¸»é¢˜ï¼Œæ¥åˆ†æ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt; æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;h1 id=&quot;podspec&quot;&gt;Podspec&lt;/h1&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt; æ˜¯ç”¨äº &lt;strong&gt;æè¿°ä¸€ä¸ª Pod åº“çš„æºä»£ç å’Œèµ„æºå°†å¦‚ä½•è¢«æ‰“åŒ…ç¼–è¯‘æˆé“¾æ¥åº“æˆ– framework çš„æ–‡ä»¶&lt;/strong&gt; ï¼Œè€Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt; ä¸­çš„è¿™äº›æè¿°å†…å®¹æœ€ç»ˆå°†æ˜ ä¼šæ˜ å°„åˆ° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Specification&lt;/code&gt; ç±»ä¸­ï¼ˆä»¥ä¸‹ç®€ç§° &lt;strong&gt;Spec&lt;/strong&gt;ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1602123337307-c263f917-e45d-46c7-be0c-74fa1bc663e0.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç°åœ¨è®©æˆ‘ä»¬æ¥é‡æ–°è®¤è¯† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;podspec-åˆæ¢&quot;&gt;Podspec åˆæ¢&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt; æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.podspec&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.json&lt;/code&gt; ä¸¤ç§ï¼Œè€Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.podspec&lt;/code&gt; æœ¬è´¨æ˜¯ Ruby æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;é—®é¢˜æ¥äº†ï¼Œä¸ºä»€ä¹ˆæ˜¯ JSON æ ¼å¼è€Œä¸åƒ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; ä¸€æ ·æ”¯æŒ YAML å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;ç¬”è€…çš„ç†è§£ï¼šç”±äº &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt; æ–‡ä»¶ä¼šæ»¡ä¸–ç•Œè·‘ï¼Œå®ƒå¯èƒ½å­˜åœ¨äº CocoaPods çš„ &lt;a href=&quot;https://cdn.cocoapods.org/&quot;&gt;CDN Service&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/CocoaPods/Specs&quot;&gt;Speces Repo&lt;/a&gt; æˆ–è€…ä½ ä»¬çš„ç§æœ‰ Specs Repo ä¸Šï¼Œå› æ­¤é‡‡ç”¨ Â JSON çš„æ–‡ä»¶åœ¨ç½‘ç»œä¼ è¾“ä¸­ä¼šæ›´å‹å¥½ã€‚è€Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; æ›´å¤šçš„åœºæ™¯æ˜¯ç”¨äºåºåˆ—åŒ–ï¼Œå®ƒéœ€è¦åœ¨é¡¹ç›®ä¸­ç”Ÿæˆä¸€ä»½ç»ä¾èµ–ä»²è£åçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; å¿«ç…§ï¼Œç”¨äºåç»­çš„å¯¹æ¯”ã€‚&lt;/p&gt;

&lt;h3 id=&quot;podspec-1&quot;&gt;Podspec&lt;/h3&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Pod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;         &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Reachability'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;version&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'3.1.0'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;license&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'BSD'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;homepage&lt;/span&gt;     &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://github.com/tonymillion/Reachability'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;authors&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Tony Million'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'tonymillion@gmail.com'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;summary&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ARC and GCD Compatible Reachability Class for iOS and OS X.'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;source&lt;/span&gt;       &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:git&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://github.com/tonymillion/Reachability.git'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:tag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;v&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;source_files&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Reachability.{h,m}'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;framework&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'SystemConfiguration'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢è¿™ä»½ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Reachability.podspec&lt;/code&gt; é…ç½®ï¼ŒåŸºæœ¬é€šè¿‡å‘½ä»¤è¡Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod lib create NAME&lt;/code&gt; å°±èƒ½å¸®æˆ‘ä»¬å®Œæˆã€‚é™¤æ­¤ä¹‹å¤–æˆ‘ä»¬èƒ½åšçš„æ›´å¤šï¼Œæ¯”å¦‚ï¼Œé»˜è®¤æƒ…å†µä¸‹ CococaPods ä¼šä¸ºæ¯ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod&lt;/code&gt; framework ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;modulemap&lt;/code&gt; æ–‡ä»¶ï¼Œå®ƒå°†åŒ…å« &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt; ä¸­æŒ‡å®šçš„å…¬å…± headersã€‚å¦‚æœéœ€è¦è‡ªå®šä¹‰å¼•å…¥çš„ header æ–‡ä»¶ï¼Œä»…éœ€é…ç½® &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;moduel_map&lt;/code&gt; å³å¯å®Œæˆã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢æ˜¯è¿›é˜¶ç‰ˆé…ç½®ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Pod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;         &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Reachability'&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# çœç•¥ä¸å‰é¢ç›¸åŒéƒ¨åˆ†çš„é…ç½® ...&lt;/span&gt;
  
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;module_name&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Rich'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;swift_version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'4.0'&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ios&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;deployment_target&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'9.0'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;osx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;deployment_target&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'10.10'&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;source_files&lt;/span&gt;       &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Reachability/common/*.swift'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ios&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;source_files&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Reachability/ios/*.swift'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Reachability/extensions/*.swift'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;osx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;source_files&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Reachability/osx/*.swift'&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;framework&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'SystemConfiguration'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ios&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;framework&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'UIKit'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;osx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;framework&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'AppKit'&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dependency&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'SomeOtherPod'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åƒ ğŸ‘† æˆ‘ä»¬ä¸ºä¸åŒçš„ç³»ç»ŸæŒ‡å®šäº†ä¸åŒçš„æºç å’Œä¾èµ–ç­‰ï¼Œå½“ç„¶å¯é…ç½®çš„ä¸åªè¿™äº›ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt; æ”¯æŒçš„å®Œæ•´é…ç½®åˆ†ç±»å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1602123356225-0e9d5db0-e68e-4808-b198-735931d3a780.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æƒ³äº†è§£æ›´å¤šçš„é…ç½®é€‰é¡¹ï¼š&lt;a href=&quot;https://guides.cocoapods.org/syntax/Podspec.html&quot;&gt;ä¼ é€é—¨&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;convention-over-configuration&quot;&gt;Convention Over Configuration&lt;/h3&gt;

&lt;p&gt;è¯´åˆ°é…ç½®ï¼Œä¸å¾—ä¸æä¸€ä¸‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CoC&lt;/code&gt; çº¦å®šå¤§äºé…ç½®ã€‚çº¦å®šå¤§äºé…ç½®ç®—æ˜¯åœ¨è½¯ä»¶å·¥ç¨‹è¾ƒæ—©å‡ºç°çš„æ¦‚å¿µçš„äº†ï¼Œå¤§æ„æ˜¯ï¼š&lt;strong&gt;ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬çš„ä»£ç éœ€è¦æŒ‰ç…§ä¸€å®šçš„çº¦å®šæ¥ç¼–å†™&lt;/strong&gt;ï¼ˆå¦‚ä»£ç æ”¾åœ¨ä»€ä¹ˆç›®å½•ï¼Œç”¨ä»€ä¹ˆæ–‡ä»¶åï¼Œç”¨ä»€ä¹ˆç±»åç­‰)ã€‚ è¿™æ ·æ—¢ç®€åŒ–äº†é…ç½®æ–‡ä»¶ï¼ŒåŒæ—¶ä¹Ÿé™ä½äº†å­¦ä¹ æˆæœ¬ã€‚&lt;/p&gt;

&lt;p&gt;çº¦å®šå¤§äºé…ç½®å¯ä»¥è¯´æ˜¯é€šè¿‡ &lt;a href=&quot;https://www.wikiwand.com/en/Ruby_on_Rails&quot;&gt;Ruby on Rails&lt;/a&gt; å‘æ‰¬å…‰å¤§çš„ã€‚å°½ç®¡å®ƒä¸€ç›´é¥±å—äº‰è®®ï¼Œä½†æ˜¯ä¸»æµè¯­è¨€çš„ä¾èµ–ç®¡ç†å·¥å…·ï¼Œå¦‚ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Maven&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;npm&lt;/code&gt; ç­‰éƒ½éµå¾ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CoC&lt;/code&gt; è¿›è¡Œä¸æ–­æ¼”è¿›çš„ï¼Œå› ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CoC&lt;/code&gt; èƒ½å¤Ÿæœ‰æ•ˆå¸®åŠ©å¼€å‘è€…å‡è½»é€‰æ‹©çš„ç—›æ„Ÿï¼Œå‡å°‘æ— æ„ä¹‰çš„é€‰æ‹©ã€‚ä¸€äº›æ–°çš„è¯­è¨€ä¹Ÿå¸æ”¶äº†è¿™ä¸ªæ€æƒ³ï¼Œæ¯”å¦‚ Go è¯­è¨€ã€‚å¦‚æœç”¨ C/C++ å¯èƒ½éœ€è¦å®šä¹‰å¤æ‚çš„ Makefile æ¥å®šä¹‰ç¼–è¯‘çš„è§„åˆ™ï¼Œä»¥åŠå¦‚ä½•è¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œè€Œåœ¨ Go ä¸­è¿™äº›éƒ½æ˜¯çº¦å®šå¥½çš„ã€‚&lt;/p&gt;

&lt;p&gt;ä¸¾ä¸ª ğŸŒ° ï¼š&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; ä¸­æ˜¯å¯ä»¥æŒ‡å®š pod library æ‰€é“¾æ¥çš„ Xcode projectï¼Œä¸è¿‡å¤§å¤šæƒ…å†µä¸‹æ— éœ€é…ç½®ï¼ŒCocoaPods ä¼šè‡ªåŠ¨æŸ¥æ‰¾ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; æ‰€åœ¨çš„åŒçº§ç›®å½•ä¸‹æ‰€å¯¹åº”çš„å·¥ç¨‹æ–‡ä»¶ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.project&lt;/code&gt; ã€‚&lt;/p&gt;

&lt;h2 id=&quot;spec-çš„æ ¸å¿ƒæ•°æ®ç»“æ„&quot;&gt;Spec çš„æ ¸å¿ƒæ•°æ®ç»“æ„&lt;/h2&gt;

&lt;h3 id=&quot;specification&quot;&gt;Specification&lt;/h3&gt;

&lt;p&gt;åœ¨æ•°æ®ç»“æ„ä¸Š &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Specification&lt;/code&gt; ä¸ &lt;a href=&quot;https://looseyi.github.io/post/sourcecode-cocoapods/04-cocoapods-podfile/#targetdefinition&quot;&gt;TargetDefinition&lt;/a&gt; æ˜¯ç±»ä¼¼çš„ï¼Œ&lt;strong&gt;åŒä¸ºå¤šå‰æ ‘ç»“æ„&lt;/strong&gt;ã€‚ç®€åŒ–åçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Spec&lt;/code&gt; çš„ç±»å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'active_support/core_ext/string/strip.rb'&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# è®°å½•å¯¹åº” platform ä¸Š Spec çš„å…¶ä»– pod ä¾èµ–&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/specification/consumer'&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# è§£æ DSL&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/specification/dsl'&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# æ ¡éªŒ Spec çš„æ­£ç¡®æ€§ï¼Œå¹¶æŠ›å‡ºå¯¹åº”çš„é”™è¯¯å’Œè­¦å‘Š&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/specification/linter'&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# ç”¨äºè§£æ DSL å†…å®¹åŒ…å«çš„é…ç½®ä¿¡æ¯&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/specification/root_attribute_accessors'&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# è®°å½•ä¸€ä¸ª Pod æ‰€æœ‰ä¾èµ–çš„ Spec æ¥æºä¿¡æ¯&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/specification/set'&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# json æ ¼å¼æ•°æ®è§£æ&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/specification/json'&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Pod&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Specification&lt;/span&gt;
    &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Pod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Specification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;DSL&lt;/span&gt;
    &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Pod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Specification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;DSL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Deprecations&lt;/span&gt;
    &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Pod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Specification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;RootAttributesAccessors&lt;/span&gt;
    &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Pod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Specification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;JSONSupport&lt;/span&gt;
 
    &lt;span class=&quot;c1&quot;&gt;# `subspec` çš„çˆ¶èŠ‚ç‚¹&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;attr_reader&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:parent&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# `Spec` çš„å”¯ä¸€ idï¼Œç”± name + version çš„ hash æ„æˆ&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;attr_reader&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:hash_value&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# è®°å½• `Spec` çš„é…ç½®ä¿¡æ¯ &lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;attr_accessor&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:attributes_hash&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# `Spec` åŒ…å«çš„ `subspec`&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;attr_accessor&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:subspecs&lt;/span&gt;
     
    &lt;span class=&quot;c1&quot;&gt;# é€’å½’è°ƒç”¨è·å– Specification çš„æ ¹èŠ‚ç‚¹&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;root&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;root&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
     
	 &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hash&lt;/span&gt;
   	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@hash_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;nil?&lt;/span&gt;
      	&lt;span class=&quot;vi&quot;&gt;@hash_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;53&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;hash&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@hash_value&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
     
    &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Specification&lt;/code&gt; åŒæ ·ç”¨ map &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;attributes_hash&lt;/code&gt; æ¥è®°å½•é…ç½®ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;p&gt;æ³¨æ„ï¼Œè¿™é‡Œçš„ parent æ˜¯ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;subspec&lt;/code&gt; ä¿ç•™çš„ï¼Œç”¨äºæŒ‡å‘å…¶çˆ¶èŠ‚ç‚¹çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Spec&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1602123372255-dae8539b-97d6-4219-8c0a-875c57bc53cd.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;subspecs&quot;&gt;Subspecs&lt;/h3&gt;

&lt;p&gt;ä¹ä¸€å¬ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Subspec&lt;/code&gt; è¿™ä¸ªæ¦‚å¿µä¼¼ä¹æœ‰ä¸€äº›æŠ½è±¡ï¼Œä¸è¿‡å½“ä½ ç†è§£äº†ä¸Šé¢çš„æè¿°ï¼Œå°±èƒ½æ˜ç™½ä»€ä¹ˆæ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Subspec&lt;/code&gt; äº†ã€‚æˆ‘ä»¬çŸ¥é“åœ¨ Xcode é¡¹ç›®ä¸­ï¼Œtarget ä½œä¸ºæœ€å°çš„å¯ç¼–è¯‘å•å…ƒï¼Œå®ƒç¼–è¯‘åçš„äº§ç‰©ä¸ºé“¾æ¥åº“æˆ– frameworkã€‚è€Œåœ¨ CocoaPods çš„ä¸–ç•Œé‡Œè¿™äº› targets åˆ™æ˜¯ç”± &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Spec&lt;/code&gt; æ–‡ä»¶æ¥æè¿°çš„ï¼Œå®ƒè¿˜èƒ½æ‹†åˆ†æˆä¸€ä¸ªæˆ–è€…å¤šä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Subspec&lt;/code&gt;ï¼Œæˆ‘ä»¬æš‚ä¸”æŠŠå®ƒç§°ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Spec&lt;/code&gt; çš„ &lt;strong&gt;å­æ¨¡å—&lt;/strong&gt;ï¼Œå­æ¨¡å—ä¹Ÿæ˜¯ç”¨ &lt;strong&gt;Specification&lt;/strong&gt; ç±»æ¥æè¿°çš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å­æ¨¡å—å¯ä»¥å•ç‹¬ä½œä¸ºä¾èµ–è¢«å¼•å…¥åˆ°é¡¹ç›®ä¸­ã€‚&lt;/strong&gt;å®ƒæœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;æœªæŒ‡å®š &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;default_subspec&lt;/code&gt; çš„æƒ…å†µä¸‹ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Spec&lt;/code&gt; çš„å…¨éƒ¨å­æ¨¡å—éƒ½å°†ä½œä¸ºä¾èµ–è¢«å¼•å…¥ï¼›&lt;/li&gt;
  &lt;li&gt;å­æ¨¡å—ä¼šä¸»åŠ¨ç»§æ‰¿å…¶çˆ¶èŠ‚ç‚¹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Spec&lt;/code&gt; ä¸­å®šä¹‰çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;attributes_hash&lt;/code&gt;ï¼›&lt;/li&gt;
  &lt;li&gt;å­æ¨¡å—å¯ä»¥æŒ‡å®šè‡ªå·±çš„æºä»£ç ã€èµ„æºæ–‡ä»¶ã€ç¼–è¯‘é…ç½®ã€ä¾èµ–ç­‰ï¼›&lt;/li&gt;
  &lt;li&gt;åŒä¸€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Spec&lt;/code&gt; å†…éƒ¨çš„å­æ¨¡å—æ˜¯å¯ä»¥æœ‰ä¾èµ–å…³ç³»çš„ï¼›&lt;/li&gt;
  &lt;li&gt;æ¯ä¸ªå­æ¨¡å—åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod push&lt;/code&gt; çš„æ—¶å€™æ˜¯éœ€è¦è¢« lint é€šè¿‡çš„ï¼›&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å…‰å¬æ€»ç»“ä¼¼ä¹è¿˜æ˜¯äº‘é‡Œé›¾é‡Œï¼Œç¥­å‡º QMUI è®©å¤§å®¶æ„Ÿå—ä¸€ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Pod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;             &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;QMUIKit&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;version&lt;/span&gt;          &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;4.2.1&quot;&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subspec&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'QMUICore'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ss&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ss&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;source_files&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'QMUIKit/QMUIKit.h'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'QMUIKit/QMUICore'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'QMUIKit/UIKitExtensions'&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ss&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dependency&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'QMUIKit/QMUIWeakObjectContainer'&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ss&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dependency&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'QMUIKit/QMUILog'&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subspec&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'QMUIWeakObjectContainer'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ss&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ss&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;source_files&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'QMUIKit/QMUIComponents/QMUIWeakObjectContainer.{h,m}'&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subspec&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'QMUILog'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ss&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ss&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;source_files&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'QMUIKit/QMUIComponents/QMUILog/*.{h,m}'&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subspec&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'QMUIComponents'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ss&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ss&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dependency&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'QMUIKit/QMUICore'&lt;/span&gt;
     
    &lt;span class=&quot;n&quot;&gt;ss&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subspec&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'QMUIButton'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sss&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;sss&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;source_files&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'QMUIKit/QMUIComponents/QMUIButton/QMUIButton.{h,m}'&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# æ­¤å¤„çœç•¥ 59 ä¸ª Components&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä¸å¹ä¸é»‘ï¼ŒQMUI æ˜¯ç¬”è€…è§è¿‡å›½å†…å¼€æºä½œå“ä¸­ä»£ç æ³¨é‡Šéå¸¸è¯¦å°½ä¸”æä¾›å®Œæ•´ Demo çš„é¡¹ç›®ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ•´ä¸ª QMUIKit çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Spec&lt;/code&gt; æ–‡ä»¶ä¸­ï¼Œæ€»å…±å®šä¹‰äº† &lt;strong&gt;64&lt;/strong&gt; ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;subspec&lt;/code&gt; å­æ¨¡å—ï¼ŒåŒæ—¶è¿™äº›å­æ¨¡å—ä¹‹é—´è¿˜åšäº†åˆ†å±‚ã€‚æ¯”å¦‚ QMUICoreï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1602123383555-32462e33-aaf5-4004-899f-cfd384e1e04e.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¦å¤–è¡¥å……ä¸€ç‚¹ï¼ŒCocoaPods æ”¯æŒäº†ä¸åŒç±»å‹çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SubSpec&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# lib/cocoapods-core/specification/dsl/attribute_support.rb&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;SUPPORTED_SPEC_TYPES&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;freeze&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:app&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:test&lt;/code&gt; ç”¨äºåœ¨é¡¹ç›®ä¸­é›†æˆå•å…ƒæµ‹è¯•ä»£ç çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Subspec&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;podspec-from-json&quot;&gt;Podspec From JSON&lt;/h2&gt;

&lt;p&gt;æœ‰äº†ä¸Šæ–‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; çš„äº†è§£ï¼Œè¿™æ¬¡æˆ‘ä»¬å¯¹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt; çš„æ–‡ä»¶åŠ è½½ä¼šæ›´åŠ è½»è½¦ç†Ÿè·¯ã€‚é¦–å…ˆæ˜¯ç”± &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#from_file&lt;/code&gt; æ–¹æ³•è¿›è¡Œæ–‡ä»¶è·¯å¾„å’Œå†…å®¹ç¼–ç æ ¼å¼çš„æ£€æŸ¥ï¼Œå°†åŠ è½½çš„å†…å®¹è½¬å…¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#from_string&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;from_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subspec_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Pathname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exist?&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Informative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;No Podspec exists at path `&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`.&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'r:utf-8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# Work around for Rubinius incomplete encoding in 1.9 mode&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;respond_to?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:encoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;encoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'UTF-8'&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;encode!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'UTF-8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;from_string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subspec_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;from_string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec_contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subspec_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Pathname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;expand_path&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;extname&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'.podspec'&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;chdir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;directory?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;parent&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Pod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;_eval_Podspec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec_contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;is_a?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Specification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Informative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Invalid Podspec file at path `&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`.&quot;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'.json'&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Specification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;from_json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec_contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Informative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Unsupported specification format `&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;extname&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;` for spec at `&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`.&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;defined_in_file&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subspec_by_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subspec_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ¥ç€æ ¹æ®æ–‡ä»¶ç±»å‹ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.podspec&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.json&lt;/code&gt; åˆ†åˆ«é‡‡ç”¨ä¸åŒçš„è§£ææ–¹å¼ã€‚åœ¨ Â &lt;strong&gt;JSONSupport&lt;/strong&gt; æ¨¡å—å†…å°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#from_json&lt;/code&gt; çš„é€»è¾‘æ‹†æˆäº†ä¸¤éƒ¨åˆ†ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# `lib/cocoapods-core/specification/json.rb`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Pod&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Specification&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;JSONSupport&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# â‘ &lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;from_json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'json'&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;from_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# â‘¡&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;from_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;test_specification: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;app_specification: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;attributes_hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dup&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test_specification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:app_specification&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app_specification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;subspecs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;attributes_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'subspecs'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;testspecs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;attributes_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'testspecs'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;appspecs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;attributes_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'appspecs'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  
      &lt;span class=&quot;c1&quot;&gt;## backwards compatibility with 1.3.0&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;test_specification&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;attributes_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'test_type'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;nil?&lt;/span&gt;
  
      &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;attributes_hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;attributes_hash&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subspecs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;concat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subspecs_from_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subspecs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subspecs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;concat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subspecs_from_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testspecs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subspecs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;concat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subspecs_from_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;appspecs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
  
      &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# â‘¢&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subspecs_from_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subspecs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test_specification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app_specification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subspecs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;nil?&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;subspecs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;Specification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;from_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                &lt;span class=&quot;ss&quot;&gt;:test_specification&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test_specification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                &lt;span class=&quot;ss&quot;&gt;:app_specification&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app_specification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™é‡Œçš„é€»è¾‘ä¹Ÿæ˜¯æ¯”è¾ƒç®€å•ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;â‘  å°†ä¼ å…¥çš„å­—ç¬¦ä¸²è½¬æ¢ä¸º jsonï¼›&lt;/li&gt;
  &lt;li&gt;â‘¡ å°†è½¬æ¢åçš„ json è½¬æ¢ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Spec&lt;/code&gt; å¯¹è±¡å¹¶å°† json è½¬æ¢ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;attributes_hash&lt;/code&gt;ï¼ŒåŒæ—¶è§¦å‘ â‘¢ï¼›&lt;/li&gt;
  &lt;li&gt;â‘¢ é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;self.subspecs_from_hash&lt;/code&gt; å®ç°é€’å½’è°ƒç”¨å®Œæˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;subspecs&lt;/code&gt; è§£æï¼›&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;Tips: æ–¹æ³• â‘¡ é‡Œçš„ &lt;strong&gt;Spec&lt;/strong&gt; æ˜¯å¯¹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Specification&lt;/code&gt; çš„åˆ«åã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1602123399989-8bef8979-4f1d-4ab5-984a-95f57e384a91.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;podspec-from-ruby&quot;&gt;Podspec From Ruby&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;QMUIKit.podspec&lt;/code&gt; çš„æ–‡ä»¶å†…å®¹ï¼Œå¤§å®¶æ˜¯å¦æ³¨æ„åˆ°å…¶å¼€å¤´çš„å£°æ˜ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Pod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;             &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;QMUIKit&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;source_files&lt;/span&gt;     &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'QMUIKit/QMUIKit.h'&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å‘ç°æ²¡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.podspec&lt;/code&gt; æ–‡ä»¶å°±æ˜¯&lt;strong&gt;ç®€å•ç›´æ¥åœ°å£°æ˜äº†ä¸€ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Specifiction&lt;/code&gt; å¯¹è±¡&lt;/strong&gt;ï¼Œç„¶åé€šè¿‡ block å—å®šåˆ¶æ¥å®Œæˆé…ç½®ã€‚åƒ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;name&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;source_files&lt;/code&gt; è¿™äº›é…ç½®å‚æ•°æœ€ç»ˆéƒ½ä¼šè½¬æ¢ä¸ºæ–¹æ³•è°ƒç”¨å¹¶å°†å€¼å­˜å…¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;attributes_hash&lt;/code&gt; ä¸­ã€‚è¿™äº›æ–¹æ³•è°ƒç”¨çš„å®ç°æ–¹å¼åˆ†ä¸¤ç§ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;å¤§éƒ¨åˆ†é…ç½®æ˜¯é€šè¿‡æ–¹æ³•åŒ…è£…å™¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;attribute&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;root_attribute&lt;/code&gt; æ¥åŠ¨æ€æ·»åŠ çš„ setter æ–¹æ³•ï¼›&lt;/li&gt;
  &lt;li&gt;å¯¹äºå¤æ‚é€»è¾‘çš„é…ç½®åˆ™ç›´æ¥æ–¹æ³•å£°æ˜ï¼Œå¦‚ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;subspec&lt;/code&gt; ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dependency&lt;/code&gt; æ–¹æ³•ç­‰ï¼ˆåç»­ä»‹ç»)ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;attribute-wrappter&quot;&gt;attribute wrappter&lt;/h3&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# `lib/cocoapods-core/specification/dsl.rb`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Pod&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Specification&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;DSL&lt;/span&gt;
      &lt;span class=&quot;kp&quot;&gt;extend&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Pod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Specification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;DSL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;AttributeSupport&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;# Deprecations must be required after include AttributeSupport&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/specification/dsl/deprecations'&lt;/span&gt;

      &lt;span class=&quot;n&quot;&gt;attribute&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;ss&quot;&gt;:required&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;ss&quot;&gt;:inherited&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;ss&quot;&gt;:multi_platform&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;

      &lt;span class=&quot;n&quot;&gt;root_attribute&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                      &lt;span class=&quot;ss&quot;&gt;:required&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¯ä»¥çœ‹å‡º name å’Œ version çš„æ–¹æ³•å£°æ˜ä¸æ™®é€šçš„ä¸å¤ªä¸€æ ·ï¼Œå…¶å® &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;attribute&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;root_attribute&lt;/code&gt; æ˜¯é€šè¿‡ Ruby çš„æ–¹æ³•åŒ…è£…å™¨æ¥å®ç°çš„ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦çœ‹è¿™é‡Œ ã€Œ&lt;a href=&quot;https://github.com/mxchenxiaodong/haha_day/issues/3#&quot;&gt;Pythonè£…é¥°å™¨ ä¸ Rubyå®ç°&lt;/a&gt;ã€ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Tips: Ruby åŸç”Ÿæä¾›çš„å±æ€§è®¿é—®å™¨ â€” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;attr_accessor&lt;/code&gt; å¤§å®¶åº”è¯¥ä¸é™Œç”Ÿï¼Œå°±æ˜¯é€šè¿‡åŒ…è£…å™¨å®ç°çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è¿™äº›&lt;strong&gt;è£…é¥°å™¨æ‰€å£°æ˜çš„æ–¹æ³•ä¼šåœ¨å…¶æ¨¡å—è¢«åŠ è½½æ—¶åŠ¨æ€ç”Ÿæˆ&lt;/strong&gt;ï¼Œæ¥çœ‹å…¶å®ç°ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# `lib/cocoapods-core/specification/attribute_support.rb`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Pod&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Specification&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;DSL&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;attr_reader&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:attributes&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;AttributeSupport&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;root_attribute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{})&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:root_only&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:multi_platform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;store_attribute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;attribute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{})&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;store_attribute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;store_attribute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;kp&quot;&gt;attr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Attribute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;vi&quot;&gt;@attributes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
          &lt;span class=&quot;vi&quot;&gt;@attributes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;attr&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;attribute&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;root_attribute&lt;/code&gt; æœ€ç»ˆéƒ½èµ°åˆ°äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;store_attribute&lt;/code&gt; ä¿å­˜åœ¨åˆ›å»ºçš„ Attribute å¯¹è±¡å†…ï¼Œå¹¶ä»¥é…ç½®çš„ Symbol åç§°ä½œä¸º KEY å­˜å…¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@attributes&lt;/code&gt;ï¼Œç”¨äºç”Ÿæˆæœ€ç»ˆçš„ attributes setter æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;æœ€å…³é”®çš„ä¸€æ­¥ï¼Œè®©æˆ‘ä»¬å›åˆ° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;specification&lt;/code&gt; æ–‡ä»¶ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# `/lib/coocapods-core/specification`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Pod&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Specification&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;store_attribute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;platform_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Specification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;convert_keys_to_string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;is_a?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;strip_heredoc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;strip&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;respond_to?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:strip_heredoc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;platform_name&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;platform_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;platform_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;attributes_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;platform_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;attributes_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;platform_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;attributes_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;DSL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;attributes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;define_method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writer_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;store_attribute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writer_singular_form&lt;/span&gt;
        &lt;span class=&quot;kp&quot;&gt;alias_method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writer_singular_form&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;writer_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Specification&lt;/code&gt; ç±»è¢«åŠ è½½æ—¶ï¼Œä¼šå…ˆéå† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DSL&lt;/code&gt; module åŠ è½½åæ‰€ä¿å­˜çš„ attributesï¼Œå†é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;define_method&lt;/code&gt; åŠ¨æ€ç”Ÿæˆå¯¹åº”çš„é…ç½®æ–¹æ³•ã€‚æœ€ç»ˆæ•°æ®è¿˜æ˜¯ä¿å­˜åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;attributes_hash&lt;/code&gt; ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1602123416825-7fdc4274-d87a-45d0-9d04-4eeeb063c81c.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;attribute&quot;&gt;Attribute&lt;/h3&gt;

&lt;p&gt;Attribute æ˜¯ä¸ºäº†è®°å½•è¯¥é…ç½®çš„ç›¸å…³ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼Œè®°å½• &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Spec&lt;/code&gt; æ˜¯å¦ä¸ºæ ¹èŠ‚ç‚¹ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Spec&lt;/code&gt; ç±»å‹ã€æ‰€æ”¯æŒçš„ platformsã€èµ„æºåœ°å€é€šé…ç¬¦ç­‰ã€‚&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ä»¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;root_attribute&lt;/code&gt; åŒ…è£…çš„é…ç½®ä»…ç”¨äºä¿®é¥° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Spec&lt;/code&gt; æ ¹èŠ‚ç‚¹ï¼Œæ¯”å¦‚ç‰ˆæœ¬å· &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;version&lt;/code&gt; åªèƒ½ç”± &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Spec&lt;/code&gt; æ ¹èŠ‚ç‚¹æ¥è®¾ç½®ï¼Œå¦å¤–è¿˜æœ‰ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;source&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;static_framework&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module_name&lt;/code&gt; ç­‰ï¼›&lt;/li&gt;
  &lt;li&gt;ä»¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;attribute&lt;/code&gt; åŒ…è£…çš„é…ç½®åˆ™ä¸é™æ˜¯å¦ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Spec&lt;/code&gt; æ ¹ç»“ç‚¹ã€‚æˆ‘ä»¬ä»¥ AFNetworking çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;source_files&lt;/code&gt; ä¸ºä¾‹ï¼šç”±äºåœ¨ macOS å’Œ watchOS ä¸Šå¹¶æ²¡æœ‰ UIKit framworkï¼Œå› æ­¤å®ƒå•ç‹¬å°† UIKit çš„ç›¸å…³åŠŸèƒ½æ‹†åˆ†åˆ°äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AFNetworking/UIKit&lt;/code&gt; ä¸­ï¼›&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Pod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subspec&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'NSURLSession'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ss&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
	 &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subspec&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'UIKit'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ss&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ss&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ios&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;deployment_target&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'9.0'&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ss&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tvos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;deployment_target&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'9.0'&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ss&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dependency&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'AFNetworking/NSURLSession'&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;ss&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;source_files&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'UIKit+AFNetworking'&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;subspec&quot;&gt;#subspec&lt;/h3&gt;

&lt;p&gt;é™¤äº† attribute è£…é¥°å™¨å£°æ˜çš„ setter æ–¹æ³•ï¼Œè¿˜æœ‰å‡ ä¸ªè‡ªå®šä¹‰çš„æ–¹æ³•æ˜¯ç›´æ¥é€šè¿‡ eval è°ƒç”¨çš„ã€‚&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;subspec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;subspec&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Specification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@subspecs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subspec&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;subspec&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test_spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Tests'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;subspec&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Specification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@subspecs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subspec&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;subspec&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;app_spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'App'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;appspec&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Specification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:app_specification&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@subspecs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;appspec&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;appspec&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™ä¸‰ç§ä¸åŒç±»å‹çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Subspec&lt;/code&gt; ç» &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval&lt;/code&gt; è½¬æ¢ä¸ºå¯¹åº”çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Specification&lt;/code&gt; å¯¹è±¡ï¼Œæ³¨æ„è¿™é‡Œåˆå§‹åŒ–åéƒ½å°† parent èŠ‚ç‚¹æŒ‡å‘ &lt;strong&gt;self&lt;/strong&gt; åŒæ—¶å­˜å…¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@subspecs&lt;/code&gt; æ•°ç»„ä¸­ï¼Œå®Œæˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SubSpec&lt;/code&gt; ä¾èµ–é“¾çš„æ„é€ ã€‚&lt;/p&gt;

&lt;h3 id=&quot;dependency&quot;&gt;#dependency&lt;/h3&gt;

&lt;p&gt;å¯¹äºå…¶ä»– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod&lt;/code&gt; ä¾èµ–çš„æ·»åŠ æˆ‘ä»¬é€šè¿‡ dependency æ–¹æ³•æ¥å®ç°ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dependency&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version_requirements&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# dependency args æœ‰æ•ˆæ€§æ ¡éªŒ ...&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;attributes_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'dependencies'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;attributes_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'dependencies'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version_requirements&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;whitelisted_configurations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;nil?&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# configuration ç™½åå•è¿‡æ»¤å’Œæ ¡éªŒ ...&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;attributes_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'configuration_pod_whitelist'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;attributes_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'configuration_pod_whitelist'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;whitelisted_configurations&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;dependency æ–¹æ³•å†…éƒ¨ä¸»è¦æ˜¯å¯¹ä¾èµ–æœ‰æ•ˆæ€§çš„æ ¡éªŒï¼Œé™äºç¯‡å¹…è¿™é‡Œä¸åˆ—å‡ºå®ç°ï¼Œæ ¸å¿ƒè¦ç‚¹å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;æ£€æŸ¥ä¾èµ–å¾ªç¯&lt;/strong&gt;ï¼Œæ ¹æ® &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Spec&lt;/code&gt; åç§°åˆ¤æ–­ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Spec&lt;/code&gt; ä¸è‡ªèº«ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Spec&lt;/code&gt; ä¸&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SubSpec&lt;/code&gt;ä¹‹é—´æ˜¯å¦å­˜åœ¨å¾ªç¯ä¾èµ–ï¼›&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;æ£€æŸ¥ä¾èµ–æ¥æº&lt;/strong&gt;ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt; ä¸­ä¸æ”¯æŒ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:git&lt;/code&gt; æˆ– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:path&lt;/code&gt; å½¢å¼çš„æ¥æºæŒ‡å®šï¼Œå¦‚éœ€è®¾å®šå¯é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; æ¥ä¿®æ”¹;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;æ£€æŸ¥ configuation ç™½åå•&lt;/strong&gt;ï¼Œç›®å‰ä»…æ”¯æŒ Xcode é»˜è®¤çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Debug&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Release&lt;/code&gt; çš„ configuration é…ç½®ï¼›&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;åˆ›å»ºå¹¶ä½¿ç”¨ä½ çš„-pod&quot;&gt;åˆ›å»ºå¹¶ä½¿ç”¨ä½ çš„ Pod&lt;/h1&gt;

&lt;p&gt;æœ€åä¸€èŠ‚æ¥ä¸¤ä¸ªå®è·µï¼šåˆ›å»º Pod ä»¥åŠåœ¨é¡¹ç›®ä¸­ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SubSpecs&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;pod-åˆ›å»º&quot;&gt;Pod åˆ›å»º&lt;/h2&gt;

&lt;p&gt;pod ç›¸å…³ä½¿ç”¨å®˜æ–¹éƒ½æä¾›äº†å¾ˆè¯¦å°½çš„éƒ½æ–‡æ¡£ï¼Œæœ¬å°èŠ‚ä»…åšä»‹ç»ã€‚&lt;/p&gt;

&lt;h3 id=&quot;1-åˆ›å»º-pod&quot;&gt;1. åˆ›å»º Pod&lt;/h3&gt;

&lt;p&gt;ä»…éœ€ä¸€è¡Œå‘½ä»¤å®Œæˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod&lt;/code&gt; åˆ›å»ºï¼ˆ&lt;a href=&quot;https://guides.cocoapods.org/making/using-pod-lib-create.html&quot;&gt;æ–‡æ¡£&lt;/a&gt;ï¼‰ï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;pod lib create &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;NAME&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¹‹åæ¯ä¸€æ­¥éƒ½ä¼šè¾“å‡ºå‹å¥½æç¤ºï¼ŒæŒ‰ç…§æç¤ºé€‰æ‹©å³å¯ã€‚åœ¨æ·»åŠ å®Œ source code å’Œ dependency ä¹‹åï¼Œä½ è¿˜å¯ä»¥åœ¨ CocoaPods ä¸ºä½ æä¾›çš„ Example é¡¹ç›®ä¸­è¿è¡Œå’Œè°ƒè¯•ä»£ç ã€‚&lt;/p&gt;

&lt;p&gt;å‡†å¤‡å°±ç»ªåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ ¡éªŒï¼Œæ£€æŸ¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod&lt;/code&gt; æ­£ç¡®æ€§ï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;pod lib lint &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Podspec_PATHS ...]&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;2-å‘å¸ƒ-pod&quot;&gt;2. å‘å¸ƒ Pod&lt;/h3&gt;

&lt;p&gt;æ ¡éªŒé€šè¿‡åå°±å¯ä»¥å°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod&lt;/code&gt; å‘å¸ƒäº†ï¼Œä½ å¯ä»¥å°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PodSepc&lt;/code&gt; å‘å¸ƒåˆ° Â Master Repo ä¸Šï¼Œæˆ–è€…å‘å¸ƒåˆ°å†…éƒ¨çš„ Spec Repo ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;CocoaPods Master Repo&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœå‘å¸ƒçš„ CocoaPods çš„ä¸»ä»“åº“ï¼Œé‚£ä¹ˆéœ€è¦é€šè¿‡ CocoaPods æä¾›çš„ &lt;strong&gt;Trunk&lt;/strong&gt; å‘½ä»¤ï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;pod trunk push &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;NAME.podspec]&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸è¿‡ä½¿ç”¨å‰éœ€è¦å…ˆé€šè¿‡é‚®ç®±æ³¨å†Œï¼Œè¯¦æƒ…æŸ¥çœ‹&lt;a href=&quot;https://guides.cocoapods.org/making/getting-setup-with-trunk.html&quot;&gt;æ–‡æ¡£&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Private Spec Repo&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å¯¹äºå‘å¸ƒåˆ°ç§æœ‰ä»“åº“çš„ï¼Œå¯é€šè¿‡ CocoaPods æä¾›çš„ &lt;strong&gt;Repo&lt;/strong&gt; å‘½ä»¤ï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;pod repo push &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;REPO_NAME&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;SPEC_NAME.podspec&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ–‡æ¡£è¯¦æƒ… â€” &lt;a href=&quot;https://guides.cocoapods.org/making/private-cocoapods.html&quot;&gt;ä¼ é€é—¨&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;subspecs-in-podfile&quot;&gt;SubSpecs In Podfile&lt;/h2&gt;

&lt;p&gt;åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SubSpec&lt;/code&gt; ä¸€èŠ‚æåˆ°è¿‡ï¼Œåœ¨ CocoaPods ä¸­ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SubSpec&lt;/code&gt; æ˜¯è¢«ä½œä¸ºå•ç‹¬çš„ä¾èµ–æ¥çœ‹å¾…çš„ï¼Œè¿™é‡Œå°±å€Ÿè¿™ä¸ªå®æ“æ¥è¯æ˜ä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ä¸Šæ–‡çš„å®è·µä¸­ï¼Œæˆ‘ä»¬çŸ¥é“æ¯ä¸€ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod&lt;/code&gt; åº“å¯¹åº”ä¸º Xcode é¡¹ç›®ä¸­çš„ä¸€ä¸ªä¸ª targetï¼Œé‚£ä¹ˆå½“æ˜ç¡®æŒ‡å®šéƒ¨åˆ† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SubSpec&lt;/code&gt; æ—¶ï¼Œå®ƒä»¬ä¹Ÿå°†è¢«ä½œä¸ºç‹¬ç«‹çš„ target è¿›è¡Œç¼–è¯‘ã€‚ä¸è¿‡è¿™é‡Œéœ€è¦æ˜ç¡®ä¸€ä¸‹ä½¿ç”¨åœºæ™¯ï¼š&lt;/p&gt;

&lt;h3 id=&quot;1-single-target&quot;&gt;1. Single Target&lt;/h3&gt;

&lt;p&gt;å½“ä¸»é¡¹ç›®ä¸­ä»…æœ‰ä¸€ä¸ª target æˆ–å¤šä¸ª target å¼•ç”¨äº†åŒä¸€ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod&lt;/code&gt; åº“çš„å¤šä¸ªä¸åŒ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SubSpec&lt;/code&gt; æ—¶ï¼Œç”Ÿæˆçš„ target åªä¼šæœ‰ä¸€ä¸ªã€‚æˆ‘ä»¬ä»¥ QMUIKit ä¸ºä¾‹ï¼Œé¡¹ç›® Demo.project ä¸‹çš„ Podfile é…ç½®å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Demo'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'QMUIKit/QMUIComponents/QMUILabel'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'../QMUI_iOS'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'QMUIKit/QMUIComponents/QMUIButton'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'../QMUI_iOS'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1602123432109-ac15c4c8-89fd-4547-bbd0-704681fa8d77.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ­¤æ—¶ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods.project&lt;/code&gt; ä¸‹çš„ QMUIKit çš„ target åç§°ä¸º &lt;strong&gt;QMUIKit&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;2-multiple-target&quot;&gt;2. Multiple Target&lt;/h3&gt;

&lt;p&gt;å¦‚æœæˆ‘ä»¬çš„ä¸»é¡¹ç›®ä¸­å­˜åœ¨å¤šä¸ª target ä¸”ä½¿ç”¨åŒä¸€ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod&lt;/code&gt; åº“çš„ä¸åŒ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SubSpec&lt;/code&gt; æ—¶ï¼Œç»“æœåˆ™æœ‰æ‰€ä¸åŒã€‚&lt;/p&gt;

&lt;p&gt;ç°åœ¨æˆ‘ä»¬åœ¨æ­¥éª¤ 1 çš„åŸºç¡€ä¸Šæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Demo2'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'QMUIKit/QMUIComponents/QMUILog'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'../QMUI_iOS'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1602123439862-d2a9f0e9-7177-4714-8914-364c5c77e18a.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¯ä»¥å‘ç°ï¼ŒCocoaPods ä¸ºæ¯ä¸ª tareget å¯¹åº”çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SubSpec&lt;/code&gt; ä¾èµ–ç”Ÿæˆäº†ä¸åŒçš„ QMUIKit targetsã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Tips: å½“ä¸»å·¥ç¨‹ target ä¾èµ–çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Subspec&lt;/code&gt; æ•°é‡è¿‡å¤šå¯¼è‡´çš„åç§°è¶…è¿‡ 50 ä¸ªå­—ç¬¦ï¼Œå°†ä¼šå¯¹ subspec åç¼€åšæ‘˜è¦å¤„ç†ä½œä¸ºå”¯ä¸€æ ‡è¯†ç¬¦ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h1&gt;

&lt;p&gt;æœ¬æ–‡æ˜¯ CocoaPods-Core çš„ç¬¬äºŒç¯‡ï¼Œé‡ç‚¹ä»‹ç»äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt; çš„ç±»æ„æˆå’Œè§£æå®ç°ï¼Œæ€»ç»“å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;åˆæ¢ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt; è®©æˆ‘ä»¬å¯¹å…¶èƒ½åŠ›è¾¹ç•Œå’Œé…ç½®åˆ†ç±»æœ‰äº†æ›´å¥½çš„äº†è§£ï¼›&lt;/li&gt;
  &lt;li&gt;æ·±å…¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt; æˆ‘ä»¬å‘ç°å…¶æ•°æ®ç»“æ„åŒ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; ç±»ä¼¼ï¼Œéƒ½æ˜¯æ ¹æ®ä¾èµ–å…³ç³»å»ºç«‹å¯¹åº”çš„æ ‘ç»“æ„ï¼›&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt; é’ˆå¯¹å•ä¸ªåº“çš„æºç å’Œèµ„æºæä¾›äº†æ›´ç²¾ç»†åŒ–çš„ç®¡ç†ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SubSpec&lt;/code&gt; ç»“æ„çš„æ¨å‡ºè®©å¤§å‹ library çš„å†…éƒ¨åˆ†å±‚æä¾›äº†å¾ˆå¥½çš„å·¥å…·ï¼›&lt;/li&gt;
  &lt;li&gt;è£…é¥°å™¨æ¨¡å¼ç»“åˆ Ruby çš„åŠ¨æ€ç‰¹æ€§ï¼Œè®© &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt; çš„ DSL ç‰¹æ€§çš„å®ç°èµ·æ¥æ›´åŠ ä¼˜é›…ï¼›&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†&quot;&gt;çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†&lt;/h1&gt;

&lt;p&gt;è¿™é‡Œç½—åˆ—äº†å››ä¸ªé—®é¢˜ç”¨æ¥è€ƒå¯Ÿä½ æ˜¯å¦å·²ç»æŒæ¡äº†è¿™ç¯‡æ–‡ç« ï¼Œå¦‚æœæ²¡æœ‰å»ºè®®ä½ åŠ å…¥**æ”¶è— **å†æ¬¡é˜…è¯»ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;è¯´è¯´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt; æ‰€æ”¯æŒçš„é…ç½®æœ‰å‡ ç±»ï¼Œåˆ†åˆ«å…·æœ‰å“ªäº›åŠŸèƒ½ ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt; ä¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SubSpec&lt;/code&gt; ä¹‹é—´æœ‰å“ªäº›å…³ç³» ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;è¯´è¯´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SubSpec&lt;/code&gt; çš„ç‰¹ç‚¹ä»¥åŠä½œç”¨ ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;è°ˆè°ˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt; ä¸­çš„ DSL è§£æä¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; çš„è§£æå®ç°æœ‰å“ªäº›åŒºåˆ« ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;</content><author><name>å†¬ç“œ</name><email>gua@desgard.com</email></author><category term="CocoaPods å†é™©è®°" /><category term="Ruby" /><summary type="html">å¼•å­ åœ¨ä¸Šæ–‡ Podfile è§£æé€»è¾‘ ä¸­ï¼ˆå»ºè®®å…ˆé˜…è¯»è¿™ç¯‡æ–‡ç« ï¼‰ï¼Œæˆ‘ä»¬ä»¥ Xcode å·¥ç¨‹ç»“æ„ä½œä¸ºåˆ‡å…¥ç‚¹ä»‹ç»äº† Podfile èƒŒåå¯¹åº”çš„æ•°æ®ç»“æ„ï¼Œå‰–æäº† Podfile æ–‡ä»¶æ˜¯å¦‚ä½•è§£æä¸åŠ è½½ï¼Œå¹¶æœ€ç»ˆ â€œå…¥ä¾µâ€ é¡¹ç›®å½±å“å…¶å·¥ç¨‹ç»“æ„çš„ã€‚ä»Šå¤©æˆ‘ä»¬æ¥èŠä¸€èŠ CocoaPods-Core ä¸­çš„å¦ä¸€ä¸ªé‡è¦æ–‡ä»¶ â€” Podspec ä»¥åŠå®ƒæ‰€æ’‘èµ·çš„ CocoaPods ä¸–ç•Œã€‚ ä¸€ä¸ª Pod çš„åˆ›å»ºå’Œå‘å¸ƒç¦»ä¸å¼€ .podspec æ–‡ä»¶ï¼Œå®ƒå¯ä»¥å¾ˆç®€å•ä¹Ÿèƒ½å¤æ‚ï¼Œå¦‚ QMUIKitï¼ˆåç»­ä»‹ç»)ã€‚ ä»Šå¤©æˆ‘ä»¬å°±ç›´å¥”ä¸»é¢˜ï¼Œæ¥åˆ†æ Podspec æ–‡ä»¶ã€‚ Podspec Podspec æ˜¯ç”¨äº æè¿°ä¸€ä¸ª Pod åº“çš„æºä»£ç å’Œèµ„æºå°†å¦‚ä½•è¢«æ‰“åŒ…ç¼–è¯‘æˆé“¾æ¥åº“æˆ– framework çš„æ–‡ä»¶ ï¼Œè€Œ Podspec ä¸­çš„è¿™äº›æè¿°å†…å®¹æœ€ç»ˆå°†æ˜ ä¼šæ˜ å°„åˆ° Specification ç±»ä¸­ï¼ˆä»¥ä¸‹ç®€ç§° Specï¼‰ã€‚ ç°åœ¨è®©æˆ‘ä»¬æ¥é‡æ–°è®¤è¯† Podspecã€‚ Podspec åˆæ¢ Podspec æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ä¸º .podspec å’Œ .json ä¸¤ç§ï¼Œè€Œ .podspec æœ¬è´¨æ˜¯ Ruby æ–‡ä»¶ã€‚ é—®é¢˜æ¥äº†ï¼Œä¸ºä»€ä¹ˆæ˜¯ JSON æ ¼å¼è€Œä¸åƒ Podfile ä¸€æ ·æ”¯æŒ YAML å‘¢ï¼Ÿ ç¬”è€…çš„ç†è§£ï¼šç”±äº Podspec æ–‡ä»¶ä¼šæ»¡ä¸–ç•Œè·‘ï¼Œå®ƒå¯èƒ½å­˜åœ¨äº CocoaPods çš„ CDN Serviceã€Speces Repo æˆ–è€…ä½ ä»¬çš„ç§æœ‰ Specs Repo ä¸Šï¼Œå› æ­¤é‡‡ç”¨ Â JSON çš„æ–‡ä»¶åœ¨ç½‘ç»œä¼ è¾“ä¸­ä¼šæ›´å‹å¥½ã€‚è€Œ Podfile æ›´å¤šçš„åœºæ™¯æ˜¯ç”¨äºåºåˆ—åŒ–ï¼Œå®ƒéœ€è¦åœ¨é¡¹ç›®ä¸­ç”Ÿæˆä¸€ä»½ç»ä¾èµ–ä»²è£åçš„ Podfile å¿«ç…§ï¼Œç”¨äºåç»­çš„å¯¹æ¯”ã€‚ Podspec Pod::Spec.new do |spec| spec.name = 'Reachability' spec.version = '3.1.0' spec.license = { :type =&amp;gt; 'BSD' } spec.homepage = 'https://github.com/tonymillion/Reachability' spec.authors = { 'Tony Million' =&amp;gt; 'tonymillion@gmail.com' } spec.summary = 'ARC and GCD Compatible Reachability Class for iOS and OS X.' spec.source = { :git =&amp;gt; 'https://github.com/tonymillion/Reachability.git', :tag =&amp;gt; &quot;v#{spec.version}&quot; } spec.source_files = 'Reachability.{h,m}' spec.framework = 'SystemConfiguration' end ä¸Šé¢è¿™ä»½ Reachability.podspec é…ç½®ï¼ŒåŸºæœ¬é€šè¿‡å‘½ä»¤è¡Œ pod lib create NAME å°±èƒ½å¸®æˆ‘ä»¬å®Œæˆã€‚é™¤æ­¤ä¹‹å¤–æˆ‘ä»¬èƒ½åšçš„æ›´å¤šï¼Œæ¯”å¦‚ï¼Œé»˜è®¤æƒ…å†µä¸‹ CococaPods ä¼šä¸ºæ¯ä¸ª Pod framework ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„ modulemap æ–‡ä»¶ï¼Œå®ƒå°†åŒ…å« Podspec ä¸­æŒ‡å®šçš„å…¬å…± headersã€‚å¦‚æœéœ€è¦è‡ªå®šä¹‰å¼•å…¥çš„ header æ–‡ä»¶ï¼Œä»…éœ€é…ç½® moduel_map å³å¯å®Œæˆã€‚ ä¸‹é¢æ˜¯è¿›é˜¶ç‰ˆé…ç½®ï¼š Pod::Spec.new do |spec| spec.name = 'Reachability' # çœç•¥ä¸å‰é¢ç›¸åŒéƒ¨åˆ†çš„é…ç½® ... spec.module_name = 'Rich' spec.swift_version = '4.0' spec.ios.deployment_target = '9.0' spec.osx.deployment_target = '10.10' spec.source_files = 'Reachability/common/*.swift' spec.ios.source_files = 'Reachability/ios/*.swift', 'Reachability/extensions/*.swift' spec.osx.source_files = 'Reachability/osx/*.swift' spec.framework = 'SystemConfiguration' spec.ios.framework = 'UIKit' spec.osx.framework = 'AppKit' spec.dependency 'SomeOtherPod' end åƒ ğŸ‘† æˆ‘ä»¬ä¸ºä¸åŒçš„ç³»ç»ŸæŒ‡å®šäº†ä¸åŒçš„æºç å’Œä¾èµ–ç­‰ï¼Œå½“ç„¶å¯é…ç½®çš„ä¸åªè¿™äº›ã€‚ Podspec æ”¯æŒçš„å®Œæ•´é…ç½®åˆ†ç±»å¦‚ä¸‹ï¼š æƒ³äº†è§£æ›´å¤šçš„é…ç½®é€‰é¡¹ï¼šä¼ é€é—¨ã€‚ Convention Over Configuration è¯´åˆ°é…ç½®ï¼Œä¸å¾—ä¸æä¸€ä¸‹ CoC çº¦å®šå¤§äºé…ç½®ã€‚çº¦å®šå¤§äºé…ç½®ç®—æ˜¯åœ¨è½¯ä»¶å·¥ç¨‹è¾ƒæ—©å‡ºç°çš„æ¦‚å¿µçš„äº†ï¼Œå¤§æ„æ˜¯ï¼šä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬çš„ä»£ç éœ€è¦æŒ‰ç…§ä¸€å®šçš„çº¦å®šæ¥ç¼–å†™ï¼ˆå¦‚ä»£ç æ”¾åœ¨ä»€ä¹ˆç›®å½•ï¼Œç”¨ä»€ä¹ˆæ–‡ä»¶åï¼Œç”¨ä»€ä¹ˆç±»åç­‰)ã€‚ è¿™æ ·æ—¢ç®€åŒ–äº†é…ç½®æ–‡ä»¶ï¼ŒåŒæ—¶ä¹Ÿé™ä½äº†å­¦ä¹ æˆæœ¬ã€‚ çº¦å®šå¤§äºé…ç½®å¯ä»¥è¯´æ˜¯é€šè¿‡ Ruby on Rails å‘æ‰¬å…‰å¤§çš„ã€‚å°½ç®¡å®ƒä¸€ç›´é¥±å—äº‰è®®ï¼Œä½†æ˜¯ä¸»æµè¯­è¨€çš„ä¾èµ–ç®¡ç†å·¥å…·ï¼Œå¦‚ Mavenã€npm ç­‰éƒ½éµå¾ª CoC è¿›è¡Œä¸æ–­æ¼”è¿›çš„ï¼Œå› ä¸º CoC èƒ½å¤Ÿæœ‰æ•ˆå¸®åŠ©å¼€å‘è€…å‡è½»é€‰æ‹©çš„ç—›æ„Ÿï¼Œå‡å°‘æ— æ„ä¹‰çš„é€‰æ‹©ã€‚ä¸€äº›æ–°çš„è¯­è¨€ä¹Ÿå¸æ”¶äº†è¿™ä¸ªæ€æƒ³ï¼Œæ¯”å¦‚ Go è¯­è¨€ã€‚å¦‚æœç”¨ C/C++ å¯èƒ½éœ€è¦å®šä¹‰å¤æ‚çš„ Makefile æ¥å®šä¹‰ç¼–è¯‘çš„è§„åˆ™ï¼Œä»¥åŠå¦‚ä½•è¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œè€Œåœ¨ Go ä¸­è¿™äº›éƒ½æ˜¯çº¦å®šå¥½çš„ã€‚ ä¸¾ä¸ª ğŸŒ° ï¼šPodfile ä¸­æ˜¯å¯ä»¥æŒ‡å®š pod library æ‰€é“¾æ¥çš„ Xcode projectï¼Œä¸è¿‡å¤§å¤šæƒ…å†µä¸‹æ— éœ€é…ç½®ï¼ŒCocoaPods ä¼šè‡ªåŠ¨æŸ¥æ‰¾ Podfile æ‰€åœ¨çš„åŒçº§ç›®å½•ä¸‹æ‰€å¯¹åº”çš„å·¥ç¨‹æ–‡ä»¶ .project ã€‚ Spec çš„æ ¸å¿ƒæ•°æ®ç»“æ„ Specification åœ¨æ•°æ®ç»“æ„ä¸Š Specification ä¸ TargetDefinition æ˜¯ç±»ä¼¼çš„ï¼ŒåŒä¸ºå¤šå‰æ ‘ç»“æ„ã€‚ç®€åŒ–åçš„ Spec çš„ç±»å¦‚ä¸‹ï¼š require 'active_support/core_ext/string/strip.rb' # è®°å½•å¯¹åº” platform ä¸Š Spec çš„å…¶ä»– pod ä¾èµ– require 'cocoapods-core/specification/consumer' # è§£æ DSL require 'cocoapods-core/specification/dsl' # æ ¡éªŒ Spec çš„æ­£ç¡®æ€§ï¼Œå¹¶æŠ›å‡ºå¯¹åº”çš„é”™è¯¯å’Œè­¦å‘Š require 'cocoapods-core/specification/linter' # ç”¨äºè§£æ DSL å†…å®¹åŒ…å«çš„é…ç½®ä¿¡æ¯ require 'cocoapods-core/specification/root_attribute_accessors' # è®°å½•ä¸€ä¸ª Pod æ‰€æœ‰ä¾èµ–çš„ Spec æ¥æºä¿¡æ¯ require 'cocoapods-core/specification/set' # json æ ¼å¼æ•°æ®è§£æ require 'cocoapods-core/specification/json' module Pod class Specification include Pod::Specification::DSL include Pod::Specification::DSL::Deprecations include Pod::Specification::RootAttributesAccessors include Pod::Specification::JSONSupport # `subspec` çš„çˆ¶èŠ‚ç‚¹ attr_reader :parent # `Spec` çš„å”¯ä¸€ idï¼Œç”± name + version çš„ hash æ„æˆ attr_reader :hash_value # è®°å½• `Spec` çš„é…ç½®ä¿¡æ¯ attr_accessor :attributes_hash # `Spec` åŒ…å«çš„ `subspec` attr_accessor :subspecs # é€’å½’è°ƒç”¨è·å– Specification çš„æ ¹èŠ‚ç‚¹ def root parent ? parent.root : self end def hash if @hash_value.nil? @hash_value = (name.hash * 53) ^ version.hash end @hash_value end # ... end end Specification åŒæ ·ç”¨ map attributes_hash æ¥è®°å½•é…ç½®ä¿¡æ¯ã€‚ æ³¨æ„ï¼Œè¿™é‡Œçš„ parent æ˜¯ä¸º subspec ä¿ç•™çš„ï¼Œç”¨äºæŒ‡å‘å…¶çˆ¶èŠ‚ç‚¹çš„ Specã€‚ Subspecs ä¹ä¸€å¬ Subspec è¿™ä¸ªæ¦‚å¿µä¼¼ä¹æœ‰ä¸€äº›æŠ½è±¡ï¼Œä¸è¿‡å½“ä½ ç†è§£äº†ä¸Šé¢çš„æè¿°ï¼Œå°±èƒ½æ˜ç™½ä»€ä¹ˆæ˜¯ Subspec äº†ã€‚æˆ‘ä»¬çŸ¥é“åœ¨ Xcode é¡¹ç›®ä¸­ï¼Œtarget ä½œä¸ºæœ€å°çš„å¯ç¼–è¯‘å•å…ƒï¼Œå®ƒç¼–è¯‘åçš„äº§ç‰©ä¸ºé“¾æ¥åº“æˆ– frameworkã€‚è€Œåœ¨ CocoaPods çš„ä¸–ç•Œé‡Œè¿™äº› targets åˆ™æ˜¯ç”± Spec æ–‡ä»¶æ¥æè¿°çš„ï¼Œå®ƒè¿˜èƒ½æ‹†åˆ†æˆä¸€ä¸ªæˆ–è€…å¤šä¸ª Subspecï¼Œæˆ‘ä»¬æš‚ä¸”æŠŠå®ƒç§°ä¸º Spec çš„ å­æ¨¡å—ï¼Œå­æ¨¡å—ä¹Ÿæ˜¯ç”¨ Specification ç±»æ¥æè¿°çš„ã€‚ å­æ¨¡å—å¯ä»¥å•ç‹¬ä½œä¸ºä¾èµ–è¢«å¼•å…¥åˆ°é¡¹ç›®ä¸­ã€‚å®ƒæœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š æœªæŒ‡å®š default_subspec çš„æƒ…å†µä¸‹ï¼ŒSpec çš„å…¨éƒ¨å­æ¨¡å—éƒ½å°†ä½œä¸ºä¾èµ–è¢«å¼•å…¥ï¼› å­æ¨¡å—ä¼šä¸»åŠ¨ç»§æ‰¿å…¶çˆ¶èŠ‚ç‚¹ Spec ä¸­å®šä¹‰çš„ attributes_hashï¼› å­æ¨¡å—å¯ä»¥æŒ‡å®šè‡ªå·±çš„æºä»£ç ã€èµ„æºæ–‡ä»¶ã€ç¼–è¯‘é…ç½®ã€ä¾èµ–ç­‰ï¼› åŒä¸€ Spec å†…éƒ¨çš„å­æ¨¡å—æ˜¯å¯ä»¥æœ‰ä¾èµ–å…³ç³»çš„ï¼› æ¯ä¸ªå­æ¨¡å—åœ¨ pod push çš„æ—¶å€™æ˜¯éœ€è¦è¢« lint é€šè¿‡çš„ï¼› å…‰å¬æ€»ç»“ä¼¼ä¹è¿˜æ˜¯äº‘é‡Œé›¾é‡Œï¼Œç¥­å‡º QMUI è®©å¤§å®¶æ„Ÿå—ä¸€ä¸‹ï¼š Pod::Spec.new do |s| s.name = &quot;QMUIKit&quot; s.version = &quot;4.2.1&quot; # ... s.subspec 'QMUICore' do |ss| ss.source_files = 'QMUIKit/QMUIKit.h', 'QMUIKit/QMUICore', 'QMUIKit/UIKitExtensions' ss.dependency 'QMUIKit/QMUIWeakObjectContainer' ss.dependency 'QMUIKit/QMUILog' end s.subspec 'QMUIWeakObjectContainer' do |ss| ss.source_files = 'QMUIKit/QMUIComponents/QMUIWeakObjectContainer.{h,m}' end s.subspec 'QMUILog' do |ss| ss.source_files = 'QMUIKit/QMUIComponents/QMUILog/*.{h,m}' end s.subspec 'QMUIComponents' do |ss| ss.dependency 'QMUIKit/QMUICore' ss.subspec 'QMUIButton' do |sss| sss.source_files = 'QMUIKit/QMUIComponents/QMUIButton/QMUIButton.{h,m}' end # æ­¤å¤„çœç•¥ 59 ä¸ª Components end # ... end ä¸å¹ä¸é»‘ï¼ŒQMUI æ˜¯ç¬”è€…è§è¿‡å›½å†…å¼€æºä½œå“ä¸­ä»£ç æ³¨é‡Šéå¸¸è¯¦å°½ä¸”æä¾›å®Œæ•´ Demo çš„é¡¹ç›®ä¹‹ä¸€ã€‚ æ•´ä¸ª QMUIKit çš„ Spec æ–‡ä»¶ä¸­ï¼Œæ€»å…±å®šä¹‰äº† 64 ä¸ª subspec å­æ¨¡å—ï¼ŒåŒæ—¶è¿™äº›å­æ¨¡å—ä¹‹é—´è¿˜åšäº†åˆ†å±‚ã€‚æ¯”å¦‚ QMUICoreï¼š å¦å¤–è¡¥å……ä¸€ç‚¹ï¼ŒCocoaPods æ”¯æŒäº†ä¸åŒç±»å‹çš„ SubSpecï¼š # lib/cocoapods-core/specification/dsl/attribute_support.rb SUPPORTED_SPEC_TYPES = [:library, :app, :test].freeze :app å’Œ :test ç”¨äºåœ¨é¡¹ç›®ä¸­é›†æˆå•å…ƒæµ‹è¯•ä»£ç çš„ Subspecã€‚ Podspec From JSON æœ‰äº†ä¸Šæ–‡ Podfile çš„äº†è§£ï¼Œè¿™æ¬¡æˆ‘ä»¬å¯¹ Podspec çš„æ–‡ä»¶åŠ è½½ä¼šæ›´åŠ è½»è½¦ç†Ÿè·¯ã€‚é¦–å…ˆæ˜¯ç”± #from_file æ–¹æ³•è¿›è¡Œæ–‡ä»¶è·¯å¾„å’Œå†…å®¹ç¼–ç æ ¼å¼çš„æ£€æŸ¥ï¼Œå°†åŠ è½½çš„å†…å®¹è½¬å…¥ #from_stringï¼š def self.from_file(path, subspec_name = nil) path = Pathname.new(path) unless path.exist? raise Informative, &quot;No Podspec exists at path `#{path}`.&quot; end string = File.open(path, 'r:utf-8', &amp;amp;:read) # Work around for Rubinius incomplete encoding in 1.9 mode if string.respond_to?(:encoding) &amp;amp;&amp;amp; string.encoding.name != 'UTF-8' string.encode!('UTF-8') end from_string(string, path, subspec_name) end def self.from_string(spec_contents, path, subspec_name = nil) path = Pathname.new(path).expand_path spec = nil case path.extname when '.podspec' Dir.chdir(path.parent.directory? ? path.parent : Dir.pwd) do spec = ::Pod._eval_Podspec(spec_contents, path) unless spec.is_a?(Specification) raise Informative, &quot;Invalid Podspec file at path `#{path}`.&quot; end end when '.json' spec = Specification.from_json(spec_contents) else raise Informative, &quot;Unsupported specification format `#{path.extname}` for spec at `#{path}`.&quot; end spec.defined_in_file = path spec.subspec_by_name(subspec_name, true) end æ¥ç€æ ¹æ®æ–‡ä»¶ç±»å‹ä¸º .podspec å’Œ .json åˆ†åˆ«é‡‡ç”¨ä¸åŒçš„è§£ææ–¹å¼ã€‚åœ¨ Â JSONSupport æ¨¡å—å†…å°† #from_json çš„é€»è¾‘æ‹†æˆäº†ä¸¤éƒ¨åˆ†ï¼š # `lib/cocoapods-core/specification/json.rb` module Pod class Specification module JSONSupport # â‘  def self.from_json(json) require 'json' hash = JSON.parse(json) from_hash(hash) end # â‘¡ def self.from_hash(hash, parent = nil, test_specification: false, app_specification: false) attributes_hash = hash.dup spec = Spec.new(parent, nil, test_specification, :app_specification =&amp;gt; app_specification) subspecs = attributes_hash.delete('subspecs') testspecs = attributes_hash.delete('testspecs') appspecs = attributes_hash.delete('appspecs') ## backwards compatibility with 1.3.0 spec.test_specification = !attributes_hash['test_type'].nil? spec.attributes_hash = attributes_hash spec.subspecs.concat(subspecs_from_hash(spec, subspecs, false, false)) spec.subspecs.concat(subspecs_from_hash(spec, testspecs, true, false)) spec.subspecs.concat(subspecs_from_hash(spec, appspecs, false, true)) spec end # â‘¢ def self.subspecs_from_hash(spec, subspecs, test_specification, app_specification) return [] if subspecs.nil? subspecs.map do |s_hash| Specification.from_hash(s_hash, spec, :test_specification =&amp;gt; test_specification, :app_specification =&amp;gt; app_specification) end end end end è¿™é‡Œçš„é€»è¾‘ä¹Ÿæ˜¯æ¯”è¾ƒç®€å•ï¼š â‘  å°†ä¼ å…¥çš„å­—ç¬¦ä¸²è½¬æ¢ä¸º jsonï¼› â‘¡ å°†è½¬æ¢åçš„ json è½¬æ¢ä¸º Spec å¯¹è±¡å¹¶å°† json è½¬æ¢ä¸º attributes_hashï¼ŒåŒæ—¶è§¦å‘ â‘¢ï¼› â‘¢ é€šè¿‡ self.subspecs_from_hash å®ç°é€’å½’è°ƒç”¨å®Œæˆ subspecs è§£æï¼› Tips: æ–¹æ³• â‘¡ é‡Œçš„ Spec æ˜¯å¯¹ Specification çš„åˆ«åã€‚ Podspec From Ruby QMUIKit.podspec çš„æ–‡ä»¶å†…å®¹ï¼Œå¤§å®¶æ˜¯å¦æ³¨æ„åˆ°å…¶å¼€å¤´çš„å£°æ˜ï¼š Pod::Spec.new do |s| s.name = &quot;QMUIKit&quot; s.source_files = 'QMUIKit/QMUIKit.h' # ... end å‘ç°æ²¡ .podspec æ–‡ä»¶å°±æ˜¯ç®€å•ç›´æ¥åœ°å£°æ˜äº†ä¸€ä¸ª Specifiction å¯¹è±¡ï¼Œç„¶åé€šè¿‡ block å—å®šåˆ¶æ¥å®Œæˆé…ç½®ã€‚åƒ nameã€source_files è¿™äº›é…ç½®å‚æ•°æœ€ç»ˆéƒ½ä¼šè½¬æ¢ä¸ºæ–¹æ³•è°ƒç”¨å¹¶å°†å€¼å­˜å…¥ attributes_hash ä¸­ã€‚è¿™äº›æ–¹æ³•è°ƒç”¨çš„å®ç°æ–¹å¼åˆ†ä¸¤ç§ï¼š å¤§éƒ¨åˆ†é…ç½®æ˜¯é€šè¿‡æ–¹æ³•åŒ…è£…å™¨ attribute å’Œ root_attribute æ¥åŠ¨æ€æ·»åŠ çš„ setter æ–¹æ³•ï¼› å¯¹äºå¤æ‚é€»è¾‘çš„é…ç½®åˆ™ç›´æ¥æ–¹æ³•å£°æ˜ï¼Œå¦‚ subspec ã€dependency æ–¹æ³•ç­‰ï¼ˆåç»­ä»‹ç»)ã€‚ attribute wrappter # `lib/cocoapods-core/specification/dsl.rb` module Pod class Specification module DSL extend Pod::Specification::DSL::AttributeSupport # Deprecations must be required after include AttributeSupport require 'cocoapods-core/specification/dsl/deprecations' attribute :name, :required =&amp;gt; true, :inherited =&amp;gt; false, :multi_platform =&amp;gt; false root_attribute :version, :required =&amp;gt; true # ... end end end å¯ä»¥çœ‹å‡º name å’Œ version çš„æ–¹æ³•å£°æ˜ä¸æ™®é€šçš„ä¸å¤ªä¸€æ ·ï¼Œå…¶å® attribute å’Œ root_attribute æ˜¯é€šè¿‡ Ruby çš„æ–¹æ³•åŒ…è£…å™¨æ¥å®ç°çš„ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦çœ‹è¿™é‡Œ ã€ŒPythonè£…é¥°å™¨ ä¸ Rubyå®ç°ã€ã€‚ Tips: Ruby åŸç”Ÿæä¾›çš„å±æ€§è®¿é—®å™¨ â€” attr_accessor å¤§å®¶åº”è¯¥ä¸é™Œç”Ÿï¼Œå°±æ˜¯é€šè¿‡åŒ…è£…å™¨å®ç°çš„ã€‚ è¿™äº›è£…é¥°å™¨æ‰€å£°æ˜çš„æ–¹æ³•ä¼šåœ¨å…¶æ¨¡å—è¢«åŠ è½½æ—¶åŠ¨æ€ç”Ÿæˆï¼Œæ¥çœ‹å…¶å®ç°ï¼š # `lib/cocoapods-core/specification/attribute_support.rb` module Pod class Specification module DSL class &amp;lt;&amp;lt; self attr_reader :attributes end module AttributeSupport def root_attribute(name, options = {}) options[:root_only] = true options[:multi_platform] = false store_attribute(name, options) end def attribute(name, options = {}) store_attribute(name, options) end def store_attribute(name, options) attr = Attribute.new(name, options) @attributes ||= {} @attributes[name] = attr end end end end end attribute å’Œ root_attribute æœ€ç»ˆéƒ½èµ°åˆ°äº† store_attribute ä¿å­˜åœ¨åˆ›å»ºçš„ Attribute å¯¹è±¡å†…ï¼Œå¹¶ä»¥é…ç½®çš„ Symbol åç§°ä½œä¸º KEY å­˜å…¥ @attributesï¼Œç”¨äºç”Ÿæˆæœ€ç»ˆçš„ attributes setter æ–¹æ³•ã€‚ æœ€å…³é”®çš„ä¸€æ­¥ï¼Œè®©æˆ‘ä»¬å›åˆ° specification æ–‡ä»¶ï¼š # `/lib/coocapods-core/specification` module Pod class Specification # ... def store_attribute(name, value, platform_name = nil) name = name.to_s value = Specification.convert_keys_to_string(value) if value.is_a?(Hash) value = value.strip_heredoc.strip if value.respond_to?(:strip_heredoc) if platform_name platform_name = platform_name.to_s attributes_hash[platform_name] ||= {} attributes_hash[platform_name][name] = value else attributes_hash[name] = value end end DSL.attributes.values.each do |a| define_method(a.writer_name) do |value| store_attribute(a.name, value) end if a.writer_singular_form alias_method(a.writer_singular_form, a.writer_name) end end end end Specification ç±»è¢«åŠ è½½æ—¶ï¼Œä¼šå…ˆéå† DSL module åŠ è½½åæ‰€ä¿å­˜çš„ attributesï¼Œå†é€šè¿‡ define_method åŠ¨æ€ç”Ÿæˆå¯¹åº”çš„é…ç½®æ–¹æ³•ã€‚æœ€ç»ˆæ•°æ®è¿˜æ˜¯ä¿å­˜åœ¨ attributes_hash ä¸­ã€‚ Attribute Attribute æ˜¯ä¸ºäº†è®°å½•è¯¥é…ç½®çš„ç›¸å…³ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼Œè®°å½• Spec æ˜¯å¦ä¸ºæ ¹èŠ‚ç‚¹ã€Spec ç±»å‹ã€æ‰€æ”¯æŒçš„ platformsã€èµ„æºåœ°å€é€šé…ç¬¦ç­‰ã€‚ ä»¥ root_attribute åŒ…è£…çš„é…ç½®ä»…ç”¨äºä¿®é¥° Spec æ ¹èŠ‚ç‚¹ï¼Œæ¯”å¦‚ç‰ˆæœ¬å· version åªèƒ½ç”± Spec æ ¹èŠ‚ç‚¹æ¥è®¾ç½®ï¼Œå¦å¤–è¿˜æœ‰ sourceã€static_frameworkã€module_name ç­‰ï¼› ä»¥ attribute åŒ…è£…çš„é…ç½®åˆ™ä¸é™æ˜¯å¦ä¸º Spec æ ¹ç»“ç‚¹ã€‚æˆ‘ä»¬ä»¥ AFNetworking çš„ source_files ä¸ºä¾‹ï¼šç”±äºåœ¨ macOS å’Œ watchOS ä¸Šå¹¶æ²¡æœ‰ UIKit framworkï¼Œå› æ­¤å®ƒå•ç‹¬å°† UIKit çš„ç›¸å…³åŠŸèƒ½æ‹†åˆ†åˆ°äº† AFNetworking/UIKit ä¸­ï¼› Pod::Spec.new do |s| # ... s.subspec 'NSURLSession' do |ss| # ... end s.subspec 'UIKit' do |ss| ss.ios.deployment_target = '9.0' ss.tvos.deployment_target = '9.0' ss.dependency 'AFNetworking/NSURLSession' ss.source_files = 'UIKit+AFNetworking' end end #subspec é™¤äº† attribute è£…é¥°å™¨å£°æ˜çš„ setter æ–¹æ³•ï¼Œè¿˜æœ‰å‡ ä¸ªè‡ªå®šä¹‰çš„æ–¹æ³•æ˜¯ç›´æ¥é€šè¿‡ eval è°ƒç”¨çš„ã€‚ def subspec(name, &amp;amp;block) subspec = Specification.new(self, name, &amp;amp;block) @subspecs &amp;lt;&amp;lt; subspec subspec end def test_spec(name = 'Tests', &amp;amp;block) subspec = Specification.new(self, name, true, &amp;amp;block) @subspecs &amp;lt;&amp;lt; subspec subspec end def app_spec(name = 'App', &amp;amp;block) appspec = Specification.new(self, name, :app_specification =&amp;gt; true, &amp;amp;block) @subspecs &amp;lt;&amp;lt; appspec appspec end è¿™ä¸‰ç§ä¸åŒç±»å‹çš„ Subspec ç» eval è½¬æ¢ä¸ºå¯¹åº”çš„ Specification å¯¹è±¡ï¼Œæ³¨æ„è¿™é‡Œåˆå§‹åŒ–åéƒ½å°† parent èŠ‚ç‚¹æŒ‡å‘ self åŒæ—¶å­˜å…¥ @subspecs æ•°ç»„ä¸­ï¼Œå®Œæˆ SubSpec ä¾èµ–é“¾çš„æ„é€ ã€‚ #dependency å¯¹äºå…¶ä»– pod ä¾èµ–çš„æ·»åŠ æˆ‘ä»¬é€šè¿‡ dependency æ–¹æ³•æ¥å®ç°ï¼š def dependency(*args) name, *version_requirements = args # dependency args æœ‰æ•ˆæ€§æ ¡éªŒ ... attributes_hash['dependencies'] ||= {} attributes_hash['dependencies'][name] = version_requirements unless whitelisted_configurations.nil? # configuration ç™½åå•è¿‡æ»¤å’Œæ ¡éªŒ ... attributes_hash['configuration_pod_whitelist'] ||= {} attributes_hash['configuration_pod_whitelist'][name] = whitelisted_configurations end end dependency æ–¹æ³•å†…éƒ¨ä¸»è¦æ˜¯å¯¹ä¾èµ–æœ‰æ•ˆæ€§çš„æ ¡éªŒï¼Œé™äºç¯‡å¹…è¿™é‡Œä¸åˆ—å‡ºå®ç°ï¼Œæ ¸å¿ƒè¦ç‚¹å¦‚ä¸‹ï¼š æ£€æŸ¥ä¾èµ–å¾ªç¯ï¼Œæ ¹æ® Spec åç§°åˆ¤æ–­ Spec ä¸è‡ªèº«ï¼ŒSpec ä¸SubSpecä¹‹é—´æ˜¯å¦å­˜åœ¨å¾ªç¯ä¾èµ–ï¼› æ£€æŸ¥ä¾èµ–æ¥æºï¼ŒPodspec ä¸­ä¸æ”¯æŒ :git æˆ– :path å½¢å¼çš„æ¥æºæŒ‡å®šï¼Œå¦‚éœ€è®¾å®šå¯é€šè¿‡ Podfile æ¥ä¿®æ”¹; æ£€æŸ¥ configuation ç™½åå•ï¼Œç›®å‰ä»…æ”¯æŒ Xcode é»˜è®¤çš„ Debug å’Œ Release çš„ configuration é…ç½®ï¼› åˆ›å»ºå¹¶ä½¿ç”¨ä½ çš„ Pod æœ€åä¸€èŠ‚æ¥ä¸¤ä¸ªå®è·µï¼šåˆ›å»º Pod ä»¥åŠåœ¨é¡¹ç›®ä¸­ä½¿ç”¨ SubSpecsã€‚ Pod åˆ›å»º pod ç›¸å…³ä½¿ç”¨å®˜æ–¹éƒ½æä¾›äº†å¾ˆè¯¦å°½çš„éƒ½æ–‡æ¡£ï¼Œæœ¬å°èŠ‚ä»…åšä»‹ç»ã€‚ 1. åˆ›å»º Pod ä»…éœ€ä¸€è¡Œå‘½ä»¤å®Œæˆ Pod åˆ›å»ºï¼ˆæ–‡æ¡£ï¼‰ï¼š $ pod lib create `NAME` ä¹‹åæ¯ä¸€æ­¥éƒ½ä¼šè¾“å‡ºå‹å¥½æç¤ºï¼ŒæŒ‰ç…§æç¤ºé€‰æ‹©å³å¯ã€‚åœ¨æ·»åŠ å®Œ source code å’Œ dependency ä¹‹åï¼Œä½ è¿˜å¯ä»¥åœ¨ CocoaPods ä¸ºä½ æä¾›çš„ Example é¡¹ç›®ä¸­è¿è¡Œå’Œè°ƒè¯•ä»£ç ã€‚ å‡†å¤‡å°±ç»ªåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ ¡éªŒï¼Œæ£€æŸ¥ Pod æ­£ç¡®æ€§ï¼š $ pod lib lint `[Podspec_PATHS ...]` 2. å‘å¸ƒ Pod æ ¡éªŒé€šè¿‡åå°±å¯ä»¥å°† Pod å‘å¸ƒäº†ï¼Œä½ å¯ä»¥å°† PodSepc å‘å¸ƒåˆ° Â Master Repo ä¸Šï¼Œæˆ–è€…å‘å¸ƒåˆ°å†…éƒ¨çš„ Spec Repo ä¸Šã€‚ CocoaPods Master Repo å¦‚æœå‘å¸ƒçš„ CocoaPods çš„ä¸»ä»“åº“ï¼Œé‚£ä¹ˆéœ€è¦é€šè¿‡ CocoaPods æä¾›çš„ Trunk å‘½ä»¤ï¼š $ pod trunk push `[NAME.podspec]` ä¸è¿‡ä½¿ç”¨å‰éœ€è¦å…ˆé€šè¿‡é‚®ç®±æ³¨å†Œï¼Œè¯¦æƒ…æŸ¥çœ‹æ–‡æ¡£ã€‚ Private Spec Repo å¯¹äºå‘å¸ƒåˆ°ç§æœ‰ä»“åº“çš„ï¼Œå¯é€šè¿‡ CocoaPods æä¾›çš„ Repo å‘½ä»¤ï¼š $ pod repo push `REPO_NAME` `SPEC_NAME.podspec` æ–‡æ¡£è¯¦æƒ… â€” ä¼ é€é—¨ã€‚ SubSpecs In Podfile åœ¨ SubSpec ä¸€èŠ‚æåˆ°è¿‡ï¼Œåœ¨ CocoaPods ä¸­ SubSpec æ˜¯è¢«ä½œä¸ºå•ç‹¬çš„ä¾èµ–æ¥çœ‹å¾…çš„ï¼Œè¿™é‡Œå°±å€Ÿè¿™ä¸ªå®æ“æ¥è¯æ˜ä¸€ä¸‹ã€‚ åœ¨ä¸Šæ–‡çš„å®è·µä¸­ï¼Œæˆ‘ä»¬çŸ¥é“æ¯ä¸€ä¸ª Pod åº“å¯¹åº”ä¸º Xcode é¡¹ç›®ä¸­çš„ä¸€ä¸ªä¸ª targetï¼Œé‚£ä¹ˆå½“æ˜ç¡®æŒ‡å®šéƒ¨åˆ† SubSpec æ—¶ï¼Œå®ƒä»¬ä¹Ÿå°†è¢«ä½œä¸ºç‹¬ç«‹çš„ target è¿›è¡Œç¼–è¯‘ã€‚ä¸è¿‡è¿™é‡Œéœ€è¦æ˜ç¡®ä¸€ä¸‹ä½¿ç”¨åœºæ™¯ï¼š 1. Single Target å½“ä¸»é¡¹ç›®ä¸­ä»…æœ‰ä¸€ä¸ª target æˆ–å¤šä¸ª target å¼•ç”¨äº†åŒä¸€ä¸ª pod åº“çš„å¤šä¸ªä¸åŒ SubSpec æ—¶ï¼Œç”Ÿæˆçš„ target åªä¼šæœ‰ä¸€ä¸ªã€‚æˆ‘ä»¬ä»¥ QMUIKit ä¸ºä¾‹ï¼Œé¡¹ç›® Demo.project ä¸‹çš„ Podfile é…ç½®å¦‚ä¸‹ï¼š target 'Demo' do pod 'QMUIKit/QMUIComponents/QMUILabel', :path =&amp;gt; '../QMUI_iOS' pod 'QMUIKit/QMUIComponents/QMUIButton', :path =&amp;gt; '../QMUI_iOS' end æ­¤æ—¶ Pods.project ä¸‹çš„ QMUIKit çš„ target åç§°ä¸º QMUIKitã€‚ 2. Multiple Target å¦‚æœæˆ‘ä»¬çš„ä¸»é¡¹ç›®ä¸­å­˜åœ¨å¤šä¸ª target ä¸”ä½¿ç”¨åŒä¸€ä¸ª pod åº“çš„ä¸åŒ SubSpec æ—¶ï¼Œç»“æœåˆ™æœ‰æ‰€ä¸åŒã€‚ ç°åœ¨æˆ‘ä»¬åœ¨æ­¥éª¤ 1 çš„åŸºç¡€ä¸Šæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š target 'Demo2' do pod 'QMUIKit/QMUIComponents/QMUILog', :path =&amp;gt; '../QMUI_iOS' end å¯ä»¥å‘ç°ï¼ŒCocoaPods ä¸ºæ¯ä¸ª tareget å¯¹åº”çš„ SubSpec ä¾èµ–ç”Ÿæˆäº†ä¸åŒçš„ QMUIKit targetsã€‚ Tips: å½“ä¸»å·¥ç¨‹ target ä¾èµ–çš„ Subspec æ•°é‡è¿‡å¤šå¯¼è‡´çš„åç§°è¶…è¿‡ 50 ä¸ªå­—ç¬¦ï¼Œå°†ä¼šå¯¹ subspec åç¼€åšæ‘˜è¦å¤„ç†ä½œä¸ºå”¯ä¸€æ ‡è¯†ç¬¦ã€‚ æ€»ç»“ æœ¬æ–‡æ˜¯ CocoaPods-Core çš„ç¬¬äºŒç¯‡ï¼Œé‡ç‚¹ä»‹ç»äº† Podspec çš„ç±»æ„æˆå’Œè§£æå®ç°ï¼Œæ€»ç»“å¦‚ä¸‹ï¼š åˆæ¢ Podspec è®©æˆ‘ä»¬å¯¹å…¶èƒ½åŠ›è¾¹ç•Œå’Œé…ç½®åˆ†ç±»æœ‰äº†æ›´å¥½çš„äº†è§£ï¼› æ·±å…¥ Podspec æˆ‘ä»¬å‘ç°å…¶æ•°æ®ç»“æ„åŒ Podfile ç±»ä¼¼ï¼Œéƒ½æ˜¯æ ¹æ®ä¾èµ–å…³ç³»å»ºç«‹å¯¹åº”çš„æ ‘ç»“æ„ï¼› Podspec é’ˆå¯¹å•ä¸ªåº“çš„æºç å’Œèµ„æºæä¾›äº†æ›´ç²¾ç»†åŒ–çš„ç®¡ç†ï¼ŒSubSpec ç»“æ„çš„æ¨å‡ºè®©å¤§å‹ library çš„å†…éƒ¨åˆ†å±‚æä¾›äº†å¾ˆå¥½çš„å·¥å…·ï¼› è£…é¥°å™¨æ¨¡å¼ç»“åˆ Ruby çš„åŠ¨æ€ç‰¹æ€§ï¼Œè®© Podspec çš„ DSL ç‰¹æ€§çš„å®ç°èµ·æ¥æ›´åŠ ä¼˜é›…ï¼› çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç† è¿™é‡Œç½—åˆ—äº†å››ä¸ªé—®é¢˜ç”¨æ¥è€ƒå¯Ÿä½ æ˜¯å¦å·²ç»æŒæ¡äº†è¿™ç¯‡æ–‡ç« ï¼Œå¦‚æœæ²¡æœ‰å»ºè®®ä½ åŠ å…¥**æ”¶è— **å†æ¬¡é˜…è¯»ï¼š è¯´è¯´ Podspec æ‰€æ”¯æŒçš„é…ç½®æœ‰å‡ ç±»ï¼Œåˆ†åˆ«å…·æœ‰å“ªäº›åŠŸèƒ½ ï¼Ÿ Podspec ä¸ SubSpec ä¹‹é—´æœ‰å“ªäº›å…³ç³» ï¼Ÿ è¯´è¯´ SubSpec çš„ç‰¹ç‚¹ä»¥åŠä½œç”¨ ï¼Ÿ è°ˆè°ˆ Podspec ä¸­çš„ DSL è§£æä¸ Podfile çš„è§£æå®ç°æœ‰å“ªäº›åŒºåˆ« ï¼Ÿ</summary></entry><entry><title type="html">Ruby é»‘é­”æ³• - eval å’Œ alias</title><link href="https://www.desgard.com/2020/10/08/cocoapods-story-ex-2.html" rel="alternate" type="text/html" title="Ruby é»‘é­”æ³• - eval å’Œ alias" /><published>2020-10-08T00:00:00-08:00</published><updated>2020-10-08T00:00:00-08:00</updated><id>https://www.desgard.com/2020/10/08/cocoapods-story-ex-2</id><content type="html" xml:base="https://www.desgard.com/2020/10/08/cocoapods-story-ex-2.html">&lt;p&gt;CocoaPods æ˜¯ä½¿ç”¨ Ruby è¿™é—¨è„šæœ¬è¯­è¨€å®ç°çš„å·¥å…·ã€‚Ruby æœ‰å¾ˆå¤šä¼˜è´¨çš„ç‰¹æ€§è¢« CocoaPods æ‰€åˆ©ç”¨ï¼Œä¸ºäº†åœ¨åç»­çš„æºç é˜…è¯»ä¸­ä¸ä¼šè¢«è¿™äº›ç”¨æ³•é˜»å¡ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªç³»åˆ—ä¸­ï¼Œä¼šç»™å‡ºä¸€äº› CocoaPods çš„ç•ªå¤–ç¯‡ï¼Œæ¥ä»‹ç» Ruby åŠå…¶å½“ä¸­çš„ä¸€äº›è¯­è¨€æ€æƒ³ã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå¤©è¿™ä¸€ç¯‡æˆ‘ä»¬æ¥èŠèŠ Ruby ä¸­çš„ä¸€äº›ååˆ†â€œåŠ¨æ€â€çš„ç‰¹æ€§ï¼š&lt;strong&gt;eval ç‰¹æ€§å’Œ alias ç‰¹æ€§&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h1 id=&quot;è¯´è¯´-eval-ç‰¹æ€§&quot;&gt;è¯´è¯´ Eval ç‰¹æ€§&lt;/h1&gt;

&lt;h2 id=&quot;æºè‡ª-lisp-çš„-evaluation&quot;&gt;æºè‡ª Lisp çš„ Evaluation&lt;/h2&gt;

&lt;p&gt;åœ¨ä¸€äº›è¯­è¨€ä¸­ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval&lt;/code&gt; æ–¹æ³•æ˜¯&lt;strong&gt;å°†ä¸€ä¸ªå­—ç¬¦ä¸²å½“ä½œè¡¨è¾¾å¼æ‰§è¡Œè€Œè¿”å›ä¸€ä¸ªç»“æœçš„æ–¹æ³•&lt;/strong&gt;ï¼›åœ¨å¦å¤–ä¸€äº›ä¸­ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval&lt;/code&gt; å®ƒæ‰€ä¼ å…¥çš„ä¸ä¸€å®šæ˜¯å­—ç¬¦ä¸²ï¼Œè¿˜æœ‰å¯èƒ½æ˜¯æŠ½è±¡å¥æ³•å½¢åŠ¿ï¼ŒLisp å°±æ˜¯è¿™ç§è¯­è¨€ï¼Œå¹¶ä¸” Lisp ä¹Ÿæ˜¯é¦–å…ˆæå‡ºä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval&lt;/code&gt;Â æ–¹æ³•çš„è¯­è¨€ï¼Œå¹¶æå‡ºäº† Evaluation è¿™ä¸ªç‰¹æ€§ã€‚&lt;strong&gt;è¿™ä¹Ÿä½¿å¾— Lisp è¿™é—¨è¯­è¨€å¯ä»¥å®ç°è„±ç¦»ç¼–è¯‘è¿™å¥—ä½“ç³»è€ŒåŠ¨æ€æ‰§è¡Œçš„ç»“æœ&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia20201009091350.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Lisp ä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval&lt;/code&gt;Â æ–¹æ³•é¢„æœŸæ˜¯ï¼š&lt;strong&gt;å°†è¡¨è¾¾å¼ä½œä¸ºå‚æ•°ä¼ å…¥åˆ° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval&lt;/code&gt;Â æ–¹æ³•ï¼Œå¹¶å£°æ˜ç»™å®šå½¢å¼çš„è¿”å›å€¼ï¼Œè¿è¡Œæ—¶åŠ¨æ€è®¡ç®—&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ª Lisp Evaluation ä»£ç çš„ä¾‹å­ï¼ˆÂ &lt;a href=&quot;https://zh.wikipedia.org/wiki/Scheme&quot;&gt;Scheme&lt;/a&gt;Â æ–¹è¨€ RRS åŠä»¥åç‰ˆæœ¬ï¼‰ï¼š&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;å°†&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;è®¾ç½®ä¸ºè¡¨è¾¾å¼&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f1&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'(+ 1 2 3))
 
; æ‰§è¡Œ f1 (+ 1 2 3) è¿™ä¸ªè¡¨è¾¾å¼ï¼Œå¹¶è¿”å› 6
(eval f1 user-initial-environment)
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¯èƒ½ä½ ä¼šè§‰å¾—ï¼š&lt;strong&gt;è¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„ç‰¹æ€§ï¼Œä¸ºä»€ä¹ˆä¼šç§°ä½œé»‘é­”æ³•ç‰¹æ€§ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å› ä¸º Evaluation è¿™ç§å¯ eval ç‰¹æ€§æ˜¯å¾ˆå¤šæ€æƒ³ã€è½åœ°å·¥å…·çš„åŸºç¡€ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´ï¼Œä¸‹é¢æ¥è¯´å‡ ä¸ªå¾ˆå¸¸è§çš„åœºæ™¯ã€‚&lt;/p&gt;

&lt;h2 id=&quot;repl-çš„æ ¸å¿ƒæ€æƒ³&quot;&gt;REPL çš„æ ¸å¿ƒæ€æƒ³&lt;/h2&gt;

&lt;p&gt;å¦‚æœä½ æ˜¯ iOSerï¼Œä½ ä¸€å®šè¿˜ä¼šè®°å¾—å½“å¹´ Swift åˆšåˆšè¯ç”Ÿçš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªä¸»æ‰“çš„åŠŸèƒ½å°±æ˜¯ &lt;strong&gt;REPL äº¤äº’å¼å¼€å‘ç¯å¢ƒ&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1601284781928-6b274959-8352-4ad8-a71b-c7f7e5f9cba9.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å½“ç„¶ï¼Œä½œä¸ºåŠ¨æ€æ€§ååˆ†å¼ºå¤§çš„ Lisp å’Œ Ruby ä¹Ÿæœ‰å¯¹åº”çš„ REPL å·¥å…·ã€‚ä¾‹å¦‚ Ruby çš„ irb å’Œ pry éƒ½æ˜¯ååˆ†å¼ºå¤§çš„ REPLã€‚ä¸ºä»€ä¹ˆè¿™é‡Œè¦æåŠ REPL å‘¢ï¼Ÿ&lt;strong&gt;å› ä¸ºåœ¨è¿™ä¸ªåå­—ä¸­ï¼ŒE å°±æ˜¯ eval çš„æ„æ€ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;REPL å¯¹åº”çš„è‹±æ–‡æ˜¯ &lt;strong&gt;Read-Eval-Print Loop&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1602156287860-47a6a0d4-e12b-40bd-8a02-7f18a56acf4e.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Read è¯»å…¥ä¸€ä¸ªæ¥è‡ªäºç”¨æˆ·çš„è¡¨è¾¾å¼ï¼Œå°†å…¶æ”¾å…¥å†…å­˜ï¼›&lt;/li&gt;
  &lt;li&gt;Eval æ±‚å€¼å‡½æ•°ï¼Œè´Ÿè´£å¤„ç†å†…éƒ¨çš„æ•°æ®ç»“æ„å¹¶å¯¹ä¸Šä¸‹æ–‡é€»è¾‘æ±‚å€¼ï¼›&lt;/li&gt;
  &lt;li&gt;Print è¾“å‡ºæ–¹æ³•ï¼Œå°†ç»“æœå‘ˆç°ç»™ç”¨æˆ·ï¼Œå®Œæˆäº¤äº’ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;REPL çš„æ¨¡å‹è®©å¤§å®¶å¯¹äºè¯­è¨€çš„å­¦ä¹ å’Œè°ƒè¯•ä¹Ÿæœ‰ç€å¢é€Ÿä½œç”¨ï¼Œå› ä¸ºâ€œRead - Eval - Printâ€ è¿™ç§å¾ªç¯è¦æ¯” â€œCode - Compile - Run - Debugâ€ è¿™ç§å¾ªç¯æ›´åŠ æ•æ·ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ Lisp çš„æ€æƒ³ä¸­ï¼Œä¸ºäº†å®ç°ä¸€ä¸ª Lisp REPL ï¼Œåªéœ€è¦å®ç°è¿™ä¸‰ä¸ªå‡½æ•°å’Œä¸€ä¸ªè½®å¾ªçš„å‡½æ•°å³å¯ã€‚å½“ç„¶è¿™é‡Œæˆ‘ä»¬å¿½ç•¥æ‰å¤æ‚çš„æ±‚å€¼å‡½æ•°ï¼Œå› ä¸ºå®ƒå°±æ˜¯ä¸€ä¸ªè§£é‡Šå™¨ã€‚&lt;/p&gt;

&lt;p&gt;æœ‰äº†è¿™ä¸ªæ€æƒ³ï¼Œä¸€ä¸ªæœ€ç®€å•çš„ REPL å°±å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„å½¢å¼è¡¨è¾¾ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# Lisp ä¸­&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;loop&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Ruby ä¸­&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;case&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;ç®€å•èŠèŠ-hotpatch&quot;&gt;ç®€å•èŠèŠ HotPatch&lt;/h2&gt;

&lt;p&gt;å¤§çº¦åœ¨ 2 å¹´å‰ï¼ŒiOS æ¯”è¾ƒæµè¡Œä½¿ç”¨ JSPatch/RN åŸºäº JavaScriptCore æä¾›çš„ iOS çƒ­ä¿®å¤å’ŒåŠ¨æ€åŒ–æ–¹æ¡ˆã€‚å…¶æ ¸å¿ƒçš„æ€è·¯åŸºæœ¬éƒ½æ˜¯ä¸‹å‘ JavaScript è„šæœ¬æ¥è°ƒç”¨ Objective-Cï¼Œä»è€Œå®ç°é€»è¾‘æ³¨å…¥ã€‚&lt;/p&gt;

&lt;p&gt;JSPatch å°¤å…¶è¢«å¤§å®¶æ‰€çŸ¥ï¼Œéœ€è¦ç¼–å†™å¤§é‡çš„ JavaScript ä»£ç æ¥è°ƒç”¨ Objective-C æ–¹æ³•ï¼Œå½“ç„¶å®˜æ–¹ä¹Ÿçœ‹åˆ°äº†è¿™ä¸€æ•ˆç‡çš„æ´¼åœ°ï¼Œå¹¶åˆ¶ä½œäº† JSPatch çš„è¯­æ³•è½¬åŒ–å™¨æ¥é—´æ¥ä¼˜åŒ–è¿™ä¸€è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯æ— è®ºå¦‚ä½•ä¼˜åŒ–ï¼Œå…¶å®æœ€å¤§çš„æ ¹æœ¬é—®é¢˜æ˜¯ Objective-C è¿™é—¨è¯­è¨€ä¸å…·å¤‡ Evaluation çš„å¯ eval ç‰¹æ€§ï¼Œå€˜è‹¥æ‹¥æœ‰è¯¥ç‰¹æ€§ï¼Œé‚£å…¶å®å°±å¯ä»¥è·¨è¶Šä½¿ç”¨ JavaScript åšæ¡¥æ¥çš„è¯¸å¤šé—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬éƒ½çŸ¥é“ Objective-C çš„ Runtime åˆ©ç”¨æ¶ˆæ¯è½¬å‘å¯ä»¥åŠ¨æ€æ‰§è¡Œä»»ä½• Objective-C æ–¹æ³•ï¼Œè¿™ä¹Ÿå°±ç»™äº†æˆ‘ä»¬ä¸€ä¸ªå¯ç¤ºã€‚å‡å¦‚æˆ‘ä»¬&lt;strong&gt;è‡ªåˆ¶ä¸€ä¸ªè½»é‡çº§è§£é‡Šå™¨ï¼ŒåŠ¨æ€è§£é‡Š Objective-C ä»£ç ï¼Œåˆ©ç”¨ Runtime æ¶ˆæ¯è½¬å‘æ¥åŠ¨æ€æ‰§è¡Œ Objective-C æ–¹æ³•ï¼Œå°±å¯ä»¥å®ç°ä¸€ä¸ªâ€œå‡† eval æ–¹æ³•â€&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1602158120322-b10b302a-4bde-4a4e-8324-4f5830e7c2fc.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™ç§æ€è·¯åœ¨ GitHub ä¸Šä¹Ÿå·²ç»æœ‰æœ‹å‹å¼€æºå‡ºäº† Demo - &lt;a href=&quot;https://github.com/lilidan/OCEval&quot;&gt;OCEval&lt;/a&gt;ã€‚ä¸åŒäº Clang çš„ç¼–è¯‘è¿‡ç¨‹ï¼Œä»–è¿›è¡Œäº†ç²¾ç®€ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;å»é™¤äº† Preprocesser çš„é¢„ç¼–è¯‘ç¯èŠ‚ï¼Œä¿ç•™äº† Lexer è¯æ³•åˆ†æå’Œ Parser è¯­æ³•åˆ†æï¼Œ&lt;/li&gt;
  &lt;li&gt;åˆ©ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSMethodSignature&lt;/code&gt; å°è£…æ–¹æ³•ï¼Œç»“åˆé€’å½’ä¸‹é™ï¼Œä½¿ç”¨ Runtime å¯¹æ–¹æ³•è¿›è¡Œæ¶ˆæ¯è½¬å‘ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;åˆ©ç”¨è¿™ç§æ€è·¯çš„è¿˜æœ‰å¦å¤–ä¸€ä¸ª &lt;a href=&quot;https://github.com/SilverFruity/OCRunner&quot;&gt;OCRunner&lt;/a&gt; é¡¹ç›®ã€‚&lt;/p&gt;

&lt;p&gt;è¿™äº›éƒ½æ˜¯é€šè¿‡è‡ªåˆ¶è§£é‡Šå™¨ï¼Œå®ç° eval ç‰¹æ€§ï¼Œè¿›è€Œé…åˆ libffi æ¥å®ç°ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ruby-ä¸­çš„-eval-å’Œ-binding&quot;&gt;Ruby ä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;binding&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Ruby ä¸­çš„ eval æ–¹æ³•å…¶å®å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯å°† Ruby ä»£ç ä»¥å­—ç¬¦ä¸²çš„å½¢å¼ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œç„¶åè¿›è¡Œæ‰§è¡Œã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Hello'&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;str + ' CocoaPods'&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# Hello CocoaPods&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢å°±æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å‘ç°ä¼ å…¥çš„ä»£ç  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;str + ' CocoaPods'&lt;/code&gt;Â  åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval&lt;/code&gt;Â æ–¹æ³•ä¸­å·²ç»å˜æˆ Ruby ä»£ç æ‰§è¡Œï¼Œå¹¶è¿”å›ç»“æœ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;'Hello CocoaPods'&lt;/code&gt;Â  å­—ç¬¦ä¸²ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨&lt;a href=&quot;/2020/09/16/cocoapods-story-4.html&quot;&gt;ã€ŒPodfile çš„è§£æé€»è¾‘ã€&lt;/a&gt;ä¸­è®²åˆ°ï¼Œ CocoaPods ä¸­ä¹Ÿä½¿ç”¨äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval&lt;/code&gt;Â æ–¹æ³•ï¼Œä»è€Œä»¥ Ruby è„šæœ¬çš„å½¢å¼ï¼Œæ‰§è¡Œäº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt;Â æ–‡ä»¶ä¸­çš„é€»è¾‘ã€‚&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;from_ruby&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ... &lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;podfile&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Podfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;begin&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;# æ‰§è¡Œ Podfile ä¸­çš„é€»è¾‘&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;rescue&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Invalid `&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;basename&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;` file: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;DSLError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;podfile&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å½“ç„¶ï¼Œåœ¨ CocoaPods ä¸­ä»…ä»…æ˜¯ç”¨äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval&lt;/code&gt; æ–¹æ³•çš„ç¬¬ä¸€å±‚ï¼Œå¯¹äºæˆ‘ä»¬å­¦ä¹ è€…æ¥è¯´è‚¯å®šä¸èƒ½æ»¡è¶³äºæ­¤ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ Ruby ä¸­ï¼Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Kernel&lt;/code&gt;Â æœ‰ä¸€ä¸ªæ–¹æ³• &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;binding&lt;/code&gt; ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ª Binding ç±»å‹çš„å¯¹è±¡ã€‚è¿™ä¸ª Binding å¯¹è±¡å°±æ˜¯æˆ‘ä»¬ä¿—ç§°çš„&lt;strong&gt;ç»‘å®š&lt;/strong&gt;ï¼Œå®ƒå°è£…äº†å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡çš„æ‰€æœ‰ç»‘å®šï¼ŒåŒ…æ‹¬å˜é‡ã€æ–¹æ³•ã€Block å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;self&lt;/code&gt; çš„åç§°ç»‘å®šç­‰ï¼Œè¿™äº›ç»‘å®šç›´æ¥å†³å®šäº†é¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„æ‰§è¡Œç¯å¢ƒã€‚&lt;/p&gt;

&lt;p&gt;é‚£ä¹ˆè¿™ä¸ª Binding å¯¹è±¡åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval&lt;/code&gt;Â æ–¹æ³•ä¸­æ€ä¹ˆä½¿ç”¨å‘¢ï¼Ÿå…¶å®å°±æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval&lt;/code&gt; æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚è¿™ä¸ªåœ¨ CocoaPods ä¸­è¿è¡Œ Podfile ä»£ç ä¸­å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°ã€‚æˆ‘ä»¬ä¸‹é¢æ¥åšä¸€ä¸ªä¾‹å­ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;foo&lt;/span&gt; 
  &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Gua'&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;binding&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'p name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# Gua&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;foo&lt;/code&gt;Â æ–¹æ³•å°±æ˜¯æˆ‘ä»¬ä¸Šé¢è¯´çš„æ‰§è¡Œç¯å¢ƒï¼Œåœ¨è¿™ä¸ªç¯å¢ƒé‡Œå®šä¹‰äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;name&lt;/code&gt;Â è¿™ä¸ªå˜é‡ï¼Œå¹¶åœ¨æ–¹æ³•ä½“æœ€åè¿”å› &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;binding&lt;/code&gt; æ–¹æ³•è°ƒç”¨ç»“æœã€‚åœ¨ä¸‹é¢ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval&lt;/code&gt;Â æ–¹æ³•çš„æ—¶å€™ï¼Œå½“ä½œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Kernel#binding&lt;/code&gt;Â å…¥å‚ä¼ å…¥ï¼Œä¾¿å¯ä»¥æˆåŠŸè¾“å‡º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;name&lt;/code&gt;Â å˜é‡ã€‚&lt;/p&gt;

&lt;h2 id=&quot;toplevel_binding-å…¨å±€å¸¸é‡&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TOPLEVEL_BINDING&lt;/code&gt; å…¨å±€å¸¸é‡&lt;/h2&gt;

&lt;p&gt;åœ¨ Ruby ä¸­ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main&lt;/code&gt; å¯¹è±¡æ˜¯æœ€é¡¶çº§èŒƒå›´ï¼ŒRuby ä¸­çš„ä»»ä½•å¯¹è±¡éƒ½è‡³å°‘éœ€è¦åœ¨æ¬¡ä½œç”¨åŸŸèŒƒå›´å†…è¢«å®ä¾‹åŒ–ã€‚ä¸ºäº†éšæ—¶éšåœ°åœ°è®¿é—® &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main&lt;/code&gt; å¯¹è±¡çš„ä¸Šä¸‹æ–‡ï¼ŒRuby æä¾›äº†ä¸€ä¸ªåä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TOPLEVEL_BINDING&lt;/code&gt; çš„å…¨å±€å¸¸é‡ï¼Œ&lt;strong&gt;å®ƒæŒ‡å‘ä¸€ä¸ªå°è£…äº†é¡¶çº§ç»‘å®šçš„å¯¹è±¡&lt;/strong&gt;ã€‚
ä¾¿äºç†è§£ï¼Œä¸¾ä¸ªä¾‹å­ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;vi&quot;&gt;@a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Hello&quot;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Addition&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;add&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;TOPLEVEL_BINDING&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;@a += ' Gua'&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Addition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;add&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;TOPLEVEL_BINDING&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;receiver&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# main&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@a&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# Hello Gua&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ®µä»£ç ä¸­ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Binding#receiver&lt;/code&gt;Â æ–¹æ³•è¿”å›Â &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Kernel#binding&lt;/code&gt;Â æ¶ˆæ¯çš„æ¥æ”¶è€…ã€‚ä¸ºæ­¤ï¼Œåˆ™ä¿å­˜äº†è°ƒç”¨æ‰§è¡Œä¸Šä¸‹æ–‡ - åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œæ˜¯Â &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main&lt;/code&gt;Â å¯¹è±¡ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶åæˆ‘ä»¬åœ¨ Addition ç±»çš„å®ä¾‹ä¸­ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TOPLEVEL_BINDING&lt;/code&gt; å…¨å±€å¸¸é‡è®¿é—®å…¨å±€çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@a&lt;/code&gt;Â å˜é‡ã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ€»è¯´-ruby-eval-ç‰¹æ€§&quot;&gt;æ€»è¯´ Ruby Eval ç‰¹æ€§&lt;/h2&gt;

&lt;p&gt;ä»¥ä¸Šçš„ç®€å•ä»‹ç»å¦‚æœä½ æ›¾ç»é˜…è¯»è¿‡ SICPï¼ˆStructture and Interpretation of Computer Programsï¼‰è¿™ä¸€ç¥ä¹¦çš„ç¬¬å››ç« åï¼Œä¸€å®šä¼šæœ‰æ›´åŠ æ·±åˆ»çš„ç†è§£ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æˆ‘ä»¬å°†æ‰€æœ‰çš„è¯­å¥å½“ä½œæ±‚å€¼ï¼Œç”¨è¯­è¨€å»æè¿°è¿‡ç¨‹ï¼Œç”¨ä¸è¢«æ±‚å€¼çš„è¯­è¨€ç›¸åŒçš„è¯­è¨€å†™å‡ºçš„æ±‚å€¼å™¨è¢«ç§°ä½œå…ƒå¾ªç¯ï¼›eval åœ¨å…ƒå¾ªç¯ä¸­ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼å’Œä¸€ä¸ªç¯å¢ƒï¼Œè¿™ä¹Ÿä¸ Ruby çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval&lt;/code&gt; æ–¹æ³•å®Œå…¨å»åˆã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ä¸å¾—ä¸è¯´ï¼ŒRuby çš„å¾ˆå¤šæ€æƒ³ï¼Œç«™åœ¨ SICP çš„è‚©è†€ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1602158921983-a4538257-84e2-48e8-bd24-6d6d3bbc9eb0.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;ç±»ä¼¼äº-method-swizzling-çš„-alias&quot;&gt;ç±»ä¼¼äº Method Swizzling çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;alias&lt;/code&gt;&lt;/h1&gt;

&lt;p&gt;å¯¹äºå¹¿å¤§ iOSer ä¸€å®šéƒ½ååˆ†äº†è§£è¢«ç§°ä½œ Runtime é»‘é­”æ³•çš„ Method Swizzlingã€‚è¿™å…¶å®æ˜¯åŠ¨æ€è¯­è¨€å¤§éƒ½å…·æœ‰éƒ½ç‰¹æ€§ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ iOS ä¸­ï¼Œä½¿ç”¨ Selector å’Œ Implementationï¼ˆå³ IMPï¼‰çš„æŒ‡å‘äº¤æ¢ï¼Œä»è€Œå®ç°äº†æ–¹æ³•çš„æ›¿æ¢ã€‚è¿™ç§æ›¿æ¢æ˜¯å‘ç”Ÿåœ¨è¿è¡Œæ—¶çš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1602159208203-64baa017-a1e9-4383-9b78-d79f675bce67.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨ Ruby ä¸­ï¼Œä¹Ÿæœ‰ç±»ä¼¼çš„æ–¹æ³•ã€‚ä¸ºäº†å…¨é¢çš„äº†è§£ Ruby ä¸­çš„ â€œMethod Swizzlingâ€ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£è¿™å‡ ä¸ªå…³äºå…ƒç¼–ç¨‹æ€æƒ³çš„æ¦‚å¿µï¼š&lt;strong&gt;Open Class ç‰¹æ€§ä¸ç¯ç»•åˆ«åã€‚&lt;/strong&gt;è¿™ä¸¤ä¸ªç‰¹æ€§ä¹Ÿæ˜¯å®ç° CocoaPods æ’ä»¶åŒ–çš„æ ¸å¿ƒä¾èµ–ã€‚&lt;/p&gt;

&lt;h2 id=&quot;open-class-ä¸ç‰¹å¼‚æ–¹æ³•&quot;&gt;Open Class ä¸ç‰¹å¼‚æ–¹æ³•&lt;/h2&gt;

&lt;p&gt;Open Class ç‰¹æ€§å°±æ˜¯åœ¨ä¸€ä¸ªç±»å·²ç»å®Œæˆå®šä¹‰ä¹‹åï¼Œå†æ¬¡å‘å…¶ä¸­æ·»åŠ æ–¹æ³•ã€‚åœ¨ Ruby ä¸­çš„å®ç°æ–¹æ³•å°±æ˜¯&lt;strong&gt;å®šä¹‰åŒåç±»&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ Ruby ä¸­ä¸ä¼šåƒ Objective-C å’Œ Swift ä¸€æ ·è¢«è®¤ä¸ºæ˜¯ç¼–è¯‘é”™è¯¯ï¼Œåè€…éœ€è¦ä½¿ç”¨ Category å’Œ Extension ç‰¹æ®Šçš„å…³é”®å­—è¯­æ³•æ¥çº¦å®šæ˜¯æ‰©å±•ã€‚&lt;strong&gt;è€Œæ˜¯æŠŠåŒåç±»ä¸­çš„å®šä¹‰æ–¹æ³•å…¨éƒ¨é™„åŠ åˆ°å·²å®šä¹‰çš„æ—§ç±»ä¸­ï¼Œä¸é‡åçš„å¢åŠ ï¼Œé‡åçš„è¦†ç›–&lt;/strong&gt;ã€‚ä»¥ä¸‹ä¸ºç¤ºä¾‹ä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;m1&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;m1&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;m2&lt;/span&gt; 
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;m2&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;m1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# m1&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;m2&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# m2&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;m1&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;m1 new&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;m1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# m1 new&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;m2&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# m2&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;ç‰¹å¼‚æ–¹æ³•&lt;/strong&gt;å’Œ Open Class æœ‰ç‚¹ç±»ä¼¼ï¼Œä¸è¿‡&lt;strong&gt;é™„åŠ çš„æ–¹æ³•ä¸æ˜¯é™„åŠ åˆ°ç±»ä¸­ï¼Œè€Œæ˜¯é™„åŠ åˆ°ç‰¹å®šåˆ°å®ä¾‹ä¸­&lt;/strong&gt;ã€‚è¢«é™„åŠ åˆ°æ–¹æ³•ä»…ä»…åœ¨ç›®æ ‡å®ä¾‹ä¸­å­˜åœ¨ï¼Œä¸ä¼šå½±å“è¯¥ç±»åˆ°å…¶ä»–å®ä¾‹ã€‚ç¤ºä¾‹ä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;m1&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;m1&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;foo1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;foo1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;m2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;m2&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;foo1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;m1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# m1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;foo1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;m2&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# m2&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;foo2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;foo2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;m1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# m1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# foo2.m2 undefined method `m2' for #&amp;lt;Foo:0x00007f88bb08e238&amp;gt; (NoMethodError)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;ç¯ç»•åˆ«åaround-aliases&quot;&gt;ç¯ç»•åˆ«åï¼ˆAround Aliasesï¼‰&lt;/h2&gt;

&lt;p&gt;å…¶å®ç¯ç»•åˆ«ååªæ˜¯ä¸€ç§ç‰¹æ®Šçš„å†™æ³•ï¼Œè¿™é‡Œä½¿ç”¨äº† Ruby çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;alias&lt;/code&gt;Â å…³é”®å­—ä»¥åŠä¸Šæ–‡æåˆ°çš„ Open Class çš„ç‰¹æ€§ã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆå…ˆä»‹ç»ä¸€ä¸‹ Ruby çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;alias&lt;/code&gt;Â å…³é”®å­—ï¼Œå…¶å®å¾ˆç®€å•ï¼Œ&lt;strong&gt;å°±æ˜¯ç»™ä¸€ä¸ªæ–¹æ³•èµ·ä¸€ä¸ªåˆ«å&lt;/strong&gt;ã€‚ä½†æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;alias&lt;/code&gt; é…åˆä¸Šä¹‹å‰çš„ Open Class ç‰¹æ€§ï¼Œå°±å¯ä»¥è¾¾åˆ°æˆ‘ä»¬æ‰€è¯´çš„ Method Swizzling æ•ˆæœã€‚&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;m1&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;m1&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;foo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;m1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# m1&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;alias&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:origin_m1&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:m1&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;m1&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;origin_m1&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Hook it!&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;m1&lt;/span&gt; 
&lt;span class=&quot;c1&quot;&gt;# m1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Hook it!&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è™½ç„¶åœ¨ç¬¬ä¸€ä¸ªä½ç½®å·²ç»å®šä¹‰äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Foo#m1&lt;/code&gt;Â  æ–¹æ³•ï¼Œä½†æ˜¯ç”±äº Open Class çš„é‡å†™æœºåˆ¶ä»¥åŠ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;alias&lt;/code&gt;Â çš„åˆ«åè®¾ç½®ï¼Œæˆ‘ä»¬å°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;m1&lt;/code&gt;Â å·²ç»ä¿®æ”¹æˆäº†æ–°çš„æ–¹æ³•ï¼Œæ—§çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;m1&lt;/code&gt;Â æ–¹æ³•ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;origin_m1&lt;/code&gt;Â ä¹Ÿå¯ä»¥è°ƒç”¨åˆ°ã€‚å¦‚æ­¤ä¹Ÿå°±å®Œæˆäº†ç±»ä¼¼äº Objective-C ä¸­çš„ Method Swizzling æœºåˆ¶ã€‚&lt;/p&gt;

&lt;p&gt;æ€»ç»“ä¸€ä¸‹ç¯ç»•åˆ«åï¼Œå…¶å®å°±æ˜¯&lt;strong&gt;ç»™æ–¹æ³•å®šä¹‰ä¸€ä¸ªåˆ«åï¼Œç„¶åé‡æ–°å®šä¹‰è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨æ–°çš„æ–¹æ³•ä¸­ä½¿ç”¨åˆ«åè°ƒç”¨è€æ–¹æ³•&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1602159579722-ad6461a6-31cd-407e-b718-089e9398cee3.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;çŒ´å­è¡¥ä¸monkey-patch&quot;&gt;çŒ´å­è¡¥ä¸ï¼ˆMonkey Patchï¼‰&lt;/h2&gt;

&lt;p&gt;æ—¢ç„¶è¯´åˆ°äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;alias&lt;/code&gt;Â åˆ«åï¼Œé‚£ä¹ˆå°±é¡ºä¾¿è¯´ä¸€ä¸‹&lt;strong&gt;çŒ´å­è¡¥ä¸&lt;/strong&gt;è¿™ä¸ªç‰¹æ€§ã€‚çŒ´å­è¡¥ä¸&lt;strong&gt;åŒºåˆ«äºç¯ç»•åˆ«åçš„æ–¹å¼ï¼Œå®ƒä¸»è¦ç›®çš„æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€æ›¿æ¢å¹¶å¯ä»¥æš‚æ—¶æ€§é¿å…ç¨‹åºå´©æºƒ&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å…ˆèŠèŠèƒŒæ™¯ï¼Œç”±äº Open Class å’Œç¯ç»•åˆ«åè¿™ä¸¤ä¸ªç‰¹æ€§ï¼ŒRuby åœ¨è¿è¡Œæ—¶æ”¹å˜å±æ€§å·²ç»ååˆ†å®¹æ˜“äº†ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œå°±æ˜¯ **éœ€è¦åŠ¨æ€çš„è¿›è¡Œ Patch ** ï¼Œè€Œä¸æ˜¯åªè¦ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;alias&lt;/code&gt;Â å°±å…¨å±€æ›¿æ¢ï¼Œè¿™è¦æ€ä¹ˆåšå‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;è¿™é‡Œæˆ‘ä»¬å¼•å…¥ Ruby ä¸­çš„å¦å¤–ä¸¤ä¸ªå…³é”®å­— &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;refine&lt;/code&gt;Â å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;using&lt;/code&gt;Â ï¼Œé€šè¿‡å®ƒä»¬æˆ‘ä»¬å¯ä»¥åŠ¨æ€å®ç° Patchã€‚ä¸¾ä¸ªä¾‹å­ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;m1&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;m1&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;foo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;m1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# m1&lt;/span&gt;

&lt;span class=&quot;s2&quot;&gt;&quot;&quot;&quot;
å®šä¹‰ä¸€ä¸ª Patch
&quot;&quot;&quot;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;TemproaryPatch&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;refine&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Foo&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;m1&lt;/span&gt; 
      &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;m1 bugfix&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;TemproaryPatch&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;foo2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Foo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;foo2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;m1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# m1 bugfix&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬å…ˆä½¿ç”¨äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;refine&lt;/code&gt;Â æ–¹æ³•é‡æ–°å®šä¹‰äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;m1&lt;/code&gt;Â æ–¹æ³•ï¼Œå®šä¹‰å®Œä¹‹åå®ƒå¹¶ä¸ä¼šç«‹å³ç”Ÿæ•ˆï¼Œè€Œæ˜¯åœ¨æˆ‘ä»¬ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;using TemporaryPatch&lt;/code&gt;Â æ—¶ï¼Œæ‰ä¼šç”Ÿæ•ˆã€‚è¿™æ ·ä¹Ÿå°±å®ç°äº†åŠ¨æ€ Patch çš„éœ€æ±‚ã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ€»è¯´-alias-ç‰¹æ€§&quot;&gt;æ€»è¯´ alias ç‰¹æ€§&lt;/h2&gt;

&lt;p&gt;Ruby çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;alias&lt;/code&gt;Â ä½¿ç”¨å®åœ¨æ—¶å¤ªçµæ´»äº†ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†ä¸ºä»€ä¹ˆ Ruby å¾ˆå®¹æ˜“çš„å°±å¯ä»¥å®ç°æ’ä»¶åŒ–èƒ½åŠ›ã€‚å› ä¸ºæ‰€æœ‰çš„æ–¹æ³•éƒ½å¯ä»¥é€šè¿‡ç¯ç»•åˆ«åçš„æ–¹å¼è¿›è¡Œ Hook ï¼Œä»è€Œå®ç°è‡ªå·±çš„ Gem æ’ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;é™¤äº†ä»¥ä¸Šä»‹ç»çš„ä¸€äº›æ‰©å±•æ–¹å¼ï¼Œå…¶å® Ruby è¿˜æœ‰æ›´å¤šä¿®æ”¹æ–¹æ¡ˆã€‚ä¾‹å¦‚ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;alias_method&lt;/code&gt; ã€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;extend&lt;/code&gt;Â ã€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;refinement&lt;/code&gt;Â ç­‰ã€‚å¦‚æœåé¢ CocoaPods æœ‰æ‰€æ¶‰åŠï¼Œæˆ‘ä»¬ä¹Ÿä¼šè·Ÿè¿›ä»‹ç»ä¸€äº›ã€‚&lt;/p&gt;

&lt;h1 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h1&gt;

&lt;p&gt;æœ¬æ–‡é€šè¿‡ CocoaPods ä¸­çš„ä¸¤ä¸ªä½¿ç”¨åˆ°çš„ç‰¹æ€§ Eval å’Œ Aliasï¼Œè®²è¿°äº†å¾ˆå¤š Ruby å½“ä¸­æœ‰æ„æ€çš„è¯­æ³•ç‰¹æ€§å’Œå…ƒç¼–ç¨‹æ€æƒ³ã€‚Ruby åœ¨ä¼—å¤šçš„è¯­è¨€ä¸­ï¼Œå› ä¸ºæ³¨é‡æ€æƒ³å’Œè¯­æ³•ä¼˜é›…è„±é¢–è€Œå‡ºï¼Œä¹Ÿè®©æˆ‘ä¸ªäººå¯¹è¯­è¨€æœ‰å¾ˆå¤§çš„æ€æƒ³æå‡ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ æœ‰ç»å†ï¼Œæˆ‘ä¹Ÿå¼ºçƒˆæ¨èä½ é˜…è¯» SICP å’Œã€ŒRuby å…ƒç¼–ç¨‹ã€è¿™ä¸¤æœ¬ä¹¦ï¼Œç›¸ä¿¡å®ƒä»¬ä¹Ÿä¼šè®©ä½ åœ¨è¯­è¨€è®¾è®¡çš„ç†è§£ä¸Šï¼Œæœ‰ç€æ›´æ·±çš„è®¤è¯†ã€‚ä»å…±æ€§æç‚¼åˆ°æ–¹æ³•è®ºï¼Œä»è¯­è¨€å‡ååˆ°ç»éªŒã€‚&lt;/p&gt;

&lt;h1 id=&quot;çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†&quot;&gt;çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†&lt;/h1&gt;

&lt;p&gt;è¿™é‡Œç½—åˆ—äº†å››ä¸ªé—®é¢˜ç”¨æ¥è€ƒå¯Ÿä½ æ˜¯å¦å·²ç»æŒæ¡äº†è¿™ç¯‡æ–‡ç« ï¼Œä½ å¯ä»¥åœ¨è¯„è®ºåŒºåŠæ—¶å›ç­”é—®é¢˜ä¸ä½œè€…äº¤æµã€‚å¦‚æœæ²¡æœ‰å»ºè®®ä½ åŠ å…¥&lt;strong&gt;æ”¶è—&lt;/strong&gt;å†æ¬¡é˜…è¯»ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;REPL çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä»€ä¹ˆï¼Ÿä¸ Evaluation ç‰¹æ€§æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;Ruby ä¸­ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval&lt;/code&gt; æ–¹æ³•ä½œç”¨æ˜¯ä»€ä¹ˆï¼ŸBinding å¯¹è±¡ç”¨æ¥å¹²ä»€ä¹ˆï¼Ÿ&lt;/li&gt;
  &lt;li&gt;Ruby æ˜¯å¦å¯ä»¥å®ç° Method Swizzling è¿™ç§åŠŸèƒ½ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;Open Class æ˜¯ä»€ä¹ˆï¼Ÿç¯ç»•åˆ«åå¦‚ä½•åˆ©ç”¨ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;</content><author><name>å†¬ç“œ</name><email>gua@desgard.com</email></author><category term="CocoaPods å†é™©è®°" /><category term="Ruby in CocoaPods" /><category term="Ruby" /><summary type="html">CocoaPods æ˜¯ä½¿ç”¨ Ruby è¿™é—¨è„šæœ¬è¯­è¨€å®ç°çš„å·¥å…·ã€‚Ruby æœ‰å¾ˆå¤šä¼˜è´¨çš„ç‰¹æ€§è¢« CocoaPods æ‰€åˆ©ç”¨ï¼Œä¸ºäº†åœ¨åç»­çš„æºç é˜…è¯»ä¸­ä¸ä¼šè¢«è¿™äº›ç”¨æ³•é˜»å¡ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªç³»åˆ—ä¸­ï¼Œä¼šç»™å‡ºä¸€äº› CocoaPods çš„ç•ªå¤–ç¯‡ï¼Œæ¥ä»‹ç» Ruby åŠå…¶å½“ä¸­çš„ä¸€äº›è¯­è¨€æ€æƒ³ã€‚ ä»Šå¤©è¿™ä¸€ç¯‡æˆ‘ä»¬æ¥èŠèŠ Ruby ä¸­çš„ä¸€äº›ååˆ†â€œåŠ¨æ€â€çš„ç‰¹æ€§ï¼ševal ç‰¹æ€§å’Œ alias ç‰¹æ€§ã€‚ è¯´è¯´ Eval ç‰¹æ€§ æºè‡ª Lisp çš„ Evaluation åœ¨ä¸€äº›è¯­è¨€ä¸­ï¼Œeval æ–¹æ³•æ˜¯å°†ä¸€ä¸ªå­—ç¬¦ä¸²å½“ä½œè¡¨è¾¾å¼æ‰§è¡Œè€Œè¿”å›ä¸€ä¸ªç»“æœçš„æ–¹æ³•ï¼›åœ¨å¦å¤–ä¸€äº›ä¸­ï¼Œeval å®ƒæ‰€ä¼ å…¥çš„ä¸ä¸€å®šæ˜¯å­—ç¬¦ä¸²ï¼Œè¿˜æœ‰å¯èƒ½æ˜¯æŠ½è±¡å¥æ³•å½¢åŠ¿ï¼ŒLisp å°±æ˜¯è¿™ç§è¯­è¨€ï¼Œå¹¶ä¸” Lisp ä¹Ÿæ˜¯é¦–å…ˆæå‡ºä½¿ç”¨ evalÂ æ–¹æ³•çš„è¯­è¨€ï¼Œå¹¶æå‡ºäº† Evaluation è¿™ä¸ªç‰¹æ€§ã€‚è¿™ä¹Ÿä½¿å¾— Lisp è¿™é—¨è¯­è¨€å¯ä»¥å®ç°è„±ç¦»ç¼–è¯‘è¿™å¥—ä½“ç³»è€ŒåŠ¨æ€æ‰§è¡Œçš„ç»“æœã€‚ Lisp ä¸­çš„ evalÂ æ–¹æ³•é¢„æœŸæ˜¯ï¼šå°†è¡¨è¾¾å¼ä½œä¸ºå‚æ•°ä¼ å…¥åˆ° evalÂ æ–¹æ³•ï¼Œå¹¶å£°æ˜ç»™å®šå½¢å¼çš„è¿”å›å€¼ï¼Œè¿è¡Œæ—¶åŠ¨æ€è®¡ç®—ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ª Lisp Evaluation ä»£ç çš„ä¾‹å­ï¼ˆÂ SchemeÂ æ–¹è¨€ RRS åŠä»¥åç‰ˆæœ¬ï¼‰ï¼š ; å°† f1 è®¾ç½®ä¸ºè¡¨è¾¾å¼ (+ 1 2 3) (define f1 '(+ 1 2 3)) ; æ‰§è¡Œ f1 (+ 1 2 3) è¿™ä¸ªè¡¨è¾¾å¼ï¼Œå¹¶è¿”å› 6 (eval f1 user-initial-environment) å¯èƒ½ä½ ä¼šè§‰å¾—ï¼šè¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„ç‰¹æ€§ï¼Œä¸ºä»€ä¹ˆä¼šç§°ä½œé»‘é­”æ³•ç‰¹æ€§ï¼Ÿ å› ä¸º Evaluation è¿™ç§å¯ eval ç‰¹æ€§æ˜¯å¾ˆå¤šæ€æƒ³ã€è½åœ°å·¥å…·çš„åŸºç¡€ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´ï¼Œä¸‹é¢æ¥è¯´å‡ ä¸ªå¾ˆå¸¸è§çš„åœºæ™¯ã€‚ REPL çš„æ ¸å¿ƒæ€æƒ³ å¦‚æœä½ æ˜¯ iOSerï¼Œä½ ä¸€å®šè¿˜ä¼šè®°å¾—å½“å¹´ Swift åˆšåˆšè¯ç”Ÿçš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªä¸»æ‰“çš„åŠŸèƒ½å°±æ˜¯ REPL äº¤äº’å¼å¼€å‘ç¯å¢ƒã€‚ å½“ç„¶ï¼Œä½œä¸ºåŠ¨æ€æ€§ååˆ†å¼ºå¤§çš„ Lisp å’Œ Ruby ä¹Ÿæœ‰å¯¹åº”çš„ REPL å·¥å…·ã€‚ä¾‹å¦‚ Ruby çš„ irb å’Œ pry éƒ½æ˜¯ååˆ†å¼ºå¤§çš„ REPLã€‚ä¸ºä»€ä¹ˆè¿™é‡Œè¦æåŠ REPL å‘¢ï¼Ÿå› ä¸ºåœ¨è¿™ä¸ªåå­—ä¸­ï¼ŒE å°±æ˜¯ eval çš„æ„æ€ã€‚ REPL å¯¹åº”çš„è‹±æ–‡æ˜¯ Read-Eval-Print Loopã€‚ Read è¯»å…¥ä¸€ä¸ªæ¥è‡ªäºç”¨æˆ·çš„è¡¨è¾¾å¼ï¼Œå°†å…¶æ”¾å…¥å†…å­˜ï¼› Eval æ±‚å€¼å‡½æ•°ï¼Œè´Ÿè´£å¤„ç†å†…éƒ¨çš„æ•°æ®ç»“æ„å¹¶å¯¹ä¸Šä¸‹æ–‡é€»è¾‘æ±‚å€¼ï¼› Print è¾“å‡ºæ–¹æ³•ï¼Œå°†ç»“æœå‘ˆç°ç»™ç”¨æˆ·ï¼Œå®Œæˆäº¤äº’ã€‚ REPL çš„æ¨¡å‹è®©å¤§å®¶å¯¹äºè¯­è¨€çš„å­¦ä¹ å’Œè°ƒè¯•ä¹Ÿæœ‰ç€å¢é€Ÿä½œç”¨ï¼Œå› ä¸ºâ€œRead - Eval - Printâ€ è¿™ç§å¾ªç¯è¦æ¯” â€œCode - Compile - Run - Debugâ€ è¿™ç§å¾ªç¯æ›´åŠ æ•æ·ã€‚ åœ¨ Lisp çš„æ€æƒ³ä¸­ï¼Œä¸ºäº†å®ç°ä¸€ä¸ª Lisp REPL ï¼Œåªéœ€è¦å®ç°è¿™ä¸‰ä¸ªå‡½æ•°å’Œä¸€ä¸ªè½®å¾ªçš„å‡½æ•°å³å¯ã€‚å½“ç„¶è¿™é‡Œæˆ‘ä»¬å¿½ç•¥æ‰å¤æ‚çš„æ±‚å€¼å‡½æ•°ï¼Œå› ä¸ºå®ƒå°±æ˜¯ä¸€ä¸ªè§£é‡Šå™¨ã€‚ æœ‰äº†è¿™ä¸ªæ€æƒ³ï¼Œä¸€ä¸ªæœ€ç®€å•çš„ REPL å°±å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„å½¢å¼è¡¨è¾¾ï¼š # Lisp ä¸­ (loop (print (eval (read)))) # Ruby ä¸­ while [case] print(eval(read)) end ç®€å•èŠèŠ HotPatch å¤§çº¦åœ¨ 2 å¹´å‰ï¼ŒiOS æ¯”è¾ƒæµè¡Œä½¿ç”¨ JSPatch/RN åŸºäº JavaScriptCore æä¾›çš„ iOS çƒ­ä¿®å¤å’ŒåŠ¨æ€åŒ–æ–¹æ¡ˆã€‚å…¶æ ¸å¿ƒçš„æ€è·¯åŸºæœ¬éƒ½æ˜¯ä¸‹å‘ JavaScript è„šæœ¬æ¥è°ƒç”¨ Objective-Cï¼Œä»è€Œå®ç°é€»è¾‘æ³¨å…¥ã€‚ JSPatch å°¤å…¶è¢«å¤§å®¶æ‰€çŸ¥ï¼Œéœ€è¦ç¼–å†™å¤§é‡çš„ JavaScript ä»£ç æ¥è°ƒç”¨ Objective-C æ–¹æ³•ï¼Œå½“ç„¶å®˜æ–¹ä¹Ÿçœ‹åˆ°äº†è¿™ä¸€æ•ˆç‡çš„æ´¼åœ°ï¼Œå¹¶åˆ¶ä½œäº† JSPatch çš„è¯­æ³•è½¬åŒ–å™¨æ¥é—´æ¥ä¼˜åŒ–è¿™ä¸€è¿‡ç¨‹ã€‚ ä½†æ˜¯æ— è®ºå¦‚ä½•ä¼˜åŒ–ï¼Œå…¶å®æœ€å¤§çš„æ ¹æœ¬é—®é¢˜æ˜¯ Objective-C è¿™é—¨è¯­è¨€ä¸å…·å¤‡ Evaluation çš„å¯ eval ç‰¹æ€§ï¼Œå€˜è‹¥æ‹¥æœ‰è¯¥ç‰¹æ€§ï¼Œé‚£å…¶å®å°±å¯ä»¥è·¨è¶Šä½¿ç”¨ JavaScript åšæ¡¥æ¥çš„è¯¸å¤šé—®é¢˜ã€‚ æˆ‘ä»¬éƒ½çŸ¥é“ Objective-C çš„ Runtime åˆ©ç”¨æ¶ˆæ¯è½¬å‘å¯ä»¥åŠ¨æ€æ‰§è¡Œä»»ä½• Objective-C æ–¹æ³•ï¼Œè¿™ä¹Ÿå°±ç»™äº†æˆ‘ä»¬ä¸€ä¸ªå¯ç¤ºã€‚å‡å¦‚æˆ‘ä»¬è‡ªåˆ¶ä¸€ä¸ªè½»é‡çº§è§£é‡Šå™¨ï¼ŒåŠ¨æ€è§£é‡Š Objective-C ä»£ç ï¼Œåˆ©ç”¨ Runtime æ¶ˆæ¯è½¬å‘æ¥åŠ¨æ€æ‰§è¡Œ Objective-C æ–¹æ³•ï¼Œå°±å¯ä»¥å®ç°ä¸€ä¸ªâ€œå‡† eval æ–¹æ³•â€ã€‚ è¿™ç§æ€è·¯åœ¨ GitHub ä¸Šä¹Ÿå·²ç»æœ‰æœ‹å‹å¼€æºå‡ºäº† Demo - OCEvalã€‚ä¸åŒäº Clang çš„ç¼–è¯‘è¿‡ç¨‹ï¼Œä»–è¿›è¡Œäº†ç²¾ç®€ï¼š å»é™¤äº† Preprocesser çš„é¢„ç¼–è¯‘ç¯èŠ‚ï¼Œä¿ç•™äº† Lexer è¯æ³•åˆ†æå’Œ Parser è¯­æ³•åˆ†æï¼Œ åˆ©ç”¨ NSMethodSignature å°è£…æ–¹æ³•ï¼Œç»“åˆé€’å½’ä¸‹é™ï¼Œä½¿ç”¨ Runtime å¯¹æ–¹æ³•è¿›è¡Œæ¶ˆæ¯è½¬å‘ã€‚ åˆ©ç”¨è¿™ç§æ€è·¯çš„è¿˜æœ‰å¦å¤–ä¸€ä¸ª OCRunner é¡¹ç›®ã€‚ è¿™äº›éƒ½æ˜¯é€šè¿‡è‡ªåˆ¶è§£é‡Šå™¨ï¼Œå®ç° eval ç‰¹æ€§ï¼Œè¿›è€Œé…åˆ libffi æ¥å®ç°ã€‚ Ruby ä¸­çš„ eval å’Œ binding Ruby ä¸­çš„ eval æ–¹æ³•å…¶å®å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯å°† Ruby ä»£ç ä»¥å­—ç¬¦ä¸²çš„å½¢å¼ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œç„¶åè¿›è¡Œæ‰§è¡Œã€‚ str = 'Hello' puts eval(&quot;str + ' CocoaPods'&quot;) # Hello CocoaPods ä¸Šé¢å°±æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å‘ç°ä¼ å…¥çš„ä»£ç  str + ' CocoaPods'Â  åœ¨ evalÂ æ–¹æ³•ä¸­å·²ç»å˜æˆ Ruby ä»£ç æ‰§è¡Œï¼Œå¹¶è¿”å›ç»“æœ 'Hello CocoaPods'Â  å­—ç¬¦ä¸²ã€‚ åœ¨ã€ŒPodfile çš„è§£æé€»è¾‘ã€ä¸­è®²åˆ°ï¼Œ CocoaPods ä¸­ä¹Ÿä½¿ç”¨äº† evalÂ æ–¹æ³•ï¼Œä»è€Œä»¥ Ruby è„šæœ¬çš„å½¢å¼ï¼Œæ‰§è¡Œäº† PodfileÂ æ–‡ä»¶ä¸­çš„é€»è¾‘ã€‚ def self.from_ruby(path, contents = nil) # ... podfile = Podfile.new(path) do begin # æ‰§è¡Œ Podfile ä¸­çš„é€»è¾‘ eval(contents, nil, path.to_s) rescue Exception =&amp;gt; e message = &quot;Invalid `#{path.basename}` file: #{e.message}&quot; raise DSLError.new(message, path, e, contents) end end podfile end å½“ç„¶ï¼Œåœ¨ CocoaPods ä¸­ä»…ä»…æ˜¯ç”¨äº† eval æ–¹æ³•çš„ç¬¬ä¸€å±‚ï¼Œå¯¹äºæˆ‘ä»¬å­¦ä¹ è€…æ¥è¯´è‚¯å®šä¸èƒ½æ»¡è¶³äºæ­¤ã€‚ åœ¨ Ruby ä¸­ï¼Œ KernelÂ æœ‰ä¸€ä¸ªæ–¹æ³• binding ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ª Binding ç±»å‹çš„å¯¹è±¡ã€‚è¿™ä¸ª Binding å¯¹è±¡å°±æ˜¯æˆ‘ä»¬ä¿—ç§°çš„ç»‘å®šï¼Œå®ƒå°è£…äº†å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡çš„æ‰€æœ‰ç»‘å®šï¼ŒåŒ…æ‹¬å˜é‡ã€æ–¹æ³•ã€Block å’Œ self çš„åç§°ç»‘å®šç­‰ï¼Œè¿™äº›ç»‘å®šç›´æ¥å†³å®šäº†é¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„æ‰§è¡Œç¯å¢ƒã€‚ é‚£ä¹ˆè¿™ä¸ª Binding å¯¹è±¡åœ¨ evalÂ æ–¹æ³•ä¸­æ€ä¹ˆä½¿ç”¨å‘¢ï¼Ÿå…¶å®å°±æ˜¯ eval æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚è¿™ä¸ªåœ¨ CocoaPods ä¸­è¿è¡Œ Podfile ä»£ç ä¸­å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°ã€‚æˆ‘ä»¬ä¸‹é¢æ¥åšä¸€ä¸ªä¾‹å­ï¼š def foo name = 'Gua' binding end eval('p name', foo) # Gua åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çš„ fooÂ æ–¹æ³•å°±æ˜¯æˆ‘ä»¬ä¸Šé¢è¯´çš„æ‰§è¡Œç¯å¢ƒï¼Œåœ¨è¿™ä¸ªç¯å¢ƒé‡Œå®šä¹‰äº† nameÂ è¿™ä¸ªå˜é‡ï¼Œå¹¶åœ¨æ–¹æ³•ä½“æœ€åè¿”å› binding æ–¹æ³•è°ƒç”¨ç»“æœã€‚åœ¨ä¸‹é¢ä½¿ç”¨ evalÂ æ–¹æ³•çš„æ—¶å€™ï¼Œå½“ä½œ Kernel#bindingÂ å…¥å‚ä¼ å…¥ï¼Œä¾¿å¯ä»¥æˆåŠŸè¾“å‡º nameÂ å˜é‡ã€‚ TOPLEVEL_BINDING å…¨å±€å¸¸é‡ åœ¨ Ruby ä¸­ main å¯¹è±¡æ˜¯æœ€é¡¶çº§èŒƒå›´ï¼ŒRuby ä¸­çš„ä»»ä½•å¯¹è±¡éƒ½è‡³å°‘éœ€è¦åœ¨æ¬¡ä½œç”¨åŸŸèŒƒå›´å†…è¢«å®ä¾‹åŒ–ã€‚ä¸ºäº†éšæ—¶éšåœ°åœ°è®¿é—® main å¯¹è±¡çš„ä¸Šä¸‹æ–‡ï¼ŒRuby æä¾›äº†ä¸€ä¸ªåä¸º TOPLEVEL_BINDING çš„å…¨å±€å¸¸é‡ï¼Œå®ƒæŒ‡å‘ä¸€ä¸ªå°è£…äº†é¡¶çº§ç»‘å®šçš„å¯¹è±¡ã€‚ ä¾¿äºç†è§£ï¼Œä¸¾ä¸ªä¾‹å­ï¼š @a = &quot;Hello&quot; class Addition def add TOPLEVEL_BINDING.eval(&quot;@a += ' Gua'&quot;) end end Addition.new.add p TOPLEVEL_BINDING.receiver # main p @a # Hello Gua è¿™æ®µä»£ç ä¸­ï¼ŒBinding#receiverÂ æ–¹æ³•è¿”å›Â Kernel#bindingÂ æ¶ˆæ¯çš„æ¥æ”¶è€…ã€‚ä¸ºæ­¤ï¼Œåˆ™ä¿å­˜äº†è°ƒç”¨æ‰§è¡Œä¸Šä¸‹æ–‡ - åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œæ˜¯Â mainÂ å¯¹è±¡ã€‚ ç„¶åæˆ‘ä»¬åœ¨ Addition ç±»çš„å®ä¾‹ä¸­ä½¿ç”¨ TOPLEVEL_BINDING å…¨å±€å¸¸é‡è®¿é—®å…¨å±€çš„ @aÂ å˜é‡ã€‚ æ€»è¯´ Ruby Eval ç‰¹æ€§ ä»¥ä¸Šçš„ç®€å•ä»‹ç»å¦‚æœä½ æ›¾ç»é˜…è¯»è¿‡ SICPï¼ˆStructture and Interpretation of Computer Programsï¼‰è¿™ä¸€ç¥ä¹¦çš„ç¬¬å››ç« åï¼Œä¸€å®šä¼šæœ‰æ›´åŠ æ·±åˆ»çš„ç†è§£ã€‚ æˆ‘ä»¬å°†æ‰€æœ‰çš„è¯­å¥å½“ä½œæ±‚å€¼ï¼Œç”¨è¯­è¨€å»æè¿°è¿‡ç¨‹ï¼Œç”¨ä¸è¢«æ±‚å€¼çš„è¯­è¨€ç›¸åŒçš„è¯­è¨€å†™å‡ºçš„æ±‚å€¼å™¨è¢«ç§°ä½œå…ƒå¾ªç¯ï¼›eval åœ¨å…ƒå¾ªç¯ä¸­ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼å’Œä¸€ä¸ªç¯å¢ƒï¼Œè¿™ä¹Ÿä¸ Ruby çš„ eval æ–¹æ³•å®Œå…¨å»åˆã€‚ ä¸å¾—ä¸è¯´ï¼ŒRuby çš„å¾ˆå¤šæ€æƒ³ï¼Œç«™åœ¨ SICP çš„è‚©è†€ä¸Šã€‚ ç±»ä¼¼äº Method Swizzling çš„ alias å¯¹äºå¹¿å¤§ iOSer ä¸€å®šéƒ½ååˆ†äº†è§£è¢«ç§°ä½œ Runtime é»‘é­”æ³•çš„ Method Swizzlingã€‚è¿™å…¶å®æ˜¯åŠ¨æ€è¯­è¨€å¤§éƒ½å…·æœ‰éƒ½ç‰¹æ€§ã€‚ åœ¨ iOS ä¸­ï¼Œä½¿ç”¨ Selector å’Œ Implementationï¼ˆå³ IMPï¼‰çš„æŒ‡å‘äº¤æ¢ï¼Œä»è€Œå®ç°äº†æ–¹æ³•çš„æ›¿æ¢ã€‚è¿™ç§æ›¿æ¢æ˜¯å‘ç”Ÿåœ¨è¿è¡Œæ—¶çš„ã€‚ åœ¨ Ruby ä¸­ï¼Œä¹Ÿæœ‰ç±»ä¼¼çš„æ–¹æ³•ã€‚ä¸ºäº†å…¨é¢çš„äº†è§£ Ruby ä¸­çš„ â€œMethod Swizzlingâ€ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£è¿™å‡ ä¸ªå…³äºå…ƒç¼–ç¨‹æ€æƒ³çš„æ¦‚å¿µï¼šOpen Class ç‰¹æ€§ä¸ç¯ç»•åˆ«åã€‚è¿™ä¸¤ä¸ªç‰¹æ€§ä¹Ÿæ˜¯å®ç° CocoaPods æ’ä»¶åŒ–çš„æ ¸å¿ƒä¾èµ–ã€‚ Open Class ä¸ç‰¹å¼‚æ–¹æ³• Open Class ç‰¹æ€§å°±æ˜¯åœ¨ä¸€ä¸ªç±»å·²ç»å®Œæˆå®šä¹‰ä¹‹åï¼Œå†æ¬¡å‘å…¶ä¸­æ·»åŠ æ–¹æ³•ã€‚åœ¨ Ruby ä¸­çš„å®ç°æ–¹æ³•å°±æ˜¯å®šä¹‰åŒåç±»ã€‚ åœ¨ Ruby ä¸­ä¸ä¼šåƒ Objective-C å’Œ Swift ä¸€æ ·è¢«è®¤ä¸ºæ˜¯ç¼–è¯‘é”™è¯¯ï¼Œåè€…éœ€è¦ä½¿ç”¨ Category å’Œ Extension ç‰¹æ®Šçš„å…³é”®å­—è¯­æ³•æ¥çº¦å®šæ˜¯æ‰©å±•ã€‚è€Œæ˜¯æŠŠåŒåç±»ä¸­çš„å®šä¹‰æ–¹æ³•å…¨éƒ¨é™„åŠ åˆ°å·²å®šä¹‰çš„æ—§ç±»ä¸­ï¼Œä¸é‡åçš„å¢åŠ ï¼Œé‡åçš„è¦†ç›–ã€‚ä»¥ä¸‹ä¸ºç¤ºä¾‹ä»£ç ï¼š class Foo def m1 puts &quot;m1&quot; end end class Foo def m2 puts &quot;m2&quot; end end Foo.new.m1 # m1 Foo.new.m2 # m2 class Foo def m1 puts &quot;m1 new&quot; end end Foo.new.m1 # m1 new Foo.new.m2 # m2 ç‰¹å¼‚æ–¹æ³•å’Œ Open Class æœ‰ç‚¹ç±»ä¼¼ï¼Œä¸è¿‡é™„åŠ çš„æ–¹æ³•ä¸æ˜¯é™„åŠ åˆ°ç±»ä¸­ï¼Œè€Œæ˜¯é™„åŠ åˆ°ç‰¹å®šåˆ°å®ä¾‹ä¸­ã€‚è¢«é™„åŠ åˆ°æ–¹æ³•ä»…ä»…åœ¨ç›®æ ‡å®ä¾‹ä¸­å­˜åœ¨ï¼Œä¸ä¼šå½±å“è¯¥ç±»åˆ°å…¶ä»–å®ä¾‹ã€‚ç¤ºä¾‹ä»£ç ï¼š class Foo def m1 puts &quot;m1&quot; end end foo1 = Foo.new def foo1.m2() puts &quot;m2&quot; end foo1.m1 # m1 foo1.m2 # m2 foo2 = Foo.new foo2.m1 # m1 # foo2.m2 undefined method `m2' for #&amp;lt;Foo:0x00007f88bb08e238&amp;gt; (NoMethodError) ç¯ç»•åˆ«åï¼ˆAround Aliasesï¼‰ å…¶å®ç¯ç»•åˆ«ååªæ˜¯ä¸€ç§ç‰¹æ®Šçš„å†™æ³•ï¼Œè¿™é‡Œä½¿ç”¨äº† Ruby çš„ aliasÂ å…³é”®å­—ä»¥åŠä¸Šæ–‡æåˆ°çš„ Open Class çš„ç‰¹æ€§ã€‚ é¦–å…ˆå…ˆä»‹ç»ä¸€ä¸‹ Ruby çš„ aliasÂ å…³é”®å­—ï¼Œå…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯ç»™ä¸€ä¸ªæ–¹æ³•èµ·ä¸€ä¸ªåˆ«åã€‚ä½†æ˜¯ alias é…åˆä¸Šä¹‹å‰çš„ Open Class ç‰¹æ€§ï¼Œå°±å¯ä»¥è¾¾åˆ°æˆ‘ä»¬æ‰€è¯´çš„ Method Swizzling æ•ˆæœã€‚ class Foo def m1 puts &quot;m1&quot; end end foo = Foo.new foo.m1 # m1 class Foo alias :origin_m1 :m1 def m1 origin_m1 puts &quot;Hook it!&quot; end end foo.m1 # m1 # Hook it! è™½ç„¶åœ¨ç¬¬ä¸€ä¸ªä½ç½®å·²ç»å®šä¹‰äº† Foo#m1Â  æ–¹æ³•ï¼Œä½†æ˜¯ç”±äº Open Class çš„é‡å†™æœºåˆ¶ä»¥åŠ aliasÂ çš„åˆ«åè®¾ç½®ï¼Œæˆ‘ä»¬å°† m1Â å·²ç»ä¿®æ”¹æˆäº†æ–°çš„æ–¹æ³•ï¼Œæ—§çš„ m1Â æ–¹æ³•ä½¿ç”¨ origin_m1Â ä¹Ÿå¯ä»¥è°ƒç”¨åˆ°ã€‚å¦‚æ­¤ä¹Ÿå°±å®Œæˆäº†ç±»ä¼¼äº Objective-C ä¸­çš„ Method Swizzling æœºåˆ¶ã€‚ æ€»ç»“ä¸€ä¸‹ç¯ç»•åˆ«åï¼Œå…¶å®å°±æ˜¯ç»™æ–¹æ³•å®šä¹‰ä¸€ä¸ªåˆ«åï¼Œç„¶åé‡æ–°å®šä¹‰è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨æ–°çš„æ–¹æ³•ä¸­ä½¿ç”¨åˆ«åè°ƒç”¨è€æ–¹æ³•ã€‚ çŒ´å­è¡¥ä¸ï¼ˆMonkey Patchï¼‰ æ—¢ç„¶è¯´åˆ°äº† aliasÂ åˆ«åï¼Œé‚£ä¹ˆå°±é¡ºä¾¿è¯´ä¸€ä¸‹çŒ´å­è¡¥ä¸è¿™ä¸ªç‰¹æ€§ã€‚çŒ´å­è¡¥ä¸åŒºåˆ«äºç¯ç»•åˆ«åçš„æ–¹å¼ï¼Œå®ƒä¸»è¦ç›®çš„æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€æ›¿æ¢å¹¶å¯ä»¥æš‚æ—¶æ€§é¿å…ç¨‹åºå´©æºƒã€‚ å…ˆèŠèŠèƒŒæ™¯ï¼Œç”±äº Open Class å’Œç¯ç»•åˆ«åè¿™ä¸¤ä¸ªç‰¹æ€§ï¼ŒRuby åœ¨è¿è¡Œæ—¶æ”¹å˜å±æ€§å·²ç»ååˆ†å®¹æ˜“äº†ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œå°±æ˜¯ **éœ€è¦åŠ¨æ€çš„è¿›è¡Œ Patch ** ï¼Œè€Œä¸æ˜¯åªè¦ aliasÂ å°±å…¨å±€æ›¿æ¢ï¼Œè¿™è¦æ€ä¹ˆåšå‘¢ï¼Ÿ è¿™é‡Œæˆ‘ä»¬å¼•å…¥ Ruby ä¸­çš„å¦å¤–ä¸¤ä¸ªå…³é”®å­— refineÂ å’Œ usingÂ ï¼Œé€šè¿‡å®ƒä»¬æˆ‘ä»¬å¯ä»¥åŠ¨æ€å®ç° Patchã€‚ä¸¾ä¸ªä¾‹å­ï¼š class Foo def m1 puts &quot;m1&quot; end end foo = Foo.new foo.m1 # m1 &quot;&quot;&quot; å®šä¹‰ä¸€ä¸ª Patch &quot;&quot;&quot; module TemproaryPatch refine Foo do def m1 puts &quot;m1 bugfix&quot; end end end using TemproaryPatch foo2 = Foo.new foo2.m1 # m1 bugfix ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬å…ˆä½¿ç”¨äº† refineÂ æ–¹æ³•é‡æ–°å®šä¹‰äº† m1Â æ–¹æ³•ï¼Œå®šä¹‰å®Œä¹‹åå®ƒå¹¶ä¸ä¼šç«‹å³ç”Ÿæ•ˆï¼Œè€Œæ˜¯åœ¨æˆ‘ä»¬ä½¿ç”¨ using TemporaryPatchÂ æ—¶ï¼Œæ‰ä¼šç”Ÿæ•ˆã€‚è¿™æ ·ä¹Ÿå°±å®ç°äº†åŠ¨æ€ Patch çš„éœ€æ±‚ã€‚ æ€»è¯´ alias ç‰¹æ€§ Ruby çš„ aliasÂ ä½¿ç”¨å®åœ¨æ—¶å¤ªçµæ´»äº†ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†ä¸ºä»€ä¹ˆ Ruby å¾ˆå®¹æ˜“çš„å°±å¯ä»¥å®ç°æ’ä»¶åŒ–èƒ½åŠ›ã€‚å› ä¸ºæ‰€æœ‰çš„æ–¹æ³•éƒ½å¯ä»¥é€šè¿‡ç¯ç»•åˆ«åçš„æ–¹å¼è¿›è¡Œ Hook ï¼Œä»è€Œå®ç°è‡ªå·±çš„ Gem æ’ä»¶ã€‚ é™¤äº†ä»¥ä¸Šä»‹ç»çš„ä¸€äº›æ‰©å±•æ–¹å¼ï¼Œå…¶å® Ruby è¿˜æœ‰æ›´å¤šä¿®æ”¹æ–¹æ¡ˆã€‚ä¾‹å¦‚ alias_method ã€ extendÂ ã€ refinementÂ ç­‰ã€‚å¦‚æœåé¢ CocoaPods æœ‰æ‰€æ¶‰åŠï¼Œæˆ‘ä»¬ä¹Ÿä¼šè·Ÿè¿›ä»‹ç»ä¸€äº›ã€‚ æ€»ç»“ æœ¬æ–‡é€šè¿‡ CocoaPods ä¸­çš„ä¸¤ä¸ªä½¿ç”¨åˆ°çš„ç‰¹æ€§ Eval å’Œ Aliasï¼Œè®²è¿°äº†å¾ˆå¤š Ruby å½“ä¸­æœ‰æ„æ€çš„è¯­æ³•ç‰¹æ€§å’Œå…ƒç¼–ç¨‹æ€æƒ³ã€‚Ruby åœ¨ä¼—å¤šçš„è¯­è¨€ä¸­ï¼Œå› ä¸ºæ³¨é‡æ€æƒ³å’Œè¯­æ³•ä¼˜é›…è„±é¢–è€Œå‡ºï¼Œä¹Ÿè®©æˆ‘ä¸ªäººå¯¹è¯­è¨€æœ‰å¾ˆå¤§çš„æ€æƒ³æå‡ã€‚ å¦‚æœä½ æœ‰ç»å†ï¼Œæˆ‘ä¹Ÿå¼ºçƒˆæ¨èä½ é˜…è¯» SICP å’Œã€ŒRuby å…ƒç¼–ç¨‹ã€è¿™ä¸¤æœ¬ä¹¦ï¼Œç›¸ä¿¡å®ƒä»¬ä¹Ÿä¼šè®©ä½ åœ¨è¯­è¨€è®¾è®¡çš„ç†è§£ä¸Šï¼Œæœ‰ç€æ›´æ·±çš„è®¤è¯†ã€‚ä»å…±æ€§æç‚¼åˆ°æ–¹æ³•è®ºï¼Œä»è¯­è¨€å‡ååˆ°ç»éªŒã€‚ çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç† è¿™é‡Œç½—åˆ—äº†å››ä¸ªé—®é¢˜ç”¨æ¥è€ƒå¯Ÿä½ æ˜¯å¦å·²ç»æŒæ¡äº†è¿™ç¯‡æ–‡ç« ï¼Œä½ å¯ä»¥åœ¨è¯„è®ºåŒºåŠæ—¶å›ç­”é—®é¢˜ä¸ä½œè€…äº¤æµã€‚å¦‚æœæ²¡æœ‰å»ºè®®ä½ åŠ å…¥æ”¶è—å†æ¬¡é˜…è¯»ï¼š REPL çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä»€ä¹ˆï¼Ÿä¸ Evaluation ç‰¹æ€§æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ Ruby ä¸­ eval æ–¹æ³•ä½œç”¨æ˜¯ä»€ä¹ˆï¼ŸBinding å¯¹è±¡ç”¨æ¥å¹²ä»€ä¹ˆï¼Ÿ Ruby æ˜¯å¦å¯ä»¥å®ç° Method Swizzling è¿™ç§åŠŸèƒ½ï¼Ÿ Open Class æ˜¯ä»€ä¹ˆï¼Ÿç¯ç»•åˆ«åå¦‚ä½•åˆ©ç”¨ï¼Ÿ</summary></entry><entry><title type="html">äºŒæ‰‹æˆ¿å¢å€¼ç¨åˆ†æ - é¦–ä»˜ä¸å·®é¢</title><link href="https://www.desgard.com/2020/09/23/buy-big-house-in-sh-2.html" rel="alternate" type="text/html" title="äºŒæ‰‹æˆ¿å¢å€¼ç¨åˆ†æ - é¦–ä»˜ä¸å·®é¢" /><published>2020-09-23T00:00:00-08:00</published><updated>2020-09-23T00:00:00-08:00</updated><id>https://www.desgard.com/2020/09/23/buy-big-house-in-sh-2</id><content type="html" xml:base="https://www.desgard.com/2020/09/23/buy-big-house-in-sh-2.html">&lt;blockquote&gt;
  &lt;p&gt;æˆ‘ç»™è‡ªå·±å®šäº†ä¸€ä¸ªå°†è¿‘ 700 å¤©çš„è®¡åˆ’ï¼Œè¿™å°±æ˜¯åœ¨ä¸Šæµ·ä¹°æˆ¿å®šå±…ã€‚äºæ˜¯å¼€å¯äº†ç ”ç©¶è´­æˆ¿æ”¿ç­–ã€ç ”ç©¶å°åŒºå’Œæ¿å—ã€ç ”ç©¶è´­æˆ¿æ³¨æ„äº‹é¡¹ç­‰ä¸€ç³»åˆ—çš„è°ƒç ”å’Œç ”ç©¶ã€‚æˆ‘å°†è¿™äº›ç¬”è®°å½’æ¡£æˆæ–‡ç« ï¼Œå‘è¡¨åœ¨å…¬ä¼—å·ä¸å¤§å®¶åˆ†äº«ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;ä»Šå¤©è·ç¦»è´­æˆ¿è¿˜æœ‰ 665 å¤©ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;è™½ç„¶è¯´äºŒæ‰‹æˆ¿çš„ä»·æ ¼ä¾¿å®œï¼Œä½†å…¶å®é™¤äº†è´­æˆ¿æ¬¾ä»¥å¤–ï¼Œè¿˜æœ‰å¤§å¤§å°å°çš„å¤šä¸ªç¨æ¬¾ã€‚å½“æˆ‘ä»¬ç´¯åŠ ä¸Šè¿™äº›ä»·æ ¼åæ‰æ˜¯æœ€ç»ˆçš„æ”¯å‡ºä»·æ ¼ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ç¯‡ç¬”è®°&lt;strong&gt;ä»…é€‚ç”¨äºä¸Šæµ· 2020 å¹´è´­å…¥äºŒæ‰‹æˆ¿çš„ç›¸å…³æ”¿ç­–ï¼Œå…¶ä»–çœä»½å’ŒåŸå¸‚éƒ½ç•¥æœ‰åŒºåˆ«&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;äºŒæ‰‹æˆ¿äº¤æ˜“ä¸­ï¼Œè¿™ç¯‡æˆ‘ä»¬åªå…³æ³¨å¢å€¼ç¨ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆè¦äº†è§£å‡ ä¸ªæ¦‚å¿µã€‚&lt;/p&gt;

&lt;h1 id=&quot;æ™®é€šä½å®…è®¤å®šæ ‡å‡†&quot;&gt;æ™®é€šä½å®…è®¤å®šæ ‡å‡†&lt;/h1&gt;

&lt;p&gt;&lt;strong&gt;ä»€ä¹ˆæ˜¯æ™®é€šä½å®…ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å½±å“ä¸Šæµ·æ™®é€šä½å®…è®¤å®šæ ‡å‡†çš„ä¸‰ä¸ªå› ç´ ï¼Œä¸€æ˜¯&lt;strong&gt;æ€»ä»·&lt;/strong&gt;ï¼ŒäºŒæ˜¯&lt;strong&gt;é¢ç§¯ï¼Œ&lt;/strong&gt;ä¸‰æ˜¯&lt;strong&gt;åœˆå±‚&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆï¼Œæ»¡è¶³ä»¥ä¸‹ä»»æ„ä¸€è¡Œæ¡ä»¶çš„å³ä¸ºæ™®é€šä½å®…ï¼Œåä¹‹åˆ™ä¸ºéæ™®é€šä½å®…ï¼š&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;åœˆå±‚&lt;/th&gt;
      &lt;th&gt;é¢ç§¯&lt;/th&gt;
      &lt;th&gt;æ€»ä»·&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;å†…ç¯å†…&lt;/td&gt;
      &lt;td&gt;&amp;lt; 140 å¹³ç±³&lt;/td&gt;
      &lt;td&gt;â‰¤ 450 ä¸‡å…ƒ&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;å†…å¤–ç¯ä¹‹é—´&lt;/td&gt;
      &lt;td&gt;&amp;lt; 140 å¹³ç±³&lt;/td&gt;
      &lt;td&gt;â‰¤ 310 ä¸‡å…ƒ&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;å¤–ç¯å¤–&lt;/td&gt;
      &lt;td&gt;&amp;lt; 140 å¹³ç±³&lt;/td&gt;
      &lt;td&gt;â‰¤ 230 ä¸‡å…ƒ&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;çŸ¥é“äº†æ™®é€šä½å®…çš„è®¤å®šæ ‡å‡†åæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿæ¥ä¸‹æ¥å°±æ˜¯å…³äºæ™®é€šå’Œéæ™®é€šçš„ç›¸å…³å¾ç¨å†…å®¹ã€‚&lt;/p&gt;

&lt;h1 id=&quot;å¢å€¼ç¨åŠå…¶é™„åŠ ç¨&quot;&gt;å¢å€¼ç¨åŠå…¶é™„åŠ ç¨&lt;/h1&gt;

&lt;p&gt;å½“æ‰€è´­æˆ¿å±‹ä¸º&lt;strong&gt;æ™®é€šä½å®…&lt;/strong&gt;çš„æ—¶å€™ï¼Œå…¶å¢å€¼ç¨åŠå…¶é™„åŠ ç¨æŒ‰ç…§ä¸‹è¡¨ä¸ºå¾æ”¶æ ‡å‡†ï¼š&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;å¹´é™&lt;/th&gt;
      &lt;th&gt;å¾æ”¶æ ‡å‡†&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&amp;lt; 2 å¹´&lt;/td&gt;
      &lt;td&gt;(ç¨åŠ¡æ ¸å®šä»·Â Ã· 1.05)Â Ã— (5% + 0.55%)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;[2, 5) å¹´&lt;/td&gt;
      &lt;td&gt;å…å¾&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;â‰¥ 5 å¹´&lt;/td&gt;
      &lt;td&gt;å…å¾&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;å¯¹åº”çš„ï¼Œ&lt;strong&gt;éæ™®é€šä½å®…&lt;/strong&gt;æœ‰ä»¥ä¸‹çš„æ ‡å‡†ï¼š&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;å¹´é™&lt;/th&gt;
      &lt;th&gt;å¾æ”¶æ ‡å‡†&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&amp;lt; 2 å¹´&lt;/td&gt;
      &lt;td&gt;(ç¨åŠ¡æ ¸å®šä»·Â Ã· 1.05)Â Ã— (5% + 0.55%)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;[2, 5) å¹´&lt;/td&gt;
      &lt;td&gt;((ç¨åŠ¡æ ¸å®šä»·- ä¹°å…¥ä»·æ ¼)Â Ã· 1.05)Â Ã— (5% + 0.55%)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;â‰¥ 5 å¹´&lt;/td&gt;
      &lt;td&gt;((ç¨åŠ¡æ ¸å®šä»· - ä¹°å…¥ä»·æ ¼) Ã· 1.05)Â Ã— (5% + 0.55%)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;è¿™é‡Œçš„ç¨åŠ¡æ ¸å®šä»·æ˜¯ä»€ä¹ˆï¼Ÿåˆæ˜¯å¦‚ä½•ç¡®å®šçš„å‘¢ï¼Ÿ&lt;/p&gt;

&lt;h2 id=&quot;ç¨åŠ¡æ ¸å®šä»·&quot;&gt;ç¨åŠ¡æ ¸å®šä»·&lt;/h2&gt;

&lt;p&gt;ç¨åŠ¡æ ¸å®šä»·ï¼Œåˆè¢«å¤§å®¶ç§°ä¹‹ä¸º&lt;strong&gt;äºŒæ‰‹æˆ¿è¿‡æˆ·æŒ‡å¯¼ä»·&lt;/strong&gt;ã€‚å®ƒæ˜¯ç”±å½“åœ°ç¨åŠ¡éƒ¨é—¨ç¡®å®šçš„ï¼Œæ ¸å®šä»·å­˜åœ¨çš„æ„ä¹‰ä¸»è¦æ˜¯â€œå…œåº•â€ï¼Œç®€å•æ¥è¯´å°±æ˜¯å½“ä¹°å–åŒæ–¹çš„ç½‘ç­¾ä»·æ ¼ä½äºæ ¸å®šä»·æ—¶ï¼Œç¨åŠ¡éƒ¨é—¨å°†ä¸å†æ ¹æ®&lt;strong&gt;ç½‘ç­¾ä»·ï¼ˆä¹Ÿå°±æ˜¯åå•†å¥½çš„äº¤æ˜“ä»·æ ¼ï¼‰&lt;/strong&gt; æ¥ç¡®å®šç¨åŸºï¼Œè€Œæ˜¯ä»¥æ ¸å®šä»·ä¸ºæ ‡å‡†æ¥ç¡®å®šç¨åŸºã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ä½ åº”è¯¥æ˜ç™½äº†ï¼Œæ ¸å®šä»·æ˜æ˜¾å°±æ˜¯ä¸ºäº†å¯¹ä»˜â€œé˜´é˜³åˆåŒâ€çš„ã€‚æ˜¯çš„ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸ºäº†ä¿è¯ç¨æ”¶ã€‚&lt;/p&gt;

&lt;p&gt;è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä¹°å–åŒæ–¹ä¸ºäº†é¿ç¨ï¼Œç½‘ç­¾ä»·å®šä¸º 1 å…ƒï¼Œé‚£ä¹ˆè¿™å¥—æˆ¿å­å°±å®Œå…¨æ²¡æœ‰ä»»ä½•ç¨è´¹äº†ã€‚&lt;/p&gt;

&lt;p&gt;é‚£ä¹ˆç¨åŠ¡æ ¸å®šä»·æ ¼ä¸€èˆ¬æ˜¯å¤šå°‘å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªæ•°æ®æˆ‘åœ¨ç™¾åº¦å’Œè°·æ­Œä¹Ÿæ£€ç´¢äº†å¾ˆä¹…ï¼Œæ²¡æœ‰åŠæ³•å¾—åˆ°ä¸€ç»„æ‰¹é‡æ•°æ®æ¥åšæ•°æ®æ‹Ÿåˆã€‚æ ¸å®šä»·æ ¼ä¸€èˆ¬ä¹Ÿä¸ä¼šå¯¹å¤–å…¬å¸ƒï¼Œéœ€è¦è‡ªå·±å»ç¨åŠ¡æœºå…³å’¨è¯¢ï¼Œä¹Ÿåªèƒ½å¾—åˆ°ä¸€ä¸ªå¤§æ¦‚çš„æ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;å› ä¸ºåœ¨ç¡®å®šæˆ¿å±‹çš„æ ¸å®šä»·æ—¶ï¼Œè¦å‚è€ƒåœ°æ®µã€é¢ç§¯ç­‰è¯¸å¤šå› ç´ ï¼Œæ‰€ä»¥è¿™ä¸ªæ˜¯å¾ˆéš¾ä½œå‡ºè¡¨è¾¾å¼æ¥åŠ æƒè¡¨ç¤ºçš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ç”±äºç¨åŠ¡æ ¸å®šä»·ä¸€èˆ¬æ˜¯ç”¨æ¥â€œå…œåº•â€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™ç¯‡æ–‡ç« é‡Œåšè®¡ç®—çš„æ—¶å€™ï¼Œå‡è®¾ç¨åŠ¡æ ¸å®šä»·æ˜¯ç½‘ç­¾ä»·æ ¼çš„ 85% æ¥è®¡ç®—ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;æ ¸å®šä»·å½±å“è´·æ¬¾é¢åº¦&quot;&gt;æ ¸å®šä»·å½±å“è´·æ¬¾é¢åº¦&lt;/h2&gt;

&lt;p&gt;è™½ç„¶åœ¨ã€Œå…¬ç§¯é‡‘è´·ä¹°æˆ¿èƒ½çœå¤šå°‘é’±ã€ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬å‡å®šäº†ä»»æ„æˆ¿å­çš„æ€»ä»·æ ¼ 35% é¦–ä»˜ï¼Œ65% è´·æ¬¾ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯è´·æ¬¾é¢åº¦å‚è€ƒçš„åŸºæ•°å…¶å®æ˜¯&lt;strong&gt;ç¨åŠ¡æ ¸å®šä»·æ ¼&lt;/strong&gt;ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ &lt;strong&gt;å¾€å¾€è´­ä¹°äºŒæ‰‹æˆ¿ï¼Œä½ çš„é¦–ä»˜æ˜¯è¦å¤šäº¤ä¸€ç¬”çš„ï¼Œæ˜¯å¤§äº 35% çš„&lt;/strong&gt; ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿæˆ‘ä»¬ç®€å•åšä¸€ä¸‹è®¡ç®—ï¼š&lt;/p&gt;

&lt;p&gt;å‡è®¾æˆ‘ä»¬æƒ³è´­ä¹°çš„äºŒæ‰‹æˆ¿&lt;strong&gt;ç½‘ç­¾æ€»ä»·ä¸º $T_{ç½‘ç­¾}$ å…ƒ&lt;/strong&gt; ï¼Œä¸”**å‡è®¾ç¨åŠ¡æ ¸å®šä»·æ˜¯ç½‘ç­¾ä»·æ ¼çš„ 85% **ï¼Œæ­¤æ—¶ç¨åŠ¡æ ¸å®šä»·æ ¼ ï¼š&lt;/p&gt;

\[\begin{equation}
\left\{
\begin{array}{lr}
T_{è´·æ¬¾é¢åº¦} = T_{æ ¸å®š} \times 65\% \notag \\
T_{æ ¸å®š} = T_{ç½‘ç­¾} \times 85\% \notag \\
\end{array} \\
\right.
\end{equation}\]

&lt;p&gt;å¸¦å…¥åæˆ‘ä»¬å¯ä»¥æ¨å¯¼å‡ºï¼š&lt;/p&gt;

\[\begin{equation}
\left\{
\begin{array}{lr}
T_{è´·æ¬¾é¢åº¦} = T_{ç½‘ç­¾} \times 55.25\%  \notag \\
T_{é¦–ä»˜} = 1-55.25\% = 44.75\% \notag \\
\end{array} 
\right.
\end{equation}\]

&lt;p&gt;æ ¹æ®æˆ‘ä»¬çš„å‡è®¾æ¡ä»¶ï¼Œæˆ‘ä»¬å‘ç°é¦–ä»˜æˆ‘ä»¬&lt;strong&gt;å¿…é¡»è¦å‡‘å¤Ÿ 44.75% ä»·æ ¼çš„é¦–ä»˜ï¼Œè€Œè´·æ¬¾é¢åº¦åªæœ‰ 55.25%&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ‰€ä»¥å¾ˆå¤šäººéƒ½è¯´ï¼Œå› ä¸ºä¹°äº†äºŒæ‰‹æˆ¿ï¼Œæ‰€ä»¥é¦–ä»˜è¦é«˜ä¸€äº›ï¼Œå°†è¿‘ 50%ã€‚å…¶å®å°±æ˜¯ä¸Šé¢è¿™ä¸ªåŸå› ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;h1 id=&quot;å¢å€¼ç¨å½±å“ä¸‹çš„è´­æˆ¿å†³ç­–åˆ†æ&quot;&gt;å¢å€¼ç¨å½±å“ä¸‹çš„è´­æˆ¿å†³ç­–åˆ†æ&lt;/h1&gt;

&lt;p&gt;åŒæ ·çš„ï¼Œæˆ‘ä»¬å‡è®¾&lt;strong&gt;ç½‘ç­¾æ€»ä»·ä¸º $T_{ç½‘ç­¾}$ å…ƒ&lt;/strong&gt;ï¼Œä¸” &lt;strong&gt;å‡è®¾ç¨åŠ¡æ ¸å®šä»·æ˜¯ç½‘ç­¾ä»·æ ¼çš„ 85%ã€‚&lt;/strong&gt; å¦å¤–ï¼Œæˆ‘ä»çŸ¥ä¹ä¸Šæ£€ç´¢åˆ°è¿™ä¹ˆä¸€ç»„æ•°æ® ã€Œ&lt;a href=&quot;https://zhuanlan.zhihu.com/p/75780115&quot; title=&quot;2015-2019 å¹´ä¸Šæµ·å„åŒºæˆ¿ä»·æ¶¨è·Œæƒ…å†µ&quot;&gt;2015-2019 å¹´ä¸Šæµ·å„åŒºæˆ¿ä»·æ¶¨è·Œæƒ…å†µ&lt;/a&gt;ã€ã€‚å…¶ä¸­æˆ‘éœ€è¦ç”¨åˆ°å„ä¸ªåŒºçš„äºŒæ‰‹æˆ¿å¹´åŒ–å¹³å‡å¢é•¿ç‡ï¼Œå¦‚ä¸‹è¡¨æ€»ç»“ï¼š&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;åŒºåŸŸ&lt;/th&gt;
      &lt;th&gt;äºŒæ‰‹æˆ¿ä»·å¹´åŒ–å¹³å‡æ¶¨å¹…&lt;/th&gt;
      &lt;th&gt;åŒºåŸŸ&lt;/th&gt;
      &lt;th&gt;äºŒæ‰‹æˆ¿ä»·å¹´åŒ–å¹³å‡æ¶¨å¹…&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;é•¿å®&lt;/td&gt;
      &lt;td&gt;13.30%&lt;/td&gt;
      &lt;td&gt;é™å®‰ï¼ˆåŒ…å«è€é—¸åŒ—ï¼‰&lt;/td&gt;
      &lt;td&gt;16.04%&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;è™¹å£&lt;/td&gt;
      &lt;td&gt;15.79%&lt;/td&gt;
      &lt;td&gt;é—µè¡Œ&lt;/td&gt;
      &lt;td&gt;14.02%&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;é»„æµ¦&lt;/td&gt;
      &lt;td&gt;15.99%&lt;/td&gt;
      &lt;td&gt;æµ¦ä¸œï¼ˆåŒ…å«è€å—æ±‡ï¼‰&lt;/td&gt;
      &lt;td&gt;12.55%&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;æ™®é™€&lt;/td&gt;
      &lt;td&gt;15.81%&lt;/td&gt;
      &lt;td&gt;å¾æ±‡&lt;/td&gt;
      &lt;td&gt;13.55%&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;ç”±ä¸Šè¿°æ•°æ®æˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºï¼Œä¸Šæµ·äºŒæ‰‹æˆ¿å¹³å‡å¹´åŒ–æ¶¨å¹…ä¸º &lt;strong&gt;14.63%&lt;/strong&gt;ã€‚æœ‰äº†æ¶¨å¹…æ•°æ®ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ±‚å‡ºå·®é¢çš„è¡¨è¾¾å¼ï¼Œå³ $T_{å·®é¢} = (ç¨åŠ¡æ ¸å®šä»·- ä¹°å…¥ä»·æ ¼)$ã€‚å½“ç„¶ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜è¦å‡è®¾æˆ¿å±‹å¹´é™ä¸º $y$Â å¹´&lt;/p&gt;

\[\begin{align}
T_{å·®é¢} &amp;amp;= T_{æ ¸å®šä»·} - T_{ä¹°å…¥ä»·æ ¼} \notag \\
\ &amp;amp;= 0.85T_{ç½‘ç­¾} - T_{ç½‘ç­¾} \div (1 + 0.1463)^y \notag \\
\end{align}\]

&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è®¡ç®—å¢å€¼ç¨çš„è¡¨è¾¾å¼ï¼š&lt;/p&gt;

&lt;p&gt;å½“æˆ¿å±‹æ˜¯&lt;strong&gt;æ™®é€šä½å®…&lt;/strong&gt;æ—¶ï¼š&lt;/p&gt;

\[\begin{equation}
T_{å¢å€¼ç¨} = \left\{
\begin{aligned}
&amp;amp; \frac{T_{æ ¸å®šä»·}}{1.05} \times 5.55\% = 0.04497 Â· T_{ç½‘ç­¾} &amp;amp;&amp;amp; (y &amp;lt; 2)\\
&amp;amp; 0 &amp;amp;&amp;amp; (y \geq 2)
\end{aligned} \\
\right. \notag \\
\end{equation}\]

&lt;p&gt;å½“æˆ¿å±‹æ˜¯&lt;strong&gt;éæ™®é€šä½å®…&lt;/strong&gt;æ—¶ï¼š&lt;/p&gt;

\[\begin{equation}
T_{å¢å€¼ç¨} = \left\{
\begin{aligned}
&amp;amp; 0.04497 Â· T_{ç½‘ç­¾} &amp;amp;&amp;amp; (y &amp;lt; 2) \notag \\ \\
&amp;amp; (0.85T_{ç½‘ç­¾} - \frac{T_{ç½‘ç­¾}}{(1 + 0.1463)^y}) \times 0.0529 &amp;amp;&amp;amp; (y \geq 2) \notag \\ 
\end{aligned}
\right. \notag \\
\end{equation}\]

&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ&lt;strong&gt;å½“å¹´é™å°äº 2 å¹´çš„æ—¶å€™ï¼Œæ— è®ºæ˜¯æ™®é€šä½å®…è¿˜æ˜¯éæ™®é€šä½å®…ï¼Œå…¶å¢å€¼ç¨éƒ½è¦æ”¯ä»˜å°†è¿‘ 4.5% çš„å¢å€¼ç¨ã€‚ä¸”æ˜¯å¦æ˜¯æ™®é€šä½å®…å¯¹å¢å€¼ç¨æ¯«æ— å½±å“ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å½“å¹´é™å¤§äºç­‰äº 5 å¹´çš„æ—¶å€™ï¼Œæ™®é€šä½å®…æ˜¯å…å¾å¢å€¼ç¨çš„ï¼Œè€Œéæ™®é€šä½å®…æ˜¯ä¸å¹´é™å’Œç½‘ç­¾æ€»ä»·æœ‰ä¸€å®šå…³ç³»çš„ã€‚æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;h2 id=&quot;éæ™®é€šä½å®…çš„å¹´é™å½±å“&quot;&gt;éæ™®é€šä½å®…çš„å¹´é™å½±å“&lt;/h2&gt;

&lt;p&gt;ç”±äºå¹´ä»½ $y$Â æ˜¯ç¦»æ•£çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å…¶æŠ•å½±åœ¨æ¯ä¸€æ¡æŠ˜çº¿ä¸Šã€‚ä»¥ç½‘ç­¾ä»·æ ¼ä¸ºæ¨ªè½´å˜é‡ï¼Œæ¥è§‚å¯Ÿå¢å€¼ç¨ä¸ç½‘ç­¾ä»·çš„å…³ç³»å›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardiav2-364823c4cf605b91cf8d8a57c6fe7844_1440w.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¥ä¸‹ç»“è®ºï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;æˆ¿é¾„è¶Šé«˜ï¼Œå…¶æ‰€å¾—ç¨ç¼´çº³è¶Šå¤š&lt;/strong&gt;ã€‚è¿™ä¹Ÿæ˜¯å¯ä»¥ç†è§£çš„ï¼Œå› ä¸ºéšç€æˆ¿ä»·çš„ä¸Šæ¶¨ï¼Œå…¶å·®é¢ä¼šé€æ¸å˜å¤§ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;æ‰€å¾—ç¨çš„å¢é•¿å¹…åº¦ä¸å¹´é™å‘ˆç°ä¸‹é™è¶‹åŠ¿&lt;/strong&gt;ã€‚éšç€å¹´é™å¢é«˜ï¼Œå¢é•¿å·®å€¼é€æ¸é™ä½ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;å¢å€¼ç¨å æ¯”&quot;&gt;å¢å€¼ç¨å æ¯”&lt;/h2&gt;

&lt;p&gt;æœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•æ¥è¯„ä¼°å¢å€¼ç¨æœ€ä½çš„é€‰æ‹©ç­–ç•¥å‘¢ï¼Ÿæˆ‘ä¸ªäººçš„æƒ³æ³•æ˜¯ä½¿ç”¨æ‰€å æ¯”ä¾‹æ¥è€ƒé‡ã€‚ä»¥ä¸‹æ˜¯æˆ‘æƒ³çš„ä¸€ä¸ªæ–¹æ³•ï¼š&lt;/p&gt;

\[P_{å¢å€¼ç¨æ‰€å æ¯”ä¾‹} \approx \frac{T_{å¢å€¼ç¨}}{T_{ç½‘ç­¾ä»·} + T_{å¢å€¼ç¨}}\]

&lt;p&gt;ä¸ºä»€ä¹ˆè¿™é‡Œæ˜¯çº¦ç­‰äºå‘¢ï¼Ÿå› ä¸ºæœ€åä½ éœ€è¦æ”¯å‡ºçš„ä»·æ ¼é™¤äº†ç½‘ç­¾ä»·æ ¼å¤–ï¼Œ&lt;strong&gt;ä¸ä»…åªæœ‰å¢å€¼ç¨ï¼Œè¿˜æœ‰å…¶ä»–çš„å„ç§ç¨æ¬¾ã€‚&lt;/strong&gt; è¿™é‡Œä»…ä»…ä½¿ç”¨å¢å€¼ç¨æ¥å½“ä½œåŸºæ•°ï¼Œå¯ä»¥æ”¾å¤§å¢å€¼ç¨çš„æ¯”é‡ï¼Œæ›´èƒ½ä½“ç°é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardiav2-2c8a663f4f74399c25d33fe351b292bc_1440w.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä½œå‡ºå›¾åƒæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå½“æˆ‘ä»¬è´­ä¹°â€œä½é¾„â€çš„æˆ¿å­ï¼Œå…¶æ‰€å¾—ç¨æ‰€å æ¯”ä¾‹æ˜¯æ›´åº•çš„ï¼Œ&lt;strong&gt;5 å¹´çš„äºŒæ‰‹æˆ¿å…¶æ‰€å¾—ç¨æ‰€å æ¯”ä¾‹å‡å€¼æ˜¯ 1.79%&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;äºæ˜¯ä¹æˆ‘ä»¬å¯ä»¥å¤§è‡´çš„è®¡ç®—å‡ºæˆ¿é¾„ä¸æ‰€å¾—ç¨æ‰€å æ¯”ä¾‹çš„å¤§è‡´å…³ç³»ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1600825890934-a0417c8e-0029-4533-9068-d4a29a72e650.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;é‚£ä¹ˆæˆ‘ä»¬æœ€å¥½çš„ç­–ç•¥æ˜¯è¦é€‰æ‹©æœ€æ–°çš„æˆ¿å­å—ï¼Ÿå…¶å®å¹¶ä¸æ˜¯è¿™æ ·çš„ï¼Œå› ä¸ºéšç€å¹´é™çš„å¢é•¿ï¼Œå…¶å•ä»·ä¹Ÿåœ¨é€æ¸å‡é«˜ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ¢å¥è¯è¯´ï¼Œå½“æˆ‘æ€»ä»·å›ºå®šåï¼Œéšç€æˆ¿é¾„çš„é™ä½ï¼Œå…¶é¢ç§¯æ˜¯è¶Šæ¥è¶Šå°çš„ã€‚æˆ¿å±‹é¢ç§¯æ˜¯å’Œæˆ‘ä»¬çš„éœ€æ±‚æ¯æ¯ç›¸å…³çš„ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥å½“æˆ‘ä»¬åšä¹°æˆ¿ç­–ç•¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç¡®å®š&lt;strong&gt;éœ€æ±‚é¢ç§¯&lt;/strong&gt;å’Œæˆ‘ä»¬&lt;strong&gt;æ‰€æ”¯å‡ºçš„æ€»ä»·&lt;/strong&gt;ï¼Œç„¶åå°½å¯èƒ½çš„å»è´­ä¹°æ–°æˆ¿å°±å¥½äº†ã€‚&lt;/p&gt;

&lt;p&gt;ç”±äºæ‰€å¾—ç¨åœ¨è¿™é‡Œåªèƒ½è¯´æ˜éƒ¨åˆ†é—®é¢˜ï¼Œå…·ä½“çš„é—®é¢˜æˆ‘å°†åœ¨åç»­çš„æ–‡ä¸­æ¥å…·ä½“åˆ†æã€‚&lt;/p&gt;

&lt;h1 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h1&gt;

&lt;ol&gt;
  &lt;li&gt;è´­ä¹°äºŒæ‰‹æˆ¿æ—¶ï¼Œ&lt;strong&gt;é¦–ä»˜é«˜ä¸€äº›ï¼Œå°†è¿‘ 50%ã€‚&lt;/strong&gt; å…¶åŸå› æ˜¯å› ä¸ºç¨åŠ¡æ ¸ç®—ä»·å¾€å¾€åä½ï¼Œä»è€Œæ‹‰ä½äº†è´·æ¬¾æ¯”é‡ï¼Œè¿›è€Œä½¿å¾—é¦–ä»˜æé«˜ï¼›&lt;/li&gt;
  &lt;li&gt;å½“è´­ä¹°éæ™®é€šä½å®…æ—¶ï¼Œ&lt;strong&gt;æˆ¿é¾„è¶Šé«˜ï¼Œå…¶æ‰€å¾—ç¨ç¼´çº³è¶Šå¤š&lt;/strong&gt;ã€‚å› ä¸ºéšç€æˆ¿ä»·çš„ä¸Šæ¶¨ï¼Œå…¶å·®é¢ä¼šé€æ¸å˜å¤§ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;æ‰€å¾—ç¨çš„å¢é•¿å¹…åº¦ä¸å¹´é™å‘ˆç°ä¸‹é™è¶‹åŠ¿&lt;/strong&gt;ã€‚éšç€å¹´é™å¢é«˜ï¼Œå¢é•¿å·®å€¼é€æ¸é™ä½ã€‚&lt;/li&gt;
  &lt;li&gt;ç¡®å®š&lt;strong&gt;éœ€æ±‚é¢ç§¯&lt;/strong&gt;å’Œ&lt;strong&gt;æ‰€æ”¯å‡ºçš„æ€»ä»·&lt;/strong&gt;ï¼Œå°½å¯èƒ½çš„å»è´­ä¹°æ–°æˆ¿ã€‚è¿™ä¸æˆ‘ä»¬çš„æ­£å¸¸è®¤çŸ¥ä¹Ÿæ˜¯ç›¸åŒçš„ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;ç›¸å…³æ•°æ®åˆ†æä»£ç &quot;&gt;ç›¸å…³æ•°æ®åˆ†æä»£ç &lt;/h1&gt;

&lt;p&gt;ä»¥ä¸‹ä»£ç ç”±æˆ‘ä¸ªäººç¼–å†™ï¼Œå¯åœ¨ Jupyter Notebook ç¯å¢ƒä¸‹ç›´æ¥è¿è¡Œã€‚&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;
ç½‘ç­¾ä»·ä¸å¢å€¼ç¨
&quot;&quot;&quot;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# encoding=utf-8
&lt;/span&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;math&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;matplotlib&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pyplot&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;IPython.core.pylabtools&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;figsize&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# import figsize
#figsize(12.5, 4) # è®¾ç½® figsize
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rcParams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'savefig.dpi'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;300&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#å›¾ç‰‡åƒç´ 
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rcParams&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'figure.dpi'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;300&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#åˆ†è¾¨ç‡
&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# æ€»ä»·
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ths&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;125000&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# å¹´é™
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ys&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# å¢å€¼ç¨è®¡ç®—
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;trs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;th&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;tr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.85&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;th&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;th&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.1463&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0529&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;trs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        
    &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;f'&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;å¹´'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;legend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;margins&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subplots_adjust&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bottom&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'ç½‘ç­¾ä»·/åƒä¸‡å…ƒ'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#Xè½´æ ‡ç­¾
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;å¢å€¼ç¨/å…ƒ&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#Yè½´æ ‡ç­¾
&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;
ç½‘ç­¾ä»·ä¸å¢å€¼ç¨å æ¯”
&quot;&quot;&quot;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# å¹´é™
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ys&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# å¢å€¼ç¨è®¡ç®—
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;trs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;th&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;tr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.85&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;th&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;th&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.1463&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0529&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;trs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;th&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;f'&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;å¹´'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;marker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'*'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;f'&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;å¹´'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;legend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;margins&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subplots_adjust&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bottom&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'ç½‘ç­¾ä»·/åƒä¸‡å…ƒ'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#Xè½´æ ‡ç­¾
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;æ‰€å¾—ç¨å æ€»æ”¯å‡ºæ¯”ä¾‹&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#Yè½´æ ‡ç­¾
&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;
æˆ¿é¾„ä¸å¢å€¼ç¨å æ¯”
&quot;&quot;&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.017910502320842965&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.021189641628359904&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.024032438906425032&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.026498963556469416&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.028640531033586977&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.030501094013867885&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.032118385667131544&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.03352486519307519&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.034748504347376426&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.035813445129716175&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.03674055234381547&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.03754787981470654&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.038251065262737784&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.03886366589974932&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.03939744452077101&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mf&quot;&gt;0.039862614060287876&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;marker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'o'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;legend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;margins&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'å¢å€¼ç¨å æ€»æ”¯å‡ºæ¯”ä¾‹'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#Xè½´æ ‡ç­¾
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;æˆ¿å­å¹´é™/å¹´&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#Yè½´æ ‡ç­¾
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>å†¬ç“œ</name><email>gua@desgard.com</email></author><category term="å†¬ç“œä¹°æˆ¿ç¬”è®°" /><category term="æ•°å­¦å»ºæ¨¡" /><summary type="html">æˆ‘ç»™è‡ªå·±å®šäº†ä¸€ä¸ªå°†è¿‘ 700 å¤©çš„è®¡åˆ’ï¼Œè¿™å°±æ˜¯åœ¨ä¸Šæµ·ä¹°æˆ¿å®šå±…ã€‚äºæ˜¯å¼€å¯äº†ç ”ç©¶è´­æˆ¿æ”¿ç­–ã€ç ”ç©¶å°åŒºå’Œæ¿å—ã€ç ”ç©¶è´­æˆ¿æ³¨æ„äº‹é¡¹ç­‰ä¸€ç³»åˆ—çš„è°ƒç ”å’Œç ”ç©¶ã€‚æˆ‘å°†è¿™äº›ç¬”è®°å½’æ¡£æˆæ–‡ç« ï¼Œå‘è¡¨åœ¨å…¬ä¼—å·ä¸å¤§å®¶åˆ†äº«ã€‚ ä»Šå¤©è·ç¦»è´­æˆ¿è¿˜æœ‰ 665 å¤©ã€‚ è™½ç„¶è¯´äºŒæ‰‹æˆ¿çš„ä»·æ ¼ä¾¿å®œï¼Œä½†å…¶å®é™¤äº†è´­æˆ¿æ¬¾ä»¥å¤–ï¼Œè¿˜æœ‰å¤§å¤§å°å°çš„å¤šä¸ªç¨æ¬¾ã€‚å½“æˆ‘ä»¬ç´¯åŠ ä¸Šè¿™äº›ä»·æ ¼åæ‰æ˜¯æœ€ç»ˆçš„æ”¯å‡ºä»·æ ¼ã€‚ è¿™ç¯‡ç¬”è®°ä»…é€‚ç”¨äºä¸Šæµ· 2020 å¹´è´­å…¥äºŒæ‰‹æˆ¿çš„ç›¸å…³æ”¿ç­–ï¼Œå…¶ä»–çœä»½å’ŒåŸå¸‚éƒ½ç•¥æœ‰åŒºåˆ«ã€‚ äºŒæ‰‹æˆ¿äº¤æ˜“ä¸­ï¼Œè¿™ç¯‡æˆ‘ä»¬åªå…³æ³¨å¢å€¼ç¨ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆè¦äº†è§£å‡ ä¸ªæ¦‚å¿µã€‚ æ™®é€šä½å®…è®¤å®šæ ‡å‡† ä»€ä¹ˆæ˜¯æ™®é€šä½å®…ï¼Ÿ å½±å“ä¸Šæµ·æ™®é€šä½å®…è®¤å®šæ ‡å‡†çš„ä¸‰ä¸ªå› ç´ ï¼Œä¸€æ˜¯æ€»ä»·ï¼ŒäºŒæ˜¯é¢ç§¯ï¼Œä¸‰æ˜¯åœˆå±‚ã€‚ é¦–å…ˆï¼Œæ»¡è¶³ä»¥ä¸‹ä»»æ„ä¸€è¡Œæ¡ä»¶çš„å³ä¸ºæ™®é€šä½å®…ï¼Œåä¹‹åˆ™ä¸ºéæ™®é€šä½å®…ï¼š åœˆå±‚ é¢ç§¯ æ€»ä»· å†…ç¯å†… &amp;lt; 140 å¹³ç±³ â‰¤ 450 ä¸‡å…ƒ å†…å¤–ç¯ä¹‹é—´ &amp;lt; 140 å¹³ç±³ â‰¤ 310 ä¸‡å…ƒ å¤–ç¯å¤– &amp;lt; 140 å¹³ç±³ â‰¤ 230 ä¸‡å…ƒ çŸ¥é“äº†æ™®é€šä½å®…çš„è®¤å®šæ ‡å‡†åæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿæ¥ä¸‹æ¥å°±æ˜¯å…³äºæ™®é€šå’Œéæ™®é€šçš„ç›¸å…³å¾ç¨å†…å®¹ã€‚ å¢å€¼ç¨åŠå…¶é™„åŠ ç¨ å½“æ‰€è´­æˆ¿å±‹ä¸ºæ™®é€šä½å®…çš„æ—¶å€™ï¼Œå…¶å¢å€¼ç¨åŠå…¶é™„åŠ ç¨æŒ‰ç…§ä¸‹è¡¨ä¸ºå¾æ”¶æ ‡å‡†ï¼š å¹´é™ å¾æ”¶æ ‡å‡† &amp;lt; 2 å¹´ (ç¨åŠ¡æ ¸å®šä»·Â Ã· 1.05)Â Ã— (5% + 0.55%) [2, 5) å¹´ å…å¾ â‰¥ 5 å¹´ å…å¾ å¯¹åº”çš„ï¼Œéæ™®é€šä½å®…æœ‰ä»¥ä¸‹çš„æ ‡å‡†ï¼š å¹´é™ å¾æ”¶æ ‡å‡† &amp;lt; 2 å¹´ (ç¨åŠ¡æ ¸å®šä»·Â Ã· 1.05)Â Ã— (5% + 0.55%) [2, 5) å¹´ ((ç¨åŠ¡æ ¸å®šä»·- ä¹°å…¥ä»·æ ¼)Â Ã· 1.05)Â Ã— (5% + 0.55%) â‰¥ 5 å¹´ ((ç¨åŠ¡æ ¸å®šä»· - ä¹°å…¥ä»·æ ¼) Ã· 1.05)Â Ã— (5% + 0.55%) è¿™é‡Œçš„ç¨åŠ¡æ ¸å®šä»·æ˜¯ä»€ä¹ˆï¼Ÿåˆæ˜¯å¦‚ä½•ç¡®å®šçš„å‘¢ï¼Ÿ ç¨åŠ¡æ ¸å®šä»· ç¨åŠ¡æ ¸å®šä»·ï¼Œåˆè¢«å¤§å®¶ç§°ä¹‹ä¸ºäºŒæ‰‹æˆ¿è¿‡æˆ·æŒ‡å¯¼ä»·ã€‚å®ƒæ˜¯ç”±å½“åœ°ç¨åŠ¡éƒ¨é—¨ç¡®å®šçš„ï¼Œæ ¸å®šä»·å­˜åœ¨çš„æ„ä¹‰ä¸»è¦æ˜¯â€œå…œåº•â€ï¼Œç®€å•æ¥è¯´å°±æ˜¯å½“ä¹°å–åŒæ–¹çš„ç½‘ç­¾ä»·æ ¼ä½äºæ ¸å®šä»·æ—¶ï¼Œç¨åŠ¡éƒ¨é—¨å°†ä¸å†æ ¹æ®ç½‘ç­¾ä»·ï¼ˆä¹Ÿå°±æ˜¯åå•†å¥½çš„äº¤æ˜“ä»·æ ¼ï¼‰ æ¥ç¡®å®šç¨åŸºï¼Œè€Œæ˜¯ä»¥æ ¸å®šä»·ä¸ºæ ‡å‡†æ¥ç¡®å®šç¨åŸºã€‚ æ‰€ä»¥ä½ åº”è¯¥æ˜ç™½äº†ï¼Œæ ¸å®šä»·æ˜æ˜¾å°±æ˜¯ä¸ºäº†å¯¹ä»˜â€œé˜´é˜³åˆåŒâ€çš„ã€‚æ˜¯çš„ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸ºäº†ä¿è¯ç¨æ”¶ã€‚ è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä¹°å–åŒæ–¹ä¸ºäº†é¿ç¨ï¼Œç½‘ç­¾ä»·å®šä¸º 1 å…ƒï¼Œé‚£ä¹ˆè¿™å¥—æˆ¿å­å°±å®Œå…¨æ²¡æœ‰ä»»ä½•ç¨è´¹äº†ã€‚ é‚£ä¹ˆç¨åŠ¡æ ¸å®šä»·æ ¼ä¸€èˆ¬æ˜¯å¤šå°‘å‘¢ï¼Ÿ è¿™ä¸ªæ•°æ®æˆ‘åœ¨ç™¾åº¦å’Œè°·æ­Œä¹Ÿæ£€ç´¢äº†å¾ˆä¹…ï¼Œæ²¡æœ‰åŠæ³•å¾—åˆ°ä¸€ç»„æ‰¹é‡æ•°æ®æ¥åšæ•°æ®æ‹Ÿåˆã€‚æ ¸å®šä»·æ ¼ä¸€èˆ¬ä¹Ÿä¸ä¼šå¯¹å¤–å…¬å¸ƒï¼Œéœ€è¦è‡ªå·±å»ç¨åŠ¡æœºå…³å’¨è¯¢ï¼Œä¹Ÿåªèƒ½å¾—åˆ°ä¸€ä¸ªå¤§æ¦‚çš„æ•°æ®ã€‚ å› ä¸ºåœ¨ç¡®å®šæˆ¿å±‹çš„æ ¸å®šä»·æ—¶ï¼Œè¦å‚è€ƒåœ°æ®µã€é¢ç§¯ç­‰è¯¸å¤šå› ç´ ï¼Œæ‰€ä»¥è¿™ä¸ªæ˜¯å¾ˆéš¾ä½œå‡ºè¡¨è¾¾å¼æ¥åŠ æƒè¡¨ç¤ºçš„ã€‚ ç”±äºç¨åŠ¡æ ¸å®šä»·ä¸€èˆ¬æ˜¯ç”¨æ¥â€œå…œåº•â€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™ç¯‡æ–‡ç« é‡Œåšè®¡ç®—çš„æ—¶å€™ï¼Œå‡è®¾ç¨åŠ¡æ ¸å®šä»·æ˜¯ç½‘ç­¾ä»·æ ¼çš„ 85% æ¥è®¡ç®—ã€‚ æ ¸å®šä»·å½±å“è´·æ¬¾é¢åº¦ è™½ç„¶åœ¨ã€Œå…¬ç§¯é‡‘è´·ä¹°æˆ¿èƒ½çœå¤šå°‘é’±ã€ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬å‡å®šäº†ä»»æ„æˆ¿å­çš„æ€»ä»·æ ¼ 35% é¦–ä»˜ï¼Œ65% è´·æ¬¾ã€‚ ä½†æ˜¯è´·æ¬¾é¢åº¦å‚è€ƒçš„åŸºæ•°å…¶å®æ˜¯ç¨åŠ¡æ ¸å®šä»·æ ¼ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ å¾€å¾€è´­ä¹°äºŒæ‰‹æˆ¿ï¼Œä½ çš„é¦–ä»˜æ˜¯è¦å¤šäº¤ä¸€ç¬”çš„ï¼Œæ˜¯å¤§äº 35% çš„ ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿæˆ‘ä»¬ç®€å•åšä¸€ä¸‹è®¡ç®—ï¼š å‡è®¾æˆ‘ä»¬æƒ³è´­ä¹°çš„äºŒæ‰‹æˆ¿ç½‘ç­¾æ€»ä»·ä¸º $T_{ç½‘ç­¾}$ å…ƒ ï¼Œä¸”**å‡è®¾ç¨åŠ¡æ ¸å®šä»·æ˜¯ç½‘ç­¾ä»·æ ¼çš„ 85% **ï¼Œæ­¤æ—¶ç¨åŠ¡æ ¸å®šä»·æ ¼ ï¼š \[\begin{equation} \left\{ \begin{array}{lr} T_{è´·æ¬¾é¢åº¦} = T_{æ ¸å®š} \times 65\% \notag \\ T_{æ ¸å®š} = T_{ç½‘ç­¾} \times 85\% \notag \\ \end{array} \\ \right. \end{equation}\] å¸¦å…¥åæˆ‘ä»¬å¯ä»¥æ¨å¯¼å‡ºï¼š \[\begin{equation} \left\{ \begin{array}{lr} T_{è´·æ¬¾é¢åº¦} = T_{ç½‘ç­¾} \times 55.25\% \notag \\ T_{é¦–ä»˜} = 1-55.25\% = 44.75\% \notag \\ \end{array} \right. \end{equation}\] æ ¹æ®æˆ‘ä»¬çš„å‡è®¾æ¡ä»¶ï¼Œæˆ‘ä»¬å‘ç°é¦–ä»˜æˆ‘ä»¬å¿…é¡»è¦å‡‘å¤Ÿ 44.75% ä»·æ ¼çš„é¦–ä»˜ï¼Œè€Œè´·æ¬¾é¢åº¦åªæœ‰ 55.25%ã€‚ æ‰€ä»¥å¾ˆå¤šäººéƒ½è¯´ï¼Œå› ä¸ºä¹°äº†äºŒæ‰‹æˆ¿ï¼Œæ‰€ä»¥é¦–ä»˜è¦é«˜ä¸€äº›ï¼Œå°†è¿‘ 50%ã€‚å…¶å®å°±æ˜¯ä¸Šé¢è¿™ä¸ªåŸå› ã€‚ å¢å€¼ç¨å½±å“ä¸‹çš„è´­æˆ¿å†³ç­–åˆ†æ åŒæ ·çš„ï¼Œæˆ‘ä»¬å‡è®¾ç½‘ç­¾æ€»ä»·ä¸º $T_{ç½‘ç­¾}$ å…ƒï¼Œä¸” å‡è®¾ç¨åŠ¡æ ¸å®šä»·æ˜¯ç½‘ç­¾ä»·æ ¼çš„ 85%ã€‚ å¦å¤–ï¼Œæˆ‘ä»çŸ¥ä¹ä¸Šæ£€ç´¢åˆ°è¿™ä¹ˆä¸€ç»„æ•°æ® ã€Œ2015-2019 å¹´ä¸Šæµ·å„åŒºæˆ¿ä»·æ¶¨è·Œæƒ…å†µã€ã€‚å…¶ä¸­æˆ‘éœ€è¦ç”¨åˆ°å„ä¸ªåŒºçš„äºŒæ‰‹æˆ¿å¹´åŒ–å¹³å‡å¢é•¿ç‡ï¼Œå¦‚ä¸‹è¡¨æ€»ç»“ï¼š åŒºåŸŸ äºŒæ‰‹æˆ¿ä»·å¹´åŒ–å¹³å‡æ¶¨å¹… åŒºåŸŸ äºŒæ‰‹æˆ¿ä»·å¹´åŒ–å¹³å‡æ¶¨å¹… é•¿å® 13.30% é™å®‰ï¼ˆåŒ…å«è€é—¸åŒ—ï¼‰ 16.04% è™¹å£ 15.79% é—µè¡Œ 14.02% é»„æµ¦ 15.99% æµ¦ä¸œï¼ˆåŒ…å«è€å—æ±‡ï¼‰ 12.55% æ™®é™€ 15.81% å¾æ±‡ 13.55% ç”±ä¸Šè¿°æ•°æ®æˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºï¼Œä¸Šæµ·äºŒæ‰‹æˆ¿å¹³å‡å¹´åŒ–æ¶¨å¹…ä¸º 14.63%ã€‚æœ‰äº†æ¶¨å¹…æ•°æ®ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ±‚å‡ºå·®é¢çš„è¡¨è¾¾å¼ï¼Œå³ $T_{å·®é¢} = (ç¨åŠ¡æ ¸å®šä»·- ä¹°å…¥ä»·æ ¼)$ã€‚å½“ç„¶ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜è¦å‡è®¾æˆ¿å±‹å¹´é™ä¸º $y$Â å¹´ \[\begin{align} T_{å·®é¢} &amp;amp;= T_{æ ¸å®šä»·} - T_{ä¹°å…¥ä»·æ ¼} \notag \\ \ &amp;amp;= 0.85T_{ç½‘ç­¾} - T_{ç½‘ç­¾} \div (1 + 0.1463)^y \notag \\ \end{align}\] æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è®¡ç®—å¢å€¼ç¨çš„è¡¨è¾¾å¼ï¼š å½“æˆ¿å±‹æ˜¯æ™®é€šä½å®…æ—¶ï¼š \[\begin{equation} T_{å¢å€¼ç¨} = \left\{ \begin{aligned} &amp;amp; \frac{T_{æ ¸å®šä»·}}{1.05} \times 5.55\% = 0.04497 Â· T_{ç½‘ç­¾} &amp;amp;&amp;amp; (y &amp;lt; 2)\\ &amp;amp; 0 &amp;amp;&amp;amp; (y \geq 2) \end{aligned} \\ \right. \notag \\ \end{equation}\] å½“æˆ¿å±‹æ˜¯éæ™®é€šä½å®…æ—¶ï¼š \[\begin{equation} T_{å¢å€¼ç¨} = \left\{ \begin{aligned} &amp;amp; 0.04497 Â· T_{ç½‘ç­¾} &amp;amp;&amp;amp; (y &amp;lt; 2) \notag \\ \\ &amp;amp; (0.85T_{ç½‘ç­¾} - \frac{T_{ç½‘ç­¾}}{(1 + 0.1463)^y}) \times 0.0529 &amp;amp;&amp;amp; (y \geq 2) \notag \\ \end{aligned} \right. \notag \\ \end{equation}\] æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“å¹´é™å°äº 2 å¹´çš„æ—¶å€™ï¼Œæ— è®ºæ˜¯æ™®é€šä½å®…è¿˜æ˜¯éæ™®é€šä½å®…ï¼Œå…¶å¢å€¼ç¨éƒ½è¦æ”¯ä»˜å°†è¿‘ 4.5% çš„å¢å€¼ç¨ã€‚ä¸”æ˜¯å¦æ˜¯æ™®é€šä½å®…å¯¹å¢å€¼ç¨æ¯«æ— å½±å“ã€‚ å½“å¹´é™å¤§äºç­‰äº 5 å¹´çš„æ—¶å€™ï¼Œæ™®é€šä½å®…æ˜¯å…å¾å¢å€¼ç¨çš„ï¼Œè€Œéæ™®é€šä½å®…æ˜¯ä¸å¹´é™å’Œç½‘ç­¾æ€»ä»·æœ‰ä¸€å®šå…³ç³»çš„ã€‚æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ã€‚ éæ™®é€šä½å®…çš„å¹´é™å½±å“ ç”±äºå¹´ä»½ $y$Â æ˜¯ç¦»æ•£çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å…¶æŠ•å½±åœ¨æ¯ä¸€æ¡æŠ˜çº¿ä¸Šã€‚ä»¥ç½‘ç­¾ä»·æ ¼ä¸ºæ¨ªè½´å˜é‡ï¼Œæ¥è§‚å¯Ÿå¢å€¼ç¨ä¸ç½‘ç­¾ä»·çš„å…³ç³»å›¾ï¼š æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¥ä¸‹ç»“è®ºï¼š æˆ¿é¾„è¶Šé«˜ï¼Œå…¶æ‰€å¾—ç¨ç¼´çº³è¶Šå¤šã€‚è¿™ä¹Ÿæ˜¯å¯ä»¥ç†è§£çš„ï¼Œå› ä¸ºéšç€æˆ¿ä»·çš„ä¸Šæ¶¨ï¼Œå…¶å·®é¢ä¼šé€æ¸å˜å¤§ã€‚ æ‰€å¾—ç¨çš„å¢é•¿å¹…åº¦ä¸å¹´é™å‘ˆç°ä¸‹é™è¶‹åŠ¿ã€‚éšç€å¹´é™å¢é«˜ï¼Œå¢é•¿å·®å€¼é€æ¸é™ä½ã€‚ å¢å€¼ç¨å æ¯” æœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•æ¥è¯„ä¼°å¢å€¼ç¨æœ€ä½çš„é€‰æ‹©ç­–ç•¥å‘¢ï¼Ÿæˆ‘ä¸ªäººçš„æƒ³æ³•æ˜¯ä½¿ç”¨æ‰€å æ¯”ä¾‹æ¥è€ƒé‡ã€‚ä»¥ä¸‹æ˜¯æˆ‘æƒ³çš„ä¸€ä¸ªæ–¹æ³•ï¼š \[P_{å¢å€¼ç¨æ‰€å æ¯”ä¾‹} \approx \frac{T_{å¢å€¼ç¨}}{T_{ç½‘ç­¾ä»·} + T_{å¢å€¼ç¨}}\] ä¸ºä»€ä¹ˆè¿™é‡Œæ˜¯çº¦ç­‰äºå‘¢ï¼Ÿå› ä¸ºæœ€åä½ éœ€è¦æ”¯å‡ºçš„ä»·æ ¼é™¤äº†ç½‘ç­¾ä»·æ ¼å¤–ï¼Œä¸ä»…åªæœ‰å¢å€¼ç¨ï¼Œè¿˜æœ‰å…¶ä»–çš„å„ç§ç¨æ¬¾ã€‚ è¿™é‡Œä»…ä»…ä½¿ç”¨å¢å€¼ç¨æ¥å½“ä½œåŸºæ•°ï¼Œå¯ä»¥æ”¾å¤§å¢å€¼ç¨çš„æ¯”é‡ï¼Œæ›´èƒ½ä½“ç°é—®é¢˜ã€‚ ä½œå‡ºå›¾åƒæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå½“æˆ‘ä»¬è´­ä¹°â€œä½é¾„â€çš„æˆ¿å­ï¼Œå…¶æ‰€å¾—ç¨æ‰€å æ¯”ä¾‹æ˜¯æ›´åº•çš„ï¼Œ5 å¹´çš„äºŒæ‰‹æˆ¿å…¶æ‰€å¾—ç¨æ‰€å æ¯”ä¾‹å‡å€¼æ˜¯ 1.79%ã€‚ äºæ˜¯ä¹æˆ‘ä»¬å¯ä»¥å¤§è‡´çš„è®¡ç®—å‡ºæˆ¿é¾„ä¸æ‰€å¾—ç¨æ‰€å æ¯”ä¾‹çš„å¤§è‡´å…³ç³»ï¼š é‚£ä¹ˆæˆ‘ä»¬æœ€å¥½çš„ç­–ç•¥æ˜¯è¦é€‰æ‹©æœ€æ–°çš„æˆ¿å­å—ï¼Ÿå…¶å®å¹¶ä¸æ˜¯è¿™æ ·çš„ï¼Œå› ä¸ºéšç€å¹´é™çš„å¢é•¿ï¼Œå…¶å•ä»·ä¹Ÿåœ¨é€æ¸å‡é«˜ã€‚ æ¢å¥è¯è¯´ï¼Œå½“æˆ‘æ€»ä»·å›ºå®šåï¼Œéšç€æˆ¿é¾„çš„é™ä½ï¼Œå…¶é¢ç§¯æ˜¯è¶Šæ¥è¶Šå°çš„ã€‚æˆ¿å±‹é¢ç§¯æ˜¯å’Œæˆ‘ä»¬çš„éœ€æ±‚æ¯æ¯ç›¸å…³çš„ã€‚ æ‰€ä»¥å½“æˆ‘ä»¬åšä¹°æˆ¿ç­–ç•¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç¡®å®šéœ€æ±‚é¢ç§¯å’Œæˆ‘ä»¬æ‰€æ”¯å‡ºçš„æ€»ä»·ï¼Œç„¶åå°½å¯èƒ½çš„å»è´­ä¹°æ–°æˆ¿å°±å¥½äº†ã€‚ ç”±äºæ‰€å¾—ç¨åœ¨è¿™é‡Œåªèƒ½è¯´æ˜éƒ¨åˆ†é—®é¢˜ï¼Œå…·ä½“çš„é—®é¢˜æˆ‘å°†åœ¨åç»­çš„æ–‡ä¸­æ¥å…·ä½“åˆ†æã€‚ æ€»ç»“ è´­ä¹°äºŒæ‰‹æˆ¿æ—¶ï¼Œé¦–ä»˜é«˜ä¸€äº›ï¼Œå°†è¿‘ 50%ã€‚ å…¶åŸå› æ˜¯å› ä¸ºç¨åŠ¡æ ¸ç®—ä»·å¾€å¾€åä½ï¼Œä»è€Œæ‹‰ä½äº†è´·æ¬¾æ¯”é‡ï¼Œè¿›è€Œä½¿å¾—é¦–ä»˜æé«˜ï¼› å½“è´­ä¹°éæ™®é€šä½å®…æ—¶ï¼Œæˆ¿é¾„è¶Šé«˜ï¼Œå…¶æ‰€å¾—ç¨ç¼´çº³è¶Šå¤šã€‚å› ä¸ºéšç€æˆ¿ä»·çš„ä¸Šæ¶¨ï¼Œå…¶å·®é¢ä¼šé€æ¸å˜å¤§ã€‚ æ‰€å¾—ç¨çš„å¢é•¿å¹…åº¦ä¸å¹´é™å‘ˆç°ä¸‹é™è¶‹åŠ¿ã€‚éšç€å¹´é™å¢é«˜ï¼Œå¢é•¿å·®å€¼é€æ¸é™ä½ã€‚ ç¡®å®šéœ€æ±‚é¢ç§¯å’Œæ‰€æ”¯å‡ºçš„æ€»ä»·ï¼Œå°½å¯èƒ½çš„å»è´­ä¹°æ–°æˆ¿ã€‚è¿™ä¸æˆ‘ä»¬çš„æ­£å¸¸è®¤çŸ¥ä¹Ÿæ˜¯ç›¸åŒçš„ã€‚ ç›¸å…³æ•°æ®åˆ†æä»£ç  ä»¥ä¸‹ä»£ç ç”±æˆ‘ä¸ªäººç¼–å†™ï¼Œå¯åœ¨ Jupyter Notebook ç¯å¢ƒä¸‹ç›´æ¥è¿è¡Œã€‚ &quot;&quot;&quot; ç½‘ç­¾ä»·ä¸å¢å€¼ç¨ &quot;&quot;&quot; # encoding=utf-8 import numpy as np import math from matplotlib import pyplot import matplotlib.pyplot as plt from IPython.core.pylabtools import figsize # import figsize #figsize(12.5, 4) # è®¾ç½® figsize plt.rcParams['savefig.dpi'] = 300 #å›¾ç‰‡åƒç´  plt.rcParams['figure.dpi'] = 300 #åˆ†è¾¨ç‡ # æ€»ä»· ths = [i * 125000 for i in range(1, 100)] # å¹´é™ ys = [i for i in range(5, 21)] for y in ys: # å¢å€¼ç¨è®¡ç®— trs = [] for th in ths: tr = (0.85 * th - th / ((1 + 0.1463) ** y)) * 0.0529 trs.append(tr) plt.plot(ths, trs, label=f'{y}å¹´') plt.legend() plt.margins(0) plt.subplots_adjust(bottom=0.10) plt.xlabel('ç½‘ç­¾ä»·/åƒä¸‡å…ƒ') #Xè½´æ ‡ç­¾ plt.ylabel(&quot;å¢å€¼ç¨/å…ƒ&quot;) #Yè½´æ ‡ç­¾ &quot;&quot;&quot; ç½‘ç­¾ä»·ä¸å¢å€¼ç¨å æ¯” &quot;&quot;&quot; # å¹´é™ ys = [i for i in range(5, 21)] for y in ys: # å¢å€¼ç¨è®¡ç®— trs = [] for th in ths: tr = (0.85 * th - th / ((1 + 0.1463) ** y)) * 0.0529 trs.append(tr / (th + tr)) print(sum(trs) / len(trs)) if y &amp;gt;= 10: plt.plot(ths, trs, label=f'{y}å¹´') else: plt.plot(ths, trs, marker='*', label=f'{y}å¹´') plt.legend() plt.margins(0) plt.subplots_adjust(bottom=0.10) plt.xlabel('ç½‘ç­¾ä»·/åƒä¸‡å…ƒ') #Xè½´æ ‡ç­¾ plt.ylabel(&quot;æ‰€å¾—ç¨å æ€»æ”¯å‡ºæ¯”ä¾‹&quot;) #Yè½´æ ‡ç­¾ &quot;&quot;&quot; æˆ¿é¾„ä¸å¢å€¼ç¨å æ¯” &quot;&quot;&quot; p = [ 0.017910502320842965, 0.021189641628359904, 0.024032438906425032, 0.026498963556469416, 0.028640531033586977, 0.030501094013867885, 0.032118385667131544, 0.03352486519307519, 0.034748504347376426, 0.035813445129716175, 0.03674055234381547, 0.03754787981470654, 0.038251065262737784, 0.03886366589974932, 0.03939744452077101, 0.039862614060287876, ] plt.plot(p, y, marker='o') plt.legend() plt.margins(0) plt.xlabel('å¢å€¼ç¨å æ€»æ”¯å‡ºæ¯”ä¾‹') #Xè½´æ ‡ç­¾ plt.ylabel(&quot;æˆ¿å­å¹´é™/å¹´&quot;) #Yè½´æ ‡ç­¾</summary></entry><entry><title type="html">Podfile çš„è§£æé€»è¾‘</title><link href="https://www.desgard.com/2020/09/16/cocoapods-story-4.html" rel="alternate" type="text/html" title="Podfile çš„è§£æé€»è¾‘" /><published>2020-09-16T00:00:00-08:00</published><updated>2020-09-16T00:00:00-08:00</updated><id>https://www.desgard.com/2020/09/16/cocoapods-story-4</id><content type="html" xml:base="https://www.desgard.com/2020/09/16/cocoapods-story-4.html">&lt;h1 id=&quot;å¼•å­&quot;&gt;å¼•å­&lt;/h1&gt;

&lt;p&gt;&lt;br /&gt;åœ¨ä¸Šæ–‡ &lt;a href=&quot;/2020/09/02/cocoapods-story-3.html&quot;&gt;CocoaPods å‘½ä»¤è§£æ&lt;/a&gt; ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å¯¹ &lt;strong&gt;CLAide&lt;/strong&gt; çš„æºç åˆ†æï¼Œäº†è§£äº† CocoaPods æ˜¯å¦‚ä½•å¤„ç† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod&lt;/code&gt; å‘½ä»¤ï¼Œå¤šçº§å‘½ä»¤åˆæ˜¯å¦‚ä½•ç»„ç»‡å’ŒåµŒå¥—çš„ï¼Œå¹¶è§£é‡Šäº†å‘½ä»¤è¡Œè¾“å‡ºæ‰€ä»£è¡¨çš„å«ä¹‰ã€‚ä»Šå¤©æˆ‘ä»¬å¼€å§‹å­¦ä¹  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; ã€‚&lt;br /&gt;
&lt;br /&gt;å¤§å¤š iOS å·¥ç¨‹å¸ˆæœ€å…ˆæ¥è§¦åˆ°çš„ CocoaPods æ¦‚å¿µåº”è¯¥æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt;ï¼Œè€Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; å±äº &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cocoapods-core&lt;/code&gt;ï¼ˆä»¥ä¸‹ç®€ç§° &lt;strong&gt;Core&lt;/strong&gt;ï¼‰ çš„ä¸¤å¤§æ¦‚å¿µä¹‹ä¸€ã€‚å¦å¤–ä¸€ä¸ªåˆ™æ˜¯ &lt;a href=&quot;https://guides.cocoapods.org/syntax/podspec.html&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt;&lt;/a&gt; (ç”¨äºæè¿° Pod Library çš„é…ç½®æ–‡ä»¶)ï¼Œåªæœ‰å½“ä½ éœ€è¦å¼€å‘ Pod ç»„ä»¶çš„æ—¶å€™æ‰ä¼šæ¥è§¦ã€‚&lt;br /&gt;
&lt;br /&gt;åœ¨ä»‹ç» Podfile çš„å†…å®¹ç»“æ„ä¹‹å‰ï¼Œå¿…é¡»è¦è°ˆè°ˆ Xcode çš„å·¥ç¨‹ç»“æ„ã€‚
&lt;a name=&quot;7ae87fa4&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;xcode-å·¥ç¨‹ç»“æ„&quot;&gt;Xcode å·¥ç¨‹ç»“æ„&lt;/h1&gt;

&lt;p&gt;&lt;br /&gt;æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªæç®€ Podfile å£°æ˜ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Demo'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Alamofire'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'./Alamofire'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;å®ƒç¼–è¯‘åçš„å·¥ç¨‹ç›®å½•å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1599993134156-fe45b615-5b0f-4e71-bd5c-a03cd6b55217.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;å¦‚ä½ æ‰€è§ Podfile çš„é…ç½®æ˜¯å›´ç»• Xcode çš„è¿™äº›å·¥ç¨‹ç»“æ„ï¼š**Workspaceã€Projectã€Target åŠ Build Setting **æ¥å±•å¼€çš„ã€‚&lt;br /&gt;ä½œä¸ºåŒ…ç®¡ç†å·¥å…· CocoaPods å°†æ‰€ç®¡ç†çš„ Pods ä¾èµ–åº“ç»„è£…æˆä¸€ä¸ªä¸ª Targetï¼Œç»Ÿä¸€æ”¾å…¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods project&lt;/code&gt; ä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Demo target&lt;/code&gt;ï¼Œå¹¶è‡ªåŠ¨é…ç½®å¥½ Target é—´çš„ä¾èµ–å…³ç³»ã€‚&lt;br /&gt;
&lt;br /&gt;ä¹‹åå°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Example&lt;/code&gt; ä¸»å·¥ç¨‹å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods&lt;/code&gt; å·¥ç¨‹ä¸€èµ·æ‰“åŒ…åˆ°æ–°å»ºçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Example.workspace&lt;/code&gt;ï¼Œé…å¥½ä¸»å·¥ç¨‹ä¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods&lt;/code&gt; å·¥ç¨‹ä¹‹é—´çš„ä¾èµ–ï¼Œå®Œæˆæœ€ç»ˆè½¬æ¢ã€‚&lt;br /&gt;
&lt;br /&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥èŠä¸€èŠè¿™äº› Xcode ç»“æ„ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;9f0655f1&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;target---æœ€å°å¯ç¼–è¯‘å•å…ƒ&quot;&gt;Target - æœ€å°å¯ç¼–è¯‘å•å…ƒ&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;A &lt;a href=&quot;https://developer.apple.com/library/archive/featuredarticles/XcodeConcepts/Concept-Targets.html#//apple_ref/doc/uid/TP40009328-CH4-SW1&quot;&gt;target&lt;/a&gt; specifies a product to build and contains the instructions for building the product from a set of files in a project or workspace.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;strong&gt;é¦–å…ˆæ˜¯ Targetï¼Œå®ƒä½œä¸ºå·¥ç¨‹ä¸­æœ€å°çš„å¯ç¼–è¯‘å•å…ƒï¼Œæ ¹æ® **&lt;a href=&quot;https://www.objc.io/issues/6-build-tools/build-process/#controlling-the-build-process&quot;&gt;**Build Phases**&lt;/a&gt;&lt;/strong&gt; å’Œ &lt;strong&gt;&lt;a href=&quot;https://developer.apple.com/library/archive/featuredarticles/XcodeConcepts/Concept-Build_Settings.html#//apple_ref/doc/uid/TP40009328-CH6-SW1&quot;&gt;**Build Settings**&lt;/a&gt;&lt;/strong&gt; å°†æºç ä½œä¸ºè¾“å…¥ï¼Œç»ç¼–è¯‘åè¾“å‡ºç»“æœäº§ç‰©**ã€‚&lt;br /&gt;å…¶è¾“å‡ºç»“æœå¯ä»¥æ˜¯é“¾æ¥åº“ã€å¯æ‰§è¡Œæ–‡ä»¶æˆ–è€…èµ„æºåŒ…ç­‰ï¼Œå…·ä½“ç»†èŠ‚å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Build Settingï¼šæ¯”å¦‚æŒ‡å®šä½¿ç”¨çš„ç¼–è¯‘å™¨ï¼Œç›®æ ‡å¹³å°ã€ç¼–è¯‘å‚æ•°ã€å¤´æ–‡ä»¶æœç´¢è·¯å¾„ç­‰ï¼›&lt;/li&gt;
  &lt;li&gt;Build æ—¶çš„å‰ç½®ä¾èµ–ã€æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶ï¼›&lt;/li&gt;
  &lt;li&gt;Build ç”Ÿæˆç›®æ ‡çš„ç­¾åã€Capabilities ç­‰å±æ€§ï¼›&lt;/li&gt;
  &lt;li&gt;Inputï¼šå“ªäº›æºç æˆ–è€…èµ„æºæ–‡ä»¶ä¼šè¢«ç¼–è¯‘æ‰“åŒ…ï¼›&lt;/li&gt;
  &lt;li&gt;Outputï¼šå“ªäº›é™æ€åº“ã€åŠ¨æ€åº“ä¼šè¢«é“¾æ¥ï¼›&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a name=&quot;8fc0f046&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;project---targets-çš„è½½ä½“&quot;&gt;Project - Targets çš„è½½ä½“&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;An &lt;a href=&quot;https://developer.apple.com/library/archive/featuredarticles/XcodeConcepts/Concept-Projects.html#//apple_ref/doc/uid/TP40009328-CH5-SW1&quot;&gt;Xcode project&lt;/a&gt; is a repository for all the files, resources, and information required to build one or more software products.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;strong&gt;Project å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ Xcode å·¥ç¨‹ï¼Œä½œä¸ºä¸€ä¸ªæˆ–å¤šä¸ª Targets çš„èµ„æºç®¡ç†å™¨ï¼Œæœ¬èº«æ— æ³•è¢«ç¼–è¯‘ã€‚&lt;/strong&gt;&lt;br /&gt;Project æ‰€ç®¡ç†çš„èµ„æºéƒ½æ¥è‡ªå®ƒæ‰€åŒ…å«çš„ Targetsã€‚ç‰¹ç‚¹å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;è‡³å°‘åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå¯ç¼–è¯‘çš„ Targetï¼›&lt;/li&gt;
  &lt;li&gt;ä¸ºæ‰€åŒ…å«çš„ Targets å®šä¹‰äº†ä¸€ä»½é»˜è®¤ç¼–è¯‘é€‰é¡¹ï¼Œå¦‚æœ Target æœ‰è‡ªå·±çš„é…ç½®ï¼Œåˆ™ä¼šè¦†ç›– Project çš„é¢„è®¾å€¼ï¼›&lt;/li&gt;
  &lt;li&gt;èƒ½å°†å…¶ä»– Project ä½œä¸ºä¾èµ–åµŒå…¥å…¶ä¸­ï¼›&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;ä¸‹å›¾ä¸º Project ä¸æ‰€åŒ…å«å¯¹ Targets çš„å…³ç³»&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1600222941789-99a85a65-f93f-48ce-92c2-53b85c576bfd.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;be439828&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;workspace---å®¹å™¨&quot;&gt;Workspace - å®¹å™¨&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;A &lt;a href=&quot;https://developer.apple.com/library/archive/featuredarticles/XcodeConcepts/Concept-Workspace.html&quot;&gt;workspace&lt;/a&gt; is an Xcode document that groups projects&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;strong&gt;ä½œä¸ºçº¯ç²¹çš„é¡¹ç›®å®¹å™¨ï¼ŒWorkspace ä¸å‚ä¸ä»»ä½•ç¼–è¯‘é“¾æ¥è¿‡ç¨‹ï¼Œä»…ç”¨äºç®¡ç†åŒå±‚çº§çš„ Project&lt;/strong&gt;ï¼Œå…¶ç‰¹ç‚¹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Workspace å¯ä»¥åŒ…å«å¤šä¸ª Projects&lt;/strong&gt;ï¼›&lt;/li&gt;
  &lt;li&gt;åŒä¸€ä¸ª Workspace ä¸­çš„ Proejct æ–‡ä»¶å¯¹äºå…¶ä»– Project æ˜¯é»˜è®¤å¯è§çš„ï¼Œ&lt;strong&gt;è¿™äº› Projcts ä¼šå…±äº« &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;workspace build directory&lt;/code&gt;&lt;/strong&gt; ï¼›&lt;/li&gt;
  &lt;li&gt;ä¸€ä¸ª Xcode Project å¯ä»¥è¢«åŒ…å«åœ¨å¤šä¸ªä¸åŒçš„ Workspace ä¸­ï¼Œå› ä¸ºæ¯ä¸ª Project éƒ½æœ‰ç‹¬ç«‹çš„ Identityï¼Œé»˜è®¤æ˜¯ Project Nameï¼›&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1599993134181-70da3da0-70d6-46ff-b9ad-358e77f64466.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;db334362&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;scheme---æè¿°-build-è¿‡ç¨‹&quot;&gt;Scheme - æè¿° Build è¿‡ç¨‹&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;An &lt;a href=&quot;https://developer.apple.com/library/archive/featuredarticles/XcodeConcepts/Concept-Schemes.html&quot;&gt;Xcode scheme&lt;/a&gt; defines a collection of targets to build, a configuration to use when building, and a collection of tests to execute.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;strong&gt;Scheme æ˜¯å¯¹äºæ•´ä¸ª Build è¿‡ç¨‹çš„ä¸€ä¸ªæŠ½è±¡&lt;/strong&gt;ï¼Œå®ƒæè¿°äº† Xcode åº”è¯¥ä½¿ç”¨å“ªç§ &lt;a href=&quot;https://medium.com/practical-ios-development/some-practical-uses-for-xcode-build-schemes-and-build-configurations-swift-e50d15a1304f&quot;&gt;Build Configurations&lt;/a&gt; ã€æ‰§è¡Œä»€ä¹ˆä»»åŠ¡ã€ç¯å¢ƒå‚æ•°ç­‰æ¥æ„å»ºæˆ‘ä»¬æ‰€éœ€çš„ Targetã€‚&lt;br /&gt;
&lt;br /&gt;Scheme ä¸­é¢„è®¾äº†å…­ä¸ªä¸»è¦è¿‡ç¨‹ï¼š &lt;strong&gt;Buildã€Runã€Testã€Profileã€Analyzeã€Archive&lt;/strong&gt;ã€‚åŒ…æ‹¬äº†æˆ‘ä»¬å¯¹ Target çš„æ‰€æœ‰æ“ä½œï¼Œæ¯ä¸€ä¸ªè¿‡ç¨‹éƒ½å¯ä»¥å•ç‹¬é…ç½®ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1600222941772-4998de2f-7375-4019-b665-77d5e7692c79.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;CocoaPods-Core&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;cocoapods-core&quot;&gt;CocoaPods-Core&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;The &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/CocoaPods/Core&quot;&gt;CocoaPods-Core&lt;/a&gt; gem provides support to work with the models of CocoaPods, for example the Podspecs or the Podfile.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;CocoaPods-Core ç”¨äº CocoaPods ä¸­é…ç½®æ–‡ä»¶çš„è§£æï¼ŒåŒ…æ‹¬ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podspec&lt;/code&gt; ä»¥åŠè§£æåçš„ä¾èµ–é”å­˜æ–‡ä»¶ï¼Œå¦‚ Podfile.lock ç­‰ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;49aa38a1&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;cocoapods-core-çš„æ–‡ä»¶æ„æˆ&quot;&gt;CocoaPods-Core çš„æ–‡ä»¶æ„æˆ&lt;/h2&gt;

&lt;p&gt;&lt;br /&gt;ç…§ä¾‹ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡å…¥å£æ–‡ä»¶ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lib/cocoapods-core.rb&lt;/code&gt; æ¥ä¸€çª¥ Core é¡¹ç›®çš„ä¸»è¦æ–‡ä»¶ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Pod&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/gem_version'&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;PlainInformative&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;StandardError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Informative&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;PlainInformative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'pathname'&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/vendor'&lt;/span&gt;
   
  &lt;span class=&quot;c1&quot;&gt;# ç”¨äºå­˜å‚¨ PodSpec ä¸­çš„ç‰ˆæœ¬å·&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;autoload&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:Version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;        &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/version'&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# pod çš„ç‰ˆæœ¬é™åˆ¶&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;autoload&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:Requirement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;    &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/requirement'&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# é…ç½® Podfile æˆ– PodSpec ä¸­çš„ pod ä¾èµ–&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;autoload&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:Dependency&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;     &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/dependency'&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# è·å– Github ä»“åº“ä¿¡æ¯&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;autoload&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:GitHub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;         &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/github'&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# å¤„ç† HTTP è¯·æ±‚&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;autoload&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:HTTP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;           &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/http'&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# è®°å½•æœ€ç»ˆ pod çš„ä¾èµ–ä¿¡æ¯&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;autoload&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:Lockfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;       &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/lockfile'&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# è®°å½• SDK çš„åç§°å’Œ target ç‰ˆæœ¬&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;autoload&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:Platform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;       &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/platform'&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# å¯¹åº” Podfile æ–‡ä»¶çš„ class&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;autoload&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:Podfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;        &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/podfile'&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ç®¡ç† PodSpec çš„é›†åˆ&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;autoload&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:Source&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;         &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/source'&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ç®¡ç†åŸºäº CDN æ¥æºçš„ PodSpec é›†åˆ&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;autoload&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:CDNSource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;      &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/cdn_source'&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ç®¡ç†åŸºäº Trunk æ¥æºçš„ PodSpec é›†åˆ&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;autoload&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:TrunkSource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;    &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/trunk_source'&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# å¯¹åº” PodSpec æ–‡ä»¶çš„ class&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;autoload&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:Specification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/specification'&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# å°† pod ä¿¡æ¯è½¬ä¸º .yml æ–‡ä»¶ï¼Œç”¨äº lockfile çš„åºåˆ—åŒ–&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;autoload&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:YAMLHelper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;     &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/yaml_helper'&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# è®°å½• pod ä¾èµ–ç±»å‹ï¼Œæ˜¯é™æ€åº“/åŠ¨æ€åº“&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;autoload&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:BuildType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;      &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/build_type'&lt;/span&gt;
  
  &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;

  &lt;span class=&quot;no&quot;&gt;Spec&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Specification&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;å°†è¿™äº› Model ç±»æŒ‰ç…§å¯¹åº”çš„ä¾èµ–å…³ç³»è¿›è¡Œåˆ’åˆ†ï¼Œå±‚çº§å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1599993134206-3a7f8fdb-611d-44c1-a2c4-026365408d5e.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;7b11f844&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;podfile-çš„ä¸»è¦æ•°æ®ç»“æ„&quot;&gt;Podfile çš„ä¸»è¦æ•°æ®ç»“æ„&lt;/h2&gt;

&lt;p&gt;&lt;br /&gt;å…ˆæ¥äº†è§£ Podfile çš„ä¸»è¦æ•°æ®ç»“æ„&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;Specification&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;specification&quot;&gt;Specification&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;The Specification provides a DSL to describe a Pod. A pod is defined as a library originating from a source. A specification can support detailed attributes for modules of code Â through subspecs.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;Specification å³å­˜å‚¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PodSpec&lt;/code&gt; çš„å†…å®¹ï¼Œæ˜¯ç”¨äº&lt;strong&gt;æè¿°ä¸€ä¸ª Pod åº“çš„æºä»£ç å’Œèµ„æºå°†å¦‚ä½•è¢«æ‰“åŒ…ç¼–è¯‘æˆé“¾æ¥åº“æˆ– framework&lt;/strong&gt;ï¼Œåç»­å°†ä¼šä»‹ç»æ›´å¤šçš„ç»†èŠ‚ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;TargetDefinition&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;targetdefinition&quot;&gt;TargetDefinition&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;The TargetDefinition stores the information of a CocoaPods static library. The target definition can be linked with one or more targets of the user project.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TargetDefinition&lt;/code&gt; æ˜¯ä¸€ä¸ªå¤šå‰æ ‘ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹è®°å½•ç€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; ä¸­å®šä¹‰çš„ Pod çš„ Source æ¥æºã€Build Settingã€Pod å­ä¾èµ–ç­‰ã€‚è¯¥æ ‘çš„æ ¹èŠ‚ç‚¹æŒ‡å‘ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt;ï¼Œè€Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; ä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;root_target_definitions&lt;/code&gt; åˆ™è®°å½•ç€æ‰€æœ‰çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TargetDefinition&lt;/code&gt; çš„æ ¹èŠ‚ç‚¹ï¼Œæ­£å¸¸æƒ…å†µä¸‹è¯¥ list ä¸­åªæœ‰ä¸€ä¸ª root å³ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;**Pods.project**&lt;/code&gt;ã€‚&lt;br /&gt;
&lt;br /&gt;ä¸ºäº†ä¾¿äºé˜…è¯»ï¼Œç®€åŒ–äº†å¤§é‡çš„ DSL é…ç½®ç›¸å…³çš„æ–¹æ³•å’Œå±æ€§å¹¶å¯¹ä»£ç é¡ºåºåšäº†è°ƒæ•´ï¼Œå¤§è‡´ç»“æ„å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Pod&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Podfile&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TargetDefinition&lt;/span&gt;
		&lt;span class=&quot;c1&quot;&gt;# çˆ¶èŠ‚ç‚¹: TargetDefinition æˆ–è€… Podfile&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;attr_reader&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:parent&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;# å­èŠ‚ç‚¹: TargetDefinition&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;attr_reader&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:children&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;# è®°å½• tareget çš„é…ç½®ä¿¡æ¯&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;attr_accessor&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:internal_hash&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;root?&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;is_a?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Podfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;nil?&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;root&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root?&lt;/span&gt;
          &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;root&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;podfile&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;parent&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
       
      &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;å¯¹åº”ä¸Šä¸€èŠ‚ Xcode å·¥ç¨‹ç»“æ„ä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; å…³ç³»å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1599993134189-fdfc2639-938d-47c7-ad69-1a8141502f8f.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;CocoaPods æ­£æ˜¯å·§å¦™åˆ©ç”¨äº† Xcode å·¥ç¨‹ç»“æ„çš„ç‰¹ç‚¹ï¼Œå¼•å…¥ Â &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods.project&lt;/code&gt; è¿™ä¸€ä¸­é—´å±‚ï¼Œå°†ä¸»å·¥ç¨‹çš„ Pods ä¾èµ–å…¨éƒ¨è½¬æ¥åˆ° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods.project&lt;/code&gt; ä¸Šï¼Œæœ€åå†å°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods.project&lt;/code&gt; ä½œä¸ºä¸»é¡¹ç›®çš„ä¾èµ–ã€‚å°½ç®¡è¿™ä¹ˆåšä¹Ÿå—åˆ°äº†ä¸€äº›è´¨ç–‘å’Œè¯Ÿç—…ï¼ˆæ‰€è°“çš„ä¾µå…¥æ€§å¤ªå¼ºï¼‰ï¼Œä½†ç¬”è€…çš„è§‚ç‚¹æ˜¯ï¼Œæ­£å¾—ç›Šäº &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods.project&lt;/code&gt; è¿™ä¸€è®¾è®¡éš”ç»äº†ç¬¬ä¸‰æ–¹ä¾èµ–åº“å¯¹äºä¸»é¡¹ç›®çš„é¢‘ç¹æ›´æ”¹ï¼Œä¹Ÿä¾¿äºåç»­çš„ç®¡ç†å’Œæ›´æ–°ï¼Œä½“ç°äº†è½¯ä»¶å·¥ç¨‹ä¸­çš„&lt;strong&gt;å¼€æ”¾-å…³é—­åŸåˆ™&lt;/strong&gt;ã€‚&lt;br /&gt;
&lt;br /&gt;æ¯”å¦‚ï¼Œåœ¨ Pod 1.7.0 ç‰ˆæœ¬ä¸­æ”¯æŒçš„ &lt;strong&gt;&lt;a href=&quot;http://blog.cocoapods.org/CocoaPods-1.7.0-beta/&quot;&gt;Multiple Xcodeproj Generation&lt;/a&gt;&lt;/strong&gt; å°±æ˜¯è§£å†³éšç€é¡¹ç›®çš„è¿­ä»£è€Œæ—¥ç›Šå¢å¤§çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods&lt;/code&gt; project çš„é—®é¢˜ã€‚è¯•æƒ³å½“ä½ çš„é¡¹ç›®ä¸­å­˜åœ¨ä¸Šç™¾ä¸ªä¾èµ–åº“ï¼Œæ¯ä¸ªä¾èµ–åº“çš„å˜æ›´éƒ½ä¼šå½±å“åˆ°ä½ çš„ä¸»å·¥ç¨‹ï¼Œè¿™å°†æ˜¯éå¸¸å¯æ€•çš„é—®é¢˜ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;Podfile&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;podfile&quot;&gt;Podfile&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;The Podfile is a specification that describes the dependencies of the targets of one or more Xcode projects.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; æ˜¯ç”¨äºæè¿°ä¸€ä¸ªæˆ–å¤šä¸ª Xcode Project ä¸­å„ä¸ª Targets ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚&lt;br /&gt;
&lt;br /&gt;è¿™äº› Targets çš„ä¾èµ–å…³ç³»å¯¹åº”çš„å°±æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TargetDefinition&lt;/code&gt; æ ‘ä¸­çš„å„å­èŠ‚ç‚¹çš„å±‚çº§å…³ç³»ã€‚å¦‚å‰é¢æ‰€è¯´ï¼Œ&lt;strong&gt;æœ‰äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; è¿™ä¸ªæ ¹èŠ‚ç‚¹çš„æŒ‡å‘ï¼Œä»…éœ€å¯¹ä¾èµ–æ ‘è¿›è¡Œéå†ï¼Œå°±èƒ½è½»æ¾è·å–å®Œæ•´çš„ä¾èµ–å…³ç³»&lt;/strong&gt;ã€‚&lt;br /&gt;
&lt;br /&gt;æœ‰äº†è¿™å±‚ä¾èµ–æ ‘ï¼Œå¯¹äºæŸä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod&lt;/code&gt; åº“çš„æ›´æ–°å³æ˜¯å¯¹æ ‘èŠ‚ç‚¹çš„æ›´æ–°ï¼Œä¾¿å¯è½»æ¾çš„åˆ†æå‡ºæ­¤æ¬¡æ›´æ–°æ¶‰åŠçš„å½±å“ã€‚&lt;br /&gt;
&lt;br /&gt;ç®€åŒ–è°ƒæ•´åçš„ Podfile ä»£ç å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/podfile/dsl'&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-core/podfile/target_definition'&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Pod&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Podfile&lt;/span&gt;

    &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Pod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Podfile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;DSL&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# podfile è·¯å¾„&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;attr_accessor&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:defined_in_file&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# æ‰€æœ‰çš„ TargetDefinition çš„æ ¹èŠ‚ç‚¹, æ­£å¸¸åªæœ‰ä¸€ä¸ªï¼Œå³ Pods.project target&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;attr_accessor&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:root_target_definitions&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# è®°å½• Pods.project é¡¹ç›®çš„é…ç½®ä¿¡æ¯&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;attr_accessor&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:internal_hash&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# å½“å‰ DSL è§£æä½¿ç”¨çš„ TargetDefinition&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;attr_accessor&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:current_target_definition&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;ç›´æ¥çœ‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dsl.rb&lt;/code&gt;ï¼Œè¯¥æ–‡ä»¶å†…éƒ¨å®šä¹‰äº† Podfile DSL æ”¯æŒçš„æ‰€æœ‰æ–¹æ³•ã€‚é€šè¿‡ &lt;strong&gt;include&lt;/strong&gt; çš„ä½¿ç”¨å°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod::Podfile::DSL&lt;/code&gt; æ¨¡å— Mix-in åæ’å…¥åˆ° Podfile ç±»ä¸­ã€‚&lt;br /&gt;æƒ³äº†è§£æ›´å¤š Mix-in ç‰¹æ€§ï¼Œç§»æ­¥ &lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzA5MTM1NTc2Ng==&amp;amp;mid=2458324049&amp;amp;idx=1&amp;amp;sn=8de53f46fbc52427cdb660b427cb8226&amp;amp;chksm=870e0348b0798a5ed6d14715cc4a1af93cd168a5e15198acfb3b84ea49506b0f815fa891d683&amp;amp;token=883887783&amp;amp;lang=zh_CN#rd&quot;&gt;Ruby ç‰¹æ€§ä¹‹ Mix-in&lt;/a&gt;ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;Lockfile&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;lockfile&quot;&gt;Lockfile&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;The Lockfile stores information about the pods that were installed by Â CocoaPods.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;strong&gt;Lockfileï¼Œé¡¾åæ€ä¹‰æ˜¯ç”¨äºè®°å½•æœ€åä¸€æ¬¡ CocoaPods æ‰€å®‰è£…çš„ Pod ä¾èµ–åº“ç‰ˆæœ¬çš„ä¿¡æ¯å¿«ç…§ã€‚ä¹Ÿå°±æ˜¯ç”Ÿæˆçš„ **&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile.lock&lt;/code&gt;&lt;/strong&gt;ã€‚**&lt;br /&gt;
&lt;br /&gt;åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod install&lt;/code&gt; è¿‡ç¨‹ï¼ŒPodfile ä¼šç»“åˆå®ƒæ¥ç¡®è®¤æœ€ç»ˆæ‰€å®‰è£…çš„ Pod ç‰ˆæœ¬ï¼Œå›ºå®š Pod ä¾èµ–åº“ç‰ˆæœ¬é˜²æ­¢å…¶è‡ªåŠ¨æ›´æ–°ã€‚Lockfile ä¹Ÿä½œä¸º Pods çŠ¶æ€æ¸…å• (mainfest)ï¼Œç”¨äºè®°å½•å®‰è£…è¿‡ç¨‹çš„ä¸­å“ªäº› Pod éœ€è¦è¢«åˆ é™¤æˆ–å®‰è£…æˆ–æ›´æ–°ç­‰ã€‚&lt;br /&gt;
&lt;br /&gt;ä»¥å¼€å¤´çš„ Podfile ç» &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod install&lt;/code&gt; æ‰€ç”Ÿæˆçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile.lock&lt;/code&gt; ä¸ºä¾‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;PODS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Alamofire&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;4.6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;DEPENDENCIES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Alamofire&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`./Alamofire`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;EXTERNAL&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SOURCES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Alamofire&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;:path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;./Alamofire&quot;&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;SPEC&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;CHECKSUMS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Alamofire&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dda98a0ed7eec4bdcd5fe3cdd35fcd2b3022825&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;PODFILE&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;CHECKSUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;da12cc12a30cfb48ebc5d14e8f51737ab65e8241&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;COCOAPODS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;beta&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ï¼Œé€šè¿‡è¯¥ Lockfile èƒ½å¤Ÿè·å–å“ªäº›ä¿¡æ¯ï¼š&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;&lt;strong&gt;Key&lt;/strong&gt;&lt;/th&gt;
      &lt;th&gt;&lt;strong&gt;å«ä¹‰&lt;/strong&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;PODS&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;è®°å½•æ‰€æœ‰ Pod åº“çš„å…·ä½“å®‰è£…ç‰ˆæœ¬å·&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;DEPENDENCIES&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;è®°å½•å„ Pod åº“ä¹‹é—´çš„ç›¸äº’ä¾èµ–å…³ç³»ï¼Œç”±äºè¿™é‡Œåªæœ‰ Alamofire ä¸”å®ƒæ— å…¶ä»–ä¾èµ–ï¼Œæš‚æ—¶æ— å…³çœ‹å‡ºåŒºåˆ«&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;EXTERNAL SOURCES&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;è®°å½•éƒ¨åˆ†é€šè¿‡å¤–éƒ¨æºçš„ Pod åº“ï¼ˆGit å¼•å…¥ã€Path å¼•å…¥ï¼‰&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;SPEC CHECKSUMS&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;è®°å½•å½“å‰å„ Pod åº“çš„ Podspec æ–‡ä»¶ Hash å€¼ï¼Œå…¶å®å°±æ˜¯æ–‡ä»¶çš„ md5&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;PODFILE CHECKSUM&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;è®°å½• Podfile æ–‡ä»¶çš„ Hash å€¼ï¼ŒåŒæ ·æ˜¯ md5ï¼Œç¡®è®¤æ˜¯å¦æœ‰å˜æ›´&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;COCOAPODS&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;è®°å½•ä¸Šæ¬¡æ‰€ä½¿ç”¨çš„ CocoaPods ç‰ˆæœ¬&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;a name=&quot;80b7b70d&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;podfile-å†…å®¹åŠ è½½&quot;&gt;Podfile å†…å®¹åŠ è½½&lt;/h2&gt;

&lt;p&gt;&lt;a name=&quot;8d8c5129&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;podfile-æ–‡ä»¶ç±»å‹&quot;&gt;Podfile æ–‡ä»¶ç±»å‹&lt;/h3&gt;

&lt;p&gt;&lt;br /&gt;ä½ å¯ä»¥åœ¨ CocoaPods çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/lib/cocoapods/config.rb&lt;/code&gt; æ‰¾åˆ° Podfile æ‰€æ”¯æŒçš„æ–‡ä»¶ç±»å‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;PODFILE_NAMES&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
   &lt;span class=&quot;s1&quot;&gt;'CocoaPods.podfile.yaml'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;s1&quot;&gt;'CocoaPods.podfile'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;s1&quot;&gt;'Podfile'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;s1&quot;&gt;'Podfile.rb'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;freeze&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;CocoaPods æŒ‰ç…§ä¸Šè¿°å‘½åä¼˜å…ˆçº§æ¥æŸ¥æ‰¾å·¥ç¨‹ç›®å½•ä¸‹æ‰€å¯¹åº”çš„ Podfile æ–‡ä»¶ã€‚å½“å‘ç°ç›®å½•ä¸­å­˜åœ¨ &lt;strong&gt;CocoaPods.podfile.yaml&lt;/strong&gt; æ–‡ä»¶æ—¶ä¼šä¼˜å…ˆåŠ è½½ã€‚å¾ˆå¤šåŒå­¦å¯èƒ½åªçŸ¥é“åˆ° Podfile æ”¯æŒ Ruby çš„æ–‡ä»¶æ ¼å¼ï¼Œè€Œä¸äº†è§£å®ƒè¿˜æ”¯æŒäº† YAML æ ¼å¼ã€‚YAML æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;YAML Ain't Markup Language&lt;/code&gt; çš„ç¼©å†™ï¼Œå…¶ &lt;a href=&quot;https://yaml.org/&quot;&gt;å®˜æ–¹å®šä¹‰&lt;/a&gt;ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;YAML is a human friendly data serialization standard for all programming languages.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;å®ƒæ˜¯ä¸€ç§é¢å‘å·¥ç¨‹å¸ˆå‹å¥½çš„åºåˆ—åŒ–è¯­è¨€ã€‚æˆ‘ä»¬çš„ Lockfile æ–‡ä»¶å°±æ˜¯ä»¥ YAML æ ¼å¼å†™å…¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile.lock&lt;/code&gt; ä¸­çš„ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;93616363&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;podfile-æ–‡ä»¶è¯»å–&quot;&gt;Podfile æ–‡ä»¶è¯»å–&lt;/h3&gt;

&lt;p&gt;&lt;br /&gt;å›åˆ° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lib/cocoapods-core/podfile.rb&lt;/code&gt; æ¥çœ‹è¯»å–æ–¹æ³•ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Pod&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Podfile&lt;/span&gt;

    &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Pod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Podfile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;DSL&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;from_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Pathname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exist?&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Informative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;No Podfile exists at path `&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`.&quot;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
			&lt;span class=&quot;c1&quot;&gt;# è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒPodfile ç›®å‰å·²ç»æ”¯æŒäº†ç»“å°¾æ˜¯ .podfile å’Œ .rb åç¼€çš„æ–‡ä»¶å&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;# å…¶å®æ˜¯ä¸ºäº†æ”¹å–„å¾ˆå¤šç¼–è¯‘å™¨ä½¿ç”¨æ–‡ä»¶åç¼€æ¥ç¡®è®¤ filetypeï¼Œæ¯”å¦‚ vim&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;# ç›¸æ¯”ä¸ Podfile è¿™ä¸ªæ–‡ä»¶åè¦æ›´åŠ çš„å‹å¥½&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;extname&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'.podfile'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'.rb'&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;Podfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;from_ruby&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'.yaml'&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# ç°åœ¨ä¹Ÿæ”¯æŒäº† .yaml æ ¼å¼&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;Podfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;from_yaml&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Informative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Unsupported Podfile format `&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`.&quot;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;from_file&lt;/code&gt; åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod install&lt;/code&gt; å‘½ä»¤æ‰§è¡Œåçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;verify_podfile_exists!&lt;/code&gt; ä¸­è¢«è°ƒç”¨çš„ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;verify_podfile_exists!&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;podfile&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Informative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;No `Podfile' found in the project directory.&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;è€Œ Podfile æ–‡ä»¶çš„è¯»å–å°±æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config.podfile&lt;/code&gt; Â é‡Œè§¦å‘çš„ï¼Œä»£ç åœ¨ CocoaPods çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config.rb&lt;/code&gt; æ–‡ä»¶ä¸­ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;podfile_path_in_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;PODFILE_NAMES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;candidate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dir&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;candidate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;file?&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;candidate&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;podfile_path&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@podfile_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;podfile_path_in_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;installation_root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;podfile&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@podfile&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Podfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;from_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;podfile_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;podfile_path&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;è¿™é‡Œçš„æ–¹æ³• &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;podfile&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;podfile_path&lt;/code&gt; éƒ½æ˜¯ lazy åŠ è½½çš„ã€‚æœ€å Core çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;from_file&lt;/code&gt; å°†ä¾æ®ç›®å½•ä¸‹çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; æ–‡ä»¶ç±»å‹é€‰æ‹©è°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;from_yaml&lt;/code&gt; æˆ–è€… &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;from_ruby&lt;/code&gt;ã€‚&lt;br /&gt;
&lt;br /&gt;ä» &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod::Command::Install&lt;/code&gt; å‘½ä»¤åˆ° Podfile æ–‡ä»¶åŠ è½½çš„è°ƒç”¨æ ˆå¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1599993134203-782e510d-c084-4b57-98fe-970f5a38cc79.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;28797697&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;podfile-from-ruby-è§£æ&quot;&gt;Podfile From Ruby è§£æ&lt;/h3&gt;

&lt;p&gt;&lt;br /&gt;å½“æˆ‘ä»¬é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod init&lt;/code&gt; æ¥åˆå§‹åŒ– CocoaPods é¡¹ç›®æ—¶ï¼Œé»˜è®¤ç”Ÿæˆçš„ Podfile åç§°å°±æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt;ï¼Œé‚£å°±ä» &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile.from_ruby&lt;/code&gt; å¼€å§‹ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;from_ruby&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# â‘ &lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'r:utf-8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# å…¼å®¹ 1.9 ç‰ˆæœ¬çš„ Rubinius ä¸­çš„ç¼–ç é—®é¢˜&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;respond_to?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:encoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;encoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'UTF-8'&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;encode!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'UTF-8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# å¯¹ Podfile ä¸­ä¸è§„èŒƒçš„å•å¼•å·æˆ–åŒå¼•å·è¿›è¡Œæ£€æŸ¥ï¼Œå¹¶è¿›è¡Œè‡ªåŠ¨ä¿®æ­£ï¼ŒåŠæŠ›å‡ºé”™è¯¯&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tr!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'â€œâ€â€˜â€™â€›'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;%(&quot;&quot;''')&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;CoreUI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;warn&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;...&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# â‘¡&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;podfile&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Podfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;begin&lt;/span&gt;
	        &lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;rescue&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;
	        &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Invalid `&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;basename&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;` file: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
   	     &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;DSLError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;podfile&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;&lt;strong&gt;â‘ &lt;/strong&gt; æ˜¯å¯¹ Podfile å†…å®¹çš„è¯»å–å’Œç¼–ç ï¼ŒåŒæ—¶å¯¹å¯èƒ½å‡ºç°çš„å•å¼•å·å’ŒåŒå¼•å·çš„åŒ¹é…é—®é¢˜è¿›è¡Œäº†ä¿®æ­£ã€‚&lt;br /&gt;&lt;strong&gt;â‘¡&lt;/strong&gt; ä»¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;path&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;block&lt;/code&gt; ä¸ºå…¥å‚è¿›è¡Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;podfile&lt;/code&gt; ç±»çš„åˆå§‹åŒ–å¹¶å°†å…¶æ”¾å›ï¼Œä¿å­˜åœ¨å…¨å±€çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config.podfile&lt;/code&gt; ä¸­ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Tips: å¦‚æœè¦åœ¨ Ruby å¯¹è±¡çš„åˆå§‹åŒ–ä¸­ä¼ å…¥å‚æ•°ï¼Œéœ€è¦é‡è½½ Object çš„ &lt;a href=&quot;https://ruby-doc.org/docs/ruby-doc-bundle/UsersGuide/rg/objinitialization.html&quot;&gt;initialize&lt;/a&gt; æ–¹æ³•ï¼Œè¿™é‡Œçš„ Podfile.new(â€¦) æœ¬è´¨ä¸Šæ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;initialize&lt;/code&gt; çš„æ–¹æ³•è°ƒç”¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;initialize&lt;/code&gt; æ–¹æ³•æ‰€ä¼ å…¥çš„å°¾éšé—­åŒ… &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;block&lt;/code&gt; çš„æ ¸å¿ƒåœ¨äºå†…éƒ¨çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval&lt;/code&gt; å‡½æ•°ï¼ˆåœ¨ &lt;a href=&quot;https://zhuanlan.zhihu.com/p/187272448&quot;&gt;CocoaPods æ ¸å¿ƒç»„ä»¶&lt;/a&gt; ä¸­æœ‰æåˆ°ï¼‰ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;contents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;å®ƒå°† Podfile ä¸­çš„æ–‡æœ¬å†…å®¹è½¬åŒ–ä¸ºæ–¹æ³•æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´é‡Œé¢çš„å‚æ•°æ˜¯ä¸€æ®µ Ruby çš„ä»£ç å­—ç¬¦ä¸²ï¼Œé€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval&lt;/code&gt; æ–¹æ³•å¯ä»¥ç›´æ¥æ‰§è¡Œã€‚&lt;br /&gt;ç»§ç»­çœ‹ Podfile çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;initialize&lt;/code&gt; æ–¹æ³•ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;defined_in_file&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;internal_hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;defined_in_file&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;defined_in_file&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@internal_hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;internal_hash&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;default_target_def&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;TargetDefinition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Pods'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;default_target_def&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@root_target_definitions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;default_target_def&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@current_target_definition&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;default_target_def&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;instance_eval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@root_target_definitions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;å®ƒå®šä¹‰äº†ä¸‰ä¸ªå‚æ•°ï¼š&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;å‚æ•°&lt;/th&gt;
      &lt;th&gt;å®šä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;defined_in_file&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; æ–‡ä»¶è·¯å¾„&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;internal_hash&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;é€šè¿‡ yaml åºåˆ—åŒ–å¾—åˆ°çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; é…ç½®ä¿¡æ¯ï¼Œä¿å­˜åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;internal_hash&lt;/code&gt; ä¸­&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;block&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;ç”¨äºæ˜ å°„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; çš„ DSL é…ç½®&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;blockquote&gt;
  &lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;from_ruby&lt;/code&gt; åˆå§‹åŒ–çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; åªä¼ å…¥äº†å‚æ•° 1 å’Œ 3ï¼Œå‚æ•° 2 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;internal_hash&lt;/code&gt; åˆ™æ˜¯æä¾›ç»™ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;from_yaml&lt;/code&gt; çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;å½“ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;block&lt;/code&gt; å­˜åœ¨ï¼Œä¼šåˆå§‹åŒ–åä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods&lt;/code&gt; çš„ TargetDefinition å¯¹è±¡ï¼Œç”¨äºä¿å­˜ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods project&lt;/code&gt; çš„ç›¸å…³ä¿¡æ¯å’Œ Pod ä¾èµ–ã€‚ç„¶åè°ƒç”¨ &lt;em&gt;&lt;a href=&quot;https://ruby-doc.org/core-2.7.0/BasicObject.html&quot;&gt;instance_eval&lt;/a&gt;&lt;/em&gt; æ‰§è¡Œä¼ å…¥çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;block&lt;/code&gt;ï¼Œå°† Podfile çš„ DSL å†…å®¹è½¬æ¢æˆå¯¹åº”çš„æ–¹æ³•å’Œå‚æ•°ï¼Œæœ€ç»ˆå°†å‚æ•°å­˜å…¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;internal_hash&lt;/code&gt; å’Œå¯¹åº”çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target_definitions&lt;/code&gt; ä¸­ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Tips: åœ¨ Ruby ä¸­å­˜åœ¨ä¸¤ç§ä¸åŒçš„æ–¹å¼æ¥æ‰§è¡Œä»£ç å— &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;block&lt;/code&gt;ï¼Œåˆ†åˆ«æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;instance_eval&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class_eval&lt;/code&gt;ã€‚
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class_eval&lt;/code&gt; çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¸è°ƒç”¨ç±»ç›¸å…³ï¼Œè°ƒç”¨è€…æ˜¯ç±»åæˆ–è€…æ¨¡å—åï¼Œè€Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;instance_eval&lt;/code&gt; çš„è°ƒç”¨è€…å¯ä»¥æ˜¯ç±»çš„å®ä¾‹æˆ–è€…ç±»æœ¬èº«ã€‚ç»†èŠ‚çœ‹ &lt;a href=&quot;https://stackoverflow.com/questions/900419/how-to-understand-the-difference-between-class-eval-and-instance-eval&quot;&gt;StackoverFlow&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a name=&quot;434ab4f0&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;podfile-from-yaml-è§£æ&quot;&gt;Podfile From YAML è§£æ&lt;/h3&gt;

&lt;p&gt;&lt;br /&gt;YAML æ ¼å¼çš„ Podfile åŠ è½½éœ€è¦å€ŸåŠ© &lt;strong&gt;YAMLHelper&lt;/strong&gt; ç±»æ¥å®Œæˆï¼ŒYAMLHelper åˆ™æ˜¯åŸºäº &lt;a href=&quot;https://github.com/ruby/yaml&quot;&gt;yaml&lt;/a&gt; çš„ç®€å•å°è£…ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;from_yaml&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'r:utf-8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  
    &lt;span class=&quot;c1&quot;&gt;# ä¸ºäº†è§£å†³ Rubinius incomplete encoding in 1.9 mode&lt;/span&gt;
  	&lt;span class=&quot;c1&quot;&gt;# https://github.com/rubinius/rubinius/issues/1539&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;respond_to?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:encoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;encoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'UTF-8'&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;encode!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'UTF-8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;YAMLHelper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;load_string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;from_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;from_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;internal_hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dup&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;target_definitions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;internal_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'target_definitions'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;podfile&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Podfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;internal_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;target_definitions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;definition_hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;definition&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;TargetDefinition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;from_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;definition_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;podfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;podfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;root_target_definitions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;definition&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;podfile&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;from_yaml&lt;/code&gt; å°†æ–‡ä»¶å†…å®¹è½¬æˆ Ruby hash åè½¬å…¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;from_hash&lt;/code&gt; æ–¹æ³•ã€‚&lt;br /&gt;
&lt;br /&gt;åŒºåˆ«äº &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;from_ruby&lt;/code&gt;ï¼Œè¿™é‡Œè°ƒç”¨çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;initialize&lt;/code&gt; å°†è¯»å–çš„ hash ç›´æ¥å­˜å…¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;internal_hash&lt;/code&gt;ï¼Œç„¶ååˆ©ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TargetDefinition.from_hash&lt;/code&gt; æ¥å®Œæˆçš„ hash å†…å®¹åˆ° targets çš„è½¬æ¢ï¼Œå› æ­¤ï¼Œè¿™é‡Œæ— éœ€ä¼ å…¥ block è¿›è¡Œ DSL è§£æå’Œæ–¹æ³•è½¬æ¢ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;32e84827&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;podfile-å†…å®¹è§£æ&quot;&gt;Podfile å†…å®¹è§£æ&lt;/h2&gt;

&lt;p&gt;&lt;br /&gt;å‰é¢æåˆ° Podfile çš„å†…å®¹æœ€ç»ˆä¿å­˜åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;internal_hash&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target_definitions&lt;/code&gt; ä¸­ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯ä½¿ç”¨äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hash&lt;/code&gt; æ¥ä¿å­˜æ•°æ®ã€‚ç”±äº YAML æ–‡ä»¶æ ¼å¼çš„ Podfile åŠ è½½åå°±æ˜¯ hash å¯¹è±¡ï¼Œæ— éœ€è¿‡å¤šåŠ å·¥ã€‚å”¯ä¸€éœ€è¦å¤„ç†çš„æ˜¯é€’å½’è°ƒç”¨ TargetDefinition çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;from_hash&lt;/code&gt; æ–¹æ³•æ¥è§£æ target å­èŠ‚ç‚¹çš„æ•°æ®ã€‚&lt;br /&gt;
&lt;br /&gt;å› æ­¤ï¼Œæ¥ä¸‹æ¥çš„å†…å®¹è§£æä¸»è¦é’ˆå¯¹ Ruby æ–‡ä»¶æ ¼å¼çš„ DSL è§£æï¼Œæˆ‘ä»¬ä»¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod&lt;/code&gt; æ–¹æ³•ä¸ºä¾‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Example'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Alamofire'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;å½“è§£æåˆ° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod 'Alamofire'&lt;/code&gt; æ—¶ï¼Œä¼šå…ˆé€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval(contents, nil, path.to_s&lt;/code&gt; å°†å…¶è½¬æ¢ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dsl.rb&lt;/code&gt; ä¸­çš„æ–¹æ³•ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;requirements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;StandardError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'A dependency requires a name.'&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;current_target_definition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;store_pod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;requirements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;name ä¸º Alamofireï¼Œç”±äºæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šå¯¹åº”çš„ Alamofire ç‰ˆæœ¬ï¼Œé»˜è®¤ä¼šä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ã€‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;requirements&lt;/code&gt; Â æ˜¯æ§åˆ¶ è¯¥ pod æ¥æºè·å–æˆ–è€… pod target çš„ç¼–è¯‘é€‰é¡¹ç­‰ï¼Œä¾‹å¦‚ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Alamofire'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'0.9'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Alamofire'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:modular_headers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Alamofire'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:configurations&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Debug'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Beta'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Alamofire'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:source&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://github.com/CocoaPods/Specs.git'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Alamofire'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:subspecs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Attribute'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'QuerySet'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Alamofire'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:testspecs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'UnitTests'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'SomeOtherTests'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Alamofire'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'~/Documents/AFNetworking'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Alamofire'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:podspec&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://example.com/Alamofire.podspec'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Alamofire'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:git&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://github.com/looseyi/Alamofire.git'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:tag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'0.7.0'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;Tipsï¼šrequirements æœ€ç»ˆæ˜¯ä»¥ Gem::Requirement å¯¹è±¡æ¥ä¿å­˜çš„ã€‚å…³äº pod è¯¦ç»†è¯´æ˜è¯·ç§»æ­¥ï¼š&lt;a href=&quot;https://guides.cocoapods.org/syntax/podfile.html#pod&quot;&gt;Podfile æ‰‹å†Œ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;å¯¹ name è¿›è¡Œæ ¡éªŒåï¼Œç›´æ¥è½¬å…¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;current_target_definition&lt;/code&gt; æ¯•ç«Ÿ Pod åº“éƒ½æ˜¯å­˜åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods.project&lt;/code&gt; ä¹‹ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;store_pod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;requirements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parse_subspecs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requirements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# This parse method must be called first&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;parse_inhibit_warnings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requirements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;parse_modular_headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requirements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;parse_configuration_whitelist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requirements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;parse_project_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requirements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requirements&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;requirements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;empty?&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requirements&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;get_hash_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'dependencies'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt;
  &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_hash_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;base_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;HASH_KEYS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;include?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;StandardError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Unsupported hash key `&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;internal_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;base_value&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;internal_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;nil?&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;internal_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;set_hash_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;HASH_KEYS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;include?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;StandardError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Unsupported hash key `&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;internal_hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;ç»è¿‡ä¸€ç³»åˆ—æ£€æŸ¥ä¹‹åï¼Œè°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;get_hash_value&lt;/code&gt; è·å– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;internal_hash&lt;/code&gt; çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dependencies&lt;/code&gt;ï¼Œå¹¶å°† name å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;requirements&lt;/code&gt; é€‰é¡¹å­˜å…¥ã€‚&lt;br /&gt;
&lt;br /&gt;è¿™é‡Œçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dependencies&lt;/code&gt; key æ˜¯å®šä¹‰åœ¨ TargetDefinition æ–‡ä»¶çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;**HASH_KEYS**&lt;/code&gt;ï¼Œè¡¨ç¤º Core æ‰€æ”¯æŒçš„é…ç½®å‚æ•°:&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;HASH_KEYS&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;%w(
    name
    platform
    podspecs
    exclusive
    link_with
    link_with_first_target
    inhibit_warnings
    use_modular_headers
    user_project_path
    build_configurations
    project_names
    dependencies
    script_phases
    children
    configuration_pod_whitelist
    uses_frameworks
    swift_version_requirements
    inheritance
    abstract
    swift_version
)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;freeze&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;Tipsï¼šfreeze è¡¨ç¤ºè¯¥æ•°ç»„ä¸å¯ä¿®æ”¹ã€‚å¦å¤–ï¼Œ%w ç”¨äºè¡¨ç¤ºå…¶ä¸­å…ƒç´ è¢«å•å¼•å·æ‹¬èµ·çš„æ•°ç»„ã€‚
%W(#{foo} Bar Bar\ with\ space)
=&amp;gt; [â€œFooâ€, â€œBarâ€, â€œBar with spaceâ€]
å¯¹åº”çš„è¿˜æœ‰ %W è¡¨ç¤ºå…¶ä¸­å…ƒç´ è¢«åŒå¼•å·æ‹¬èµ·çš„æ•°ç»„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;æ•´ä¸ªæ˜ å°„è¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1599993134247-591416bf-8bbb-46cb-a8b9-86c41721acde.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;f7ab0349&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;ç²¾ç»†åŒ–çš„-podfile-é…ç½®&quot;&gt;ç²¾ç»†åŒ–çš„ Podfile é…ç½®&lt;/h1&gt;

&lt;p&gt;&lt;br /&gt;æœ€åä¸€èŠ‚è®©æˆ‘ä»¬æ¥å±•ç¤ºä¸€ä¸‹ ğŸ’ªï¼Œçœ‹çœ‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; æ‰€è°“çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;targets&lt;/code&gt; ä¹‹é—´çš„ä¾èµ–å…³ç³»å¯ä»¥ç©å‡ºä»€ä¹ˆèŠ±æ¥ ğŸ˜‚ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;204d60fe&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;target-åµŒå¥—&quot;&gt;Target åµŒå¥—&lt;/h2&gt;

&lt;p&gt;&lt;br /&gt;æœ€ç®€å•çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; å°±æ˜¯æ–‡ç« å¼€å¤´æ‰€å±•ç¤ºçš„ï¼Œä¸è¿‡åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; ä¸­è¿˜å¯ä»¥å¯¹ Target è¿›è¡ŒåµŒå¥—ä½¿ç”¨ã€‚å‡è®¾åœ¨æˆ‘ä»¬çš„ä¸»å·¥ç¨‹åŒæ—¶ç»´æŠ¤äº†ä¸‰ä¸ªé¡¹ç›®ï¼Œå®ƒä»¬éƒ½ä¾èµ–äº† Alamofireï¼Œé€šè¿‡ä¿„ç½—æ–¯å¥—å¨ƒå°±èƒ½è½»æ¾æ»¡è¶³æ¡ä»¶ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Demo1'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Alamofire'&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Demo2'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Demo3'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;ç¼–è¯‘åçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods.project&lt;/code&gt; é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1600222941775-314f4f32-ae1d-4bb2-befc-8f46bf25c105.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;æˆ‘ä»¬çŸ¥é“ï¼ŒCocoaPods åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods.project&lt;/code&gt; ä¸­ä¸ºæ¯ä¸ªåœ¨ Podfile ä¸­å£°æ˜çš„ Target ç”Ÿæˆä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„ä¸“å± Target æ¥é›†æˆå®ƒçš„ Pod ä¾èµ–ã€‚å¯¹äºæœ‰ä¾èµ–å…³ç³»çš„ Target å…¶ç”Ÿæˆçš„ä¸“å± Target åç§°åˆ™ä¼šæŒ‰ç…§ä¾èµ–å…³ç³»å åŠ æ¥å‘½åï¼Œå¦‚ Â &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target Demo3&lt;/code&gt; çš„ä¸“å± Target åç§°ä¸º &lt;strong&gt;Pods-Demo1-Demo2-Demo3&lt;/strong&gt;ã€‚å®‰è£…å®Œæˆåä¸»é¡¹ç›®å°†ä¼šå¼•å…¥è¯¥ä¸“å± Target æ¥å®Œæˆä¾èµ–å…³è”ï¼Œå¦‚ Demo3ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1600222941734-6b94dfeb-d608-4240-9a38-ebb812da18d0.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;å…³äº Target åµŒå¥—ï¼Œä¸€ä¸ªçˆ¶èŠ‚ç‚¹æ˜¯å¯ä»¥æœ‰å¤šä¸ªå­èŠ‚ç‚¹çš„ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Demo1'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Alamofire'&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Demo2'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  	&lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'RxSwift'&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Demo3'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
	  &lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'SwiftyJSON'&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a name=&quot;f52857bd&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;abstract-target&quot;&gt;Abstract Target&lt;/h2&gt;

&lt;p&gt;&lt;br /&gt;ä¸Šé¢ä¾‹å­ä¸­ï¼Œç”±äº Demo1 ä¸ Demo2 éƒ½éœ€è¦ä¾èµ– Alamofireï¼Œæˆ‘ä»¬é€šè¿‡ Target åµŒå¥—è®© Demo2 æ¥ç»§æ‰¿ Demo1 çš„ Pods åº“ä¾èµ–ã€‚è¿™ä¹ˆåšå¯èƒ½ä¼šæœ‰ä¸€ä¸ªé™åˆ¶ï¼Œå°±æ˜¯å½“ Demo1 çš„ Pod ä¾èµ–å¹¶é Demo2 æ‰€éœ€è¦çš„æ—¶å€™ï¼Œå°±ä¼šæœ‰ä¾èµ–å†—ä½™ã€‚æ­¤æ—¶å°±éœ€è¦ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Abstract Target&lt;/code&gt; ç™»åœºäº†ã€‚ä¾‹å¦‚ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;abstract_target&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Networking'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Alamofire'&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Demo1'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'RxSwift'&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Demo2'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ReactCocoa'&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Demo3'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;å°†ç½‘ç»œè¯·æ±‚çš„ pod ä¾èµ–æŠ½è±¡åˆ° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Networking&lt;/code&gt; target ä¸­ï¼Œè¿™æ ·å°±èƒ½é¿å… Demo2 å¯¹ RxSwift çš„ä¾èµ–ã€‚è¿™ç§æ–¹å¼é…ç½®æ‰€ç”Ÿæˆçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods.project&lt;/code&gt; å¹¶ä¸ä¼šå­˜åœ¨åç§°ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Networking&lt;/code&gt; çš„ Targetï¼Œå®ƒä»…ä¼šåœ¨ä¸»å·¥ç¨‹çš„ä¸“å± Target ä¸­ç•™ä¸‹å°è®°ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1600222941749-f98999d7-0a31-4523-bd31-8646c92f05fc.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;25f9c7fa&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h1&gt;

&lt;p&gt;&lt;br /&gt;æœ¬æ–‡ç»“åˆ Xcode å·¥ç¨‹ç»“æ„æ¥å±•å¼€ CocoaPods-Core çš„ Podfile ä¹‹æ—…ï¼Œä¸»è¦æ„Ÿå—å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;å†ä¸€æ¬¡æ„Ÿå—äº† Ruby è¯­è¨€çš„åŠ¨æ€ä¹‹ç¾ï¼Œç»™æˆ‘ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿˜ä½ ä¸€ä¸ªæœªçŸ¥ä¸–ç•Œï¼›&lt;/li&gt;
  &lt;li&gt;ç»“åˆ Xcode å·¥ç¨‹ç»“æ„æ›´å¥½çš„ç†è§£äº† Podfile çš„è®¾è®¡åˆè¡·ï¼Œ&lt;strong&gt;åŸºç¡€çŸ¥è¯†å¾ˆé‡è¦ï¼›&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;æ‰€è°“â€œç®—æ³•æ— ç”¨è®ºâ€è¿™ç§äº‹æƒ…ï¼Œåœ¨è®¡ç®—æœºçš„ä¸–ç•Œæ˜¯ä¸å­˜åœ¨çš„ï¼Œæ²¡æœ‰å¥½çš„æ•°æ®ç»“æ„çŸ¥è¯†å¦‚ä½•æ›´å¥½çš„æŠ½è±¡ï¼›&lt;/li&gt;
  &lt;li&gt;äº†è§£ Podfile çš„ DSL æ˜¯å¦‚ä½•æ˜ å°„åˆ°å†…å­˜ä¸­ï¼Œåˆæ˜¯å¦‚ä½•æ¥å­˜å‚¨æ¯ä¸ªå…³é”®æ•°æ®çš„&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;a name=&quot;c6813027&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†&quot;&gt;çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†&lt;/h1&gt;

&lt;p&gt;&lt;br /&gt;è¿™é‡Œç½—åˆ—äº†å››ä¸ªé—®é¢˜ç”¨æ¥è€ƒå¯Ÿä½ æ˜¯å¦å·²ç»æŒæ¡äº†è¿™ç¯‡æ–‡ç« ï¼Œå¦‚æœæ²¡æœ‰å»ºè®®ä½ åŠ å…¥**æ”¶è— **å†æ¬¡é˜…è¯»ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;è¯´è¯´ TargetDefinition çš„æ•°æ®ç»“æ„ ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;è¯´è¯´ TargetDefinition ä¸ Xcode Project çš„å…³ç³» ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;Podfile çš„æ–‡ä»¶æ ¼å¼æœ‰å‡ ç§ï¼Œåˆ†åˆ«æ˜¯å¦‚ä½•åŠ è½½ ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;Lockfile å’Œ Podfile çš„å…³ç³»&lt;/li&gt;
&lt;/ol&gt;</content><author><name>å†¬ç“œ</name><email>gua@desgard.com</email></author><category term="CocoaPods å†é™©è®°" /><category term="Ruby" /><summary type="html">å¼•å­ åœ¨ä¸Šæ–‡ CocoaPods å‘½ä»¤è§£æ ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å¯¹ CLAide çš„æºç åˆ†æï¼Œäº†è§£äº† CocoaPods æ˜¯å¦‚ä½•å¤„ç† pod å‘½ä»¤ï¼Œå¤šçº§å‘½ä»¤åˆæ˜¯å¦‚ä½•ç»„ç»‡å’ŒåµŒå¥—çš„ï¼Œå¹¶è§£é‡Šäº†å‘½ä»¤è¡Œè¾“å‡ºæ‰€ä»£è¡¨çš„å«ä¹‰ã€‚ä»Šå¤©æˆ‘ä»¬å¼€å§‹å­¦ä¹  Podfile ã€‚ å¤§å¤š iOS å·¥ç¨‹å¸ˆæœ€å…ˆæ¥è§¦åˆ°çš„ CocoaPods æ¦‚å¿µåº”è¯¥æ˜¯ Podfileï¼Œè€Œ Podfile å±äº cocoapods-coreï¼ˆä»¥ä¸‹ç®€ç§° Coreï¼‰ çš„ä¸¤å¤§æ¦‚å¿µä¹‹ä¸€ã€‚å¦å¤–ä¸€ä¸ªåˆ™æ˜¯ Podspec (ç”¨äºæè¿° Pod Library çš„é…ç½®æ–‡ä»¶)ï¼Œåªæœ‰å½“ä½ éœ€è¦å¼€å‘ Pod ç»„ä»¶çš„æ—¶å€™æ‰ä¼šæ¥è§¦ã€‚ åœ¨ä»‹ç» Podfile çš„å†…å®¹ç»“æ„ä¹‹å‰ï¼Œå¿…é¡»è¦è°ˆè°ˆ Xcode çš„å·¥ç¨‹ç»“æ„ã€‚ Xcode å·¥ç¨‹ç»“æ„ æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªæç®€ Podfile å£°æ˜ï¼š target 'Demo' do pod 'Alamofire', :path =&amp;gt; './Alamofire' end å®ƒç¼–è¯‘åçš„å·¥ç¨‹ç›®å½•å¦‚ä¸‹ï¼š å¦‚ä½ æ‰€è§ Podfile çš„é…ç½®æ˜¯å›´ç»• Xcode çš„è¿™äº›å·¥ç¨‹ç»“æ„ï¼š**Workspaceã€Projectã€Target åŠ Build Setting **æ¥å±•å¼€çš„ã€‚ä½œä¸ºåŒ…ç®¡ç†å·¥å…· CocoaPods å°†æ‰€ç®¡ç†çš„ Pods ä¾èµ–åº“ç»„è£…æˆä¸€ä¸ªä¸ª Targetï¼Œç»Ÿä¸€æ”¾å…¥ Pods project ä¸­çš„ Demo targetï¼Œå¹¶è‡ªåŠ¨é…ç½®å¥½ Target é—´çš„ä¾èµ–å…³ç³»ã€‚ ä¹‹åå°† Example ä¸»å·¥ç¨‹å’Œ Pods å·¥ç¨‹ä¸€èµ·æ‰“åŒ…åˆ°æ–°å»ºçš„ Example.workspaceï¼Œé…å¥½ä¸»å·¥ç¨‹ä¸ Pods å·¥ç¨‹ä¹‹é—´çš„ä¾èµ–ï¼Œå®Œæˆæœ€ç»ˆè½¬æ¢ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥èŠä¸€èŠè¿™äº› Xcode ç»“æ„ï¼š Target - æœ€å°å¯ç¼–è¯‘å•å…ƒ A target specifies a product to build and contains the instructions for building the product from a set of files in a project or workspace. é¦–å…ˆæ˜¯ Targetï¼Œå®ƒä½œä¸ºå·¥ç¨‹ä¸­æœ€å°çš„å¯ç¼–è¯‘å•å…ƒï¼Œæ ¹æ® ****Build Phases** å’Œ **Build Settings** å°†æºç ä½œä¸ºè¾“å…¥ï¼Œç»ç¼–è¯‘åè¾“å‡ºç»“æœäº§ç‰©**ã€‚å…¶è¾“å‡ºç»“æœå¯ä»¥æ˜¯é“¾æ¥åº“ã€å¯æ‰§è¡Œæ–‡ä»¶æˆ–è€…èµ„æºåŒ…ç­‰ï¼Œå…·ä½“ç»†èŠ‚å¦‚ä¸‹ï¼š Build Settingï¼šæ¯”å¦‚æŒ‡å®šä½¿ç”¨çš„ç¼–è¯‘å™¨ï¼Œç›®æ ‡å¹³å°ã€ç¼–è¯‘å‚æ•°ã€å¤´æ–‡ä»¶æœç´¢è·¯å¾„ç­‰ï¼› Build æ—¶çš„å‰ç½®ä¾èµ–ã€æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶ï¼› Build ç”Ÿæˆç›®æ ‡çš„ç­¾åã€Capabilities ç­‰å±æ€§ï¼› Inputï¼šå“ªäº›æºç æˆ–è€…èµ„æºæ–‡ä»¶ä¼šè¢«ç¼–è¯‘æ‰“åŒ…ï¼› Outputï¼šå“ªäº›é™æ€åº“ã€åŠ¨æ€åº“ä¼šè¢«é“¾æ¥ï¼› Project - Targets çš„è½½ä½“ An Xcode project is a repository for all the files, resources, and information required to build one or more software products. Project å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ Xcode å·¥ç¨‹ï¼Œä½œä¸ºä¸€ä¸ªæˆ–å¤šä¸ª Targets çš„èµ„æºç®¡ç†å™¨ï¼Œæœ¬èº«æ— æ³•è¢«ç¼–è¯‘ã€‚Project æ‰€ç®¡ç†çš„èµ„æºéƒ½æ¥è‡ªå®ƒæ‰€åŒ…å«çš„ Targetsã€‚ç‰¹ç‚¹å¦‚ä¸‹ï¼š è‡³å°‘åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå¯ç¼–è¯‘çš„ Targetï¼› ä¸ºæ‰€åŒ…å«çš„ Targets å®šä¹‰äº†ä¸€ä»½é»˜è®¤ç¼–è¯‘é€‰é¡¹ï¼Œå¦‚æœ Target æœ‰è‡ªå·±çš„é…ç½®ï¼Œåˆ™ä¼šè¦†ç›– Project çš„é¢„è®¾å€¼ï¼› èƒ½å°†å…¶ä»– Project ä½œä¸ºä¾èµ–åµŒå…¥å…¶ä¸­ï¼› ä¸‹å›¾ä¸º Project ä¸æ‰€åŒ…å«å¯¹ Targets çš„å…³ç³» Workspace - å®¹å™¨ A workspace is an Xcode document that groups projects ä½œä¸ºçº¯ç²¹çš„é¡¹ç›®å®¹å™¨ï¼ŒWorkspace ä¸å‚ä¸ä»»ä½•ç¼–è¯‘é“¾æ¥è¿‡ç¨‹ï¼Œä»…ç”¨äºç®¡ç†åŒå±‚çº§çš„ Projectï¼Œå…¶ç‰¹ç‚¹ï¼š Workspace å¯ä»¥åŒ…å«å¤šä¸ª Projectsï¼› åŒä¸€ä¸ª Workspace ä¸­çš„ Proejct æ–‡ä»¶å¯¹äºå…¶ä»– Project æ˜¯é»˜è®¤å¯è§çš„ï¼Œè¿™äº› Projcts ä¼šå…±äº« workspace build directory ï¼› ä¸€ä¸ª Xcode Project å¯ä»¥è¢«åŒ…å«åœ¨å¤šä¸ªä¸åŒçš„ Workspace ä¸­ï¼Œå› ä¸ºæ¯ä¸ª Project éƒ½æœ‰ç‹¬ç«‹çš„ Identityï¼Œé»˜è®¤æ˜¯ Project Nameï¼› Scheme - æè¿° Build è¿‡ç¨‹ An Xcode scheme defines a collection of targets to build, a configuration to use when building, and a collection of tests to execute. Scheme æ˜¯å¯¹äºæ•´ä¸ª Build è¿‡ç¨‹çš„ä¸€ä¸ªæŠ½è±¡ï¼Œå®ƒæè¿°äº† Xcode åº”è¯¥ä½¿ç”¨å“ªç§ Build Configurations ã€æ‰§è¡Œä»€ä¹ˆä»»åŠ¡ã€ç¯å¢ƒå‚æ•°ç­‰æ¥æ„å»ºæˆ‘ä»¬æ‰€éœ€çš„ Targetã€‚ Scheme ä¸­é¢„è®¾äº†å…­ä¸ªä¸»è¦è¿‡ç¨‹ï¼š Buildã€Runã€Testã€Profileã€Analyzeã€Archiveã€‚åŒ…æ‹¬äº†æˆ‘ä»¬å¯¹ Target çš„æ‰€æœ‰æ“ä½œï¼Œæ¯ä¸€ä¸ªè¿‡ç¨‹éƒ½å¯ä»¥å•ç‹¬é…ç½®ã€‚ CocoaPods-Core The CocoaPods-Core gem provides support to work with the models of CocoaPods, for example the Podspecs or the Podfile. CocoaPods-Core ç”¨äº CocoaPods ä¸­é…ç½®æ–‡ä»¶çš„è§£æï¼ŒåŒ…æ‹¬ Podfileã€Podspec ä»¥åŠè§£æåçš„ä¾èµ–é”å­˜æ–‡ä»¶ï¼Œå¦‚ Podfile.lock ç­‰ã€‚ CocoaPods-Core çš„æ–‡ä»¶æ„æˆ ç…§ä¾‹ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡å…¥å£æ–‡ä»¶ lib/cocoapods-core.rb æ¥ä¸€çª¥ Core é¡¹ç›®çš„ä¸»è¦æ–‡ä»¶ï¼š module Pod require 'cocoapods-core/gem_version' class PlainInformative &amp;lt; StandardError; end class Informative &amp;lt; PlainInformative; end require 'pathname' require 'cocoapods-core/vendor' # ç”¨äºå­˜å‚¨ PodSpec ä¸­çš„ç‰ˆæœ¬å· autoload :Version, 'cocoapods-core/version' # pod çš„ç‰ˆæœ¬é™åˆ¶ autoload :Requirement, 'cocoapods-core/requirement' # é…ç½® Podfile æˆ– PodSpec ä¸­çš„ pod ä¾èµ– autoload :Dependency, 'cocoapods-core/dependency' # è·å– Github ä»“åº“ä¿¡æ¯ autoload :GitHub, 'cocoapods-core/github' # å¤„ç† HTTP è¯·æ±‚ autoload :HTTP, 'cocoapods-core/http' # è®°å½•æœ€ç»ˆ pod çš„ä¾èµ–ä¿¡æ¯ autoload :Lockfile, 'cocoapods-core/lockfile' # è®°å½• SDK çš„åç§°å’Œ target ç‰ˆæœ¬ autoload :Platform, 'cocoapods-core/platform' # å¯¹åº” Podfile æ–‡ä»¶çš„ class autoload :Podfile, 'cocoapods-core/podfile' # ç®¡ç† PodSpec çš„é›†åˆ autoload :Source, 'cocoapods-core/source' # ç®¡ç†åŸºäº CDN æ¥æºçš„ PodSpec é›†åˆ autoload :CDNSource, 'cocoapods-core/cdn_source' # ç®¡ç†åŸºäº Trunk æ¥æºçš„ PodSpec é›†åˆ autoload :TrunkSource, 'cocoapods-core/trunk_source' # å¯¹åº” PodSpec æ–‡ä»¶çš„ class autoload :Specification, 'cocoapods-core/specification' # å°† pod ä¿¡æ¯è½¬ä¸º .yml æ–‡ä»¶ï¼Œç”¨äº lockfile çš„åºåˆ—åŒ– autoload :YAMLHelper, 'cocoapods-core/yaml_helper' # è®°å½• pod ä¾èµ–ç±»å‹ï¼Œæ˜¯é™æ€åº“/åŠ¨æ€åº“ autoload :BuildType, 'cocoapods-core/build_type' ... Spec = Specification end å°†è¿™äº› Model ç±»æŒ‰ç…§å¯¹åº”çš„ä¾èµ–å…³ç³»è¿›è¡Œåˆ’åˆ†ï¼Œå±‚çº§å¦‚ä¸‹ï¼š Podfile çš„ä¸»è¦æ•°æ®ç»“æ„ å…ˆæ¥äº†è§£ Podfile çš„ä¸»è¦æ•°æ®ç»“æ„ Specification The Specification provides a DSL to describe a Pod. A pod is defined as a library originating from a source. A specification can support detailed attributes for modules of code Â through subspecs. Specification å³å­˜å‚¨ PodSpec çš„å†…å®¹ï¼Œæ˜¯ç”¨äºæè¿°ä¸€ä¸ª Pod åº“çš„æºä»£ç å’Œèµ„æºå°†å¦‚ä½•è¢«æ‰“åŒ…ç¼–è¯‘æˆé“¾æ¥åº“æˆ– frameworkï¼Œåç»­å°†ä¼šä»‹ç»æ›´å¤šçš„ç»†èŠ‚ã€‚ TargetDefinition The TargetDefinition stores the information of a CocoaPods static library. The target definition can be linked with one or more targets of the user project. TargetDefinition æ˜¯ä¸€ä¸ªå¤šå‰æ ‘ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹è®°å½•ç€ Podfile ä¸­å®šä¹‰çš„ Pod çš„ Source æ¥æºã€Build Settingã€Pod å­ä¾èµ–ç­‰ã€‚è¯¥æ ‘çš„æ ¹èŠ‚ç‚¹æŒ‡å‘ Podfileï¼Œè€Œ Podfile ä¸­çš„ root_target_definitions åˆ™è®°å½•ç€æ‰€æœ‰çš„ TargetDefinition çš„æ ¹èŠ‚ç‚¹ï¼Œæ­£å¸¸æƒ…å†µä¸‹è¯¥ list ä¸­åªæœ‰ä¸€ä¸ª root å³ **Pods.project**ã€‚ ä¸ºäº†ä¾¿äºé˜…è¯»ï¼Œç®€åŒ–äº†å¤§é‡çš„ DSL é…ç½®ç›¸å…³çš„æ–¹æ³•å’Œå±æ€§å¹¶å¯¹ä»£ç é¡ºåºåšäº†è°ƒæ•´ï¼Œå¤§è‡´ç»“æ„å¦‚ä¸‹ï¼š module Pod class Podfile class TargetDefinition # çˆ¶èŠ‚ç‚¹: TargetDefinition æˆ–è€… Podfile attr_reader :parent # å­èŠ‚ç‚¹: TargetDefinition attr_reader :children # è®°å½• tareget çš„é…ç½®ä¿¡æ¯ attr_accessor :internal_hash def root? parent.is_a?(Podfile) || parent.nil? end def root if root? self else parent.root end end def podfile root.parent end # ... end end å¯¹åº”ä¸Šä¸€èŠ‚ Xcode å·¥ç¨‹ç»“æ„ä¸­çš„ Podfile å…³ç³»å¦‚ä¸‹ï¼š CocoaPods æ­£æ˜¯å·§å¦™åˆ©ç”¨äº† Xcode å·¥ç¨‹ç»“æ„çš„ç‰¹ç‚¹ï¼Œå¼•å…¥ Â Pods.project è¿™ä¸€ä¸­é—´å±‚ï¼Œå°†ä¸»å·¥ç¨‹çš„ Pods ä¾èµ–å…¨éƒ¨è½¬æ¥åˆ° Pods.project ä¸Šï¼Œæœ€åå†å°† Pods.project ä½œä¸ºä¸»é¡¹ç›®çš„ä¾èµ–ã€‚å°½ç®¡è¿™ä¹ˆåšä¹Ÿå—åˆ°äº†ä¸€äº›è´¨ç–‘å’Œè¯Ÿç—…ï¼ˆæ‰€è°“çš„ä¾µå…¥æ€§å¤ªå¼ºï¼‰ï¼Œä½†ç¬”è€…çš„è§‚ç‚¹æ˜¯ï¼Œæ­£å¾—ç›Šäº Pods.project è¿™ä¸€è®¾è®¡éš”ç»äº†ç¬¬ä¸‰æ–¹ä¾èµ–åº“å¯¹äºä¸»é¡¹ç›®çš„é¢‘ç¹æ›´æ”¹ï¼Œä¹Ÿä¾¿äºåç»­çš„ç®¡ç†å’Œæ›´æ–°ï¼Œä½“ç°äº†è½¯ä»¶å·¥ç¨‹ä¸­çš„å¼€æ”¾-å…³é—­åŸåˆ™ã€‚ æ¯”å¦‚ï¼Œåœ¨ Pod 1.7.0 ç‰ˆæœ¬ä¸­æ”¯æŒçš„ Multiple Xcodeproj Generation å°±æ˜¯è§£å†³éšç€é¡¹ç›®çš„è¿­ä»£è€Œæ—¥ç›Šå¢å¤§çš„ Pods project çš„é—®é¢˜ã€‚è¯•æƒ³å½“ä½ çš„é¡¹ç›®ä¸­å­˜åœ¨ä¸Šç™¾ä¸ªä¾èµ–åº“ï¼Œæ¯ä¸ªä¾èµ–åº“çš„å˜æ›´éƒ½ä¼šå½±å“åˆ°ä½ çš„ä¸»å·¥ç¨‹ï¼Œè¿™å°†æ˜¯éå¸¸å¯æ€•çš„é—®é¢˜ã€‚ Podfile The Podfile is a specification that describes the dependencies of the targets of one or more Xcode projects. Podfile æ˜¯ç”¨äºæè¿°ä¸€ä¸ªæˆ–å¤šä¸ª Xcode Project ä¸­å„ä¸ª Targets ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ è¿™äº› Targets çš„ä¾èµ–å…³ç³»å¯¹åº”çš„å°±æ˜¯ TargetDefinition æ ‘ä¸­çš„å„å­èŠ‚ç‚¹çš„å±‚çº§å…³ç³»ã€‚å¦‚å‰é¢æ‰€è¯´ï¼Œæœ‰äº† Podfile è¿™ä¸ªæ ¹èŠ‚ç‚¹çš„æŒ‡å‘ï¼Œä»…éœ€å¯¹ä¾èµ–æ ‘è¿›è¡Œéå†ï¼Œå°±èƒ½è½»æ¾è·å–å®Œæ•´çš„ä¾èµ–å…³ç³»ã€‚ æœ‰äº†è¿™å±‚ä¾èµ–æ ‘ï¼Œå¯¹äºæŸä¸ª Pod åº“çš„æ›´æ–°å³æ˜¯å¯¹æ ‘èŠ‚ç‚¹çš„æ›´æ–°ï¼Œä¾¿å¯è½»æ¾çš„åˆ†æå‡ºæ­¤æ¬¡æ›´æ–°æ¶‰åŠçš„å½±å“ã€‚ ç®€åŒ–è°ƒæ•´åçš„ Podfile ä»£ç å¦‚ä¸‹ï¼š require 'cocoapods-core/podfile/dsl' require 'cocoapods-core/podfile/target_definition' module Pod class Podfile include Pod::Podfile::DSL # podfile è·¯å¾„ attr_accessor :defined_in_file # æ‰€æœ‰çš„ TargetDefinition çš„æ ¹èŠ‚ç‚¹, æ­£å¸¸åªæœ‰ä¸€ä¸ªï¼Œå³ Pods.project target attr_accessor :root_target_definitions # è®°å½• Pods.project é¡¹ç›®çš„é…ç½®ä¿¡æ¯ attr_accessor :internal_hash # å½“å‰ DSL è§£æä½¿ç”¨çš„ TargetDefinition attr_accessor :current_target_definition # ... end end ç›´æ¥çœ‹ dsl.rbï¼Œè¯¥æ–‡ä»¶å†…éƒ¨å®šä¹‰äº† Podfile DSL æ”¯æŒçš„æ‰€æœ‰æ–¹æ³•ã€‚é€šè¿‡ include çš„ä½¿ç”¨å°† Pod::Podfile::DSL æ¨¡å— Mix-in åæ’å…¥åˆ° Podfile ç±»ä¸­ã€‚æƒ³äº†è§£æ›´å¤š Mix-in ç‰¹æ€§ï¼Œç§»æ­¥ Ruby ç‰¹æ€§ä¹‹ Mix-inã€‚ Lockfile The Lockfile stores information about the pods that were installed by Â CocoaPods. Lockfileï¼Œé¡¾åæ€ä¹‰æ˜¯ç”¨äºè®°å½•æœ€åä¸€æ¬¡ CocoaPods æ‰€å®‰è£…çš„ Pod ä¾èµ–åº“ç‰ˆæœ¬çš„ä¿¡æ¯å¿«ç…§ã€‚ä¹Ÿå°±æ˜¯ç”Ÿæˆçš„ **Podfile.lockã€‚** åœ¨ pod install è¿‡ç¨‹ï¼ŒPodfile ä¼šç»“åˆå®ƒæ¥ç¡®è®¤æœ€ç»ˆæ‰€å®‰è£…çš„ Pod ç‰ˆæœ¬ï¼Œå›ºå®š Pod ä¾èµ–åº“ç‰ˆæœ¬é˜²æ­¢å…¶è‡ªåŠ¨æ›´æ–°ã€‚Lockfile ä¹Ÿä½œä¸º Pods çŠ¶æ€æ¸…å• (mainfest)ï¼Œç”¨äºè®°å½•å®‰è£…è¿‡ç¨‹çš„ä¸­å“ªäº› Pod éœ€è¦è¢«åˆ é™¤æˆ–å®‰è£…æˆ–æ›´æ–°ç­‰ã€‚ ä»¥å¼€å¤´çš„ Podfile ç» pod install æ‰€ç”Ÿæˆçš„ Podfile.lock ä¸ºä¾‹ï¼š PODS: - Alamofire (4.6.0) DEPENDENCIES: - Alamofire (from `./Alamofire`) EXTERNAL SOURCES: Alamofire: :path: &quot;./Alamofire&quot; SPEC CHECKSUMS: Alamofire: 0dda98a0ed7eec4bdcd5fe3cdd35fcd2b3022825 PODFILE CHECKSUM: da12cc12a30cfb48ebc5d14e8f51737ab65e8241 COCOAPODS: 1.10.0.beta.2 æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ï¼Œé€šè¿‡è¯¥ Lockfile èƒ½å¤Ÿè·å–å“ªäº›ä¿¡æ¯ï¼š Key å«ä¹‰ PODS è®°å½•æ‰€æœ‰ Pod åº“çš„å…·ä½“å®‰è£…ç‰ˆæœ¬å· DEPENDENCIES è®°å½•å„ Pod åº“ä¹‹é—´çš„ç›¸äº’ä¾èµ–å…³ç³»ï¼Œç”±äºè¿™é‡Œåªæœ‰ Alamofire ä¸”å®ƒæ— å…¶ä»–ä¾èµ–ï¼Œæš‚æ—¶æ— å…³çœ‹å‡ºåŒºåˆ« EXTERNAL SOURCES è®°å½•éƒ¨åˆ†é€šè¿‡å¤–éƒ¨æºçš„ Pod åº“ï¼ˆGit å¼•å…¥ã€Path å¼•å…¥ï¼‰ SPEC CHECKSUMS è®°å½•å½“å‰å„ Pod åº“çš„ Podspec æ–‡ä»¶ Hash å€¼ï¼Œå…¶å®å°±æ˜¯æ–‡ä»¶çš„ md5 PODFILE CHECKSUM è®°å½• Podfile æ–‡ä»¶çš„ Hash å€¼ï¼ŒåŒæ ·æ˜¯ md5ï¼Œç¡®è®¤æ˜¯å¦æœ‰å˜æ›´ COCOAPODS è®°å½•ä¸Šæ¬¡æ‰€ä½¿ç”¨çš„ CocoaPods ç‰ˆæœ¬ Podfile å†…å®¹åŠ è½½ Podfile æ–‡ä»¶ç±»å‹ ä½ å¯ä»¥åœ¨ CocoaPods çš„ /lib/cocoapods/config.rb æ‰¾åˆ° Podfile æ‰€æ”¯æŒçš„æ–‡ä»¶ç±»å‹ï¼š PODFILE_NAMES = [ 'CocoaPods.podfile.yaml', 'CocoaPods.podfile', 'Podfile', 'Podfile.rb', ].freeze CocoaPods æŒ‰ç…§ä¸Šè¿°å‘½åä¼˜å…ˆçº§æ¥æŸ¥æ‰¾å·¥ç¨‹ç›®å½•ä¸‹æ‰€å¯¹åº”çš„ Podfile æ–‡ä»¶ã€‚å½“å‘ç°ç›®å½•ä¸­å­˜åœ¨ CocoaPods.podfile.yaml æ–‡ä»¶æ—¶ä¼šä¼˜å…ˆåŠ è½½ã€‚å¾ˆå¤šåŒå­¦å¯èƒ½åªçŸ¥é“åˆ° Podfile æ”¯æŒ Ruby çš„æ–‡ä»¶æ ¼å¼ï¼Œè€Œä¸äº†è§£å®ƒè¿˜æ”¯æŒäº† YAML æ ¼å¼ã€‚YAML æ˜¯ YAML Ain't Markup Language çš„ç¼©å†™ï¼Œå…¶ å®˜æ–¹å®šä¹‰ï¼š YAML is a human friendly data serialization standard for all programming languages. å®ƒæ˜¯ä¸€ç§é¢å‘å·¥ç¨‹å¸ˆå‹å¥½çš„åºåˆ—åŒ–è¯­è¨€ã€‚æˆ‘ä»¬çš„ Lockfile æ–‡ä»¶å°±æ˜¯ä»¥ YAML æ ¼å¼å†™å…¥ Podfile.lock ä¸­çš„ã€‚ Podfile æ–‡ä»¶è¯»å– å›åˆ° lib/cocoapods-core/podfile.rb æ¥çœ‹è¯»å–æ–¹æ³•ï¼š module Pod class Podfile include Pod::Podfile::DSL def self.from_file(path) path = Pathname.new(path) unless path.exist? raise Informative, &quot;No Podfile exists at path `#{path}`.&quot; end # è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒPodfile ç›®å‰å·²ç»æ”¯æŒäº†ç»“å°¾æ˜¯ .podfile å’Œ .rb åç¼€çš„æ–‡ä»¶å # å…¶å®æ˜¯ä¸ºäº†æ”¹å–„å¾ˆå¤šç¼–è¯‘å™¨ä½¿ç”¨æ–‡ä»¶åç¼€æ¥ç¡®è®¤ filetypeï¼Œæ¯”å¦‚ vim # ç›¸æ¯”ä¸ Podfile è¿™ä¸ªæ–‡ä»¶åè¦æ›´åŠ çš„å‹å¥½ case path.extname when '', '.podfile', '.rb' Podfile.from_ruby(path) when '.yaml' # ç°åœ¨ä¹Ÿæ”¯æŒäº† .yaml æ ¼å¼ Podfile.from_yaml(path) else raise Informative, &quot;Unsupported Podfile format `#{path}`.&quot; end end end from_file åœ¨ pod install å‘½ä»¤æ‰§è¡Œåçš„ verify_podfile_exists! ä¸­è¢«è°ƒç”¨çš„ï¼š def verify_podfile_exists! unless config.podfile raise Informative, &quot;No `Podfile' found in the project directory.&quot; end end è€Œ Podfile æ–‡ä»¶çš„è¯»å–å°±æ˜¯ config.podfile Â é‡Œè§¦å‘çš„ï¼Œä»£ç åœ¨ CocoaPods çš„ config.rb æ–‡ä»¶ä¸­ï¼š def podfile_path_in_dir(dir) PODFILE_NAMES.each do |filename| candidate = dir + filename if candidate.file? return candidate end end nil end def podfile_path @podfile_path ||= podfile_path_in_dir(installation_root) end def podfile @podfile ||= Podfile.from_file(podfile_path) if podfile_path end è¿™é‡Œçš„æ–¹æ³• podfile å’Œ podfile_path éƒ½æ˜¯ lazy åŠ è½½çš„ã€‚æœ€å Core çš„ from_file å°†ä¾æ®ç›®å½•ä¸‹çš„ Podfile æ–‡ä»¶ç±»å‹é€‰æ‹©è°ƒç”¨ from_yaml æˆ–è€… from_rubyã€‚ ä» Pod::Command::Install å‘½ä»¤åˆ° Podfile æ–‡ä»¶åŠ è½½çš„è°ƒç”¨æ ˆå¦‚ä¸‹ï¼š Podfile From Ruby è§£æ å½“æˆ‘ä»¬é€šè¿‡ pod init æ¥åˆå§‹åŒ– CocoaPods é¡¹ç›®æ—¶ï¼Œé»˜è®¤ç”Ÿæˆçš„ Podfile åç§°å°±æ˜¯ Podfileï¼Œé‚£å°±ä» Podfile.from_ruby å¼€å§‹ã€‚ def self.from_ruby(path, contents = nil) # â‘  contents ||= File.open(path, 'r:utf-8', &amp;amp;:read) # å…¼å®¹ 1.9 ç‰ˆæœ¬çš„ Rubinius ä¸­çš„ç¼–ç é—®é¢˜ if contents.respond_to?(:encoding) &amp;amp;&amp;amp; contents.encoding.name != 'UTF-8' contents.encode!('UTF-8') end # å¯¹ Podfile ä¸­ä¸è§„èŒƒçš„å•å¼•å·æˆ–åŒå¼•å·è¿›è¡Œæ£€æŸ¥ï¼Œå¹¶è¿›è¡Œè‡ªåŠ¨ä¿®æ­£ï¼ŒåŠæŠ›å‡ºé”™è¯¯ if contents.tr!('â€œâ€â€˜â€™â€›', %(&quot;&quot;''')) CoreUI.warn &quot;...&quot; end # â‘¡ podfile = Podfile.new(path) do begin eval(contents, nil, path.to_s) rescue Exception =&amp;gt; e message = &quot;Invalid `#{path.basename}` file: #{e.message}&quot; raise DSLError.new(message, path, e, contents) end end podfile end â‘  æ˜¯å¯¹ Podfile å†…å®¹çš„è¯»å–å’Œç¼–ç ï¼ŒåŒæ—¶å¯¹å¯èƒ½å‡ºç°çš„å•å¼•å·å’ŒåŒå¼•å·çš„åŒ¹é…é—®é¢˜è¿›è¡Œäº†ä¿®æ­£ã€‚â‘¡ ä»¥ path å’Œ block ä¸ºå…¥å‚è¿›è¡Œ podfile ç±»çš„åˆå§‹åŒ–å¹¶å°†å…¶æ”¾å›ï¼Œä¿å­˜åœ¨å…¨å±€çš„ config.podfile ä¸­ã€‚ Tips: å¦‚æœè¦åœ¨ Ruby å¯¹è±¡çš„åˆå§‹åŒ–ä¸­ä¼ å…¥å‚æ•°ï¼Œéœ€è¦é‡è½½ Object çš„ initialize æ–¹æ³•ï¼Œè¿™é‡Œçš„ Podfile.new(â€¦) æœ¬è´¨ä¸Šæ˜¯ initialize çš„æ–¹æ³•è°ƒç”¨ã€‚ initialize æ–¹æ³•æ‰€ä¼ å…¥çš„å°¾éšé—­åŒ… block çš„æ ¸å¿ƒåœ¨äºå†…éƒ¨çš„ eval å‡½æ•°ï¼ˆåœ¨ CocoaPods æ ¸å¿ƒç»„ä»¶ ä¸­æœ‰æåˆ°ï¼‰ï¼š eval(contents, nil, path.to_s) å®ƒå°† Podfile ä¸­çš„æ–‡æœ¬å†…å®¹è½¬åŒ–ä¸ºæ–¹æ³•æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´é‡Œé¢çš„å‚æ•°æ˜¯ä¸€æ®µ Ruby çš„ä»£ç å­—ç¬¦ä¸²ï¼Œé€šè¿‡ eval æ–¹æ³•å¯ä»¥ç›´æ¥æ‰§è¡Œã€‚ç»§ç»­çœ‹ Podfile çš„ initialize æ–¹æ³•ï¼š def initialize(defined_in_file = nil, internal_hash = {}, &amp;amp;block) self.defined_in_file = defined_in_file @internal_hash = internal_hash if block default_target_def = TargetDefinition.new('Pods', self) default_target_def.abstract = true @root_target_definitions = [default_target_def] @current_target_definition = default_target_def instance_eval(&amp;amp;block) else @root_target_definitions = [] end end å®ƒå®šä¹‰äº†ä¸‰ä¸ªå‚æ•°ï¼š å‚æ•° å®šä¹‰ defined_in_file Podfile æ–‡ä»¶è·¯å¾„ internal_hash é€šè¿‡ yaml åºåˆ—åŒ–å¾—åˆ°çš„ Podfile é…ç½®ä¿¡æ¯ï¼Œä¿å­˜åœ¨ internal_hash ä¸­ block ç”¨äºæ˜ å°„ Podfile çš„ DSL é…ç½® éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€šè¿‡ from_ruby åˆå§‹åŒ–çš„ Podfile åªä¼ å…¥äº†å‚æ•° 1 å’Œ 3ï¼Œå‚æ•° 2 internal_hash åˆ™æ˜¯æä¾›ç»™ from_yaml çš„ã€‚ å½“ block å­˜åœ¨ï¼Œä¼šåˆå§‹åŒ–åä¸º Pods çš„ TargetDefinition å¯¹è±¡ï¼Œç”¨äºä¿å­˜ Pods project çš„ç›¸å…³ä¿¡æ¯å’Œ Pod ä¾èµ–ã€‚ç„¶åè°ƒç”¨ instance_eval æ‰§è¡Œä¼ å…¥çš„ blockï¼Œå°† Podfile çš„ DSL å†…å®¹è½¬æ¢æˆå¯¹åº”çš„æ–¹æ³•å’Œå‚æ•°ï¼Œæœ€ç»ˆå°†å‚æ•°å­˜å…¥ internal_hash å’Œå¯¹åº”çš„ target_definitions ä¸­ã€‚ Tips: åœ¨ Ruby ä¸­å­˜åœ¨ä¸¤ç§ä¸åŒçš„æ–¹å¼æ¥æ‰§è¡Œä»£ç å— blockï¼Œåˆ†åˆ«æ˜¯ instance_eval å’Œ class_evalã€‚ class_eval çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¸è°ƒç”¨ç±»ç›¸å…³ï¼Œè°ƒç”¨è€…æ˜¯ç±»åæˆ–è€…æ¨¡å—åï¼Œè€Œ instance_eval çš„è°ƒç”¨è€…å¯ä»¥æ˜¯ç±»çš„å®ä¾‹æˆ–è€…ç±»æœ¬èº«ã€‚ç»†èŠ‚çœ‹ StackoverFlowã€‚ Podfile From YAML è§£æ YAML æ ¼å¼çš„ Podfile åŠ è½½éœ€è¦å€ŸåŠ© YAMLHelper ç±»æ¥å®Œæˆï¼ŒYAMLHelper åˆ™æ˜¯åŸºäº yaml çš„ç®€å•å°è£…ã€‚ def self.from_yaml(path) string = File.open(path, 'r:utf-8', &amp;amp;:read) # ä¸ºäº†è§£å†³ Rubinius incomplete encoding in 1.9 mode # https://github.com/rubinius/rubinius/issues/1539 if string.respond_to?(:encoding) &amp;amp;&amp;amp; string.encoding.name != 'UTF-8' string.encode!('UTF-8') end hash = YAMLHelper.load_string(string) from_hash(hash, path) end def self.from_hash(hash, path = nil) internal_hash = hash.dup target_definitions = internal_hash.delete('target_definitions') || [] podfile = Podfile.new(path, internal_hash) target_definitions.each do |definition_hash| definition = TargetDefinition.from_hash(definition_hash, podfile) podfile.root_target_definitions &amp;lt;&amp;lt; definition end podfile end é€šè¿‡ from_yaml å°†æ–‡ä»¶å†…å®¹è½¬æˆ Ruby hash åè½¬å…¥ from_hash æ–¹æ³•ã€‚ åŒºåˆ«äº from_rubyï¼Œè¿™é‡Œè°ƒç”¨çš„ initialize å°†è¯»å–çš„ hash ç›´æ¥å­˜å…¥ internal_hashï¼Œç„¶ååˆ©ç”¨ TargetDefinition.from_hash æ¥å®Œæˆçš„ hash å†…å®¹åˆ° targets çš„è½¬æ¢ï¼Œå› æ­¤ï¼Œè¿™é‡Œæ— éœ€ä¼ å…¥ block è¿›è¡Œ DSL è§£æå’Œæ–¹æ³•è½¬æ¢ã€‚ Podfile å†…å®¹è§£æ å‰é¢æåˆ° Podfile çš„å†…å®¹æœ€ç»ˆä¿å­˜åœ¨ internal_hash å’Œ target_definitions ä¸­ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯ä½¿ç”¨äº† hash æ¥ä¿å­˜æ•°æ®ã€‚ç”±äº YAML æ–‡ä»¶æ ¼å¼çš„ Podfile åŠ è½½åå°±æ˜¯ hash å¯¹è±¡ï¼Œæ— éœ€è¿‡å¤šåŠ å·¥ã€‚å”¯ä¸€éœ€è¦å¤„ç†çš„æ˜¯é€’å½’è°ƒç”¨ TargetDefinition çš„ from_hash æ–¹æ³•æ¥è§£æ target å­èŠ‚ç‚¹çš„æ•°æ®ã€‚ å› æ­¤ï¼Œæ¥ä¸‹æ¥çš„å†…å®¹è§£æä¸»è¦é’ˆå¯¹ Ruby æ–‡ä»¶æ ¼å¼çš„ DSL è§£æï¼Œæˆ‘ä»¬ä»¥ pod æ–¹æ³•ä¸ºä¾‹ï¼š target 'Example' do pod 'Alamofire' end å½“è§£æåˆ° pod 'Alamofire' æ—¶ï¼Œä¼šå…ˆé€šè¿‡ eval(contents, nil, path.to_s å°†å…¶è½¬æ¢ä¸º dsl.rb ä¸­çš„æ–¹æ³•ï¼š def pod(name = nil, *requirements) unless name raise StandardError, 'A dependency requires a name.' end current_target_definition.store_pod(name, *requirements) end name ä¸º Alamofireï¼Œç”±äºæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šå¯¹åº”çš„ Alamofire ç‰ˆæœ¬ï¼Œé»˜è®¤ä¼šä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ã€‚requirements Â æ˜¯æ§åˆ¶ è¯¥ pod æ¥æºè·å–æˆ–è€… pod target çš„ç¼–è¯‘é€‰é¡¹ç­‰ï¼Œä¾‹å¦‚ï¼š pod 'Alamofire', '0.9' pod 'Alamofire', :modular_headers =&amp;gt; true pod 'Alamofire', :configurations =&amp;gt; ['Debug', 'Beta'] pod 'Alamofire', :source =&amp;gt; 'https://github.com/CocoaPods/Specs.git' pod 'Alamofire', :subspecs =&amp;gt; ['Attribute', 'QuerySet'] pod 'Alamofire', :testspecs =&amp;gt; ['UnitTests', 'SomeOtherTests'] pod 'Alamofire', :path =&amp;gt; '~/Documents/AFNetworking' pod 'Alamofire', :podspec =&amp;gt; 'https://example.com/Alamofire.podspec' pod 'Alamofire', :git =&amp;gt; 'https://github.com/looseyi/Alamofire.git', :tag =&amp;gt; '0.7.0' Tipsï¼šrequirements æœ€ç»ˆæ˜¯ä»¥ Gem::Requirement å¯¹è±¡æ¥ä¿å­˜çš„ã€‚å…³äº pod è¯¦ç»†è¯´æ˜è¯·ç§»æ­¥ï¼šPodfile æ‰‹å†Œã€‚ å¯¹ name è¿›è¡Œæ ¡éªŒåï¼Œç›´æ¥è½¬å…¥ current_target_definition æ¯•ç«Ÿ Pod åº“éƒ½æ˜¯å­˜åœ¨ Pods.project ä¹‹ä¸‹ï¼š def store_pod(name, *requirements) return if parse_subspecs(name, requirements) # This parse method must be called first parse_inhibit_warnings(name, requirements) parse_modular_headers(name, requirements) parse_configuration_whitelist(name, requirements) parse_project_name(name, requirements) if requirements &amp;amp;&amp;amp; !requirements.empty? pod = { name =&amp;gt; requirements } else pod = name end get_hash_value('dependencies', []) &amp;lt;&amp;lt; pod nil end def get_hash_value(key, base_value = nil) unless HASH_KEYS.include?(key) raise StandardError, &quot;Unsupported hash key `#{key}`&quot; end internal_hash[key] = base_value if internal_hash[key].nil? internal_hash[key] end def set_hash_value(key, value) unless HASH_KEYS.include?(key) raise StandardError, &quot;Unsupported hash key `#{key}`&quot; end internal_hash[key] = value end ç»è¿‡ä¸€ç³»åˆ—æ£€æŸ¥ä¹‹åï¼Œè°ƒç”¨ get_hash_value è·å– internal_hash çš„ dependenciesï¼Œå¹¶å°† name å’Œ requirements é€‰é¡¹å­˜å…¥ã€‚ è¿™é‡Œçš„ dependencies key æ˜¯å®šä¹‰åœ¨ TargetDefinition æ–‡ä»¶çš„ **HASH_KEYS**ï¼Œè¡¨ç¤º Core æ‰€æ”¯æŒçš„é…ç½®å‚æ•°: HASH_KEYS = %w( name platform podspecs exclusive link_with link_with_first_target inhibit_warnings use_modular_headers user_project_path build_configurations project_names dependencies script_phases children configuration_pod_whitelist uses_frameworks swift_version_requirements inheritance abstract swift_version ).freeze Tipsï¼šfreeze è¡¨ç¤ºè¯¥æ•°ç»„ä¸å¯ä¿®æ”¹ã€‚å¦å¤–ï¼Œ%w ç”¨äºè¡¨ç¤ºå…¶ä¸­å…ƒç´ è¢«å•å¼•å·æ‹¬èµ·çš„æ•°ç»„ã€‚ %W(#{foo} Bar Bar\ with\ space) =&amp;gt; [â€œFooâ€, â€œBarâ€, â€œBar with spaceâ€] å¯¹åº”çš„è¿˜æœ‰ %W è¡¨ç¤ºå…¶ä¸­å…ƒç´ è¢«åŒå¼•å·æ‹¬èµ·çš„æ•°ç»„ã€‚ æ•´ä¸ªæ˜ å°„è¿‡ç¨‹å¦‚ä¸‹ï¼š ç²¾ç»†åŒ–çš„ Podfile é…ç½® æœ€åä¸€èŠ‚è®©æˆ‘ä»¬æ¥å±•ç¤ºä¸€ä¸‹ ğŸ’ªï¼Œçœ‹çœ‹ Podfile æ‰€è°“çš„ targets ä¹‹é—´çš„ä¾èµ–å…³ç³»å¯ä»¥ç©å‡ºä»€ä¹ˆèŠ±æ¥ ğŸ˜‚ã€‚ Target åµŒå¥— æœ€ç®€å•çš„ Podfile å°±æ˜¯æ–‡ç« å¼€å¤´æ‰€å±•ç¤ºçš„ï¼Œä¸è¿‡åœ¨ Podfile ä¸­è¿˜å¯ä»¥å¯¹ Target è¿›è¡ŒåµŒå¥—ä½¿ç”¨ã€‚å‡è®¾åœ¨æˆ‘ä»¬çš„ä¸»å·¥ç¨‹åŒæ—¶ç»´æŠ¤äº†ä¸‰ä¸ªé¡¹ç›®ï¼Œå®ƒä»¬éƒ½ä¾èµ–äº† Alamofireï¼Œé€šè¿‡ä¿„ç½—æ–¯å¥—å¨ƒå°±èƒ½è½»æ¾æ»¡è¶³æ¡ä»¶ï¼š target 'Demo1' do pod 'Alamofire' target 'Demo2' do target 'Demo3' do end end end ç¼–è¯‘åçš„ Pods.project é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š æˆ‘ä»¬çŸ¥é“ï¼ŒCocoaPods åœ¨ Pods.project ä¸­ä¸ºæ¯ä¸ªåœ¨ Podfile ä¸­å£°æ˜çš„ Target ç”Ÿæˆä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„ä¸“å± Target æ¥é›†æˆå®ƒçš„ Pod ä¾èµ–ã€‚å¯¹äºæœ‰ä¾èµ–å…³ç³»çš„ Target å…¶ç”Ÿæˆçš„ä¸“å± Target åç§°åˆ™ä¼šæŒ‰ç…§ä¾èµ–å…³ç³»å åŠ æ¥å‘½åï¼Œå¦‚ Â target Demo3 çš„ä¸“å± Target åç§°ä¸º Pods-Demo1-Demo2-Demo3ã€‚å®‰è£…å®Œæˆåä¸»é¡¹ç›®å°†ä¼šå¼•å…¥è¯¥ä¸“å± Target æ¥å®Œæˆä¾èµ–å…³è”ï¼Œå¦‚ Demo3ï¼š å…³äº Target åµŒå¥—ï¼Œä¸€ä¸ªçˆ¶èŠ‚ç‚¹æ˜¯å¯ä»¥æœ‰å¤šä¸ªå­èŠ‚ç‚¹çš„ï¼š target 'Demo1' do pod 'Alamofire' target 'Demo2' do pod 'RxSwift' end target 'Demo3' do pod 'SwiftyJSON' end end Abstract Target ä¸Šé¢ä¾‹å­ä¸­ï¼Œç”±äº Demo1 ä¸ Demo2 éƒ½éœ€è¦ä¾èµ– Alamofireï¼Œæˆ‘ä»¬é€šè¿‡ Target åµŒå¥—è®© Demo2 æ¥ç»§æ‰¿ Demo1 çš„ Pods åº“ä¾èµ–ã€‚è¿™ä¹ˆåšå¯èƒ½ä¼šæœ‰ä¸€ä¸ªé™åˆ¶ï¼Œå°±æ˜¯å½“ Demo1 çš„ Pod ä¾èµ–å¹¶é Demo2 æ‰€éœ€è¦çš„æ—¶å€™ï¼Œå°±ä¼šæœ‰ä¾èµ–å†—ä½™ã€‚æ­¤æ—¶å°±éœ€è¦ Abstract Target ç™»åœºäº†ã€‚ä¾‹å¦‚ï¼š abstract_target 'Networking' do pod 'Alamofire' target 'Demo1' do pod 'RxSwift' end target 'Demo2' do pod 'ReactCocoa' end target 'Demo3' do end end å°†ç½‘ç»œè¯·æ±‚çš„ pod ä¾èµ–æŠ½è±¡åˆ° Networking target ä¸­ï¼Œè¿™æ ·å°±èƒ½é¿å… Demo2 å¯¹ RxSwift çš„ä¾èµ–ã€‚è¿™ç§æ–¹å¼é…ç½®æ‰€ç”Ÿæˆçš„ Pods.project å¹¶ä¸ä¼šå­˜åœ¨åç§°ä¸º Networking çš„ Targetï¼Œå®ƒä»…ä¼šåœ¨ä¸»å·¥ç¨‹çš„ä¸“å± Target ä¸­ç•™ä¸‹å°è®°ï¼š æ€»ç»“ æœ¬æ–‡ç»“åˆ Xcode å·¥ç¨‹ç»“æ„æ¥å±•å¼€ CocoaPods-Core çš„ Podfile ä¹‹æ—…ï¼Œä¸»è¦æ„Ÿå—å¦‚ä¸‹ï¼š å†ä¸€æ¬¡æ„Ÿå—äº† Ruby è¯­è¨€çš„åŠ¨æ€ä¹‹ç¾ï¼Œç»™æˆ‘ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿˜ä½ ä¸€ä¸ªæœªçŸ¥ä¸–ç•Œï¼› ç»“åˆ Xcode å·¥ç¨‹ç»“æ„æ›´å¥½çš„ç†è§£äº† Podfile çš„è®¾è®¡åˆè¡·ï¼ŒåŸºç¡€çŸ¥è¯†å¾ˆé‡è¦ï¼› æ‰€è°“â€œç®—æ³•æ— ç”¨è®ºâ€è¿™ç§äº‹æƒ…ï¼Œåœ¨è®¡ç®—æœºçš„ä¸–ç•Œæ˜¯ä¸å­˜åœ¨çš„ï¼Œæ²¡æœ‰å¥½çš„æ•°æ®ç»“æ„çŸ¥è¯†å¦‚ä½•æ›´å¥½çš„æŠ½è±¡ï¼› äº†è§£ Podfile çš„ DSL æ˜¯å¦‚ä½•æ˜ å°„åˆ°å†…å­˜ä¸­ï¼Œåˆæ˜¯å¦‚ä½•æ¥å­˜å‚¨æ¯ä¸ªå…³é”®æ•°æ®çš„ çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç† è¿™é‡Œç½—åˆ—äº†å››ä¸ªé—®é¢˜ç”¨æ¥è€ƒå¯Ÿä½ æ˜¯å¦å·²ç»æŒæ¡äº†è¿™ç¯‡æ–‡ç« ï¼Œå¦‚æœæ²¡æœ‰å»ºè®®ä½ åŠ å…¥**æ”¶è— **å†æ¬¡é˜…è¯»ï¼š è¯´è¯´ TargetDefinition çš„æ•°æ®ç»“æ„ ï¼Ÿ è¯´è¯´ TargetDefinition ä¸ Xcode Project çš„å…³ç³» ï¼Ÿ Podfile çš„æ–‡ä»¶æ ¼å¼æœ‰å‡ ç§ï¼Œåˆ†åˆ«æ˜¯å¦‚ä½•åŠ è½½ ï¼Ÿ Lockfile å’Œ Podfile çš„å…³ç³»</summary></entry><entry><title type="html">å…¬ç§¯é‡‘è´·ä¹°æˆ¿èƒ½çœå¤šå°‘é’±</title><link href="https://www.desgard.com/2020/09/14/buy-big-house-in-sh-1.html" rel="alternate" type="text/html" title="å…¬ç§¯é‡‘è´·ä¹°æˆ¿èƒ½çœå¤šå°‘é’±" /><published>2020-09-14T00:00:00-08:00</published><updated>2020-09-14T00:00:00-08:00</updated><id>https://www.desgard.com/2020/09/14/buy-big-house-in-sh-1</id><content type="html" xml:base="https://www.desgard.com/2020/09/14/buy-big-house-in-sh-1.html">&lt;blockquote&gt;
  &lt;p&gt;æˆ‘ç»™è‡ªå·±å®šäº†ä¸€ä¸ªå°†è¿‘ 700 å¤©çš„è®¡åˆ’ï¼Œè¿™å°±æ˜¯åœ¨ä¸Šæµ·ä¹°æˆ¿å®šå±…ã€‚äºæ˜¯å¼€å¯äº†ç ”ç©¶è´­æˆ¿æ”¿ç­–ã€ç ”ç©¶å°åŒºå’Œæ¿å—ã€ç ”ç©¶è´­æˆ¿æ³¨æ„äº‹é¡¹ç­‰ä¸€ç³»åˆ—çš„è°ƒç ”å’Œç ”ç©¶ã€‚æˆ‘å°†è¿™äº›ç¬”è®°å½’æ¡£æˆæ–‡ç« ï¼Œå‘è¡¨åœ¨å…¬ä¼—å·ä¸å¤§å®¶åˆ†äº«ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;ä»Šå¤©è·ç¦»è´­æˆ¿è¿˜æœ‰ 675 å¤©ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;è¿™ç¯‡æ–‡ç« æ¥è®¨è®ºä½¿ç”¨å…¬ç§¯é‡‘è´·æ¬¾ä¹°æˆ¿çš„æœ€å¤§åŒ–çœé’±ç©ºé—´ã€‚&lt;strong&gt;ä»¥ä¸‹è®¨è®ºå‡é’ˆå¯¹äºä¸Šæµ·å¸‚&lt;/strong&gt;ã€‚å› ä¸ºå…¬ç§¯é‡‘è´·æ¬¾æ¯”å•†ä¸šè´·æ¬¾åˆ©ç‡ä½äº†è¿‘ä¸¤ä¸ªç‚¹ï¼Œæ‰€ä»¥å…¬ç§¯é‡‘è´·æ¬¾ä¹Ÿæ˜¯è´­æˆ¿è€…çš„é¦–é€‰ã€‚ä¸‹é¢æˆ‘æ¥è¾ƒä¸ºå…¨é¢çš„è®°å½•ä¸€ä¸‹å…¬ç§¯é‡‘è´·æ¬¾çš„æ‰€æœ‰ç»†èŠ‚é—®é¢˜ã€‚&lt;/p&gt;

&lt;h1 id=&quot;ä½¿ç”¨å…¬ç§¯é‡‘è´·æ¬¾çš„æ¡ä»¶&quot;&gt;ä½¿ç”¨å…¬ç§¯é‡‘è´·æ¬¾çš„æ¡ä»¶&lt;/h1&gt;

&lt;ol&gt;
  &lt;li&gt;è´­ä¹°ä¸Šæµ·å¸‚å…·æœ‰æ‰€æœ‰æƒçš„è‡ªä½ä½æˆ¿ï¼›&lt;/li&gt;
  &lt;li&gt;ç”³è¯·è´·æ¬¾å‰ 6 ä¸ªæœˆè¿ç»­æ­£å¸¸ç¼´å­˜ä½æˆ¿å…¬ç§¯é‡‘ï¼›&lt;/li&gt;
  &lt;li&gt;å€Ÿæ¬¾äººå®¶åº­æ²¡æœ‰å°šæœªè¿˜æ¸…çš„å…¬ç§¯é‡‘å€ºåŠ¡ï¼›&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;åˆ©ç‡æ•°æ®&quot;&gt;åˆ©ç‡æ•°æ®&lt;/h1&gt;

&lt;p&gt;é¦–å…ˆå…ˆç»™å‡ºå…¬ç§¯é‡‘è´·æ¬¾çš„è´·æ¬¾åˆ©ç‡ï¼ˆä»¥ä¸‹è¡¨å†…åŠ ç²—ä¸ºä¸€èˆ¬å¤§å®¶æ‰€éœ€è¦å…³æ³¨çš„æ•°æ®ï¼‰ï¼š&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;è´·æ¬¾å¹´é™&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;é¦–å¥—æˆ¿ã€äºŒå¥—æˆ¿æ™®é€šä½å®…ï¼ˆåŸºå‡†åˆ©ç‡ - 2015.4.8 èµ·å¼€å§‹æ‰§è¡Œï¼‰&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;äºŒå¥—æˆ¿éæ™®é€šä½å®…ï¼ˆ1.1 å€åˆ©ç‡ï¼‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;äº”å¹´ä»¥ä¸‹ï¼ˆåŒ…å«äº”å¹´ï¼‰&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;2.75%&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;3.025%&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;äº”å¹´ä»¥ä¸Š&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;strong&gt;3.25%&lt;/strong&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;3.575%&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h1 id=&quot;æœ€é«˜è´·æ¬¾é¢åº¦&quot;&gt;æœ€é«˜è´·æ¬¾é¢åº¦&lt;/h1&gt;

&lt;p&gt;è¿™é‡Œä¸è®¨è®ºéæ™®é€šä½å®…ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;æ™®é€šä½å®…ï¼šæŒ‰æ‰€åœ¨åœ°ä¸€èˆ¬æ°‘ç”¨ä½å®…å»ºç­‘æ ‡å‡†æ¥å»ºé€ çš„ä½œä¸ºå±…ä½ç”¨é€”çš„æˆ¿å±‹ï¼Œç›®å‰å¤šä¸ºå¤šå±‚ä½å®…ä¸é«˜å±‚ä½å®…ã€‚&lt;/li&gt;
  &lt;li&gt;éæ™®é€šä½å®…ï¼šéæ™®é€šä½å®…ä¸€èˆ¬æŒ‡å®…å»ºç­‘é¢ç§¯è¾ƒå¤§æˆ–ç”¨ä½œå•†ä¸šç”¨é€”çš„æˆ¿å­ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;æ‰€è´­ä½æˆ¿&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;é¦–å¥—æˆ¿&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;é¦–å¥—æˆ¿&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;äºŒå¥—æˆ¿æ™®é€š&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;äºŒå¥—æˆ¿æ™®é€š&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;è´·æ¬¾å®¶åº­&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;1 äººè´·æ¬¾&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;strong&gt;â‰¥ 2 äººè´·æ¬¾&lt;/strong&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;1 äººè´·æ¬¾&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;â‰¥ 2 äººè´·æ¬¾&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;ç¼´çº³ä½æˆ¿å…¬ç§¯é‡‘æœ€é«˜å¯è´·é‡‘é¢&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;50 ä¸‡&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;strong&gt;100 ä¸‡&lt;/strong&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;50 ä¸‡&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;100 ä¸‡&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;ç¼´çº³è¡¥å……å…¬ç§¯é‡‘æœ€é«˜å¯è´·é‡‘é¢&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;10 ä¸‡&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;strong&gt;20 ä¸‡&lt;/strong&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;10 ä¸‡&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;20 ä¸‡&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;å¯è´·é‡‘é¢æ€»è®¡&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;60 ä¸‡&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;strong&gt;120 ä¸‡&lt;/strong&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;60 ä¸‡&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;120 ä¸‡&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;é¦–ä»˜æ¯”åˆ—&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;strong&gt;â‰¤ 90 å¹³ç±³ï¼Œä¸ä½äº 20%; ï¼ 90 å¹³ç±³ä¸ä½äº 30%&lt;/strong&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;åŒå·¦&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;ä¸ä½äº 30\%&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;åŒå·¦&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;è¿™é‡Œé¢æˆ‘ä»¬å¯ä»¥å‘ç°ä½æˆ¿å…¬ç§¯é‡‘å’Œè¡¥å……å…¬ç§¯é‡‘æ˜¯æœ‰ä¸ªä¸Šé™å€¼ï¼Œä½†æ˜¯å¦‚ä½•å‡ºè‡ªå·±çš„å¯è´·å…¬ç§¯é‡‘çš„æ•°å€¼å‘¢ï¼Ÿå…¶å®æ˜¯æœ‰å¦‚ä¸‹è®¡ç®—å…¬å¼ï¼šå‡å¦‚æˆ‘ä»¬å¦å½“å‰ä½æˆ¿å…¬ç§¯é‡‘è´¦æˆ·ä½™é¢æ˜¯ï¼Œè¡¥å……å…¬ç§¯é‡‘è´¦æˆ·ä½™é¢æ˜¯ï¼Œåˆ™æœ€é«˜å¯è´·é‡‘é¢æœ‰å¦‚ä¸‹å…³ç³»ï¼š&lt;/p&gt;

\[\begin{cases}
f(x, y)=40x+20y \\
40x \leq 50 \times 10^{4} \\ 
20y \leq 10 \times 10^{4} 
\end{cases}\]

&lt;p&gt;é€šä¿—çš„ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼Œ&lt;strong&gt;å…¬ç§¯é‡‘æœ€é«˜å¯è´·é‡‘é¢ = ä½æˆ¿å…¬ç§¯é‡‘ä½™é¢ Ã— 40 + è¡¥å……å…¬ç§¯é‡‘ä½™é¢ Ã— 20&lt;/strong&gt;ã€‚æ‰€ä»¥é€šè¿‡ä¸ç­‰å¼åè§£æˆ‘ä»¬å¯å¾—ï¼Œ&lt;strong&gt;å¦‚æœæˆ‘ä»¬æƒ³æœ€å¤§çš„åˆ©ç”¨å…¬ç§¯é‡‘ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä½æˆ¿å…¬ç§¯é‡‘æœ€å°‘éœ€è¦æœ‰ 12500 å…ƒçš„ä½™é¢ã€è¡¥å……å…¬ç§¯é‡‘éœ€è¦æœ‰ 5000 å—é’±çš„ä½™é¢ï¼Œå°±æ»¡è¶³äº†æœ€é«˜å¯è´·é‡‘é¢çš„æ¡ä»¶ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;h1 id=&quot;è´·æ¬¾å¹´é™å’Œè´·æ¬¾äººå¹´é¾„é™åˆ¶&quot;&gt;è´·æ¬¾å¹´é™å’Œè´·æ¬¾äººå¹´é¾„é™åˆ¶&lt;/h1&gt;

&lt;p&gt;é¦–å…ˆï¼Œå¦‚æœæ˜¯æ–°å»ºå•†å“æˆ¿ï¼Œä¹Ÿå°±æ˜¯æˆ¿é¾„ä¸º 0 å¹´çš„æˆ¿å­ï¼Œæœ€é•¿è´·æ¬¾å¹´é™æ˜¯ 30 å¹´ã€‚ç„¶åæˆ‘ä»¬è¯´äºŒæ‰‹æˆ¿ï¼Œå®ƒæœ‰ä»¥ä¸‹è§„åˆ™ï¼š&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;æˆ¿é¾„&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;æœ€é•¿è´·æ¬¾å¹´é™&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;â‰¤ 5 å¹´&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;30 å¹´&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;6 - 19 å¹´&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;strong&gt;35 å¹´ - æˆ¿é¾„ï¼ˆå‡å¦‚æ˜¯ 10 å¹´æˆ¿é¾„ï¼Œåˆ™æœ€é«˜å¯è´· 25 å¹´ï¼‰&lt;/strong&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;â‰¥ 20 å¹´&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;15 å¹´&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h1 id=&quot;è´·æ¬¾ç®—æ³•&quot;&gt;è´·æ¬¾ç®—æ³•&lt;/h1&gt;

&lt;p&gt;åŒå•†ä¸šè´·æ¬¾çš„ç®—æ³•ç›¸åŒï¼Œå…¬ç§¯é‡‘è´·æ¬¾ä¹Ÿåˆ†æˆç­‰é¢æœ¬é‡‘å’Œç­‰é¢æœ¬æ¯ä¸¤ç§ç®—æ³•ã€‚è€ƒè™‘åˆ°æ›´å¤šçš„äººæ„¿æ„å‡æ‘Šé£é™©ä»¥åŠé“¶è¡Œå¸Œæœ›è·å–åˆ°æ›´é«˜çš„åˆ©æ¯æ”¶å…¥ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘å‡é‡‡ç”¨&lt;strong&gt;ç­‰é¢æœ¬æ¯æ¥è®¡ç®—è¿˜æ¬¾æ€»é¢&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ¯æœˆæœˆä¾›&quot;&gt;æ¯æœˆæœˆä¾›&lt;/h2&gt;

\[æœˆä¾›é¢ = \frac{æœˆåˆ©ç‡ \times (1+æœˆåˆ©ç‡)^{è¿˜æ¬¾æœˆæ•°}}{(1+æœˆåˆ©ç‡)^{è¿˜æ¬¾æœˆæ•°} - 1} \times è´·æ¬¾æœ¬é‡‘\]

&lt;p&gt;å…¶ä¸­æœˆåˆ©ç‡çš„è®¡ç®—æ–¹æ³•ï¼š&lt;/p&gt;

\[æœˆåˆ©ç‡ = \frac{å¹´åˆ©ç‡}{12}\]

&lt;h2 id=&quot;å…¶ä»–çº¦æŸ&quot;&gt;å…¶ä»–çº¦æŸ&lt;/h2&gt;

&lt;p&gt;é™¤äº†æˆ‘ä»¬ä¸Šæ–‡æåˆ°çš„å…¬ç§¯é‡‘ä½™é¢å¯¹äºè´·æ¬¾çš„çº¦æŸï¼Œæˆ‘ä»¬è¿˜è¦è€ƒè™‘æˆ¿é¾„æ‰€å¸¦æ¥çš„å½±å“ï¼š&lt;/p&gt;

\[è¿˜æ¬¾æœˆæ•° = (35 - æˆ¿é¾„) \times 12\]

&lt;h2 id=&quot;ä¸¾ä¾‹è®¡ç®—&quot;&gt;ä¸¾ä¾‹è®¡ç®—&lt;/h2&gt;

&lt;p&gt;ä»¥ä¸Šå°±æ˜¯æˆ‘ä»¬è¦è€ƒè™‘çš„æ‰€æœ‰æœˆæ•°æ¡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥ä¸¾ä¸€ä¸ªä¾‹å­æ¥è¿›è¡Œè®¡ç®—ã€‚å‡å¦‚æˆ‘ä»¬ç°åœ¨è¦ä¹°ä¸€ä¸ª 2010 å¹´ï¼ˆæˆ¿é¾„ 10 å¹´çš„äºŒæ‰‹æˆ¿ï¼‰ï¼Œæ€»ä»·æ˜¯ 400 ä¸‡ã€‚ä½¿ç”¨äº† 35\% çš„é¦–ä»˜æ¯”ä¾‹ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦&lt;strong&gt;è´·æ¬¾ 260 ä¸‡&lt;/strong&gt;ï¼Œæœ€é•¿è´·æ¬¾æ—¶é—´ 25 å¹´ï¼Œä¹Ÿå°±æ˜¯&lt;strong&gt;è¿˜æ¬¾æœˆæ•° 300 ä¸ªæœˆ&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æƒ…å†µä¸€å…¨éƒ¨ä½¿ç”¨å•†ä¸šè´·æ¬¾&quot;&gt;æƒ…å†µä¸€ï¼šå…¨éƒ¨ä½¿ç”¨å•†ä¸šè´·æ¬¾&lt;/h3&gt;

&lt;p&gt;å…ˆè¦ç¡®å®šä¸€ä¸‹å•†ä¸šè´·æ¬¾çš„åˆ©æ¯ï¼Œæˆ‘è¿™é‡ŒæŸ¥é˜…äº†ä¸€ä¸‹èµ„æ–™ï¼Œç”±äºä¸Šæµ·çš„å•†è´·é‡‘é¢å¾€å¾€è¾ƒé«˜ï¼Œé“¶è¡Œä¼šå¯¹åˆ©æ¯è¿›è¡Œ 95 æŠ˜çš„ä¼˜æƒ ï¼Œä» 4.9\% çš„åŸºå‡†åˆ©ç‡ä¸‹è°ƒåˆ° 4.655\%ã€‚ä½†ä»Šå¹´å›½å®¶å‡ºäº† LPR çš„åˆ©æ¯ç­–ç•¥ï¼Œ&lt;strong&gt;æˆ‘ä»¬ç”¨å½“å‰ 8 æœˆä»½çš„ LPR åˆ©æ¯ 4.65\% æ¥è®¡ç®—&lt;/strong&gt;ã€‚é¦–å…ˆæ¥ç®—æœˆåˆ©ç‡ï¼š&lt;/p&gt;

\[æœˆåˆ©ç‡ = \frac{4.65\%}{12} = 0.003875\]

&lt;p&gt;ç„¶åæˆ‘ä»¬æ¥å¸¦å…¥è®¡ç®—æœˆä¾›ï¼š&lt;/p&gt;

\[\begin{split}
æœˆä¾›é¢ &amp;amp;= \frac {0.003875 \times (1 + 0.003875)^{300}}{(1 + 0.003875)^{300} - 1} \times 2.6 \times 10^6 \\
&amp;amp;\approx 14673.899\ å…ƒ 
\end{split}\]

\[\begin{equation}
\begin{split}
æœˆä¾›é¢ &amp;amp;= \frac {0.003875 \times (1 + 0.003875)^{300}}{(1 + 0.003875)^{300} - 1} \times 2.6 \times 10^6 \\
&amp;amp;\approx 14673.899\ å…ƒ 
\end{split}
\end{equation}\]

&lt;p&gt;ä½¿ç”¨æœˆä¾›é¢æ¥ä¹˜ä»¥ 30 ä¸ªæœˆç®—å‡ºæ€»è¿˜æ¬¾ï¼š&lt;/p&gt;

\[æ€»è¿˜æ¬¾ = 30 * 14673.899 = 4402169.7\ å…ƒ\]

&lt;h3 id=&quot;æƒ…å†µäºŒä½¿ç”¨æœ€å¤§ç»„åˆè´·&quot;&gt;æƒ…å†µäºŒï¼šä½¿ç”¨æœ€å¤§ç»„åˆè´·&lt;/h3&gt;

&lt;p&gt;ç”±äº&lt;strong&gt;å…¬ç§¯é‡‘è´·æ¬¾åªèƒ½è´· 120 ä¸‡ï¼Œæ‰€ä»¥é‡‡ç”¨ 120 ä¸‡æ˜¯å…¬ç§¯é‡‘è´·ï¼Œåˆ©æ¯æ˜¯äº”å¹´ä»¥ä¸Šçš„ 3.75\%ã€‚æˆ‘ä»¬ç”¨å½“å‰ 8 æœˆä»½çš„ LPR åˆ©æ¯ 4.65\% å½“åšå•†ä¸šè´·æ¬¾çš„åˆ©æ¯ï¼Œå•†ä¸šè´·æ¬¾ 140 ä¸‡&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;åŒä¸Šè¿°è®¡ç®—æ³•ç›¸åŒï¼Œå¸¦å…¥å…¬å¼ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;â‘  å…¬ç§¯é‡‘è´·æ¬¾&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å…¬ç§¯é‡‘è´·æ¬¾çš„æœˆä¾›ï¼š&lt;/p&gt;

\[å…¬ç§¯é‡‘æœˆä¾› \approx 6169.57 å…ƒ\]

&lt;p&gt;300 ä¸ªæœˆå…¬ç§¯é‡‘æ€»è¿˜æ¬¾ï¼š&lt;/p&gt;

\[å…¬ç§¯é‡‘æ€»è¿˜æ¬¾ = 1850871 \ å…ƒ\]

&lt;p&gt;&lt;strong&gt;â‘¡ å•†ä¸šè´·æ¬¾&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å•†ä¸šè´·æ¬¾æœˆä¾›ï¼š&lt;/p&gt;

\[å•†ä¸šè´·æ¬¾æœˆä¾› \approx 7901.33\ å…ƒ\]

&lt;p&gt;300 ä¸ªæœˆå•†è´·æ€»è¿˜æ¬¾ï¼š&lt;/p&gt;

\[å•†è´·æ€»è¿˜æ¬¾ = 2370399å…ƒ\]

&lt;p&gt;æˆ‘ä»¬å¾—åˆ°æ€»è¿˜æ¬¾æ•°ï¼š&lt;/p&gt;

\[æ€»è¿˜æ¬¾ = 1850871 + 2370399 = 4221270 å…ƒ\]

&lt;h3 id=&quot;ç»“æœåˆ†æ&quot;&gt;ç»“æœåˆ†æ&lt;/h3&gt;

&lt;p&gt;ä»ä¸Šé¢çš„è®¡ç®—ç»“æœæ¥çœ‹ï¼Œæˆ‘ä»¬è´­ä¹°æˆ¿é¾„ä¸º 10 å¹´çš„äºŒæ‰‹æˆ¿ï¼ŒåŠ å…¥æ€»ä»·ä¸º 400 ä¸‡å…ƒï¼Œåˆ™é€‰æ‹©ç»„åˆè´·&lt;strong&gt;å¯ä»¥èŠ‚çœ 180900 å…ƒ&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h1 id=&quot;æ•°æ®åˆ†æ&quot;&gt;æ•°æ®åˆ†æ&lt;/h1&gt;

&lt;p&gt;ä¸Šé¢å·²ç»ç»™å‡ºäº†ç­‰é¢æœ¬æ¯çš„è®¡ç®—æ–¹æ³•ã€‚æ‰€ä»¥æ¥ä¸‹æ¥è¿›è¡Œæ§åˆ¶å˜é‡ï¼Œ&lt;strong&gt;æˆ‘ä»¬è®©è´·æ¬¾å¹´é™æ˜ å°„åˆ°æ­£å®æ•°åŒºé—´ï¼Œè®©å…¶æŠ•å½±åœ¨ 5 å¹´ä¸ 30 å¹´ä¹‹é—´&lt;/strong&gt;ã€‚ä¿è¯è´·æ¬¾é‡‘é¢ä¸º 400 ä¸‡ã€‚ç„¶åæˆ‘ä»¬æ¥è®¡ç®—çº¯å•†è´·å’Œä½¿ç”¨ç»„åˆè´·çš„æ•°æ®ã€‚è“è‰²çº¿ä»£è¡¨ä½¿ç”¨çº¯å•†è´·æ¨¡å¼ï¼Œçº¢è‰²çº¿ä»£è¡¨ä½¿ç”¨ç»„åˆè´·æ¨¡å¼ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia640&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç”±å›¾ä¸€å¯ä»¥çœ‹å‡ºï¼Œ&lt;strong&gt;è¿˜æ¬¾å¹´ä»½æ•°è¶Šå¤šï¼Œå…¶æ‰€éœ€è¿˜æ¬¾é‡‘é¢è¶Šå¤šï¼Œä¹Ÿå°±æ„å‘³ç€åˆ©æ¯è¶Šé«˜&lt;/strong&gt;ã€‚è€Œçº¢ï¼ˆç»„åˆè´·ï¼‰ä¸è“ï¼ˆçº¯å•†è´·ï¼‰çš„å·®è·ä¹Ÿè¶Šæ¥è¶Šå¤§ã€‚&lt;strong&gt;å¹¶ä¸”ç”±å³å›¾å¯çŸ¥ï¼Œå½“è¿˜æ¬¾å¹´ä»½æ•°è¶Šå¤šï¼Œç»„åˆè´·çš„ä¼˜åŠ¿æ„ˆåŠ æ˜æ˜¾&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h1 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h1&gt;

&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ä¹°æˆ¿è´·æ¬¾çš„æœ€å¤§åŒ–åˆ©ç›Šç­–ç•¥ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;æ‰€ä»¥è´·æ¬¾ä¹°æˆ¿å°½é‡å¯ä»¥ä½¿ç”¨å…¬ç§¯é‡‘è´·æ¬¾ã€‚å¯è´·æœ€å¤§å…¬ç§¯é‡‘é¢åº¦éœ€è¦æˆ‘ä»¬ä»¥åŠæˆ‘ä»¬çš„é…å¶å…·æœ‰&lt;strong&gt;ä½æˆ¿å…¬ç§¯é‡‘ä½™é¢ 12500 å…ƒã€è¡¥å……å…¬ç§¯é‡‘ä½™é¢ 5000 å…ƒã€‚&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;æ ¹æ®&lt;strong&gt;æœ€å¤§è´·æ¬¾é¢åŸåˆ™&lt;/strong&gt;ï¼ˆä¹‹åä¼šè®²åˆ°ï¼Œç»“è®ºæ˜¯â€œé¦–å¥—æˆ¿ä»˜æœ€å°‘çš„é¦–ä»˜ï¼Œç”¨æœ€å¤§çš„æ æ†è´·æœ€å¤šçš„æ¬¾ï¼Œé€‰æ‹© 30 å¹´ç­‰é¢æœ¬æ¯æ³•ï¼Œæ‹’ä¸æå‰è¿˜æ¬¾â€ç­–ç•¥å¯è¾¾æœ€å¤§æ”¶ç›Šï¼‰ï¼Œ&lt;strong&gt;å½“æˆ‘ä»¬å°†è¿˜æ¬¾æ—¶é—´è®¾ç½®ä¸º 30 å¹´çš„ä¸Šé™é˜ˆå€¼ï¼Œåœ¨å…¬ç§¯é‡‘è´·æ¬¾ä¸­ä¹Ÿå¯ä»¥è·å¾—æœ€å¤§åŒ–çš„æˆæœ¬èŠ‚çº¦&lt;/strong&gt;ã€‚å½“ç„¶ï¼Œè¿™å°±è¦æ±‚æˆ‘ä»¬è´­ä¹°æ–°æˆ¿å’Œæˆ¿é¾„å°çš„äºŒæ‰‹æˆ¿ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ä»¥åŠæ›´å¥½çš„å»ºè®®ï¼Œ&lt;strong&gt;å¯ä»¥åœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h1 id=&quot;ç›¸å…³æ•°æ®åˆ†æä»£ç &quot;&gt;ç›¸å…³æ•°æ®åˆ†æä»£ç &lt;/h1&gt;

&lt;p&gt;ä»¥ä¸‹ä»£ç ç”±æˆ‘ä¸ªäººç¼–å†™ï¼Œå¯åœ¨ Jupyter Notebook ç¯å¢ƒä¸‹ç›´æ¥è¿è¡Œã€‚&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;ç­‰é¢æœ¬æ¯ç®—æ³•æè¿°&quot;&quot;&quot;&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;numpy&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;math&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# ç­‰é¢æœ¬æ¯ç®—æ³•
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;averageCapitalPlusInterest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;principal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;anualInterestRate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;month&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;
    principal è¡¨ç¤ºè´·æ¬¾æ€»é¢, anualInterestRate è¡¨ç¤ºå¹´åˆ©ç‡, month è¡¨ç¤ºæˆ¿è´·æœˆä»½
    &quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# è®¡ç®—æ¯æœˆåº”è¿˜æ¬¾é‡‘é¢
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;monthlyPayment&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;around&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;principal&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;averageCapitalPlusInterestRate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;month&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;monthlyInterestRate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;anualInterestRate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# è¿˜æ¬¾æ€»é¢
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;totalPayment&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;around&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;monthlyPayment&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;month&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;totalPayment&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# è®¡ç®—æ¯æœˆåˆ©ç‡
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;monthlyInterestRate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;anualInterestRate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;anualInterestRate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# è®¡ç®—æ¯”ä¾‹ç³»æ•°
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;averageCapitalPlusInterestRate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;month&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;monthlyInterestRate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;monthlyInterestRate&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;month&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;I&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;pow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;pow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;N&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;I&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;è´·æ¬¾æ•°æ®æ¨¡æ‹Ÿ&quot;&quot;&quot;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# å…¨å•†è´·
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0465&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ms&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mi&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mi&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4000000&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ms&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;averageCapitalPlusInterest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;around&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# ç»„åˆè´·
&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;r1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0465&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;r2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0375&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;t2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1200000&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;t1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t2&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;rest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ms&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;rest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;averageCapitalPlusInterest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;averageCapitalPlusInterest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;rest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;around&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;åšå›¾&quot;&quot;&quot;&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;year&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ms&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subplot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;221&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;year&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;year&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'r'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Loan Time - Year&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Repayment Amount - RMB&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subplot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;222&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;detal&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;detal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;rects&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;year&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;detal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Loan Time - Year&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylabel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Savings - RMB&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;around&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;plt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ha&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;center&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;va&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;bottom&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>å†¬ç“œ</name><email>gua@desgard.com</email></author><category term="å†¬ç“œä¹°æˆ¿ç¬”è®°" /><category term="æ•°å­¦å»ºæ¨¡" /><summary type="html">æˆ‘ç»™è‡ªå·±å®šäº†ä¸€ä¸ªå°†è¿‘ 700 å¤©çš„è®¡åˆ’ï¼Œè¿™å°±æ˜¯åœ¨ä¸Šæµ·ä¹°æˆ¿å®šå±…ã€‚äºæ˜¯å¼€å¯äº†ç ”ç©¶è´­æˆ¿æ”¿ç­–ã€ç ”ç©¶å°åŒºå’Œæ¿å—ã€ç ”ç©¶è´­æˆ¿æ³¨æ„äº‹é¡¹ç­‰ä¸€ç³»åˆ—çš„è°ƒç ”å’Œç ”ç©¶ã€‚æˆ‘å°†è¿™äº›ç¬”è®°å½’æ¡£æˆæ–‡ç« ï¼Œå‘è¡¨åœ¨å…¬ä¼—å·ä¸å¤§å®¶åˆ†äº«ã€‚ ä»Šå¤©è·ç¦»è´­æˆ¿è¿˜æœ‰ 675 å¤©ã€‚ è¿™ç¯‡æ–‡ç« æ¥è®¨è®ºä½¿ç”¨å…¬ç§¯é‡‘è´·æ¬¾ä¹°æˆ¿çš„æœ€å¤§åŒ–çœé’±ç©ºé—´ã€‚ä»¥ä¸‹è®¨è®ºå‡é’ˆå¯¹äºä¸Šæµ·å¸‚ã€‚å› ä¸ºå…¬ç§¯é‡‘è´·æ¬¾æ¯”å•†ä¸šè´·æ¬¾åˆ©ç‡ä½äº†è¿‘ä¸¤ä¸ªç‚¹ï¼Œæ‰€ä»¥å…¬ç§¯é‡‘è´·æ¬¾ä¹Ÿæ˜¯è´­æˆ¿è€…çš„é¦–é€‰ã€‚ä¸‹é¢æˆ‘æ¥è¾ƒä¸ºå…¨é¢çš„è®°å½•ä¸€ä¸‹å…¬ç§¯é‡‘è´·æ¬¾çš„æ‰€æœ‰ç»†èŠ‚é—®é¢˜ã€‚ ä½¿ç”¨å…¬ç§¯é‡‘è´·æ¬¾çš„æ¡ä»¶ è´­ä¹°ä¸Šæµ·å¸‚å…·æœ‰æ‰€æœ‰æƒçš„è‡ªä½ä½æˆ¿ï¼› ç”³è¯·è´·æ¬¾å‰ 6 ä¸ªæœˆè¿ç»­æ­£å¸¸ç¼´å­˜ä½æˆ¿å…¬ç§¯é‡‘ï¼› å€Ÿæ¬¾äººå®¶åº­æ²¡æœ‰å°šæœªè¿˜æ¸…çš„å…¬ç§¯é‡‘å€ºåŠ¡ï¼› åˆ©ç‡æ•°æ® é¦–å…ˆå…ˆç»™å‡ºå…¬ç§¯é‡‘è´·æ¬¾çš„è´·æ¬¾åˆ©ç‡ï¼ˆä»¥ä¸‹è¡¨å†…åŠ ç²—ä¸ºä¸€èˆ¬å¤§å®¶æ‰€éœ€è¦å…³æ³¨çš„æ•°æ®ï¼‰ï¼š è´·æ¬¾å¹´é™ é¦–å¥—æˆ¿ã€äºŒå¥—æˆ¿æ™®é€šä½å®…ï¼ˆåŸºå‡†åˆ©ç‡ - 2015.4.8 èµ·å¼€å§‹æ‰§è¡Œï¼‰ äºŒå¥—æˆ¿éæ™®é€šä½å®…ï¼ˆ1.1 å€åˆ©ç‡ï¼‰ äº”å¹´ä»¥ä¸‹ï¼ˆåŒ…å«äº”å¹´ï¼‰ 2.75% 3.025% äº”å¹´ä»¥ä¸Š 3.25% 3.575% æœ€é«˜è´·æ¬¾é¢åº¦ è¿™é‡Œä¸è®¨è®ºéæ™®é€šä½å®…ã€‚ æ™®é€šä½å®…ï¼šæŒ‰æ‰€åœ¨åœ°ä¸€èˆ¬æ°‘ç”¨ä½å®…å»ºç­‘æ ‡å‡†æ¥å»ºé€ çš„ä½œä¸ºå±…ä½ç”¨é€”çš„æˆ¿å±‹ï¼Œç›®å‰å¤šä¸ºå¤šå±‚ä½å®…ä¸é«˜å±‚ä½å®…ã€‚ éæ™®é€šä½å®…ï¼šéæ™®é€šä½å®…ä¸€èˆ¬æŒ‡å®…å»ºç­‘é¢ç§¯è¾ƒå¤§æˆ–ç”¨ä½œå•†ä¸šç”¨é€”çš„æˆ¿å­ã€‚ æ‰€è´­ä½æˆ¿ é¦–å¥—æˆ¿ é¦–å¥—æˆ¿ äºŒå¥—æˆ¿æ™®é€š äºŒå¥—æˆ¿æ™®é€š è´·æ¬¾å®¶åº­ 1 äººè´·æ¬¾ â‰¥ 2 äººè´·æ¬¾ 1 äººè´·æ¬¾ â‰¥ 2 äººè´·æ¬¾ ç¼´çº³ä½æˆ¿å…¬ç§¯é‡‘æœ€é«˜å¯è´·é‡‘é¢ 50 ä¸‡ 100 ä¸‡ 50 ä¸‡ 100 ä¸‡ ç¼´çº³è¡¥å……å…¬ç§¯é‡‘æœ€é«˜å¯è´·é‡‘é¢ 10 ä¸‡ 20 ä¸‡ 10 ä¸‡ 20 ä¸‡ å¯è´·é‡‘é¢æ€»è®¡ 60 ä¸‡ 120 ä¸‡ 60 ä¸‡ 120 ä¸‡ é¦–ä»˜æ¯”åˆ— â‰¤ 90 å¹³ç±³ï¼Œä¸ä½äº 20%; ï¼ 90 å¹³ç±³ä¸ä½äº 30% åŒå·¦ ä¸ä½äº 30\% åŒå·¦ è¿™é‡Œé¢æˆ‘ä»¬å¯ä»¥å‘ç°ä½æˆ¿å…¬ç§¯é‡‘å’Œè¡¥å……å…¬ç§¯é‡‘æ˜¯æœ‰ä¸ªä¸Šé™å€¼ï¼Œä½†æ˜¯å¦‚ä½•å‡ºè‡ªå·±çš„å¯è´·å…¬ç§¯é‡‘çš„æ•°å€¼å‘¢ï¼Ÿå…¶å®æ˜¯æœ‰å¦‚ä¸‹è®¡ç®—å…¬å¼ï¼šå‡å¦‚æˆ‘ä»¬å¦å½“å‰ä½æˆ¿å…¬ç§¯é‡‘è´¦æˆ·ä½™é¢æ˜¯ï¼Œè¡¥å……å…¬ç§¯é‡‘è´¦æˆ·ä½™é¢æ˜¯ï¼Œåˆ™æœ€é«˜å¯è´·é‡‘é¢æœ‰å¦‚ä¸‹å…³ç³»ï¼š \[\begin{cases} f(x, y)=40x+20y \\ 40x \leq 50 \times 10^{4} \\ 20y \leq 10 \times 10^{4} \end{cases}\] é€šä¿—çš„ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼Œå…¬ç§¯é‡‘æœ€é«˜å¯è´·é‡‘é¢ = ä½æˆ¿å…¬ç§¯é‡‘ä½™é¢ Ã— 40 + è¡¥å……å…¬ç§¯é‡‘ä½™é¢ Ã— 20ã€‚æ‰€ä»¥é€šè¿‡ä¸ç­‰å¼åè§£æˆ‘ä»¬å¯å¾—ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æœ€å¤§çš„åˆ©ç”¨å…¬ç§¯é‡‘ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä½æˆ¿å…¬ç§¯é‡‘æœ€å°‘éœ€è¦æœ‰ 12500 å…ƒçš„ä½™é¢ã€è¡¥å……å…¬ç§¯é‡‘éœ€è¦æœ‰ 5000 å—é’±çš„ä½™é¢ï¼Œå°±æ»¡è¶³äº†æœ€é«˜å¯è´·é‡‘é¢çš„æ¡ä»¶ã€‚ è´·æ¬¾å¹´é™å’Œè´·æ¬¾äººå¹´é¾„é™åˆ¶ é¦–å…ˆï¼Œå¦‚æœæ˜¯æ–°å»ºå•†å“æˆ¿ï¼Œä¹Ÿå°±æ˜¯æˆ¿é¾„ä¸º 0 å¹´çš„æˆ¿å­ï¼Œæœ€é•¿è´·æ¬¾å¹´é™æ˜¯ 30 å¹´ã€‚ç„¶åæˆ‘ä»¬è¯´äºŒæ‰‹æˆ¿ï¼Œå®ƒæœ‰ä»¥ä¸‹è§„åˆ™ï¼š æˆ¿é¾„ æœ€é•¿è´·æ¬¾å¹´é™ â‰¤ 5 å¹´ 30 å¹´ 6 - 19 å¹´ 35 å¹´ - æˆ¿é¾„ï¼ˆå‡å¦‚æ˜¯ 10 å¹´æˆ¿é¾„ï¼Œåˆ™æœ€é«˜å¯è´· 25 å¹´ï¼‰ â‰¥ 20 å¹´ 15 å¹´ è´·æ¬¾ç®—æ³• åŒå•†ä¸šè´·æ¬¾çš„ç®—æ³•ç›¸åŒï¼Œå…¬ç§¯é‡‘è´·æ¬¾ä¹Ÿåˆ†æˆç­‰é¢æœ¬é‡‘å’Œç­‰é¢æœ¬æ¯ä¸¤ç§ç®—æ³•ã€‚è€ƒè™‘åˆ°æ›´å¤šçš„äººæ„¿æ„å‡æ‘Šé£é™©ä»¥åŠé“¶è¡Œå¸Œæœ›è·å–åˆ°æ›´é«˜çš„åˆ©æ¯æ”¶å…¥ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘å‡é‡‡ç”¨ç­‰é¢æœ¬æ¯æ¥è®¡ç®—è¿˜æ¬¾æ€»é¢ã€‚ æ¯æœˆæœˆä¾› \[æœˆä¾›é¢ = \frac{æœˆåˆ©ç‡ \times (1+æœˆåˆ©ç‡)^{è¿˜æ¬¾æœˆæ•°}}{(1+æœˆåˆ©ç‡)^{è¿˜æ¬¾æœˆæ•°} - 1} \times è´·æ¬¾æœ¬é‡‘\] å…¶ä¸­æœˆåˆ©ç‡çš„è®¡ç®—æ–¹æ³•ï¼š \[æœˆåˆ©ç‡ = \frac{å¹´åˆ©ç‡}{12}\] å…¶ä»–çº¦æŸ é™¤äº†æˆ‘ä»¬ä¸Šæ–‡æåˆ°çš„å…¬ç§¯é‡‘ä½™é¢å¯¹äºè´·æ¬¾çš„çº¦æŸï¼Œæˆ‘ä»¬è¿˜è¦è€ƒè™‘æˆ¿é¾„æ‰€å¸¦æ¥çš„å½±å“ï¼š \[è¿˜æ¬¾æœˆæ•° = (35 - æˆ¿é¾„) \times 12\] ä¸¾ä¾‹è®¡ç®— ä»¥ä¸Šå°±æ˜¯æˆ‘ä»¬è¦è€ƒè™‘çš„æ‰€æœ‰æœˆæ•°æ¡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥ä¸¾ä¸€ä¸ªä¾‹å­æ¥è¿›è¡Œè®¡ç®—ã€‚å‡å¦‚æˆ‘ä»¬ç°åœ¨è¦ä¹°ä¸€ä¸ª 2010 å¹´ï¼ˆæˆ¿é¾„ 10 å¹´çš„äºŒæ‰‹æˆ¿ï¼‰ï¼Œæ€»ä»·æ˜¯ 400 ä¸‡ã€‚ä½¿ç”¨äº† 35\% çš„é¦–ä»˜æ¯”ä¾‹ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦è´·æ¬¾ 260 ä¸‡ï¼Œæœ€é•¿è´·æ¬¾æ—¶é—´ 25 å¹´ï¼Œä¹Ÿå°±æ˜¯è¿˜æ¬¾æœˆæ•° 300 ä¸ªæœˆã€‚ æƒ…å†µä¸€ï¼šå…¨éƒ¨ä½¿ç”¨å•†ä¸šè´·æ¬¾ å…ˆè¦ç¡®å®šä¸€ä¸‹å•†ä¸šè´·æ¬¾çš„åˆ©æ¯ï¼Œæˆ‘è¿™é‡ŒæŸ¥é˜…äº†ä¸€ä¸‹èµ„æ–™ï¼Œç”±äºä¸Šæµ·çš„å•†è´·é‡‘é¢å¾€å¾€è¾ƒé«˜ï¼Œé“¶è¡Œä¼šå¯¹åˆ©æ¯è¿›è¡Œ 95 æŠ˜çš„ä¼˜æƒ ï¼Œä» 4.9\% çš„åŸºå‡†åˆ©ç‡ä¸‹è°ƒåˆ° 4.655\%ã€‚ä½†ä»Šå¹´å›½å®¶å‡ºäº† LPR çš„åˆ©æ¯ç­–ç•¥ï¼Œæˆ‘ä»¬ç”¨å½“å‰ 8 æœˆä»½çš„ LPR åˆ©æ¯ 4.65\% æ¥è®¡ç®—ã€‚é¦–å…ˆæ¥ç®—æœˆåˆ©ç‡ï¼š \[æœˆåˆ©ç‡ = \frac{4.65\%}{12} = 0.003875\] ç„¶åæˆ‘ä»¬æ¥å¸¦å…¥è®¡ç®—æœˆä¾›ï¼š \[\begin{split} æœˆä¾›é¢ &amp;amp;= \frac {0.003875 \times (1 + 0.003875)^{300}}{(1 + 0.003875)^{300} - 1} \times 2.6 \times 10^6 \\ &amp;amp;\approx 14673.899\ å…ƒ \end{split}\] \[\begin{equation} \begin{split} æœˆä¾›é¢ &amp;amp;= \frac {0.003875 \times (1 + 0.003875)^{300}}{(1 + 0.003875)^{300} - 1} \times 2.6 \times 10^6 \\ &amp;amp;\approx 14673.899\ å…ƒ \end{split} \end{equation}\] ä½¿ç”¨æœˆä¾›é¢æ¥ä¹˜ä»¥ 30 ä¸ªæœˆç®—å‡ºæ€»è¿˜æ¬¾ï¼š \[æ€»è¿˜æ¬¾ = 30 * 14673.899 = 4402169.7\ å…ƒ\] æƒ…å†µäºŒï¼šä½¿ç”¨æœ€å¤§ç»„åˆè´· ç”±äºå…¬ç§¯é‡‘è´·æ¬¾åªèƒ½è´· 120 ä¸‡ï¼Œæ‰€ä»¥é‡‡ç”¨ 120 ä¸‡æ˜¯å…¬ç§¯é‡‘è´·ï¼Œåˆ©æ¯æ˜¯äº”å¹´ä»¥ä¸Šçš„ 3.75\%ã€‚æˆ‘ä»¬ç”¨å½“å‰ 8 æœˆä»½çš„ LPR åˆ©æ¯ 4.65\% å½“åšå•†ä¸šè´·æ¬¾çš„åˆ©æ¯ï¼Œå•†ä¸šè´·æ¬¾ 140 ä¸‡ã€‚ åŒä¸Šè¿°è®¡ç®—æ³•ç›¸åŒï¼Œå¸¦å…¥å…¬å¼ã€‚ â‘  å…¬ç§¯é‡‘è´·æ¬¾ å…¬ç§¯é‡‘è´·æ¬¾çš„æœˆä¾›ï¼š \[å…¬ç§¯é‡‘æœˆä¾› \approx 6169.57 å…ƒ\] 300 ä¸ªæœˆå…¬ç§¯é‡‘æ€»è¿˜æ¬¾ï¼š \[å…¬ç§¯é‡‘æ€»è¿˜æ¬¾ = 1850871 \ å…ƒ\] â‘¡ å•†ä¸šè´·æ¬¾ å•†ä¸šè´·æ¬¾æœˆä¾›ï¼š \[å•†ä¸šè´·æ¬¾æœˆä¾› \approx 7901.33\ å…ƒ\] 300 ä¸ªæœˆå•†è´·æ€»è¿˜æ¬¾ï¼š \[å•†è´·æ€»è¿˜æ¬¾ = 2370399å…ƒ\] æˆ‘ä»¬å¾—åˆ°æ€»è¿˜æ¬¾æ•°ï¼š \[æ€»è¿˜æ¬¾ = 1850871 + 2370399 = 4221270 å…ƒ\] ç»“æœåˆ†æ ä»ä¸Šé¢çš„è®¡ç®—ç»“æœæ¥çœ‹ï¼Œæˆ‘ä»¬è´­ä¹°æˆ¿é¾„ä¸º 10 å¹´çš„äºŒæ‰‹æˆ¿ï¼ŒåŠ å…¥æ€»ä»·ä¸º 400 ä¸‡å…ƒï¼Œåˆ™é€‰æ‹©ç»„åˆè´·å¯ä»¥èŠ‚çœ 180900 å…ƒã€‚ æ•°æ®åˆ†æ ä¸Šé¢å·²ç»ç»™å‡ºäº†ç­‰é¢æœ¬æ¯çš„è®¡ç®—æ–¹æ³•ã€‚æ‰€ä»¥æ¥ä¸‹æ¥è¿›è¡Œæ§åˆ¶å˜é‡ï¼Œæˆ‘ä»¬è®©è´·æ¬¾å¹´é™æ˜ å°„åˆ°æ­£å®æ•°åŒºé—´ï¼Œè®©å…¶æŠ•å½±åœ¨ 5 å¹´ä¸ 30 å¹´ä¹‹é—´ã€‚ä¿è¯è´·æ¬¾é‡‘é¢ä¸º 400 ä¸‡ã€‚ç„¶åæˆ‘ä»¬æ¥è®¡ç®—çº¯å•†è´·å’Œä½¿ç”¨ç»„åˆè´·çš„æ•°æ®ã€‚è“è‰²çº¿ä»£è¡¨ä½¿ç”¨çº¯å•†è´·æ¨¡å¼ï¼Œçº¢è‰²çº¿ä»£è¡¨ä½¿ç”¨ç»„åˆè´·æ¨¡å¼ã€‚ ç”±å›¾ä¸€å¯ä»¥çœ‹å‡ºï¼Œè¿˜æ¬¾å¹´ä»½æ•°è¶Šå¤šï¼Œå…¶æ‰€éœ€è¿˜æ¬¾é‡‘é¢è¶Šå¤šï¼Œä¹Ÿå°±æ„å‘³ç€åˆ©æ¯è¶Šé«˜ã€‚è€Œçº¢ï¼ˆç»„åˆè´·ï¼‰ä¸è“ï¼ˆçº¯å•†è´·ï¼‰çš„å·®è·ä¹Ÿè¶Šæ¥è¶Šå¤§ã€‚å¹¶ä¸”ç”±å³å›¾å¯çŸ¥ï¼Œå½“è¿˜æ¬¾å¹´ä»½æ•°è¶Šå¤šï¼Œç»„åˆè´·çš„ä¼˜åŠ¿æ„ˆåŠ æ˜æ˜¾ã€‚ æ€»ç»“ æ¥ä¸‹æ¥æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ä¹°æˆ¿è´·æ¬¾çš„æœ€å¤§åŒ–åˆ©ç›Šç­–ç•¥ï¼š æ‰€ä»¥è´·æ¬¾ä¹°æˆ¿å°½é‡å¯ä»¥ä½¿ç”¨å…¬ç§¯é‡‘è´·æ¬¾ã€‚å¯è´·æœ€å¤§å…¬ç§¯é‡‘é¢åº¦éœ€è¦æˆ‘ä»¬ä»¥åŠæˆ‘ä»¬çš„é…å¶å…·æœ‰ä½æˆ¿å…¬ç§¯é‡‘ä½™é¢ 12500 å…ƒã€è¡¥å……å…¬ç§¯é‡‘ä½™é¢ 5000 å…ƒã€‚ æ ¹æ®æœ€å¤§è´·æ¬¾é¢åŸåˆ™ï¼ˆä¹‹åä¼šè®²åˆ°ï¼Œç»“è®ºæ˜¯â€œé¦–å¥—æˆ¿ä»˜æœ€å°‘çš„é¦–ä»˜ï¼Œç”¨æœ€å¤§çš„æ æ†è´·æœ€å¤šçš„æ¬¾ï¼Œé€‰æ‹© 30 å¹´ç­‰é¢æœ¬æ¯æ³•ï¼Œæ‹’ä¸æå‰è¿˜æ¬¾â€ç­–ç•¥å¯è¾¾æœ€å¤§æ”¶ç›Šï¼‰ï¼Œå½“æˆ‘ä»¬å°†è¿˜æ¬¾æ—¶é—´è®¾ç½®ä¸º 30 å¹´çš„ä¸Šé™é˜ˆå€¼ï¼Œåœ¨å…¬ç§¯é‡‘è´·æ¬¾ä¸­ä¹Ÿå¯ä»¥è·å¾—æœ€å¤§åŒ–çš„æˆæœ¬èŠ‚çº¦ã€‚å½“ç„¶ï¼Œè¿™å°±è¦æ±‚æˆ‘ä»¬è´­ä¹°æ–°æˆ¿å’Œæˆ¿é¾„å°çš„äºŒæ‰‹æˆ¿ã€‚ å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ä»¥åŠæ›´å¥½çš„å»ºè®®ï¼Œå¯ä»¥åœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€ã€‚ ç›¸å…³æ•°æ®åˆ†æä»£ç  ä»¥ä¸‹ä»£ç ç”±æˆ‘ä¸ªäººç¼–å†™ï¼Œå¯åœ¨ Jupyter Notebook ç¯å¢ƒä¸‹ç›´æ¥è¿è¡Œã€‚ &quot;&quot;&quot;ç­‰é¢æœ¬æ¯ç®—æ³•æè¿°&quot;&quot;&quot; import numpy as np import math # ç­‰é¢æœ¬æ¯ç®—æ³• def averageCapitalPlusInterest(principal, anualInterestRate, month): &quot;&quot;&quot; principal è¡¨ç¤ºè´·æ¬¾æ€»é¢, anualInterestRate è¡¨ç¤ºå¹´åˆ©ç‡, month è¡¨ç¤ºæˆ¿è´·æœˆä»½ &quot;&quot;&quot; # è®¡ç®—æ¯æœˆåº”è¿˜æ¬¾é‡‘é¢ monthlyPayment = np.around(principal * averageCapitalPlusInterestRate(month, monthlyInterestRate(anualInterestRate)), 2) # è¿˜æ¬¾æ€»é¢ totalPayment = np.around(monthlyPayment * month, 2) return totalPayment # è®¡ç®—æ¯æœˆåˆ©ç‡ def monthlyInterestRate(anualInterestRate): s = anualInterestRate / 12 return s # è®¡ç®—æ¯”ä¾‹ç³»æ•° def averageCapitalPlusInterestRate(month, monthlyInterestRate): R = monthlyInterestRate N = month I = R * math.pow(1 + R, N) / (math.pow(1 + R, N) - 1) return I &quot;&quot;&quot;è´·æ¬¾æ•°æ®æ¨¡æ‹Ÿ&quot;&quot;&quot; # å…¨å•†è´· r = 0.0465 ms = [12 * mi for mi in range(6, 31)] t = 4000000 res = [] for m in ms: res.append(averageCapitalPlusInterest(t, r, m)) res = [np.around(x / 10000, 2) for x in res] # ç»„åˆè´· r1 = 0.0465 r2 = 0.0375 t2 = 1200000 t1 = t - t2 rest = [] for m in ms: rest.append(averageCapitalPlusInterest(t1, r1, m) + averageCapitalPlusInterest(t2, r2, m)) rest = [np.around(x / 10000, 2) for x in rest] &quot;&quot;&quot;åšå›¾&quot;&quot;&quot; import matplotlib.pyplot as plt year = [m // 12 for m in ms] plt.subplot(221) plt.plot(year, res) plt.plot(year, rest, 'r') plt.xlabel(&quot;Loan Time - Year&quot;) plt.ylabel(&quot;Repayment Amount - RMB&quot;) plt.subplot(222) detal = [] for i in range(len(res)): detal.append(res[i] - rest[i]) rects = plt.bar(year, detal) plt.xlabel(&quot;Loan Time - Year&quot;) plt.ylabel(&quot;Savings - RMB&quot;) for rect in rects: height = np.around(rect.get_height(), 1) plt.text(rect.get_x() + rect.get_width() / 2, height+1, str(height), ha=&quot;center&quot;, va=&quot;bottom&quot;)</summary></entry><entry><title type="html">CocoaPods å‘½ä»¤è§£æ - CLAide</title><link href="https://www.desgard.com/2020/09/02/cocoapods-story-3.html" rel="alternate" type="text/html" title="CocoaPods å‘½ä»¤è§£æ - CLAide" /><published>2020-09-02T00:00:00-08:00</published><updated>2020-09-02T00:00:00-08:00</updated><id>https://www.desgard.com/2020/09/02/cocoapods-story-3</id><content type="html" xml:base="https://www.desgard.com/2020/09/02/cocoapods-story-3.html">&lt;h1 id=&quot;å¼•å­&quot;&gt;å¼•å­&lt;/h1&gt;

&lt;p&gt;&lt;br /&gt;åœ¨ä¸Šæ–‡ &lt;a href=&quot;/2020/08/17/cocoapods-story-2.html&quot;&gt;æ•´ä½“æŠŠæ¡ CocoaPods æ ¸å¿ƒç»„ä»¶&lt;/a&gt; ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å¯¹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod install&lt;/code&gt; çš„æµç¨‹çš„ä»‹ç»ï¼Œå¼•å‡º CocoaPods çš„å„ä¸ªæ ¸å¿ƒç»„ä»¶çš„è§’è‰²åˆ†å·¥å’Œå…¶ä¸»è¦ä½œç”¨ï¼Œå¸Œæœ›é€šè¿‡å¯¹è¿™äº›ç»„ä»¶çš„ä½¿ç”¨å’Œä»‹ç»æ¥å¸®åŠ©å¤§å®¶æ›´å¥½çš„äº†è§£ CocoaPods çš„å®Œæ•´å·¥ä½œæµä»¥åŠèƒŒåçš„åŸç†ã€‚&lt;br /&gt;
&lt;br /&gt;ä»Šå¤©æˆ‘ä»¬ä¸»è¦èŠä¸€èŠä¸º CocoaPods æä¾›çš„å‘½ä»¤è¡Œè§£æçš„å·¥å…· &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CLAide&lt;/code&gt;ï¼Œå®ƒæ˜¯å¦‚ä½•æ¥è§£æ Pod å‘½ä»¤ä»¥åŠ CocoaPods çš„æ’ä»¶æœºåˆ¶ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;41cb7c3f&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;open-class&quot;&gt;Open Class&lt;/h1&gt;

&lt;p&gt;&lt;br /&gt;å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä¸ª Ruby çš„è¯­è¨€ç‰¹æ€§ï¼š&lt;a href=&quot;http://rubylearning.com/satishtalim/ruby_open_classes.html&quot;&gt;Open Classes&lt;/a&gt;&lt;br /&gt;
&lt;br /&gt;åœ¨ Ruby ä¸­ï¼Œç±»æ°¸è¿œæ˜¯å¼€æ”¾çš„ï¼Œä½ æ€»æ˜¯å¯ä»¥å°†æ–°çš„æ–¹æ³•åŠ å…¥åˆ°å·²æœ‰çš„ç±»ä¸­ï¼Œé™¤äº†åœ¨ä½ è‡ªå·±çš„ä»£ç ä¸­ï¼Œè¿˜å¯ä»¥ç”¨åœ¨æ ‡å‡†åº“å’Œå†…ç½®ç±»ä¸­ï¼Œè¿™ä¸ªç‰¹æ€§è¢«ç§°ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Open Classes&lt;/code&gt;ã€‚è¯´åˆ°è¿™é‡Œä½œä¸º iOS å·¥ç¨‹å¸ˆï¼Œè„‘ä¸­åŸºæœ¬èƒ½é—ªç°å‡º Objective-C çš„ &lt;a href=&quot;https://developer.apple.com/library/archive/documentation/General/Conceptual/DevPedia-CocoaCore/Category.html&quot;&gt;&lt;strong&gt;Category&lt;/strong&gt;&lt;/a&gt; æˆ–è€… Swift çš„ &lt;a href=&quot;https://docs.swift.org/swift-book/LanguageGuide/Extensions.html&quot;&gt;&lt;strong&gt;Extensions&lt;/strong&gt;&lt;/a&gt; ç‰¹æ€§ã€‚ä¸è¿‡ï¼Œè¿™ç§åŠ¨æ€æ›¿æ¢æ–¹æ³•çš„åŠŸèƒ½ä¹Ÿç§°ä½œ Monkeypatchã€‚(ğŸ’  åˆ°åº•æ‹›è°æƒ¹è°äº†ï¼‰&lt;br /&gt;
&lt;br /&gt;ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Monkey.rb&lt;/code&gt; æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰ç±» &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Monkey&lt;/code&gt; æ¥ç®€å•çœ‹ä¸€ä¸‹è¯¥ç‰¹æ€§ï¼Œ&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Monkey&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;eat&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;i have banana&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;monkey&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Monkey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Monkey&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;eat&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;I have apple&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;monkey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;eat&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;ç›´æ¥åœ¨ VSCode ä¸­è¿è¡Œï¼Œæ•ˆæœå¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Running] ruby &lt;span class=&quot;s2&quot;&gt;&quot;/Users/edmond/Desktop/Monkey.rb&quot;&lt;/span&gt;
I have apple
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;å¯ä»¥çœ‹åˆ°ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Monkey&lt;/code&gt; ç±»çš„å®ä¾‹è¾“å‡ºå·²ç»æ”¹ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;I have apple&lt;/code&gt;ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;éœ€è¦æ³¨æ„ï¼Œå³ä½¿æ˜¯å·²ç»åˆ›å»ºå¥½çš„å®ä¾‹ï¼Œæ–¹æ³•æ›¿æ¢åŒæ ·æ˜¯ç”Ÿæ•ˆçš„ã€‚
å¦å¤– âš ï¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Open Class&lt;/code&gt; å¯ä»¥è·¨æ–‡ä»¶ã€è·¨æ¨¡å—è¿›è¡Œè®¿é—®çš„ï¼Œç”šè‡³å¯¹ Ruby å†…ç½®æ–¹æ³•çš„ä¹ŸåŒæ ·é€‚ç”¨ (è°¨æ…)ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;è¿™å¼ºå¤§çš„åŠŸèƒ½è®©æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„å¯¹ä¸‰æ–¹æ¨¡å—è¿›è¡Œæ‰©å±•ï¼Œè¿™ä¹Ÿæ˜¯ CocoaPods çš„æ’ä»¶ä½“ç³»æ‰€ä¾èµ–çš„åŸºç¡€ã€‚&lt;br /&gt;
&lt;br /&gt;ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ &lt;em&gt;CocoaPods&lt;/em&gt; ä¸»ä»“åº“ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cocoapods/downloader.rb&lt;/code&gt; ä¸­å®šä¹‰äº†ä¸€äº› download æ–¹æ³•ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Pod&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Downloader&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;ä½†æ˜¯åœ¨ &lt;em&gt;&lt;a href=&quot;https://github.com/CocoaPods/cocoapods-downloader&quot;&gt;cocoapods-downloader&lt;/a&gt;&lt;/em&gt; æ¨¡å—ä¸­ï¼Œmodule &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Downloader&lt;/code&gt; çš„æ–¹æ³•å¹¶ä¸èƒ½æ»¡è¶³å…¨éƒ¨éœ€æ±‚ï¼Œäºæ˜¯åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cocoapods-downloader/api.rbapi.rb&lt;/code&gt; ä¸­å°±å¯¹é½è¿›è¡Œäº†æ‰©å±•ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Pod&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Downloader&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;API&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;execute_command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;executable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;raise_on_failure&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a name=&quot;CLAide&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;claide&quot;&gt;CLAide&lt;/h1&gt;

&lt;p&gt;&lt;br /&gt;&lt;a href=&quot;https://github.com/CocoaPods/CLAide&quot;&gt;CLAide&lt;/a&gt; è™½ç„¶æ˜¯ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œè§£é‡Šå™¨ï¼Œä½†å®ƒæä¾›äº†åŠŸèƒ½é½å…¨çš„å‘½ä»¤è¡Œç•Œé¢å’Œ APIã€‚å®ƒä¸ä»…è´Ÿè´£è§£ææˆ‘ä»¬ä½¿ç”¨åˆ°çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods&lt;/code&gt; å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod install&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod update&lt;/code&gt; ç­‰ï¼Œè¿˜å¯ç”¨äºå°è£…å¸¸ç”¨çš„ä¸€äº›è„šæœ¬ï¼Œå°†å…¶æ‰“åŒ…æˆç®€å•çš„å‘½ä»¤è¡Œå°å·¥å…·ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;å¤‡æ³¨ï¼šæ‰€è°“å‘½ä»¤è¡Œè§£é‡Šå™¨å°±æ˜¯ä»æ ‡å‡†è¾“å…¥æˆ–è€…æ–‡ä»¶ä¸­è¯»å–å‘½ä»¤å¹¶æ‰§è¡Œçš„ç¨‹åºã€‚è¯¦è§ &lt;a href=&quot;https://www.wikiwand.com/en/Command-line_argument_parsing&quot;&gt;Wiki&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a name=&quot;7db62e5c&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;claide-åŠŸèƒ½æ¦‚è§ˆ&quot;&gt;CLAide åŠŸèƒ½æ¦‚è§ˆ&lt;/h2&gt;

&lt;p&gt;&lt;br /&gt;æˆ‘ä»¬å…ˆé€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod --help&lt;/code&gt; æ¥æŸ¥çœ‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CLAide&lt;/code&gt; çš„çœŸå®è¾“å‡ºæ•ˆæœï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Usage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;COMMAND&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;CocoaPods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Cocoa&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;library&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;manager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Commands&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cache&lt;/span&gt;               &lt;span class=&quot;no&quot;&gt;Manipulate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;CocoaPods&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cache&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;deintegrate&lt;/span&gt;         &lt;span class=&quot;no&quot;&gt;Deintegrate&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;CocoaPods&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;your&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;                 &lt;span class=&quot;no&quot;&gt;Display&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;environment&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;                &lt;span class=&quot;no&quot;&gt;Generate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Podfile&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;directory&lt;/span&gt;
  	&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;allow&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;          &lt;span class=&quot;no&quot;&gt;Allows&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;CocoaPods&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;silent&lt;/span&gt;              &lt;span class=&quot;no&quot;&gt;Show&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nothing&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;             &lt;span class=&quot;no&quot;&gt;Show&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tool&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;ğŸ‘†æ‰€å±•ç¤ºçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Usage&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Commands&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Options&lt;/code&gt; section åŠå…¶å†…å®¹å‡æ˜¯ç”± &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CALide&lt;/code&gt; çš„è¾“å‡ºæ¨¡ç‰ˆ &lt;strong&gt;Banner&lt;/strong&gt; æ¥å®Œæˆçš„ã€‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CALide&lt;/code&gt; æä¾›äº† Command åŸºç±»å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä¹‰å‡ºæ ‡å‡†ä¸”ç¾è§‚çš„å‘½ä»¤ã€‚é™¤äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod&lt;/code&gt; å‘½ä»¤ä¹‹å¤–ï¼Œä¾‹å¦‚ï¼š&lt;a href=&quot;https://github.com/CocoaPods/Xcodeproj&quot;&gt;Xcodeproj&lt;/a&gt; æ‰€æä¾›çš„å‘½ä»¤ä¹Ÿæ˜¯ç”± &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CALide&lt;/code&gt; æ¥å®ç°çš„ã€‚&lt;br /&gt;
&lt;br /&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CALide&lt;/code&gt; è¿˜æä¾›äº†ä¸€å¥—æ’ä»¶åŠ è½½æœºåˆ¶åœ¨å‘½ä»¤æ‰§è¡Œå‰è·å–æ‰€æœ‰æ’ä»¶ä¸­çš„å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cocoapods-packeger&lt;/code&gt; æä¾›çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod package NAME [SOURCE]&lt;/code&gt; å°±æ˜¯ä»å…¶ source code ä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lib/pod/commnad/package.rb&lt;/code&gt; è¯»å–å‡ºæ¥çš„ï¼Œå®ƒä»¤æˆ‘ä»¬ä»…éœ€ä¸€ä»½ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;podspec&lt;/code&gt; ä¿¡æ¯ï¼Œå³å¯å®Œæˆ Cocoa ä¾èµ–åº“çš„ ğŸ“¦ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;dd2009ca&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;calide-çš„ç›®å½•ç»“æ„&quot;&gt;CALide çš„ç›®å½•ç»“æ„&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;å¯¹äº Ruby çš„é¡¹ç›®ç»“æ„ï¼Œåœ¨ Rubygems.org ä¸­æœ‰ &lt;a href=&quot;https://guides.rubygems.org/make-your-own-gem/&quot;&gt;æ–‡ä»¶ç»“æ„æ‰‹å†Œ&lt;/a&gt; è¿™ä¸ªæ ‡å‡†ä¾›å¤§å®¶å‚è€ƒå­¦ä¹ ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;é¦–å…ˆæ¥çœ‹ CALide é¡¹ç›®çš„æ–‡ä»¶å…¥å£ lib/calide.rbï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;CLAide&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;VERSION&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1.0.3'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;freeze&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'claide/ansi'&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'claide/argument'&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'claide/argv'&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'claide/command'&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'claide/help'&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'claide/informative_error'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;æˆ‘ä»¬æ¥ä¸‹æ¥åˆ†æä¸€ä¸‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lib/cladie/&lt;/code&gt; ç›®å½•ä¸‹çš„ç›¸å…³ä»£ç ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;Command&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;command-æŠ½è±¡ç±»&quot;&gt;Command æŠ½è±¡ç±»&lt;/h2&gt;

&lt;p&gt;&lt;br /&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Command&lt;/code&gt; æ˜¯ç”¨äºæ„å»ºå‘½ä»¤è¡Œç•Œé¢çš„åŸºç¡€æŠ½è±¡ç±»ã€‚æ‰€æœ‰æˆ‘ä»¬æ·»åŠ çš„å‘½ä»¤éƒ½éœ€è¦ç»§æ‰¿è‡ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Command&lt;/code&gt;ï¼Œè¿™äº›å­ç±»å¯ä»¥åµŒå¥—ç»„åˆæˆæ›´åŠ ç²¾ç»†çš„å‘½ä»¤ã€‚&lt;br /&gt;
&lt;br /&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod&lt;/code&gt; å‘½ä»¤æ­£æ˜¯ç”±å¤šä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod::Command &amp;lt; CLAide::Command&lt;/code&gt; çš„å­ç±»ç»„åˆè€Œæˆçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abstract command&lt;/code&gt;ã€‚å½“ç„¶ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod&lt;/code&gt; çš„ subcommand åŒæ ·ä¹Ÿèƒ½å£°æ˜ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abstact command&lt;/code&gt;ï¼Œé€šè¿‡è¿™æ ·çš„æ–¹å¼æˆ‘ä»¬å°±èƒ½è¾¾åˆ°å¤šçº§åµŒå¥—å‘½ä»¤çš„æ•ˆæœã€‚æœ‰æŠ½è±¡å‘½ä»¤å½“ç„¶ä¹Ÿéœ€è¦æœ‰å…·ä½“æ‰§è¡Œä»»åŠ¡çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;normal command&lt;/code&gt;ã€‚&lt;br /&gt;
&lt;br /&gt;ä¸¾ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-basic&quot;&gt;$ pod update --help
Usage:
    $ pod update [POD_NAMES ...]
      Updates the Pods identified by the specified `POD_NAMES`

Options:
    --verbose                              Show more debugging information
    --no-ansi                              Show output without ANSI codes
    --help                                 Show help banner of specified command
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;å¯¹åº”çš„ï¼Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod update&lt;/code&gt;Â è¿™ä¸ªå‘½ä»¤çš„é€»è¾‘åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CLAide&lt;/code&gt; ä¸­å°±æ˜¯å¦‚ä¸‹æè¿°ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Pod&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Command&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Update&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Command&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;arguments&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;CLAide&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Argument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'POD_NAMES'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
      
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;description&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;DESC&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
        Updates the Pods identified by the specified `POD_NAMES`.
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;      DESC&lt;/span&gt;
      
      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;options&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;--sources&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'The sources from which to update dependent pods'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'--exclude-pods'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Pods to exclude during update'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'--clean-install'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Ignore the contents of the project cache and force a full pod installation'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;concat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;å½“æˆ‘ä»¬å¦‚æ­¤æè¿°åï¼ŒCLAide ä¼šå¯¹è¿™ä¸ªç±»è¿›è¡Œä»¥ä¸‹æ–¹å¼çš„è§£æï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1599005020049-ddaee5cf-5280-4586-b5ab-0a3587f0d245.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;æ­¤å¤–ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Command&lt;/code&gt; class æä¾›äº†å¤§é‡åŸºç¡€åŠŸèƒ½ï¼Œå…¶ä¸­æœ€æ ¸å¿ƒçš„æ–¹æ³•ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run&lt;/code&gt;ï¼Œä¼šåœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;normal command&lt;/code&gt; å°èŠ‚ä¼šä»‹ç»ã€‚å¯¹äºä»»ä½•å‘½ä»¤ç±»å‹éƒ½å¯ä»¥è®¾ç½®ä»¥ä¸‹å‡ ä¸ªå±æ€§å’Œæ–¹æ³•ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;summary&lt;/strong&gt;: ç”¨äºç®€å•æè¿°è¯¥å‘½ä»¤çš„ä½œç”¨&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;options&lt;/strong&gt;: ç”¨äºè¿”å›è¯¥å‘½ä»¤çš„å¯é€‰é¡¹åŠå¯¹åº”çš„æè¿°ï¼Œè¿”å›çš„ options éœ€è¦é€šè¿‡è°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;super&lt;/code&gt; æ’å…¥åˆ°çˆ¶ç±»çš„å¯é€‰é¡¹å‰&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;initialize&lt;/strong&gt;: å¦‚æœéœ€è¦è·å–å‘½ä»¤è¡Œä¼ é€’çš„å®å‚ï¼Œéœ€è¦é€šè¿‡é‡è½½ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;initialize&lt;/code&gt; æ–¹æ³•æ¥è·å–&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;validate!&lt;/strong&gt;: ç”¨äºæ£€æŸ¥è¾“å…¥å®å‚çš„æœ‰æ•ˆæ€§ï¼Œå¦‚æœæ ¡éªŒå¤±è´¥ï¼Œä¼šé€šè¿‡è°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;help!&lt;/code&gt; æ–¹æ³•æ¥è¾“å‡ºå¸®åŠ©ä¿¡æ¯&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;help!&lt;/strong&gt;ï¼šç”¨äºé”™è¯¯ä¿¡æ¯çš„å¤„ç†å’Œå±•ç¤º&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;æ³¨æ„ âš ï¸ï¼šè¿™é‡Œæˆ‘ä»¬è¯´çš„ &lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abstract command&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;normal command&lt;/code&gt; å‡æ˜¯é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Command&lt;/code&gt; æ¥å®ç°çš„&lt;/strong&gt;ï¼Œåªæ˜¯å®ƒä»¬çš„é…ç½®ä¸åŒã€‚&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;09aadeee&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;abstract-command&quot;&gt;Abstract Command&lt;/h3&gt;

&lt;p&gt;&lt;br /&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abstract command&lt;/code&gt; ä¸ºä¸æä¾›å…·ä½“å‘½ä»¤å®ç°çš„æŠ½è±¡å®¹å™¨å‘½ä»¤ç±»ï¼Œä¸è¿‡å®ƒå¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªçš„ subcommandsã€‚æˆ‘ä»¬å¯ä»¥æŒ‡å®š subcommands ä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;normal command&lt;/code&gt; ä¸ºé»˜è®¤å‘½ä»¤ï¼Œå°±èƒ½å°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abstract command&lt;/code&gt; ä½œä¸ºä½œä¸ºæ™®é€šå‘½ä»¤ç›´æ¥æ‰§è¡Œäº†ã€‚&lt;br /&gt;
&lt;br /&gt;æŠ½è±¡å‘½ä»¤çš„ç°å®æ¯”è¾ƒç®€å•ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;abstract_command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;ä»…éœ€è®¾ç½® &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abstract_command&lt;/code&gt;ï¼Œç„¶åå°±å¯ä»¥ç»§æ‰¿å®ƒæ¥å®ç°æ™®é€šå‘½ä»¤æˆ–è€…å¤šçº§åµŒå¥—çš„æŠ½è±¡å‘½ä»¤ã€‚&lt;br /&gt;
&lt;br /&gt;ä»¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod&lt;/code&gt; å‘½ä»¤çš„å®ç°ä¸ºä¾‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Pod&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;CLAide&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Command&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods/command/install'&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 1&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods/command/update'&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;abstract_command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'pod'&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;ä¸Šè¿°é€šè¿‡ &lt;strong&gt;require&lt;/strong&gt; å¼•å…¥çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;update&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;install&lt;/code&gt; ç­‰å­å‘½ä»¤éƒ½æ˜¯ç»§æ‰¿è‡ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod::Command&lt;/code&gt; çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;normal command&lt;/code&gt;ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1598855030376-84980ad9-7ff0-4c97-bee8-266bc77772e9.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;87eebb65&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;normal-command&quot;&gt;Normal Command&lt;/h3&gt;

&lt;p&gt;&lt;br /&gt;ç›¸å¯¹äºæŠ½è±¡å‘½ä»¤ï¼Œæ™®é€šå‘½ä»¤å°±éœ€è¦è®¾ç½®ä¼ é€’å®å‚çš„åç§°å’Œæè¿°ï¼Œä»¥åŠé‡è½½ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run&lt;/code&gt; æ–¹æ³•ã€‚&lt;br /&gt;
&lt;br /&gt;&lt;strong&gt;Arguments&lt;/strong&gt;&lt;br /&gt;
&lt;br /&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;arguments&lt;/code&gt; ç”¨äºé…ç½®è¯¥å‘½ä»¤æ”¯æŒçš„å‚æ•°åˆ—è¡¨çš„ banner è¾“å‡ºï¼Œç±»å‹ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Array&amp;lt;Argument&amp;gt;]&lt;/code&gt;ï¼Œå®ƒæœ€ç»ˆä¼šæ ¼å¼åŒ–æˆå¯¹åº”çš„ä¿¡æ¯å±•ç¤ºåœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Usage&lt;/code&gt; banner ä¸­ã€‚&lt;br /&gt;
&lt;br /&gt;æˆ‘ä»¬æ¥çœ‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod update&lt;/code&gt; çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;arguments&lt;/code&gt; æ˜¯å¦‚ä½•é…ç½®çš„ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;arguments&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;CLAide&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Argument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'POD_NAMES'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;å…¶ä¸­ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Argument&lt;/code&gt; çš„æ„é€ æ–¹æ³•å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;CLAide&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Argument&lt;/span&gt;
   
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;required&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;repeatable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@names&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@required&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;required&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@repeatable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;repeatable&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;è¿™é‡Œä¼ å…¥çš„ names å°±æ˜¯åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Usage&lt;/code&gt; banner ä¸­è¾“å‡ºçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[POD_NAMES ...]&lt;/code&gt; ã€‚&lt;br /&gt;
&lt;br /&gt;&lt;strong&gt;require&lt;/strong&gt; è¡¨ç¤ºè¯¥ Argument æ˜¯å¦ä¸ºå¿…ä¼ å‚æ•°ï¼Œå¯é€‰å‚æ•°ä¼šç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[ ]&lt;/code&gt; å°†å…¶åŒ…è£¹èµ·æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod update&lt;/code&gt; å‘½ä»¤é»˜è®¤æ˜¯ä¸éœ€è¦ä¼  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;POD_NAMES&lt;/code&gt;&lt;br /&gt;
&lt;br /&gt;&lt;strong&gt;repeatable&lt;/strong&gt; è¡¨ç¤ºè¯¥ Argument æ˜¯å¦å¯ä»¥é‡å¤å¤šæ¬¡å‡ºç°ã€‚å¦‚æœè®¾ç½®ä¸ºå¯é‡å¤ï¼Œé‚£ä¹ˆä¼šåœ¨ names çš„è¾“å‡ºä¿¡æ¯åé¢ä¼šæ·»åŠ  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;...&lt;/code&gt; è¡¨ç¤ºè¯¥å‚æ•°ä¸ºå¤æ•°å‚æ•°ã€‚&lt;br /&gt;
&lt;br /&gt;ä¸¾ä¸ªä¾‹å­ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;pod update Alamofire, SwiftyJSON
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;æˆ‘ä»¬å¯ä»¥æŒ‡å®š &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod update&lt;/code&gt; ä»…æ›´æ–°ç‰¹å®šçš„ä¾èµ–åº“ï¼Œå¦‚æœä¸ä¼  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;POD_NAMES&lt;/code&gt; å°†è¿›è¡Œå…¨é‡æ›´æ–°ã€‚
&lt;a name=&quot;Run&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;run-æ–¹æ³•&quot;&gt;Run æ–¹æ³•&lt;/h3&gt;

&lt;p&gt;&lt;br /&gt;åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Command&lt;/code&gt; ç±»ä¸­å®šä¹‰äº†ä¸¤ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run&lt;/code&gt; æ–¹æ³•ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[])&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# æ ¹æ®æ–‡ä»¶å‰ç¼€æ¥åŒ¹é…å¯¹åº”çš„æ’ä»¶&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;plugin_prefixes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plugin_prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;PluginManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;load_plugins&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plugin_prefix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ARGV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;coerce&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# è§£æ argument ç”Ÿæˆå¯¹åº”çš„ command instance&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; 
  &lt;span class=&quot;no&quot;&gt;ANSI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;disabled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ansi_output?&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;handle_root_options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;validate!&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;rescue&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exception&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;handle_exception&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exception&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'A subclass should override the `CLAide::Command#run` method to '&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'actually perform some work.'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;è¿™é‡Œçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;self.run&lt;/code&gt; æ–¹æ³•æ˜¯ class methodï¼Œè€Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run&lt;/code&gt; æ˜¯ instanced methodã€‚å¯¹äº &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ruby&lt;/code&gt; ä¸å¤ªç†Ÿæ‚‰çš„åŒå­¦å¯ä»¥çœ‹çœ‹è¿™ä¸ªï¼š&lt;a href=&quot;https://stackoverflow.com/questions/13706373/what-does-def-self-function-name-mean&quot;&gt;What does def self.function name mean?&lt;/a&gt;&lt;br /&gt;
&lt;br /&gt;ä½œä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Command&lt;/code&gt; ç±»çš„æ ¸å¿ƒæ–¹æ³•ï¼Œç±»æ–¹æ³• &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;self.run&lt;/code&gt; å°†ç»ˆç«¯ä¼ å…¥çš„å‚æ•°è§£ææˆå¯¹åº”çš„ &lt;strong&gt;command&lt;/strong&gt; å’Œ &lt;strong&gt;argv&lt;/strong&gt;ï¼Œå¹¶æœ€ç»ˆè°ƒç”¨ command çš„å®ä¾‹æ–¹æ³• &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run&lt;/code&gt; æ¥è§¦å‘çœŸæ­£çš„å‘½ä»¤é€»è¾‘ã€‚å› æ­¤ï¼Œå­ç±»éœ€è¦é€šè¿‡é‡è½½ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run&lt;/code&gt; æ–¹æ³•æ¥å®Œæˆå¯¹åº”å‘½ä»¤çš„å®ç°ã€‚&lt;br /&gt;
&lt;br /&gt;é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ–¹æ³• &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Command::parse&lt;/code&gt; æ˜¯å¦‚ä½•å°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run&lt;/code&gt; çš„ç±»æ–¹æ³•è½¬æ¢ä¸ºå®ä¾‹æ–¹æ³•çš„å‘¢ï¼Ÿ&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# é€šè¿‡è§£æ argv è·å–åˆ°ä¸ cmd åç§°&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ARGV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;coerce&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;arguments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;first&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# å¦‚æœ cmd å¯¹åº”çš„ Command ç±»ï¼Œåˆ™æ›´æ–° argvï¼Œç»§ç»­è§£æå‘½ä»¤&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cmd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subcommand&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;find_subcommand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;shift_argument&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;subcommand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# å¦‚æœ cmd ä¸ºæŠ½è±¡å‘½ä»¤ä¸”æŒ‡å®šäº†é»˜è®¤å‘½ä»¤ï¼Œåˆ™è¿”å›é»˜è®¤å‘½ä»¤ç»§ç»­è§£æå‚æ•°&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;abstract_command?&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;default_subcommand&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;load_default_subcommand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# åˆå§‹åŒ–çœŸæ­£çš„ cmd å®ä¾‹&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¯ä»¥è¯´ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CLAide&lt;/code&gt; çš„å‘½ä»¤è§£æå°±æ˜¯ä¸€ä¸ª&lt;strong&gt;å¤šå‰æ ‘éå†&lt;/strong&gt;ï¼Œé€šè¿‡åˆ†å‰²å‚æ•°åŠéå† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CLAide::Command&lt;/code&gt; çš„å­ç±»ï¼Œæœ€ç»ˆæ‰¾åˆ°ç”¨æˆ·è¾“å…¥çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;normal command&lt;/code&gt; å¹¶åˆå§‹åŒ–è¿”å›ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1598855030365-d6ee55d5-df42-4160-af5d-7e06c0c46b36.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªçŸ¥è¯†ç‚¹å°±æ˜¯ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CLAide::Command&lt;/code&gt; æ˜¯å¦‚ä½•çŸ¥é“æœ‰å“ªäº›å­ç±»é›†æˆå®ƒçš„å‘¢ï¼Ÿ&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;inherited&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subcommand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;subcommands&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subcommand&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;&lt;strong&gt;è¿™é‡Œåˆ©ç”¨äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ruby&lt;/code&gt; æä¾›çš„ &lt;em&gt;Hook Method&lt;/em&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;self.inherited&lt;/code&gt; æ¥è·å–å®ƒæ‰€ç»§æ‰¿çš„å­ç±»ï¼Œå¹¶å°†å…¶ä¿å­˜åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;subcommands&lt;/code&gt;ã€‚&lt;/strong&gt;&lt;br /&gt;
&lt;br /&gt;å¦å¤–ï¼Œè¿™é‡Œåœ¨çœŸæ­£æ‰§è¡Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;self.run&lt;/code&gt; æ–¹æ³•ä¹‹å‰ä¼šéå†å½“å‰é¡¹ç›®æ‰€å¼•å…¥çš„ Gems åŒ…ä¸­çš„æŒ‡å®šç›®å½•ä¸‹çš„å‘½ä»¤æ’ä»¶æ–‡ä»¶ï¼Œå¹¶è¿›è¡Œæ’ä»¶åŠ è½½ï¼Œå…·ä½“å†…å®¹å°†åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PluginManager&lt;/code&gt; ä¸­å±•å¼€ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;ARGV&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;argv-ä¼ å…¥å‚æ•°&quot;&gt;ARGV ä¼ å…¥å‚æ•°&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CLAide&lt;/code&gt; æä¾›äº†ä¸“é—¨çš„ç±» &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ARGV&lt;/code&gt; ç”¨äºè§£æå‘½ä»¤è¡Œä¼ å…¥çš„å‚æ•°ã€‚ä¸»è¦åŠŸèƒ½æ˜¯å¯¹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Parse&lt;/code&gt; è§£æåçš„ tuple åˆ—è¡¨è¿›è¡Œå„ç§è¿‡æ»¤ã€CURD ç­‰æ“ä½œã€‚&lt;br /&gt;
&lt;br /&gt;æŒ‰ç…§ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CALide&lt;/code&gt; çš„å®šä¹‰å‚æ•°åˆ†ä¸‰ç§ç±»å‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;arg&lt;/code&gt;: æ™®é€šçš„å®å‚ï¼Œæ‰€è°“çš„å®å‚å°±æ˜¯ç›´æ¥è·Ÿåœ¨å‘½ä»¤åé¢çš„ï¼Œä¸”ä¸å¸¦ä»»ä½• &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--&lt;/code&gt; ä¿®é¥°çš„å­—ç¬¦&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;flag&lt;/code&gt;: ç®€å•ç†è§£ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;flag&lt;/code&gt; å°±æ˜¯é™å®šä¸º bool å˜é‡çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;option&lt;/code&gt; ç±»å‹å‚æ•°ï¼Œå¦‚æœ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;flag&lt;/code&gt; å‰é¢æ·»åŠ å¸¦ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--no-&lt;/code&gt; åˆ™å€¼ä¸º falseï¼Œå¦åˆ™ä¸º true&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;option&lt;/code&gt;: å¯é€‰é¡¹å‚æ•°ï¼Œä»¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--&lt;/code&gt; ä¸ºå‰ç¼€ä¸”ä»¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;=&lt;/code&gt; ä½œä¸ºåˆ†å‰²ç¬¦æ¥åŒºåˆ† key å’Œ value&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;è€Œåœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ARGV&lt;/code&gt; å†…éƒ¨åˆæä¾›äº†ç§æœ‰å·¥å…·ç±» &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Parser&lt;/code&gt; æ¥è§£æç»ˆç«¯çš„è¾“å…¥ï¼Œå…¶æ ¸å¿ƒæ–¹æ³•ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;parse&lt;/code&gt;:&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Parser&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:to_s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;double_dash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argument&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;shift&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;next&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;double_dash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;double_dash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argument&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'--'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;double_dash&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:arg&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argument_type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;parsed_argument&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parse_argument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parsed_argument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ,,,&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;parse çš„è¿”å›å€¼ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[Array&amp;lt;Array&amp;lt;Symbol, String, Array&amp;gt;&amp;gt;]&lt;/code&gt; ç±»å‹çš„ tupleï¼Œå…¶ä¸­ tuple çš„ç¬¬ä¸€ä¸ªå˜é‡ä¸ºå®å‚çš„ç±»å‹ï¼Œç¬¬äºŒä¸ªæ‰æ˜¯å¯¹åº”çš„å®å‚ã€‚&lt;br /&gt;
&lt;br /&gt;ä¾æ—§ä»¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod update&lt;/code&gt; ä¸ºä¾‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pod update Alamofire &lt;span class=&quot;nt&quot;&gt;--no-repo-update&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--exclude-pods&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;SwiftyJSON
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1598855030381-29d93c99-1c6c-4a40-8bf7-a40eee4140a7.jpeg&quot; alt=&quot;&quot; /&gt;
&lt;br /&gt;è§£æåï¼Œè¾“å‡ºçš„ tuple åˆ—è¡¨å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:arg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Alamofire&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:flag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;repo-update&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]],&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:option&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;exclude-pods&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;SwiftyJSON&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a name=&quot;Banner&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;banner-ä¸è¾“å‡ºæ ¼å¼åŒ–&quot;&gt;Banner ä¸è¾“å‡ºæ ¼å¼åŒ–&lt;/h2&gt;

&lt;p&gt;&lt;br /&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥èŠèŠ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CLAide&lt;/code&gt; æä¾›çš„æ ¼å¼åŒ–æ•ˆæœçš„ bannerã€‚&lt;br /&gt;
&lt;br /&gt;é‚£ä»€ä¹ˆæ˜¯ banner å‘¢ï¼Ÿå›çœ‹ç¬¬ä¸€ä¸ªä¾‹å­ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod --help&lt;/code&gt; æ‰€è¾“å‡ºçš„å¸®åŠ©ä¿¡æ¯ï¼Œå®ƒåˆ†ä¸ºä¸‰ä¸ª Sectionï¼š&lt;br /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Usage&lt;/code&gt;ï¼šç”¨äºæè¯¥è¿°å‘½ä»¤çš„ç”¨æ³•&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Commands&lt;/code&gt;ï¼šç”¨äºæè¿°è¯¥å‘½ä»¤æ‰€åŒ…å«çš„å­å‘½ä»¤ï¼Œæ²¡æœ‰åˆ™ä¸æ˜¾ç¤ºã€‚åœ¨å­å‘½ä»¤å‰é¢å­˜åœ¨ä¸¤ç§ç±»å‹çš„æ ‡è¯†
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;+&lt;/code&gt; ï¼šç”¨äºå¼ºè°ƒè¯¥ command æ˜¯å•ç‹¬æ·»åŠ çš„å­å‘½ä»¤&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;gt;&lt;/code&gt; ï¼šç”¨äºè¡¨ç¤ºæŒ‡å¼•çš„æ„æ€ï¼Œè¡¨ç¤ºè¯¥ command æ˜¯å½“å‰å‘½ä»¤çš„é»˜è®¤å®ç°&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Options&lt;/code&gt;ï¼šç”¨äºæè¿°è¯¥å‘½ä»¤çš„å¯é€‰é¡¹&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;strong&gt;è¿™ä¸‰æ®µå¸®åŠ©ä¿¡æ¯å°±æ˜¯å¯¹åº”çš„ä¸åŒçš„ bannerã€‚&lt;/strong&gt;&lt;br /&gt;
&lt;br /&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CLAide&lt;/code&gt; å¯¹äºè¾“å‡ºçš„ banner ä¿¡æ¯æä¾›äº† &lt;a href=&quot;https://www.wikiwand.com/en/ANSI_escape_code&quot;&gt;ANSI è½¬ä¹‰&lt;/a&gt;ï¼Œç”¨äºåœ¨ä¸åŒçš„ç»ˆç«¯é‡Œæ˜¾ç¤ºå¯Œæ–‡æœ¬çš„æ•ˆæœã€‚banner çš„ä¸»è¦æ ¼å¼åŒ–æ•ˆæœå¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;å¯¹äº setcion æ ‡é¢˜ï¼š &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Usage&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Commands&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Options&lt;/code&gt; æ·»åŠ äº†ä¸‹åˆ’çº¿ä¸”åŠ ç²—å¤„ç†&lt;/li&gt;
  &lt;li&gt;Command é…ç½®ä¸ºç»¿è‰²&lt;/li&gt;
  &lt;li&gt;Options é…ç½®ä¸ºè“è‰²&lt;/li&gt;
  &lt;li&gt;æç¤ºè­¦å‘Šä¿¡æ¯é…ç½®ä¸ºé»„è‰²&lt;/li&gt;
  &lt;li&gt;é”™è¯¯ä¿¡æ¯åˆ™æ˜¯çº¢è‰²&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;å¯¹äºè¿™äº›é…è‰²æ–¹æ¡ˆï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CLAide&lt;/code&gt; æä¾›äº† String çš„ convince method æ¥å®Œæˆ ANSI è½¬ä¹‰ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ansi&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;CLAide&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ANSI&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;StringEscaper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;ä¾‹å¦‚ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s2&quot;&gt;&quot;example&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ansi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;yellow&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#=&amp;gt; &quot;\e[33mexample\e[39m&quot;&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;&quot;example&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ansi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on_red&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#=&amp;gt; &quot;\e[41mexample\e[49m&quot;&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;&quot;example&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ansi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;bold&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;#=&amp;gt; &quot;\e[1mexample\e[21m&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;å¯¹äº Banner çš„ä¸€äº›é«˜äº®æ•ˆæœä¹Ÿæä¾›äº† convince methodï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;prettify_title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ansi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;underline&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;prettify_subcommand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;chomp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ansi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;green&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;prettify_option_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;chomp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ansi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;blue&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a name=&quot;PluginManager&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;pluginmanager-è½½å…¥æ’ä»¶&quot;&gt;PluginManager è½½å…¥æ’ä»¶&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PluginManager&lt;/code&gt; æ˜¯ Command çš„ç®¡ç†ç±»ï¼Œä¼šåœ¨ç¬¬ä¸€æ¬¡è¿è¡Œå‘½ä»¤ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;self.run&lt;/code&gt; æ—¶è¿›è¡ŒåŠ è½½ï¼Œä¸”ä»…åŠ è½½å‘½ä»¤ç±»ä¸­æŒ‡å®šå‰ç¼€æ ‡è¯†çš„æ–‡ä»¶ä¸‹çš„å‘½ä»¤ã€‚è®©æˆ‘ä»¬å…ˆçœ‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PluginManager.rb&lt;/code&gt; çš„æ ¸å¿ƒå®ç°ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;load_plugins&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plugin_prefix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;loaded_plugins&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plugin_prefix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;plugin_gems_for_prefix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plugin_prefix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;paths&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;safe_activate_and_require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;paths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compact&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;plugin_gems_for_prefix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prefix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;glob&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prefix&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;_plugin&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Gem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;suffix_pattern&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;Gem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Specification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;latest_specs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;matches&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;matches_for_glob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;glob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;matches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;matches&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;empty?&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compact&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;safe_activate_and_require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;paths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;activate&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;paths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;rescue&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exception&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;æ•´ä½“çš„æµç¨‹å¤§è‡´æ˜¯ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;è°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load_plugins&lt;/code&gt; å¹¶ä¼ å…¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plugin_prefix&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plugin_gems_for_prefix&lt;/code&gt; å¯¹æ’ä»¶åè¿›è¡Œå¤„ç†ï¼Œå–å‡ºæˆ‘ä»¬éœ€è¦åŠ è½½çš„æ–‡ä»¶&lt;/li&gt;
  &lt;li&gt;è°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;safe_activate_and_require&lt;/code&gt; è¿›è¡Œå¯¹åº”çš„ gem spec æ£€éªŒå¹¶å¯¹æ¯ä¸ªæ–‡ä»¶è¿›è¡ŒåŠ è½½&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br /&gt;CocoaPods çš„æ’ä»¶åŠ è½½æ­£æ˜¯ä¾æ‰˜äº CLAide çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load_plugins&lt;/code&gt;ï¼Œå®ƒä¼šéå†æ‰€æœ‰çš„ RubyGemï¼Œå¹¶æœç´¢è¿™äº› Gem ä¸­æ˜¯å¦åŒ…å«åä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#{plugin_prefix}_plugin.rb&lt;/code&gt; çš„æ–‡ä»¶ã€‚&lt;br /&gt;ä¾‹å¦‚ï¼Œåœ¨ Pod å‘½ä»¤çš„å®ç°ä¸­æœ‰å¦‚ä¸‹é…ç½®ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;plugin_prefixes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;%w(claide cocoapods)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;ä¹Ÿå°±æ˜¯è¯´åœ¨ Pod å‘½ä»¤æ‰§è¡Œå‰ï¼Œ&lt;strong&gt;å®ƒä¼šåŠ è½½æ‰€æœ‰åŒ…å« &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;claide_plugin.rb&lt;/code&gt; æˆ– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cocoapods_plugin.rb&lt;/code&gt; æ–‡ä»¶çš„ Gem&lt;/strong&gt;ã€‚é€šè¿‡åœ¨è¿è¡Œæ—¶çš„æ–‡ä»¶æ£€æŸ¥æ¥åŠ è½½ç¬¦åˆè¦æ±‚çš„ç›¸å…³å‘½ä»¤ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1599006816575-464e442d-5b43-475f-bc5f-4b086c59190c.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;a77fbc1d&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;ç”¨-claide-å®ç°ä¸€æ¬¾--è´©å–æœº&quot;&gt;ç”¨ CLAide å®ç°ä¸€æ¬¾ ğŸ¥¤ è´©å–æœº&lt;/h1&gt;
&lt;p&gt;æœ€åä¸€èŠ‚è®©æˆ‘ä»¬ä¸€èµ·æ¥åˆ›å»ºä¸€ä¸ª CLAide å‘½ä»¤ã€‚éœ€æ±‚æ˜¯å¸Œæœ›å®ç°ä¸€ä¸ªè‡ªåŠ¨ ğŸ¥¤ è´©å–æœºï¼Œå®ƒæœ‰å¦‚ä¸‹åŠŸèƒ½ï¼š&lt;br /&gt;ä¸»è¦å”®å– â˜•ï¸ å’Œ ğŸµï¼Œè¿™ä¸¤ç§ ğŸ¥¤ éƒ½å¯ä»¥æŒ‰éœ€é€‰æ‹©æ˜¯å¦æ·»åŠ  ğŸ¥› å’Œ ğŸ¬ï¼Œå¯¹äº ğŸ¬ è¿˜å¯ä»¥é€‰æ‹©ä¸åŒçš„ç”œåº¦ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;â˜•ï¸ï¼šå¯¹äºå’–å•¡ï¼Œæˆ‘ä»¬æä¾›äº†ï¼šBlackEyeã€Affogatoã€CaPheSuaDaã€RedTux çš„å£å‘³&lt;/li&gt;
  &lt;li&gt;ğŸµï¼šå¯¹äºèŒ¶ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸åŒçš„å“ç§ï¼Œæœ‰é»‘èŒ¶ã€ç»¿èŒ¶ã€ä¹Œé¾™èŒ¶å’Œç™½èŒ¶ï¼ŒåŒæ—¶èŒ¶è¿˜æä¾›äº†åŠ  ğŸ§Š çš„é€‰é¡¹&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a name=&quot;5353b1ef&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;é…ç½®æ¨¡ç‰ˆé¡¹ç›®&quot;&gt;é…ç½®æ¨¡ç‰ˆé¡¹ç›®&lt;/h2&gt;

&lt;p&gt;&lt;br /&gt;åŸºäºä¸Šè¿°æ„æƒ³ï¼Œæˆ‘ä»¬æœ€ç»ˆçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;BeverageMaker&lt;/code&gt; ç›®å½•å°†ç”±ä»¥ä¸‹æ–‡ä»¶ç»„æˆï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
â”œâ”€â”€ BeverageMaker.gemspec
â”‚   &lt;span class=&quot;c&quot;&gt;# ...&lt;/span&gt;
â”œâ”€â”€ exe
â”‚Â Â  â””â”€â”€ beverage-maker
â”œâ”€â”€ lib
â”‚Â Â  â”œâ”€â”€ beveragemaker
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ &lt;span class=&quot;nb&quot;&gt;command&lt;/span&gt;
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ coffee.rb &lt;span class=&quot;c&quot;&gt;# åŒ…å« abstract command ä»¥åŠç”¨äºåˆ¶ä½œä¸åŒå’–å•¡çš„ normal command&lt;/span&gt;
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ maker.rb  &lt;span class=&quot;c&quot;&gt;# Command æŠ½è±¡ç±»&lt;/span&gt;
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ tea.rb    &lt;span class=&quot;c&quot;&gt;# normal command, ä¸åŒç§ç±»çš„ ğŸµ é€šè¿‡å‚æ•°é…ç½®æ¥å®Œæˆ&lt;/span&gt;
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ command.rb
â”‚Â Â  â”‚Â Â  â””â”€â”€ version.rb
â”‚Â Â  â””â”€â”€ beveragemaker.rb
â””â”€â”€ spec
    â”œâ”€â”€ BeverageMaker_spec.rb
    â””â”€â”€ spec_helper.rb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a name=&quot;24196b8c&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;0x1-ç”Ÿæˆæ¨¡ç‰ˆé¡¹ç›®&quot;&gt;0x1 ç”Ÿæˆæ¨¡ç‰ˆé¡¹ç›®&lt;/h3&gt;

&lt;p&gt;&lt;br /&gt;é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundler gem GEM_NAME&lt;/code&gt; å‘½ä»¤ç”Ÿæˆä¸€ä¸ªæ¨¡ç‰ˆé¡¹ç›®ï¼Œé¡¹ç›®å–åä¸º &lt;strong&gt;BeverageMaker&lt;/strong&gt;ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bundle&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;BeverageMaker&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Creating&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'BeverageMaker'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;MIT&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;License&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;enabled&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Code&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;conduct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;enabled&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;create&lt;/span&gt;  &lt;span class=&quot;no&quot;&gt;BeverageMaker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Gemfile&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;create&lt;/span&gt;  &lt;span class=&quot;no&quot;&gt;BeverageMaker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;BeverageMaker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rb&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;create&lt;/span&gt;  &lt;span class=&quot;no&quot;&gt;BeverageMaker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lib&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;BeverageMaker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rb&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;create&lt;/span&gt;  &lt;span class=&quot;no&quot;&gt;BeverageMaker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;BeverageMaker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;gemspec&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;create&lt;/span&gt;  &lt;span class=&quot;no&quot;&gt;BeverageMaker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Rakefile&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Initializing&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;repo&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/$HOME/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Desktop&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;BeverageMaker&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'BeverageMaker'&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;was&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;successfully&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;created&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;For&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;more&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;information&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;making&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;RubyGem&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;visit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;https&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:/&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bundler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;io&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;guides&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;creating_gem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;html&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a name=&quot;5b8f4f8b&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;0x2-ä¿®æ”¹-gemspec-é…ç½®&quot;&gt;0x2 ä¿®æ”¹ gemspec é…ç½®&lt;/h3&gt;

&lt;p&gt;&lt;br /&gt;ç”Ÿæˆçš„é¡¹ç›®ä¸­éœ€è¦å°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;BeverageMaker.gemspec&lt;/code&gt; æ–‡ä»¶æ‰€åŒ…å« &lt;strong&gt;TODO&lt;/strong&gt; çš„å­—æ®µè¿›è¡Œæ›¿æ¢ï¼Œä½œä¸ºç¤ºä¾‹é¡¹ç›®ç›¸å…³é“¾æ¥éƒ½æ›¿æ¢ä¸ºä¸ªäººä¸»é¡µäº† ğŸ˜‚ã€‚&lt;br /&gt;
&lt;br /&gt;å¦å¤–ï¼Œéœ€è¦æ·»åŠ æˆ‘ä»¬çš„ä¾èµ– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;'claide', '&amp;gt;= 1.0.2', '&amp;lt; 2.0'&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;'colored2', '~&amp;gt; 3.1'&lt;/code&gt;ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;colored2&lt;/strong&gt; ç”¨äº banner ä¿¡æ¯çš„ ANSI è½¬ä¹‰å¹¶ä½¿å…¶èƒ½åœ¨ç»ˆç«¯ä»¥å¯Œæ–‡æœ¬æ ¼å¼è¾“å‡ºã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;æœ€ç»ˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.gempsc&lt;/code&gt; é…ç½®å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;require_relative&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'lib/BeverageMaker/version'&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Gem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Specification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;          &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;BeverageMaker&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;version&lt;/span&gt;       &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;BeverageMaker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;VERSION&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;authors&lt;/span&gt;       &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Edmond&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;email&lt;/span&gt;         &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;chun574271939@gmail.com&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;summary&lt;/span&gt;       &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;BeverageMaker&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;description&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;BeverageMaker&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;homepage&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;https://looseyi.github.io&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;license&lt;/span&gt;       &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;MIT&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;required_ruby_version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Gem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Requirement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&amp;gt;= 2.3.0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;allowed_push_host&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;https://looseyi.github.io&quot;&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;homepage_uri&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;homepage&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;source_code_uri&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;https://looseyi.github.io&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;changelog_uri&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;https://looseyi.github.io&quot;&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;files&lt;/span&gt;         &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;chdir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;expand_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'..'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;__FILE__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;sb&quot;&gt;`git ls-files -z`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\x0&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;reject&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;%r{^(test|spec|features)/}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# 1&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;bindir&lt;/span&gt;        &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;exe&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;executables&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;beverage-maker&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;require_paths&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;lib&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
   
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;add_runtime_dependency&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'claide'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;         &lt;span class=&quot;s1&quot;&gt;'&amp;gt;= 1.0.2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'&amp;lt; 2.0'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;add_runtime_dependency&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'colored2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;       &lt;span class=&quot;s1&quot;&gt;'~&amp;gt; 3.1'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a name=&quot;ea906b09&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;0x3-æ·»åŠ å‘½ä»¤è¡Œå…¥å£&quot;&gt;0x3 æ·»åŠ å‘½ä»¤è¡Œå…¥å£&lt;/h3&gt;

&lt;p&gt;&lt;br /&gt;é€šè¿‡ä¿®æ”¹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.gemspec&lt;/code&gt; çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bindir&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;executables&lt;/code&gt; å­—æ®µï¼ŒæŠŠæœ€ç»ˆçš„ binary æ‰§è¡Œæ–‡ä»¶æš´éœ²ç»™ç”¨æˆ·ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªçœŸæ­£çš„ CLIï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;bindir&lt;/span&gt;        &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;exe&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;executables&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;beverage-maker&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;åœ¨é»˜è®¤ç”Ÿæˆçš„æ¨¡ç‰ˆä¸­æŒ‡å®šçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bindir&lt;/code&gt; ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/bin&lt;/code&gt; ç›®å½•ï¼Œè¿™é‡Œæˆ‘ä»¬æ›¿æ¢ä¸ºæ–°å»ºçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;exe&lt;/code&gt; ç›®å½•ï¼Œå¹¶åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;exe&lt;/code&gt; ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;beverage-maker&lt;/code&gt; çš„æ–‡ä»¶ï¼Œå®ƒå°†ä½œä¸º CLI çš„å…¥å£ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#!/usr/bin/env ruby&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'beveragemaker'&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;BeverageMaker&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ARGV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a name=&quot;ff7af885&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;æ·»åŠ å‘½ä»¤å®ç°&quot;&gt;æ·»åŠ å‘½ä»¤å®ç°&lt;/h2&gt;

&lt;p&gt;&lt;br /&gt;ä¸ºäº†è®© Demo ç»“æ„æ¸…æ™°ï¼Œæˆ‘ä»¬å°†ä¸èƒ½ç±»å‹çš„é¥®æ–™åˆ¶ä½œåˆ†åˆ°äº†ä¸åŒçš„æ–‡ä»¶å’Œå‘½ä»¤ç±»ä¸­ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1598855030357-6c577c34-8687-4aa3-b495-876a2a6e4ecb.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;BeverageMaker&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;beveragemaker&quot;&gt;BeverageMaker&lt;/h3&gt;

&lt;p&gt;&lt;br /&gt;å…ˆæ¥å®ç° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;beverage-maker&lt;/code&gt; å‘½ä»¤ï¼Œå®ƒæ˜¯ä¸€ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abstract command&lt;/code&gt;ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'claide'&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'colored2'&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;BeverageMaker&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# å¼•å…¥å…·ä½“çš„ coffee &amp;amp; tea maker&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'beveragemaker/command/coffee'&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'beveragemaker/command/tea'&lt;/span&gt;
  
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;CLAide&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Command&lt;/span&gt;

    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'beverage-maker'&lt;/span&gt;  
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;abstract_command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;   
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;description&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Make delicious beverages from the comfort of your terminal.'&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;options&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'--no-milk'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Donâ€™t add milk to the beverage'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'--sweetener=[sugar|honey]'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Use one of the available sweeteners'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;concat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@add_milk&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;flag?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'milk'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@sweetener&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;option&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'sweetener'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;validate!&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@sweetener&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;sx&quot;&gt;%w(sugar honey)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;include?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@sweetener&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;help!&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;`&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@sweetener&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;' is not a valid sweetener.&quot;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'* Boiling waterâ€¦'&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;sleep&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@add_milk&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'* Adding milkâ€¦'&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;sleep&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@sweetener&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;* Adding &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@sweetener&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;â€¦&quot;&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;sleep&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;æ­£å¸¸æ¥è¯´ï¼Œå¯¹äºä¸åŒå£å‘³çš„å’–å•¡å’ŒèŒ¶æ˜¯å¯ä»¥ç”¨ç›¸åŒçš„å‘½ä»¤æ¨¡å¼æ¥å®ç°çš„ï¼Œä¸è¿‡ä¸ºäº†æ›´å¥½çš„å±•ç¤º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CLAide&lt;/code&gt; çš„æ•ˆæœï¼Œæˆ‘ä»¬å°†å’–å•¡çš„ç”Ÿäº§é…ç½®ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;abstact command&lt;/code&gt;ï¼Œå¯¹äºä¸åŒå£å‘³çš„å’–å•¡ï¼Œéœ€è¦å®ç°ä¸åŒçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;normal command&lt;/code&gt;ã€‚è€ŒèŒ¶çš„ç”Ÿäº§ç›´æ¥é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;normal command&lt;/code&gt; å®ç°ï¼Œä¸åŒå“ç§çš„èŒ¶å¶ä¼šä»¥å‚æ•°çš„å½¢å¼æ¥é…ç½®ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;Coffee&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;coffee&quot;&gt;Coffee&lt;/h3&gt;

&lt;p&gt;&lt;br /&gt;æ¥ç€æ·»åŠ  â˜•ï¸ çš„ä»£ç &lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Coffee&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Command&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;abstract_command&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;* Grinding &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; beansâ€¦&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;sleep&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'* Brewing coffeeâ€¦'&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;sleep&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'* Enjoy!'&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BlackEye&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Coffee&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;summary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'A Black Eye is dripped coffee with a double shot of '&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'espresso'&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a name=&quot;Tea&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;tea&quot;&gt;Tea&lt;/h3&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Tea&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Command&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;arguments&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;CLAide&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Argument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'FLAVOR'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;options&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'--iced'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'the ice-tea version'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;concat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@flavor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;shift_argument&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@iced&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;flag?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'iced'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;validate!&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@flavor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;nil?&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;help!&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'A flavor argument is required.'&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;%w(black green oolong white)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;include?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@flavor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;help!&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;`&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@flavor&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;' is not a valid flavor.&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a name=&quot;789ac0b0&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;å®‰è£…--è´©å–æœº&quot;&gt;å®‰è£… ğŸ¥¤ è´©å–æœº&lt;/h2&gt;

&lt;p&gt;&lt;br /&gt;æˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºæ­£å¸¸å‘å¸ƒçš„ gem åŒ…ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gem install GEM_NAME&lt;/code&gt; å®‰è£…ã€‚&lt;br /&gt;
&lt;br /&gt;è€Œæˆ‘ä»¬çš„ Demo ç¨‹åºå¹¶æœªå‘å¸ƒï¼Œé‚£è¦å¦‚ä½•å®‰è£…ä½¿ç”¨å‘¢ï¼Ÿå¹¸å¥½ Gem æä¾›äº†æºç å®‰è£…çš„æ–¹å¼ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gem build &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.gemspec
gem &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.gem
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gem build&lt;/code&gt; å¯ä»¥æ ¹æ®ä¸€ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.gemspec&lt;/code&gt; ç”Ÿæˆä¸€ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.gem&lt;/code&gt; æ–‡ä»¶ä¾› gem å®‰è£…ï¼Œæ‰€ä»¥åœ¨æ‹¥æœ‰æºç çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œä¸Šé¢å‘½ä»¤å°±å¯ä»¥å®‰è£…äº†ã€‚&lt;br /&gt;
&lt;br /&gt;æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gem build &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.gemspec
WARNING:  description and summary are identical
WARNING:  See http://guides.rubygems.org/specification-reference/ &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;help
  &lt;/span&gt;Successfully built RubyGem
  Name: BeverageMaker
  Version: 0.1.0
  File: BeverageMaker-0.1.0.gem
  
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gem &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.gem

Successfully installed BeverageMaker-0.1.0
Parsing documentation &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;BeverageMaker-0.1.0
Done installing documentation &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;BeverageMaker after 0 seconds
1 gem installed
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;ç¼–è¯‘é€šè¿‡ï¼&lt;br /&gt;
&lt;br /&gt;ç°åœ¨å¯ä»¥å¼€å§‹æˆ‘ä»¬çš„ ğŸ¥¤ åˆ¶ä½œå•¦ï¼&lt;/p&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;beverage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;maker&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Usage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;

    &lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;beverage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;maker&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;COMMAND&lt;/span&gt;

      &lt;span class=&quot;no&quot;&gt;Make&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;delicious&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;beverages&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;comfort&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;yourterminal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Commands&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;

    &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coffee&lt;/span&gt;                    &lt;span class=&quot;no&quot;&gt;Drink&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;brewed&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;roasted&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coffee&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;beans&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;

    &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;no&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;milk&lt;/span&gt;                   &lt;span class=&quot;no&quot;&gt;Don&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;â€™&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;milk&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;beverage&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sweetener&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sugar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;honey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;   &lt;span class=&quot;no&quot;&gt;Use&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;one&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;available&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sweeteners&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;                   &lt;span class=&quot;no&quot;&gt;Show&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tool&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;verbose&lt;/span&gt;                   &lt;span class=&quot;no&quot;&gt;Show&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;more&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;debugging&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;information&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;no&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ansi&lt;/span&gt;                   &lt;span class=&quot;no&quot;&gt;Show&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;output&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;without&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ANSI&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;codes&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;help&lt;/span&gt;                      &lt;span class=&quot;no&quot;&gt;Show&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;help&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;banner&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;specified&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;æ¥ä¸€æ¯ black-eye â˜•ï¸ï¼Œä¼‘æ¯ä¸€ä¸‹å§!&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;beverage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;maker&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coffee&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;black&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;eye&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Boiling&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;water&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;â€¦&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Adding&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;milk&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;â€¦&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Grinding&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;black&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;eye&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;beans&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;â€¦&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Brewing&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;coffee&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;â€¦&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Enjoy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;å¦‚éœ€æœ¬æ–‡çš„ Demo ä»£ç ï¼Œè¯·è®¿é—®ï¼š&lt;a href=&quot;https://github.com/looseyi/BeverageMaker&quot;&gt;https://github.com/looseyi/BeverageMaker&lt;/a&gt;
&lt;a name=&quot;25f9c7fa&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h1&gt;

&lt;p&gt;&lt;br /&gt;æœ¬æ–‡ç®€å•èŠäº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CLAide&lt;/code&gt; çš„å®ç°ï¼Œå¹¶æ‰‹åŠ¨åˆ¶ä½œäº†ä¸€æ¬¾ ğŸ¥¤ è´©å–æœºæ¥å±•ç¤º CALide çš„å‘½ä»¤é…ç½®ã€‚ä¸»è¦æ„Ÿå—å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;é€šè¿‡å¯¹æºç å¯¹é˜…è¯»ï¼Œç»ˆäºäº†è§£äº†å¯¹ Â &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod&lt;/code&gt; å‘½ä»¤çš„çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿&lt;/li&gt;
  &lt;li&gt;ä»…éœ€ç®€å•é…ç½® &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Command&lt;/code&gt; bannerï¼Œå°±èƒ½æœ‰æ¯”è¾ƒç²¾ç¾çš„ç»ˆç«¯è¾“å‡ºæ•ˆæœå’Œå¸®åŠ©æç¤ºç­‰&lt;/li&gt;
  &lt;li&gt;æä¾›çš„æŠ½è±¡å‘½ä»¤åŠŸèƒ½ï¼Œæ–¹ä¾¿çš„å°†ç›¸å…³é€»è¾‘æ”¶å£åˆ°ç»Ÿä¸€åˆ°å‘½ä»¤ä¸­ï¼Œæ–¹ä¾¿æŸ¥é˜…&lt;/li&gt;
  &lt;li&gt;ä»ä¾§é¢ç®€å•äº†è§£äº†ï¼Œå¦‚ä½•åœ¨ç»ˆç«¯è¾“å‡ºå¸¦å¯Œæ–‡æœ¬æ•ˆæœçš„æç¤ºä¿¡æ¯&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;a name=&quot;c6813027&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†&quot;&gt;çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†&lt;/h1&gt;

&lt;p&gt;&lt;br /&gt;è¿™é‡Œç½—åˆ—äº†å››ä¸ªé—®é¢˜ç”¨æ¥è€ƒå¯Ÿä½ æ˜¯å¦å·²ç»æŒæ¡äº†è¿™ç¯‡æ–‡ç« ï¼Œå¦‚æœæ²¡æœ‰å»ºè®®ä½ åŠ å…¥**æ”¶è— **å†æ¬¡é˜…è¯»ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CLAide&lt;/code&gt; é¢„è®¾çš„ banner æœ‰å“ªäº›ï¼Œå…¶ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆ ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CALide&lt;/code&gt; ä¸­è®¾å®šçš„ Argument æœ‰å‡ ç§ç±»å‹ï¼ŒåŒºåˆ«æ˜¯ä»€ä¹ˆ ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CALide&lt;/code&gt; ä¸­æŠ½è±¡å‘½ä»¤çš„å’Œæ™®é€šå‘½ä»¤çš„åŒºåˆ« ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;è¦å®ç° CLI éœ€è¦ä¿®æ”¹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.gemspec&lt;/code&gt; ä¸­çš„å“ªäº›é…ç½® ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;</content><author><name>å†¬ç“œ</name><email>gua@desgard.com</email></author><category term="CocoaPods å†é™©è®°" /><category term="Ruby" /><summary type="html">å¼•å­ åœ¨ä¸Šæ–‡ æ•´ä½“æŠŠæ¡ CocoaPods æ ¸å¿ƒç»„ä»¶ ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å¯¹ pod install çš„æµç¨‹çš„ä»‹ç»ï¼Œå¼•å‡º CocoaPods çš„å„ä¸ªæ ¸å¿ƒç»„ä»¶çš„è§’è‰²åˆ†å·¥å’Œå…¶ä¸»è¦ä½œç”¨ï¼Œå¸Œæœ›é€šè¿‡å¯¹è¿™äº›ç»„ä»¶çš„ä½¿ç”¨å’Œä»‹ç»æ¥å¸®åŠ©å¤§å®¶æ›´å¥½çš„äº†è§£ CocoaPods çš„å®Œæ•´å·¥ä½œæµä»¥åŠèƒŒåçš„åŸç†ã€‚ ä»Šå¤©æˆ‘ä»¬ä¸»è¦èŠä¸€èŠä¸º CocoaPods æä¾›çš„å‘½ä»¤è¡Œè§£æçš„å·¥å…· CLAideï¼Œå®ƒæ˜¯å¦‚ä½•æ¥è§£æ Pod å‘½ä»¤ä»¥åŠ CocoaPods çš„æ’ä»¶æœºåˆ¶ã€‚ Open Class å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä¸ª Ruby çš„è¯­è¨€ç‰¹æ€§ï¼šOpen Classes åœ¨ Ruby ä¸­ï¼Œç±»æ°¸è¿œæ˜¯å¼€æ”¾çš„ï¼Œä½ æ€»æ˜¯å¯ä»¥å°†æ–°çš„æ–¹æ³•åŠ å…¥åˆ°å·²æœ‰çš„ç±»ä¸­ï¼Œé™¤äº†åœ¨ä½ è‡ªå·±çš„ä»£ç ä¸­ï¼Œè¿˜å¯ä»¥ç”¨åœ¨æ ‡å‡†åº“å’Œå†…ç½®ç±»ä¸­ï¼Œè¿™ä¸ªç‰¹æ€§è¢«ç§°ä¸º Open Classesã€‚è¯´åˆ°è¿™é‡Œä½œä¸º iOS å·¥ç¨‹å¸ˆï¼Œè„‘ä¸­åŸºæœ¬èƒ½é—ªç°å‡º Objective-C çš„ Category æˆ–è€… Swift çš„ Extensions ç‰¹æ€§ã€‚ä¸è¿‡ï¼Œè¿™ç§åŠ¨æ€æ›¿æ¢æ–¹æ³•çš„åŠŸèƒ½ä¹Ÿç§°ä½œ Monkeypatchã€‚(ğŸ’ åˆ°åº•æ‹›è°æƒ¹è°äº†ï¼‰ ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨ Monkey.rb æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰ç±» Monkey æ¥ç®€å•çœ‹ä¸€ä¸‹è¯¥ç‰¹æ€§ï¼Œ class Monkey def eat puts &quot;i have banana&quot; end end monkey = Monkey.new class Monkey def eat puts &quot;I have apple&quot; end end monkey.eat ç›´æ¥åœ¨ VSCode ä¸­è¿è¡Œï¼Œæ•ˆæœå¦‚ä¸‹ï¼š [Running] ruby &quot;/Users/edmond/Desktop/Monkey.rb&quot; I have apple å¯ä»¥çœ‹åˆ°ï¼ŒMonkey ç±»çš„å®ä¾‹è¾“å‡ºå·²ç»æ”¹ä¸º I have appleã€‚ éœ€è¦æ³¨æ„ï¼Œå³ä½¿æ˜¯å·²ç»åˆ›å»ºå¥½çš„å®ä¾‹ï¼Œæ–¹æ³•æ›¿æ¢åŒæ ·æ˜¯ç”Ÿæ•ˆçš„ã€‚ å¦å¤– âš ï¸ Open Class å¯ä»¥è·¨æ–‡ä»¶ã€è·¨æ¨¡å—è¿›è¡Œè®¿é—®çš„ï¼Œç”šè‡³å¯¹ Ruby å†…ç½®æ–¹æ³•çš„ä¹ŸåŒæ ·é€‚ç”¨ (è°¨æ…)ã€‚ è¿™å¼ºå¤§çš„åŠŸèƒ½è®©æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„å¯¹ä¸‰æ–¹æ¨¡å—è¿›è¡Œæ‰©å±•ï¼Œè¿™ä¹Ÿæ˜¯ CocoaPods çš„æ’ä»¶ä½“ç³»æ‰€ä¾èµ–çš„åŸºç¡€ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ CocoaPods ä¸»ä»“åº“ cocoapods/downloader.rb ä¸­å®šä¹‰äº†ä¸€äº› download æ–¹æ³•ï¼š module Pod module Downloader # ... end end ä½†æ˜¯åœ¨ cocoapods-downloader æ¨¡å—ä¸­ï¼Œmodule Downloader çš„æ–¹æ³•å¹¶ä¸èƒ½æ»¡è¶³å…¨éƒ¨éœ€æ±‚ï¼Œäºæ˜¯åœ¨ cocoapods-downloader/api.rbapi.rb ä¸­å°±å¯¹é½è¿›è¡Œäº†æ‰©å±•ï¼š module Pod module Downloader module API def execute_command(executable, command, raise_on_failure = false) # ... end # ... end end CLAide CLAide è™½ç„¶æ˜¯ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œè§£é‡Šå™¨ï¼Œä½†å®ƒæä¾›äº†åŠŸèƒ½é½å…¨çš„å‘½ä»¤è¡Œç•Œé¢å’Œ APIã€‚å®ƒä¸ä»…è´Ÿè´£è§£ææˆ‘ä»¬ä½¿ç”¨åˆ°çš„ Pods å‘½ä»¤ï¼Œä¾‹å¦‚ï¼špod install, pod update ç­‰ï¼Œè¿˜å¯ç”¨äºå°è£…å¸¸ç”¨çš„ä¸€äº›è„šæœ¬ï¼Œå°†å…¶æ‰“åŒ…æˆç®€å•çš„å‘½ä»¤è¡Œå°å·¥å…·ã€‚ å¤‡æ³¨ï¼šæ‰€è°“å‘½ä»¤è¡Œè§£é‡Šå™¨å°±æ˜¯ä»æ ‡å‡†è¾“å…¥æˆ–è€…æ–‡ä»¶ä¸­è¯»å–å‘½ä»¤å¹¶æ‰§è¡Œçš„ç¨‹åºã€‚è¯¦è§ Wikiã€‚ CLAide åŠŸèƒ½æ¦‚è§ˆ æˆ‘ä»¬å…ˆé€šè¿‡ pod --help æ¥æŸ¥çœ‹ CLAide çš„çœŸå®è¾“å‡ºæ•ˆæœï¼š $ pod Usage: $ pod COMMAND CocoaPods, the Cocoa library package manager. Commands: + cache Manipulate the CocoaPods cache + deintegrate Deintegrate CocoaPods from your project + env Display pod environment + init Generate a Podfile for the current directory ... Options: --allow-root Allows CocoaPods to run as root --silent Show nothing --version Show the version of the tool ... ğŸ‘†æ‰€å±•ç¤ºçš„ Usageã€Commandsã€Options section åŠå…¶å†…å®¹å‡æ˜¯ç”± CALide çš„è¾“å‡ºæ¨¡ç‰ˆ Banner æ¥å®Œæˆçš„ã€‚CALide æä¾›äº† Command åŸºç±»å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä¹‰å‡ºæ ‡å‡†ä¸”ç¾è§‚çš„å‘½ä»¤ã€‚é™¤äº† pod å‘½ä»¤ä¹‹å¤–ï¼Œä¾‹å¦‚ï¼šXcodeproj æ‰€æä¾›çš„å‘½ä»¤ä¹Ÿæ˜¯ç”± CALide æ¥å®ç°çš„ã€‚ CALide è¿˜æä¾›äº†ä¸€å¥—æ’ä»¶åŠ è½½æœºåˆ¶åœ¨å‘½ä»¤æ‰§è¡Œå‰è·å–æ‰€æœ‰æ’ä»¶ä¸­çš„å‘½ä»¤ï¼Œä¾‹å¦‚ï¼šcocoapods-packeger æä¾›çš„ pod package NAME [SOURCE] å°±æ˜¯ä»å…¶ source code ä¸­çš„ lib/pod/commnad/package.rb è¯»å–å‡ºæ¥çš„ï¼Œå®ƒä»¤æˆ‘ä»¬ä»…éœ€ä¸€ä»½ podspec ä¿¡æ¯ï¼Œå³å¯å®Œæˆ Cocoa ä¾èµ–åº“çš„ ğŸ“¦ã€‚ CALide çš„ç›®å½•ç»“æ„ å¯¹äº Ruby çš„é¡¹ç›®ç»“æ„ï¼Œåœ¨ Rubygems.org ä¸­æœ‰ æ–‡ä»¶ç»“æ„æ‰‹å†Œ è¿™ä¸ªæ ‡å‡†ä¾›å¤§å®¶å‚è€ƒå­¦ä¹ ã€‚ é¦–å…ˆæ¥çœ‹ CALide é¡¹ç›®çš„æ–‡ä»¶å…¥å£ lib/calide.rbï¼š module CLAide VERSION = '1.0.3'.freeze require 'claide/ansi' require 'claide/argument' require 'claide/argv' require 'claide/command' require 'claide/help' require 'claide/informative_error' end æˆ‘ä»¬æ¥ä¸‹æ¥åˆ†æä¸€ä¸‹ lib/cladie/ ç›®å½•ä¸‹çš„ç›¸å…³ä»£ç ã€‚ Command æŠ½è±¡ç±» Command æ˜¯ç”¨äºæ„å»ºå‘½ä»¤è¡Œç•Œé¢çš„åŸºç¡€æŠ½è±¡ç±»ã€‚æ‰€æœ‰æˆ‘ä»¬æ·»åŠ çš„å‘½ä»¤éƒ½éœ€è¦ç»§æ‰¿è‡ª Commandï¼Œè¿™äº›å­ç±»å¯ä»¥åµŒå¥—ç»„åˆæˆæ›´åŠ ç²¾ç»†çš„å‘½ä»¤ã€‚ pod å‘½ä»¤æ­£æ˜¯ç”±å¤šä¸ª Pod::Command &amp;lt; CLAide::Command çš„å­ç±»ç»„åˆè€Œæˆçš„ abstract commandã€‚å½“ç„¶ pod çš„ subcommand åŒæ ·ä¹Ÿèƒ½å£°æ˜ä¸º abstact commandï¼Œé€šè¿‡è¿™æ ·çš„æ–¹å¼æˆ‘ä»¬å°±èƒ½è¾¾åˆ°å¤šçº§åµŒå¥—å‘½ä»¤çš„æ•ˆæœã€‚æœ‰æŠ½è±¡å‘½ä»¤å½“ç„¶ä¹Ÿéœ€è¦æœ‰å…·ä½“æ‰§è¡Œä»»åŠ¡çš„ normal commandã€‚ ä¸¾ä¸ªä¾‹å­ï¼š $ pod update --help Usage: $ pod update [POD_NAMES ...] Updates the Pods identified by the specified `POD_NAMES` Options: --verbose Show more debugging information --no-ansi Show output without ANSI codes --help Show help banner of specified command å¯¹åº”çš„ï¼Œ pod updateÂ è¿™ä¸ªå‘½ä»¤çš„é€»è¾‘åœ¨ CLAide ä¸­å°±æ˜¯å¦‚ä¸‹æè¿°ï¼š module Pod class Command class Update &amp;lt; Command self.arguments = [ CLAide::Argument.new('POD_NAMES', false, true), ] self.description = &amp;lt;&amp;lt;-DESC Updates the Pods identified by the specified `POD_NAMES`. DESC def self.options [ [&quot;--sources&quot;, 'The sources from which to update dependent pods'], ['--exclude-pods', 'Pods to exclude during update'], ['--clean-install', 'Ignore the contents of the project cache and force a full pod installation'] ].concat(super) end end end end å½“æˆ‘ä»¬å¦‚æ­¤æè¿°åï¼ŒCLAide ä¼šå¯¹è¿™ä¸ªç±»è¿›è¡Œä»¥ä¸‹æ–¹å¼çš„è§£æï¼š æ­¤å¤–ï¼ŒCommand class æä¾›äº†å¤§é‡åŸºç¡€åŠŸèƒ½ï¼Œå…¶ä¸­æœ€æ ¸å¿ƒçš„æ–¹æ³•ä¸º runï¼Œä¼šåœ¨ normal command å°èŠ‚ä¼šä»‹ç»ã€‚å¯¹äºä»»ä½•å‘½ä»¤ç±»å‹éƒ½å¯ä»¥è®¾ç½®ä»¥ä¸‹å‡ ä¸ªå±æ€§å’Œæ–¹æ³•ï¼š summary: ç”¨äºç®€å•æè¿°è¯¥å‘½ä»¤çš„ä½œç”¨ options: ç”¨äºè¿”å›è¯¥å‘½ä»¤çš„å¯é€‰é¡¹åŠå¯¹åº”çš„æè¿°ï¼Œè¿”å›çš„ options éœ€è¦é€šè¿‡è°ƒç”¨ super æ’å…¥åˆ°çˆ¶ç±»çš„å¯é€‰é¡¹å‰ initialize: å¦‚æœéœ€è¦è·å–å‘½ä»¤è¡Œä¼ é€’çš„å®å‚ï¼Œéœ€è¦é€šè¿‡é‡è½½ initialize æ–¹æ³•æ¥è·å– validate!: ç”¨äºæ£€æŸ¥è¾“å…¥å®å‚çš„æœ‰æ•ˆæ€§ï¼Œå¦‚æœæ ¡éªŒå¤±è´¥ï¼Œä¼šé€šè¿‡è°ƒç”¨ help! æ–¹æ³•æ¥è¾“å‡ºå¸®åŠ©ä¿¡æ¯ help!ï¼šç”¨äºé”™è¯¯ä¿¡æ¯çš„å¤„ç†å’Œå±•ç¤º æ³¨æ„ âš ï¸ï¼šè¿™é‡Œæˆ‘ä»¬è¯´çš„ abstract command å’Œ normal command å‡æ˜¯é€šè¿‡ Command æ¥å®ç°çš„ï¼Œåªæ˜¯å®ƒä»¬çš„é…ç½®ä¸åŒã€‚ Abstract Command abstract command ä¸ºä¸æä¾›å…·ä½“å‘½ä»¤å®ç°çš„æŠ½è±¡å®¹å™¨å‘½ä»¤ç±»ï¼Œä¸è¿‡å®ƒå¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªçš„ subcommandsã€‚æˆ‘ä»¬å¯ä»¥æŒ‡å®š subcommands ä¸­çš„ normal command ä¸ºé»˜è®¤å‘½ä»¤ï¼Œå°±èƒ½å°† abstract command ä½œä¸ºä½œä¸ºæ™®é€šå‘½ä»¤ç›´æ¥æ‰§è¡Œäº†ã€‚ æŠ½è±¡å‘½ä»¤çš„ç°å®æ¯”è¾ƒç®€å•ï¼š self.abstract_command = true ä»…éœ€è®¾ç½® abstract_commandï¼Œç„¶åå°±å¯ä»¥ç»§æ‰¿å®ƒæ¥å®ç°æ™®é€šå‘½ä»¤æˆ–è€…å¤šçº§åµŒå¥—çš„æŠ½è±¡å‘½ä»¤ã€‚ ä»¥ pod å‘½ä»¤çš„å®ç°ä¸ºä¾‹ï¼š module Pod class Command &amp;lt; CLAide::Command require 'cocoapods/command/install' # 1 require 'cocoapods/command/update' # ... self.abstract_command = true self.command = 'pod' # ... end ä¸Šè¿°é€šè¿‡ require å¼•å…¥çš„ updateã€install ç­‰å­å‘½ä»¤éƒ½æ˜¯ç»§æ‰¿è‡ª Pod::Command çš„ normal commandã€‚ Normal Command ç›¸å¯¹äºæŠ½è±¡å‘½ä»¤ï¼Œæ™®é€šå‘½ä»¤å°±éœ€è¦è®¾ç½®ä¼ é€’å®å‚çš„åç§°å’Œæè¿°ï¼Œä»¥åŠé‡è½½ run æ–¹æ³•ã€‚ Arguments arguments ç”¨äºé…ç½®è¯¥å‘½ä»¤æ”¯æŒçš„å‚æ•°åˆ—è¡¨çš„ banner è¾“å‡ºï¼Œç±»å‹ä¸º Array&amp;lt;Argument&amp;gt;]ï¼Œå®ƒæœ€ç»ˆä¼šæ ¼å¼åŒ–æˆå¯¹åº”çš„ä¿¡æ¯å±•ç¤ºåœ¨ Usage banner ä¸­ã€‚ æˆ‘ä»¬æ¥çœ‹ pod update çš„ arguments æ˜¯å¦‚ä½•é…ç½®çš„ï¼š self.arguments = [ CLAide::Argument.new('POD_NAMES', false, true), ] å…¶ä¸­ Argument çš„æ„é€ æ–¹æ³•å¦‚ä¸‹ï¼š module CLAide class Argument def initialize(names, required, repeatable = false) @names = Array(names) @required = required @repeatable = repeatable end end è¿™é‡Œä¼ å…¥çš„ names å°±æ˜¯åœ¨ Usage banner ä¸­è¾“å‡ºçš„ [POD_NAMES ...] ã€‚ require è¡¨ç¤ºè¯¥ Argument æ˜¯å¦ä¸ºå¿…ä¼ å‚æ•°ï¼Œå¯é€‰å‚æ•°ä¼šç”¨ [ ] å°†å…¶åŒ…è£¹èµ·æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ pod update å‘½ä»¤é»˜è®¤æ˜¯ä¸éœ€è¦ä¼  POD_NAMES repeatable è¡¨ç¤ºè¯¥ Argument æ˜¯å¦å¯ä»¥é‡å¤å¤šæ¬¡å‡ºç°ã€‚å¦‚æœè®¾ç½®ä¸ºå¯é‡å¤ï¼Œé‚£ä¹ˆä¼šåœ¨ names çš„è¾“å‡ºä¿¡æ¯åé¢ä¼šæ·»åŠ  ... è¡¨ç¤ºè¯¥å‚æ•°ä¸ºå¤æ•°å‚æ•°ã€‚ ä¸¾ä¸ªä¾‹å­ï¼š $ pod update Alamofire, SwiftyJSON æˆ‘ä»¬å¯ä»¥æŒ‡å®š pod update ä»…æ›´æ–°ç‰¹å®šçš„ä¾èµ–åº“ï¼Œå¦‚æœä¸ä¼  POD_NAMES å°†è¿›è¡Œå…¨é‡æ›´æ–°ã€‚ Run æ–¹æ³• åœ¨ Command ç±»ä¸­å®šä¹‰äº†ä¸¤ä¸ª run æ–¹æ³•ï¼š def self.run(argv = []) # æ ¹æ®æ–‡ä»¶å‰ç¼€æ¥åŒ¹é…å¯¹åº”çš„æ’ä»¶ plugin_prefixes.each do |plugin_prefix| PluginManager.load_plugins(plugin_prefix) end argv = ARGV.coerce(argv) # è§£æ argument ç”Ÿæˆå¯¹åº”çš„ command instance command = parse(argv) ANSI.disabled = !command.ansi_output? unless command.handle_root_options(argv) command.validate! command.run end rescue Object =&amp;gt; exception handle_exception(command, exception) end def run raise 'A subclass should override the `CLAide::Command#run` method to ' \ 'actually perform some work.' end è¿™é‡Œçš„ self.run æ–¹æ³•æ˜¯ class methodï¼Œè€Œ run æ˜¯ instanced methodã€‚å¯¹äº Ruby ä¸å¤ªç†Ÿæ‚‰çš„åŒå­¦å¯ä»¥çœ‹çœ‹è¿™ä¸ªï¼šWhat does def self.function name mean? ä½œä¸º Command ç±»çš„æ ¸å¿ƒæ–¹æ³•ï¼Œç±»æ–¹æ³• self.run å°†ç»ˆç«¯ä¼ å…¥çš„å‚æ•°è§£ææˆå¯¹åº”çš„ command å’Œ argvï¼Œå¹¶æœ€ç»ˆè°ƒç”¨ command çš„å®ä¾‹æ–¹æ³• run æ¥è§¦å‘çœŸæ­£çš„å‘½ä»¤é€»è¾‘ã€‚å› æ­¤ï¼Œå­ç±»éœ€è¦é€šè¿‡é‡è½½ run æ–¹æ³•æ¥å®Œæˆå¯¹åº”å‘½ä»¤çš„å®ç°ã€‚ é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ–¹æ³• Command::parse æ˜¯å¦‚ä½•å°† run çš„ç±»æ–¹æ³•è½¬æ¢ä¸ºå®ä¾‹æ–¹æ³•çš„å‘¢ï¼Ÿ def self.parse(argv) # é€šè¿‡è§£æ argv è·å–åˆ°ä¸ cmd åç§° argv = ARGV.coerce(argv) cmd = argv.arguments.first # å¦‚æœ cmd å¯¹åº”çš„ Command ç±»ï¼Œåˆ™æ›´æ–° argvï¼Œç»§ç»­è§£æå‘½ä»¤ if cmd &amp;amp;&amp;amp; subcommand = find_subcommand(cmd) argv.shift_argument subcommand.parse(argv) # å¦‚æœ cmd ä¸ºæŠ½è±¡å‘½ä»¤ä¸”æŒ‡å®šäº†é»˜è®¤å‘½ä»¤ï¼Œåˆ™è¿”å›é»˜è®¤å‘½ä»¤ç»§ç»­è§£æå‚æ•° elsif abstract_command? &amp;amp;&amp;amp; default_subcommand load_default_subcommand(argv) else # åˆå§‹åŒ–çœŸæ­£çš„ cmd å®ä¾‹ new(argv) end end å¯ä»¥è¯´ï¼ŒCLAide çš„å‘½ä»¤è§£æå°±æ˜¯ä¸€ä¸ªå¤šå‰æ ‘éå†ï¼Œé€šè¿‡åˆ†å‰²å‚æ•°åŠéå† CLAide::Command çš„å­ç±»ï¼Œæœ€ç»ˆæ‰¾åˆ°ç”¨æˆ·è¾“å…¥çš„ normal command å¹¶åˆå§‹åŒ–è¿”å›ã€‚ è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªçŸ¥è¯†ç‚¹å°±æ˜¯ï¼ŒCLAide::Command æ˜¯å¦‚ä½•çŸ¥é“æœ‰å“ªäº›å­ç±»é›†æˆå®ƒçš„å‘¢ï¼Ÿ def self.inherited(subcommand) subcommands &amp;lt;&amp;lt; subcommand end è¿™é‡Œåˆ©ç”¨äº† Ruby æä¾›çš„ Hook Method self.inherited æ¥è·å–å®ƒæ‰€ç»§æ‰¿çš„å­ç±»ï¼Œå¹¶å°†å…¶ä¿å­˜åœ¨ subcommandsã€‚ å¦å¤–ï¼Œè¿™é‡Œåœ¨çœŸæ­£æ‰§è¡Œ self.run æ–¹æ³•ä¹‹å‰ä¼šéå†å½“å‰é¡¹ç›®æ‰€å¼•å…¥çš„ Gems åŒ…ä¸­çš„æŒ‡å®šç›®å½•ä¸‹çš„å‘½ä»¤æ’ä»¶æ–‡ä»¶ï¼Œå¹¶è¿›è¡Œæ’ä»¶åŠ è½½ï¼Œå…·ä½“å†…å®¹å°†åœ¨ PluginManager ä¸­å±•å¼€ã€‚ ARGV ä¼ å…¥å‚æ•° CLAide æä¾›äº†ä¸“é—¨çš„ç±» ARGV ç”¨äºè§£æå‘½ä»¤è¡Œä¼ å…¥çš„å‚æ•°ã€‚ä¸»è¦åŠŸèƒ½æ˜¯å¯¹ Parse è§£æåçš„ tuple åˆ—è¡¨è¿›è¡Œå„ç§è¿‡æ»¤ã€CURD ç­‰æ“ä½œã€‚ æŒ‰ç…§ CALide çš„å®šä¹‰å‚æ•°åˆ†ä¸‰ç§ç±»å‹ï¼š arg: æ™®é€šçš„å®å‚ï¼Œæ‰€è°“çš„å®å‚å°±æ˜¯ç›´æ¥è·Ÿåœ¨å‘½ä»¤åé¢çš„ï¼Œä¸”ä¸å¸¦ä»»ä½• -- ä¿®é¥°çš„å­—ç¬¦ flag: ç®€å•ç†è§£ flag å°±æ˜¯é™å®šä¸º bool å˜é‡çš„ option ç±»å‹å‚æ•°ï¼Œå¦‚æœ flag å‰é¢æ·»åŠ å¸¦ --no- åˆ™å€¼ä¸º falseï¼Œå¦åˆ™ä¸º true option: å¯é€‰é¡¹å‚æ•°ï¼Œä»¥ -- ä¸ºå‰ç¼€ä¸”ä»¥ = ä½œä¸ºåˆ†å‰²ç¬¦æ¥åŒºåˆ† key å’Œ value è€Œåœ¨ ARGV å†…éƒ¨åˆæä¾›äº†ç§æœ‰å·¥å…·ç±» Parser æ¥è§£æç»ˆç«¯çš„è¾“å…¥ï¼Œå…¶æ ¸å¿ƒæ–¹æ³•ä¸º parse: module Parser def self.parse(argv) entries = [] copy = argv.map(&amp;amp;:to_s) double_dash = false while argument = copy.shift next if !double_dash &amp;amp;&amp;amp; double_dash = (argument == '--') type = double_dash ? :arg : argument_type(argument) parsed_argument = parse_argument(type, argument) entries &amp;lt;&amp;lt; [type, parsed_argument] end entries end # ,,, end parse çš„è¿”å›å€¼ä¸º [Array&amp;lt;Array&amp;lt;Symbol, String, Array&amp;gt;&amp;gt;] ç±»å‹çš„ tupleï¼Œå…¶ä¸­ tuple çš„ç¬¬ä¸€ä¸ªå˜é‡ä¸ºå®å‚çš„ç±»å‹ï¼Œç¬¬äºŒä¸ªæ‰æ˜¯å¯¹åº”çš„å®å‚ã€‚ ä¾æ—§ä»¥ pod update ä¸ºä¾‹ï¼š pod update Alamofire --no-repo-update --exclude-pods=SwiftyJSON è§£æåï¼Œè¾“å‡ºçš„ tuple åˆ—è¡¨å¦‚ä¸‹ï¼š [ [:arg, &quot;Alamofire&quot;], [:flag, [&quot;repo-update&quot;, false]], [:option, [&quot;exclude-pods&quot;, &quot;SwiftyJSON&quot;]] ] Banner ä¸è¾“å‡ºæ ¼å¼åŒ– æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥èŠèŠ CLAide æä¾›çš„æ ¼å¼åŒ–æ•ˆæœçš„ bannerã€‚ é‚£ä»€ä¹ˆæ˜¯ banner å‘¢ï¼Ÿå›çœ‹ç¬¬ä¸€ä¸ªä¾‹å­ pod --help æ‰€è¾“å‡ºçš„å¸®åŠ©ä¿¡æ¯ï¼Œå®ƒåˆ†ä¸ºä¸‰ä¸ª Sectionï¼š Usageï¼šç”¨äºæè¯¥è¿°å‘½ä»¤çš„ç”¨æ³• Commandsï¼šç”¨äºæè¿°è¯¥å‘½ä»¤æ‰€åŒ…å«çš„å­å‘½ä»¤ï¼Œæ²¡æœ‰åˆ™ä¸æ˜¾ç¤ºã€‚åœ¨å­å‘½ä»¤å‰é¢å­˜åœ¨ä¸¤ç§ç±»å‹çš„æ ‡è¯† + ï¼šç”¨äºå¼ºè°ƒè¯¥ command æ˜¯å•ç‹¬æ·»åŠ çš„å­å‘½ä»¤ &amp;gt; ï¼šç”¨äºè¡¨ç¤ºæŒ‡å¼•çš„æ„æ€ï¼Œè¡¨ç¤ºè¯¥ command æ˜¯å½“å‰å‘½ä»¤çš„é»˜è®¤å®ç° Optionsï¼šç”¨äºæè¿°è¯¥å‘½ä»¤çš„å¯é€‰é¡¹ è¿™ä¸‰æ®µå¸®åŠ©ä¿¡æ¯å°±æ˜¯å¯¹åº”çš„ä¸åŒçš„ bannerã€‚ CLAide å¯¹äºè¾“å‡ºçš„ banner ä¿¡æ¯æä¾›äº† ANSI è½¬ä¹‰ï¼Œç”¨äºåœ¨ä¸åŒçš„ç»ˆç«¯é‡Œæ˜¾ç¤ºå¯Œæ–‡æœ¬çš„æ•ˆæœã€‚banner çš„ä¸»è¦æ ¼å¼åŒ–æ•ˆæœå¦‚ä¸‹ï¼š å¯¹äº setcion æ ‡é¢˜ï¼š Usageã€Commandsã€Options æ·»åŠ äº†ä¸‹åˆ’çº¿ä¸”åŠ ç²—å¤„ç† Command é…ç½®ä¸ºç»¿è‰² Options é…ç½®ä¸ºè“è‰² æç¤ºè­¦å‘Šä¿¡æ¯é…ç½®ä¸ºé»„è‰² é”™è¯¯ä¿¡æ¯åˆ™æ˜¯çº¢è‰² å¯¹äºè¿™äº›é…è‰²æ–¹æ¡ˆï¼ŒCLAide æä¾›äº† String çš„ convince method æ¥å®Œæˆ ANSI è½¬ä¹‰ï¼š class String def ansi CLAide::ANSI::StringEscaper.new(self) end end ä¾‹å¦‚ï¼š &quot;example&quot;.ansi.yellow #=&amp;gt; &quot;\e[33mexample\e[39m&quot; &quot;example&quot;.ansi.on_red #=&amp;gt; &quot;\e[41mexample\e[49m&quot; &quot;example&quot;.ansi.bold #=&amp;gt; &quot;\e[1mexample\e[21m&quot; å¯¹äº Banner çš„ä¸€äº›é«˜äº®æ•ˆæœä¹Ÿæä¾›äº† convince methodï¼š def prettify_title(title) title.ansi.underline end def prettify_subcommand(name) name.chomp.ansi.green end def prettify_option_name(name) name.chomp.ansi.blue end PluginManager è½½å…¥æ’ä»¶ PluginManager æ˜¯ Command çš„ç®¡ç†ç±»ï¼Œä¼šåœ¨ç¬¬ä¸€æ¬¡è¿è¡Œå‘½ä»¤ self.run æ—¶è¿›è¡ŒåŠ è½½ï¼Œä¸”ä»…åŠ è½½å‘½ä»¤ç±»ä¸­æŒ‡å®šå‰ç¼€æ ‡è¯†çš„æ–‡ä»¶ä¸‹çš„å‘½ä»¤ã€‚è®©æˆ‘ä»¬å…ˆçœ‹ PluginManager.rb çš„æ ¸å¿ƒå®ç°ï¼š def self.load_plugins(plugin_prefix) loaded_plugins[plugin_prefix] ||= plugin_gems_for_prefix(plugin_prefix).map do |spec, paths| spec if safe_activate_and_require(spec, paths) end.compact end def self.plugin_gems_for_prefix(prefix) glob = &quot;#{prefix}_plugin#{Gem.suffix_pattern}&quot; Gem::Specification.latest_specs(true).map do |spec| matches = spec.matches_for_glob(glob) [spec, matches] unless matches.empty? end.compact end def self.safe_activate_and_require(spec, paths) spec.activate paths.each { |path| require(path) } true rescue Exception =&amp;gt; exception # ... end æ•´ä½“çš„æµç¨‹å¤§è‡´æ˜¯ï¼š è°ƒç”¨ load_plugins å¹¶ä¼ å…¥ plugin_prefix plugin_gems_for_prefix å¯¹æ’ä»¶åè¿›è¡Œå¤„ç†ï¼Œå–å‡ºæˆ‘ä»¬éœ€è¦åŠ è½½çš„æ–‡ä»¶ è°ƒç”¨ safe_activate_and_require è¿›è¡Œå¯¹åº”çš„ gem spec æ£€éªŒå¹¶å¯¹æ¯ä¸ªæ–‡ä»¶è¿›è¡ŒåŠ è½½ CocoaPods çš„æ’ä»¶åŠ è½½æ­£æ˜¯ä¾æ‰˜äº CLAide çš„ load_pluginsï¼Œå®ƒä¼šéå†æ‰€æœ‰çš„ RubyGemï¼Œå¹¶æœç´¢è¿™äº› Gem ä¸­æ˜¯å¦åŒ…å«åä¸º #{plugin_prefix}_plugin.rb çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œåœ¨ Pod å‘½ä»¤çš„å®ç°ä¸­æœ‰å¦‚ä¸‹é…ç½®ï¼š self.plugin_prefixes = %w(claide cocoapods) ä¹Ÿå°±æ˜¯è¯´åœ¨ Pod å‘½ä»¤æ‰§è¡Œå‰ï¼Œå®ƒä¼šåŠ è½½æ‰€æœ‰åŒ…å« claide_plugin.rb æˆ– cocoapods_plugin.rb æ–‡ä»¶çš„ Gemã€‚é€šè¿‡åœ¨è¿è¡Œæ—¶çš„æ–‡ä»¶æ£€æŸ¥æ¥åŠ è½½ç¬¦åˆè¦æ±‚çš„ç›¸å…³å‘½ä»¤ã€‚ ç”¨ CLAide å®ç°ä¸€æ¬¾ ğŸ¥¤ è´©å–æœº æœ€åä¸€èŠ‚è®©æˆ‘ä»¬ä¸€èµ·æ¥åˆ›å»ºä¸€ä¸ª CLAide å‘½ä»¤ã€‚éœ€æ±‚æ˜¯å¸Œæœ›å®ç°ä¸€ä¸ªè‡ªåŠ¨ ğŸ¥¤ è´©å–æœºï¼Œå®ƒæœ‰å¦‚ä¸‹åŠŸèƒ½ï¼šä¸»è¦å”®å– â˜•ï¸ å’Œ ğŸµï¼Œè¿™ä¸¤ç§ ğŸ¥¤ éƒ½å¯ä»¥æŒ‰éœ€é€‰æ‹©æ˜¯å¦æ·»åŠ  ğŸ¥› å’Œ ğŸ¬ï¼Œå¯¹äº ğŸ¬ è¿˜å¯ä»¥é€‰æ‹©ä¸åŒçš„ç”œåº¦ã€‚ â˜•ï¸ï¼šå¯¹äºå’–å•¡ï¼Œæˆ‘ä»¬æä¾›äº†ï¼šBlackEyeã€Affogatoã€CaPheSuaDaã€RedTux çš„å£å‘³ ğŸµï¼šå¯¹äºèŒ¶ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸åŒçš„å“ç§ï¼Œæœ‰é»‘èŒ¶ã€ç»¿èŒ¶ã€ä¹Œé¾™èŒ¶å’Œç™½èŒ¶ï¼ŒåŒæ—¶èŒ¶è¿˜æä¾›äº†åŠ  ğŸ§Š çš„é€‰é¡¹ é…ç½®æ¨¡ç‰ˆé¡¹ç›® åŸºäºä¸Šè¿°æ„æƒ³ï¼Œæˆ‘ä»¬æœ€ç»ˆçš„ BeverageMaker ç›®å½•å°†ç”±ä»¥ä¸‹æ–‡ä»¶ç»„æˆï¼š . â”œâ”€â”€ BeverageMaker.gemspec â”‚ # ... â”œâ”€â”€ exe â”‚Â Â  â””â”€â”€ beverage-maker â”œâ”€â”€ lib â”‚Â Â  â”œâ”€â”€ beveragemaker â”‚Â Â  â”‚Â Â  â”œâ”€â”€ command â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ coffee.rb # åŒ…å« abstract command ä»¥åŠç”¨äºåˆ¶ä½œä¸åŒå’–å•¡çš„ normal command â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ maker.rb # Command æŠ½è±¡ç±» â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ tea.rb # normal command, ä¸åŒç§ç±»çš„ ğŸµ é€šè¿‡å‚æ•°é…ç½®æ¥å®Œæˆ â”‚Â Â  â”‚Â Â  â”œâ”€â”€ command.rb â”‚Â Â  â”‚Â Â  â””â”€â”€ version.rb â”‚Â Â  â””â”€â”€ beveragemaker.rb â””â”€â”€ spec â”œâ”€â”€ BeverageMaker_spec.rb â””â”€â”€ spec_helper.rb 0x1 ç”Ÿæˆæ¨¡ç‰ˆé¡¹ç›® é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ bundler gem GEM_NAME å‘½ä»¤ç”Ÿæˆä¸€ä¸ªæ¨¡ç‰ˆé¡¹ç›®ï¼Œé¡¹ç›®å–åä¸º BeverageMakerã€‚ $ bundle gem BeverageMaker Creating gem 'BeverageMaker'... MIT License enabled in config Code of conduct enabled in config create BeverageMaker/Gemfile create BeverageMaker/lib/BeverageMaker.rb create BeverageMaker/lib/BeverageMaker/version.rb create BeverageMaker/BeverageMaker.gemspec create BeverageMaker/Rakefile # ... Initializing git repo in ~/$HOME/Desktop/BeverageMaker Gem 'BeverageMaker' was successfully created. For more information on making a RubyGem visit https://bundler.io/guides/creating_gem.html 0x2 ä¿®æ”¹ gemspec é…ç½® ç”Ÿæˆçš„é¡¹ç›®ä¸­éœ€è¦å°† BeverageMaker.gemspec æ–‡ä»¶æ‰€åŒ…å« TODO çš„å­—æ®µè¿›è¡Œæ›¿æ¢ï¼Œä½œä¸ºç¤ºä¾‹é¡¹ç›®ç›¸å…³é“¾æ¥éƒ½æ›¿æ¢ä¸ºä¸ªäººä¸»é¡µäº† ğŸ˜‚ã€‚ å¦å¤–ï¼Œéœ€è¦æ·»åŠ æˆ‘ä»¬çš„ä¾èµ– 'claide', '&amp;gt;= 1.0.2', '&amp;lt; 2.0' å’Œ 'colored2', '~&amp;gt; 3.1'ã€‚ colored2 ç”¨äº banner ä¿¡æ¯çš„ ANSI è½¬ä¹‰å¹¶ä½¿å…¶èƒ½åœ¨ç»ˆç«¯ä»¥å¯Œæ–‡æœ¬æ ¼å¼è¾“å‡ºã€‚ æœ€ç»ˆ .gempsc é…ç½®å¦‚ä¸‹ï¼š require_relative 'lib/BeverageMaker/version' Gem::Specification.new do |spec| spec.name = &quot;BeverageMaker&quot; spec.version = BeverageMaker::VERSION spec.authors = [&quot;Edmond&quot;] spec.email = [&quot;chun574271939@gmail.com&quot;] spec.summary = &quot;BeverageMaker&quot; spec.description = &quot;BeverageMaker&quot; spec.homepage = &quot;https://looseyi.github.io&quot; spec.license = &quot;MIT&quot; spec.required_ruby_version = Gem::Requirement.new(&quot;&amp;gt;= 2.3.0&quot;) spec.metadata[&quot;allowed_push_host&quot;] = &quot;https://looseyi.github.io&quot; spec.metadata[&quot;homepage_uri&quot;] = spec.homepage spec.metadata[&quot;source_code_uri&quot;] = &quot;https://looseyi.github.io&quot; spec.metadata[&quot;changelog_uri&quot;] = &quot;https://looseyi.github.io&quot; spec.files = Dir.chdir(File.expand_path('..', __FILE__)) do `git ls-files -z`.split(&quot;\x0&quot;).reject { |f| f.match(%r{^(test|spec|features)/}) } end # 1 spec.bindir = &quot;exe&quot; spec.executables = &quot;beverage-maker&quot; spec.require_paths = [&quot;lib&quot;] spec.add_runtime_dependency 'claide', '&amp;gt;= 1.0.2', '&amp;lt; 2.0' spec.add_runtime_dependency 'colored2', '~&amp;gt; 3.1' end 0x3 æ·»åŠ å‘½ä»¤è¡Œå…¥å£ é€šè¿‡ä¿®æ”¹ .gemspec çš„ bindir å’Œ executables å­—æ®µï¼ŒæŠŠæœ€ç»ˆçš„ binary æ‰§è¡Œæ–‡ä»¶æš´éœ²ç»™ç”¨æˆ·ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªçœŸæ­£çš„ CLIï¼š spec.bindir = &quot;exe&quot; spec.executables = &quot;beverage-maker&quot; åœ¨é»˜è®¤ç”Ÿæˆçš„æ¨¡ç‰ˆä¸­æŒ‡å®šçš„ bindir ä¸º /bin ç›®å½•ï¼Œè¿™é‡Œæˆ‘ä»¬æ›¿æ¢ä¸ºæ–°å»ºçš„ exe ç›®å½•ï¼Œå¹¶åœ¨ exe ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º beverage-maker çš„æ–‡ä»¶ï¼Œå®ƒå°†ä½œä¸º CLI çš„å…¥å£ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š #!/usr/bin/env ruby require 'beveragemaker' BeverageMaker::Command.run(ARGV) æ·»åŠ å‘½ä»¤å®ç° ä¸ºäº†è®© Demo ç»“æ„æ¸…æ™°ï¼Œæˆ‘ä»¬å°†ä¸èƒ½ç±»å‹çš„é¥®æ–™åˆ¶ä½œåˆ†åˆ°äº†ä¸åŒçš„æ–‡ä»¶å’Œå‘½ä»¤ç±»ä¸­ã€‚ BeverageMaker å…ˆæ¥å®ç° beverage-maker å‘½ä»¤ï¼Œå®ƒæ˜¯ä¸€ä¸ª abstract commandï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š require 'claide' require 'colored2' module BeverageMaker # å¼•å…¥å…·ä½“çš„ coffee &amp;amp; tea maker require 'beveragemaker/command/coffee' require 'beveragemaker/command/tea' class Command &amp;lt; CLAide::Command self.command = 'beverage-maker' self.abstract_command = true self.description = 'Make delicious beverages from the comfort of your terminal.' def self.options [ ['--no-milk', 'Donâ€™t add milk to the beverage'], ['--sweetener=[sugar|honey]', 'Use one of the available sweeteners'], ].concat(super) end def initialize(argv) @add_milk = argv.flag?('milk', true) @sweetener = argv.option('sweetener') super end def validate! super if @sweetener &amp;amp;&amp;amp; !%w(sugar honey).include?(@sweetener) help! &quot;`#{@sweetener}' is not a valid sweetener.&quot; end end def run puts '* Boiling waterâ€¦' sleep 1 if @add_milk puts '* Adding milkâ€¦' sleep 1 end if @sweetener puts &quot;* Adding #{@sweetener}â€¦&quot; sleep 1 end end end end æ­£å¸¸æ¥è¯´ï¼Œå¯¹äºä¸åŒå£å‘³çš„å’–å•¡å’ŒèŒ¶æ˜¯å¯ä»¥ç”¨ç›¸åŒçš„å‘½ä»¤æ¨¡å¼æ¥å®ç°çš„ï¼Œä¸è¿‡ä¸ºäº†æ›´å¥½çš„å±•ç¤º CLAide çš„æ•ˆæœï¼Œæˆ‘ä»¬å°†å’–å•¡çš„ç”Ÿäº§é…ç½®ä¸º abstact commandï¼Œå¯¹äºä¸åŒå£å‘³çš„å’–å•¡ï¼Œéœ€è¦å®ç°ä¸åŒçš„ normal commandã€‚è€ŒèŒ¶çš„ç”Ÿäº§ç›´æ¥é€šè¿‡ normal command å®ç°ï¼Œä¸åŒå“ç§çš„èŒ¶å¶ä¼šä»¥å‚æ•°çš„å½¢å¼æ¥é…ç½®ã€‚ Coffee æ¥ç€æ·»åŠ  â˜•ï¸ çš„ä»£ç  class Coffee &amp;lt; Command # ... self.abstract_command = true def run super puts &quot;* Grinding #{self.class.command} beansâ€¦&quot; sleep 1 puts '* Brewing coffeeâ€¦' sleep 1 puts '* Enjoy!' end class BlackEye &amp;lt; Coffee self.summary = 'A Black Eye is dripped coffee with a double shot of ' \ 'espresso' end # ... end Tea class Tea &amp;lt; Command # ... self.arguments = [ CLAide::Argument.new('FLAVOR', true), ] def self.options [['--iced', 'the ice-tea version']].concat(super) end def initialize(argv) @flavor = argv.shift_argument @iced = argv.flag?('iced') super end def validate! super if @flavor.nil? help! 'A flavor argument is required.' end unless %w(black green oolong white).include?(@flavor) help! &quot;`#{@flavor}' is not a valid flavor.&quot; end end # ... end å®‰è£… ğŸ¥¤ è´©å–æœº æˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºæ­£å¸¸å‘å¸ƒçš„ gem åŒ…ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ gem install GEM_NAME å®‰è£…ã€‚ è€Œæˆ‘ä»¬çš„ Demo ç¨‹åºå¹¶æœªå‘å¸ƒï¼Œé‚£è¦å¦‚ä½•å®‰è£…ä½¿ç”¨å‘¢ï¼Ÿå¹¸å¥½ Gem æä¾›äº†æºç å®‰è£…çš„æ–¹å¼ï¼š gem build *.gemspec gem install *.gem gem build å¯ä»¥æ ¹æ®ä¸€ä¸ª .gemspec ç”Ÿæˆä¸€ä¸ª .gem æ–‡ä»¶ä¾› gem å®‰è£…ï¼Œæ‰€ä»¥åœ¨æ‹¥æœ‰æºç çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œä¸Šé¢å‘½ä»¤å°±å¯ä»¥å®‰è£…äº†ã€‚ æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š $ gem build *.gemspec WARNING: description and summary are identical WARNING: See http://guides.rubygems.org/specification-reference/ for help Successfully built RubyGem Name: BeverageMaker Version: 0.1.0 File: BeverageMaker-0.1.0.gem $ gem install *.gem Successfully installed BeverageMaker-0.1.0 Parsing documentation for BeverageMaker-0.1.0 Done installing documentation for BeverageMaker after 0 seconds 1 gem installed ç¼–è¯‘é€šè¿‡ï¼ ç°åœ¨å¯ä»¥å¼€å§‹æˆ‘ä»¬çš„ ğŸ¥¤ åˆ¶ä½œå•¦ï¼ $ beverage-maker Usage: $ beverage-maker COMMAND Make delicious beverages from the comfort of yourterminal. Commands: + coffee Drink brewed from roasted coffee beans Options: --no-milk Donâ€™t add milk to the beverage --sweetener=[sugar|honey] Use one of the available sweeteners --version Show the version of the tool --verbose Show more debugging information --no-ansi Show output without ANSI codes --help Show help banner of specified command æ¥ä¸€æ¯ black-eye â˜•ï¸ï¼Œä¼‘æ¯ä¸€ä¸‹å§! $ beverage-maker coffee black-eye * Boiling waterâ€¦ * Adding milkâ€¦ * Grinding black-eye beansâ€¦ * Brewing coffeeâ€¦ * Enjoy! å¦‚éœ€æœ¬æ–‡çš„ Demo ä»£ç ï¼Œè¯·è®¿é—®ï¼šhttps://github.com/looseyi/BeverageMaker æ€»ç»“ æœ¬æ–‡ç®€å•èŠäº† CLAide çš„å®ç°ï¼Œå¹¶æ‰‹åŠ¨åˆ¶ä½œäº†ä¸€æ¬¾ ğŸ¥¤ è´©å–æœºæ¥å±•ç¤º CALide çš„å‘½ä»¤é…ç½®ã€‚ä¸»è¦æ„Ÿå—å¦‚ä¸‹ï¼š é€šè¿‡å¯¹æºç å¯¹é˜…è¯»ï¼Œç»ˆäºäº†è§£äº†å¯¹ Â pod å‘½ä»¤çš„çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ ä»…éœ€ç®€å•é…ç½® Command bannerï¼Œå°±èƒ½æœ‰æ¯”è¾ƒç²¾ç¾çš„ç»ˆç«¯è¾“å‡ºæ•ˆæœå’Œå¸®åŠ©æç¤ºç­‰ æä¾›çš„æŠ½è±¡å‘½ä»¤åŠŸèƒ½ï¼Œæ–¹ä¾¿çš„å°†ç›¸å…³é€»è¾‘æ”¶å£åˆ°ç»Ÿä¸€åˆ°å‘½ä»¤ä¸­ï¼Œæ–¹ä¾¿æŸ¥é˜… ä»ä¾§é¢ç®€å•äº†è§£äº†ï¼Œå¦‚ä½•åœ¨ç»ˆç«¯è¾“å‡ºå¸¦å¯Œæ–‡æœ¬æ•ˆæœçš„æç¤ºä¿¡æ¯ çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç† è¿™é‡Œç½—åˆ—äº†å››ä¸ªé—®é¢˜ç”¨æ¥è€ƒå¯Ÿä½ æ˜¯å¦å·²ç»æŒæ¡äº†è¿™ç¯‡æ–‡ç« ï¼Œå¦‚æœæ²¡æœ‰å»ºè®®ä½ åŠ å…¥**æ”¶è— **å†æ¬¡é˜…è¯»ï¼š CLAide é¢„è®¾çš„ banner æœ‰å“ªäº›ï¼Œå…¶ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆ ï¼Ÿ CALide ä¸­è®¾å®šçš„ Argument æœ‰å‡ ç§ç±»å‹ï¼ŒåŒºåˆ«æ˜¯ä»€ä¹ˆ ï¼Ÿ CALide ä¸­æŠ½è±¡å‘½ä»¤çš„å’Œæ™®é€šå‘½ä»¤çš„åŒºåˆ« ï¼Ÿ è¦å®ç° CLI éœ€è¦ä¿®æ”¹ .gemspec ä¸­çš„å“ªäº›é…ç½® ï¼Ÿ</summary></entry><entry><title type="html">CocoaPods ä¸­çš„ Ruby ç‰¹æ€§ä¹‹ Mix-in</title><link href="https://www.desgard.com/2020/08/26/cocoapods-story-ex-1.html" rel="alternate" type="text/html" title="CocoaPods ä¸­çš„ Ruby ç‰¹æ€§ä¹‹ Mix-in" /><published>2020-08-26T00:00:00-08:00</published><updated>2020-08-26T00:00:00-08:00</updated><id>https://www.desgard.com/2020/08/26/cocoapods-story-ex-1</id><content type="html" xml:base="https://www.desgard.com/2020/08/26/cocoapods-story-ex-1.html">&lt;p&gt;CocoaPods æ˜¯ä½¿ç”¨ Ruby è¿™é—¨è„šæœ¬è¯­è¨€å®ç°çš„å·¥å…·ã€‚Ruby æœ‰å¾ˆå¤šä¼˜è´¨çš„ç‰¹æ€§è¢« CocoaPods æ‰€åˆ©ç”¨ï¼Œä¸ºäº†åœ¨åç»­çš„æºç é˜…è¯»ä¸­ä¸ä¼šè¢«è¿™äº›ç”¨æ³•é˜»å¡ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªç³»åˆ—ä¸­ï¼Œä¼šç»™å‡ºä¸€äº› CocoaPods çš„ç•ªå¤–ç¯‡ï¼Œæ¥ä»‹ç» Ruby åŠå…¶å½“ä¸­çš„ä¸€äº›è¯­è¨€æ€æƒ³ã€‚&lt;/p&gt;

&lt;h1 id=&quot;é¢å‘å¯¹è±¡ä¸­çš„ç»§æ‰¿&quot;&gt;é¢å‘å¯¹è±¡ä¸­çš„ç»§æ‰¿&lt;/h1&gt;

&lt;h2 id=&quot;æ„é€ ä¸€ä¸ªåŠ¨ç‰©ç±»&quot;&gt;æ„é€ ä¸€ä¸ªåŠ¨ç‰©ç±»&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Mix-in&lt;/code&gt; åœ¨æœ‰äº›ç¼–ç¨‹ä¹¦ä¸­ä¹Ÿè¢«ç¿»è¯‘æˆã€Œæ··å…¥æ¨¡å¼ã€ã€‚æ ¹æ®å­—é¢æ„æ€ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Mix-in&lt;/code&gt; å°±æ˜¯é€šè¿‡â€œæ··å…¥â€é¢å¤–çš„åŠŸèƒ½ï¼Œä»è€Œç®€åŒ–å¤šå±‚æ¬¡çš„å¤æ‚ç»§æ‰¿å…³ç³»ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬ä¸¾ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ã€‚å‡å¦‚æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Animal&lt;/code&gt; ç±»ï¼Œå¹¶ä¸”è¦å®ç°ä¸€ä¸‹å››ç§åŠ¨ç‰©çš„å®šä¹‰ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dog&lt;/code&gt; - ç‹—&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Bat&lt;/code&gt; - è™è &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Parrot&lt;/code&gt; - é¹¦é¹‰&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ostrich&lt;/code&gt; - é¸µé¸Ÿ&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¦‚æœæŒ‰ç…§å“ºä¹³åŠ¨ç‰©å’Œé¸Ÿç±»åŠ¨ç‰©æ¥å½’ç±»ï¼Œåˆ™å¯ä»¥è®¾è®¡å‡ºä»¥ä¸‹ç±»çš„å±‚çº§å…³ç³»ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia20201008221926.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä½†å¦‚æœæŒ‰ç…§â€œèƒ½è·‘â€å’Œâ€œèƒ½é£â€æ¥å½’ç±»ï¼Œåˆ™åº”è¯¥è®¾è®¡ä»¥ä¸‹çš„ç±»å±‚æ¬¡ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia20201008221940.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­åˆæƒ³æ‹¥æœ‰ä¹‹å‰å“ºä¹³åŠ¨ç‰©å’Œé¸Ÿç±»åŠ¨ç‰©ä¹Ÿå¢åŠ è¿›æ¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦è®¾è®¡æ›´åŠ å¤æ‚çš„å±‚æ¬¡ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;åŠ¨ç‰©
    &lt;ul&gt;
      &lt;li&gt;å“ºä¹³åŠ¨ç‰©ï¼ˆMammalï¼‰
        &lt;ul&gt;
          &lt;li&gt;èƒ½é£ï¼ˆMFlyï¼‰&lt;/li&gt;
          &lt;li&gt;èƒ½è·‘ï¼ˆMRunï¼‰&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;é¸Ÿç±»åŠ¨ç‰©ï¼ˆBirdï¼‰
        &lt;ul&gt;
          &lt;li&gt;èƒ½é£ï¼ˆBFlyï¼‰&lt;/li&gt;
          &lt;li&gt;èƒ½è·‘ï¼ˆBRunï¼‰&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia20201008221955.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœç»§ç»­å¢åŠ åˆ†ç±»æ‰‹æ®µï¼Œä¾‹å¦‚â€œå® ç‰©ç±»â€å’Œâ€œéå® ç‰©ç±»â€ï¼Œåˆ™ç±»çš„æ•°é‡å°±ä¼šä»¥æŒ‡æ•°çº§åˆ«å¢é•¿ï¼Œéš¾ä»¥ç»´æŠ¤ä¸”å¯è¯»æ€§æå·®ã€‚&lt;/p&gt;

&lt;p&gt;é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥ç”¨ä»€ä¹ˆæ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ&lt;/p&gt;

&lt;h2 id=&quot;ä½¿ç”¨å¤šç»§æ‰¿è§£å†³&quot;&gt;ä½¿ç”¨å¤šç»§æ‰¿è§£å†³&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§å“ºä¹³åŠ¨ç‰©å’Œé¸Ÿç±»åŠ¨ç‰©æ¥è¿›è¡Œç»§æ‰¿å…³ç³»çš„æè¿°ã€‚ç”±äº Python æ”¯æŒå¤šç»§æ‰¿è¯­æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸‹é¢ç”¨ Python æ¥æè¿°ä¸€ä¸‹ä½¿ç”¨å¤šç»§æ‰¿æ¥æè¿°ä¸Šè¿°åœºæ™¯ï¼š&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Animal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;pass&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# åŠ¨ç‰©å¤§ç±»
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Mammal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Animal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;pass&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Bird&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Animal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;pass&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç°åœ¨ï¼Œæˆ‘ä»¬ç»™åŠ¨ç‰©åŠ ä¸ŠåŠ ä¸Š &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Runnable&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Flyable&lt;/code&gt; çš„åŠŸèƒ½ï¼Œå½“æˆ‘ä»¬å®šä¹‰å¥½è¿™ä¸¤ä¸ªæè¿°èƒ½åŠ›çš„ç±»ï¼Œä½¿ç”¨å¤šç»§æ‰¿æ¥æè¿°æ¯ä¸ªåŠ¨ç‰©å³å¯ï¼š&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# æè¿°èƒ½åŠ›çš„ç±»
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Runnable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Running...'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Flyable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;fly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Flying...'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# æ¯ä¸ªåŠ¨ç‰©
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Mammal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Runnable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;pass&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Bat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Mammal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Flyable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;pass&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;é€šè¿‡å¤šé‡ç»§æ‰¿ï¼Œä¸€ä¸ªå­ç±»å¯ä»¥è·å¾—å¤šä¸ªçˆ¶ç±»çš„æ‰€æœ‰åŠŸèƒ½ï¼Œå¹¶ä¸”å…¶ç»§æ‰¿çš„å…³ç³»æ ‘å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia20201008222008.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;å¤šç»§æ‰¿çš„é—®é¢˜&quot;&gt;å¤šç»§æ‰¿çš„é—®é¢˜&lt;/h2&gt;

&lt;p&gt;Ruby è¿™é—¨è¯­è¨€æ˜¯ä¸æ”¯æŒå¤šç»§æ‰¿çš„ï¼Œå–è€Œä»£ä¹‹æ˜¯ä½¿ç”¨ Mix-inã€‚é‚£ä¹ˆå¤šç»§æ‰¿åˆ°åº•æœ‰ä»€ä¹ˆæ ·çš„é—®é¢˜å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;åœ¨ã€Œæ¾æœ¬è¡Œå¼˜çš„ç¨‹åºä¸–ç•Œã€ä¸­ï¼Œä½œè€…åˆ—ä¸¾äº†ä»¥ä¸‹ä¸‰ç‚¹ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;ç»“æ„å¤æ‚åŒ–&lt;/strong&gt; - å¦‚æœæ˜¯å•ç»§æ‰¿ï¼Œä¸€ä¸ªç±»çš„çˆ¶ç±»æ˜¯ä»€ä¹ˆï¼Œçˆ¶ç±»çš„çˆ¶ç±»æ˜¯ä»€ä¹ˆï¼Œè¿™äº›ååˆ†æ˜ç¡®ã€‚å› ä¸ºå•ä¸€ç»§æ‰¿å…³ç³»ä¸­ï¼Œæ˜¯ä¸€æ£µå¤šå‰æ ‘ç»“æ„ã€‚ä½†æ˜¯å¦‚æœæ˜¯å¤šé‡ç»§æ‰¿ï¼Œç»§æ‰¿å…³ç³»å°±ååˆ†å¤æ‚äº†ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ä¼˜å…ˆé¡ºåºæ¨¡ç³Š&lt;/strong&gt; - å‡å¦‚æœ‰ Aã€C åŒæ—¶ç»§æ‰¿äº†åŸºç±»ï¼ŒB ç»§æ‰¿äº† Aï¼Œç„¶å D åˆåŒæ—¶ç»§æ‰¿äº† B å’Œ Cï¼Œæ‰€ä»¥æ­¤æ—¶ D ç»§æ‰¿çˆ¶ç±»æ–¹æ³•çš„é¡ºåºåº”è¯¥æ˜¯ D â‡’ B â‡’ A â‡’ C è¿˜æ˜¯ D â‡’ B â‡’ C â‡’ Aï¼Ÿåˆæˆ–è€…æ˜¯å…¶ä»–é¡ºåºï¼Ÿå¦‚æ­¤ä¼˜å…ˆé¡ºåºååˆ†æ¨¡ç³Šã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;åŠŸèƒ½å†²çª&lt;/strong&gt; - å› ä¸ºå¤šé‡ç»§æ‰¿æœ‰å¤šä¸ªçˆ¶ç±»ï¼Œæ‰€ä»¥å½“ä¸åŒçš„çˆ¶ç±»ä¸­æ›´æœ‰ç›¸åŒçš„æ–¹æ³•æ—¶å°±ä¼šäº§ç”Ÿå†²çªã€‚å¦‚æœ B å’Œ C åŒæ—¶åˆæœ‰ç›¸åŒçš„æ–¹æ³•æ—¶ï¼ŒD ç»§æ‰¿çš„æ˜¯å“ªä¸ªå®ç°å°±ä¼šäº§ç”Ÿå†²çªã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä½†æ˜¯å•ä¸€ç»§æ‰¿åˆä¼šæœ‰ä¸Šæ–‡æåˆ°çš„ç¼ºé™·ã€‚é‚£ä¹ˆæˆ‘ä»¬è¦å¦‚ä½•å¹³è¡¡è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿå…¶å®æ–¹æ³•å¾ˆç®€å•ï¼Œ&lt;strong&gt;å¼•å…¥â€œå—é™åˆ¶çš„å¤šé‡ç»§æ‰¿â€ç‰¹æ€§å³å¯ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia20201008222026.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æŠ›å¼€å„ä¸ªç¼–ç¨‹è¯­è¨€åªè®¨è®ºé¢å‘å¯¹è±¡æ€æƒ³ï¼Œç»§æ‰¿å…³ç³»åœ¨æœ€ç»ˆçš„è¡¨ç°ç»“æœä¸Šå¾€å¾€åªæœ‰ä¸¤ç§å«ä¹‰ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;ç±»æœ‰å“ªäº›æ–¹æ³•&lt;/strong&gt; - å­ç±»å¯¹äºçˆ¶ç±»å±æ€§æè¿°çš„ç»§æ‰¿ï¼›&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ç±»çš„æ–¹æ³•å…·ä½“çš„å®ç°æ˜¯ä»€ä¹ˆæ ·çš„&lt;/strong&gt; - å­ç±»å¯¹äºçˆ¶ç±»æ–¹æ³•å®ç°é€»è¾‘çš„ç»§æ‰¿ï¼›&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åœ¨é™æ€è¯­è¨€ä¸­ï¼Œè¿™ä¸¤è€…çš„åŒºåˆ«æ›´åŠ çš„æ˜æ˜¾ï¼Œå‡ ä¹éƒ½æ˜¯ä»¥å…³é”®å­—æ¥åšå«ä¹‰çš„éš”ç¦»ã€‚ä¾‹å¦‚ Java ä¸­ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;extend&lt;/code&gt; å®ç°å•ä¸€ç»§æ‰¿ï¼Œä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;implements&lt;/code&gt; æ¥é—´æ¥å®ç°å¤šé‡ç»§æ‰¿ï¼›åœ¨ Swift ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿä¼šä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;protocol&lt;/code&gt; æ¥åŒºåˆ«ä¸¤ç§åœºæ™¯ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯ä»…ä»…æ˜¯åŒºåˆ†äº†ä¸Šè¿°ä¸¤ç§ç»§æ‰¿å«ä¹‰ï¼Œè¿™å¹¶ä¸å®Œç¾ã€‚Java ä¸­ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;implements&lt;/code&gt; æ¥å®ç°å¤šé‡ç»§æ‰¿ï¼Œè™½ç„¶é¿å…æ¥åŠŸèƒ½çš„å†²çªæ€§ï¼Œä½†æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;implements&lt;/code&gt; æ˜¯æ— æ³•å…±äº«çš„ï¼ˆè¿™é‡Œçš„å‰ææ˜¯ Java 8 ä¹‹å‰ï¼Œåœ¨ Java 8 ä¹‹åï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;interface&lt;/code&gt; å¯ä»¥ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;default&lt;/code&gt; å…³é”®å­—å¢åŠ é»˜è®¤å®ç°ï¼‰ï¼Œ&lt;strong&gt;å¦‚æœæƒ³å®ç°å…±äº«å°±è¦ç”¨ç»„åˆæ¨¡å¼æ¥è°ƒç”¨åˆ«çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class&lt;/code&gt; ä»è€Œå®ç°å…±é€šåŠŸèƒ½ï¼Œååˆ†éº»çƒ¦&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨å¦‚æ­¤èƒŒæ™¯ä¸‹æˆ‘ä»¬æ¥ä»‹ç» Ruby ä¸­çš„ Mix-in æ¨¡å¼ã€‚&lt;/p&gt;

&lt;h1 id=&quot;mix-in-ä»¥åŠå…¶æ„ä¹‰&quot;&gt;Mix-in ä»¥åŠå…¶æ„ä¹‰&lt;/h1&gt;

&lt;p&gt;ä¸Šé¢è¯´åˆ°ï¼Œæˆ‘ä»¬éœ€è¦æä¾›ä¸€ç§â€œå—é™åˆ¶çš„å¤šé‡ç»§æ‰¿â€çš„ç‰¹æ®Šçš„ç»§æ‰¿æ–¹å¼ï¼Œæˆ‘ä»¬å°†è¿™ç§ç»§æ‰¿ç®€åŒ–ç§°å‘¼ä¸º&lt;strong&gt;è§„æ ¼ç»§æ‰¿&lt;/strong&gt;ã€‚ç®€å•æ¥è®²ï¼Œ&lt;strong&gt;è§„æ ¼ç»§æ‰¿å°±æ˜¯æŒ‡ä¸ä½†ä¼šå°†æ–¹æ³•åç»§æ‰¿ä¸‹å»ï¼Œå¹¶ä¸”å¯ä»¥å®šä¹‰æŸäº›ç»§æ‰¿æ–¹æ³•çš„é»˜è®¤å®ç°ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¦‚æœä½ æ˜¯ Swift ç©å®¶ï¼Œé‚£ä¹ˆä¼šç«‹é©¬ååº”è¿‡æ¥ï¼Œè¿™å°±æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;protocol&lt;/code&gt; çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;extension&lt;/code&gt; é»˜è®¤å®ç°ã€‚&lt;/strong&gt;æ˜¯çš„ï¼ŒMix-in å°±æ˜¯è¿™ä¸ªå«ä¹‰ã€‚åœ¨ Ruby ä¸­ Mix-in çš„è¯­æ³•æ˜¯é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;include&lt;/code&gt; æ–¹å¼æ¥å®ç°çš„ï¼Œæˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­è¯´æ˜ä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Animal&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Mammal&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Animal&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Bird&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Animal&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;RunMixin&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;I can run&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;FlyMinxin&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;fly&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;I can fly&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dog&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Mammal&lt;/span&gt;
    &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;RunMixin&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Parrot&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Bird&lt;/span&gt;
    &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FlyMinxin&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;dog&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Dog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;dog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;# &quot;I can run&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;parrot&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Parrot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;parrot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;fly&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;# &quot;I can fly&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å°† Run å’Œ Fly çš„èƒ½åŠ›æŠ½è±¡æˆäº†ä¸¤ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module&lt;/code&gt; ï¼Œå½“æè¿°å¯¹åº” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class&lt;/code&gt; æ—¶éœ€è¦çš„æ—¶å€™ï¼Œå°±ä½¿ç”¨ Min-in æ¨¡å¼å°†å…¶ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;include&lt;/code&gt; å°±å¯ä»¥è·å¾—å¯¹åº”èƒ½åŠ›ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia20201008222041.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;é‚£ä¹ˆå¦‚æœæˆ‘ä»¬å°† Mammal å“ºä¹³åŠ¨ç‰©å’Œ Bird é¸Ÿç±»åŠ¨ç‰©å°è£…æˆ Mix-in ï¼Œå¹¶å°† Fly å’Œ Run åšæˆä¸€çº§ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class&lt;/code&gt; è¿™æ ·å¯ä»¥å—ï¼Ÿ&lt;strong&gt;åœ¨å®ç°ä¸Šæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å¹¶ä¸æ¨è&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œç®€å•è¯´ä¸€ä¸‹åŸå› ï¼šå› ä¸º Mix-in æœŸæœ›æ˜¯ä¸€ä¸ªè¡Œä¸ºçš„é›†åˆï¼Œå¹¶ä¸”è¿™ä¸ªè¡Œä¸ºå¯ä»¥æ·»åŠ åˆ°ä»»æ„çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class&lt;/code&gt; ä¸­ã€‚ä»æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œ&lt;strong&gt;ç»§æ‰¿æè¿°çš„æ˜¯â€œå®ƒæ˜¯ä»€ä¹ˆâ€ï¼Œè€Œ Mix-in æè¿°çš„æ˜¯â€œå®ƒèƒ½åšä»€ä¹ˆâ€&lt;/strong&gt;ã€‚ä»è¿™ä¸€ç‚¹å‡ºå‘ï¼Œ&lt;strong&gt;Mix-in çš„è®¾è®¡æ˜¯å•ä¸€èŒè´£çš„&lt;/strong&gt;ï¼Œå¹¶ä¸” &lt;strong&gt;Mix-in å®é™…ä¸Šå¯¹å®¿ä¸»ç±»ä¸€æ— æ‰€çŸ¥&lt;/strong&gt;ï¼Œ&lt;strong&gt;ä¹Ÿæœ‰ä¸€ç§æƒ…å†µæ˜¯åªè¦å®¿ä¸»ç±»æœ‰æŸä¸ªå±æ€§ï¼Œå°±å¯ä»¥åŠ å…¥ Mix-in&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h1 id=&quot;mix-in-in-cocoapods&quot;&gt;Mix-in in CocoaPods&lt;/h1&gt;

&lt;p&gt;åœ¨ CocoaPods çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config.rb&lt;/code&gt; ä¸­ï¼Œå…¶ä¸­æœ‰å¾ˆå¤šå…³äº Pods çš„é…ç½®å­—æ®µã€CocoaPods çš„ä¸€äº›å…³é”®ç›®å½•ï¼Œå¹¶ä¸”è¿˜æŒæœ‰ä¸€äº›å•ä¾‹çš„ Managerã€‚&lt;/p&gt;

&lt;p&gt;åœ¨&lt;a href=&quot;/2020/08/17/cocoapods-story-2.html&quot;&gt;ã€Œæ•´ä½“æŠŠæ¡ CocoaPods æ ¸å¿ƒç»„ä»¶ã€&lt;/a&gt;ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»æ¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod install&lt;/code&gt; çš„è¿‡ç¨‹éƒ½æ˜¯åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;installer.rb&lt;/code&gt; ä¸­å®Œæˆçš„ï¼Œè€Œè¿™ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Installer&lt;/code&gt; çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class&lt;/code&gt; ï¼Œä¸­çš„å®šä¹‰æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Pod&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Installer&lt;/span&gt;
		&lt;span class=&quot;nb&quot;&gt;autoload&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:Analyzer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;                     &lt;span class=&quot;s1&quot;&gt;'cocoapods/installer/analyzer'&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;autoload&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:InstallationOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;          &lt;span class=&quot;s1&quot;&gt;'cocoapods/installer/installation_options'&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;autoload&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:PostInstallHooksContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;      &lt;span class=&quot;s1&quot;&gt;'cocoapods/installer/post_install_hooks_context'&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#...&lt;/span&gt;

    &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Mixin&lt;/span&gt;
  
    &lt;span class=&quot;c1&quot;&gt;#...&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Installer&lt;/code&gt; æ‹¿å…¥äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Config::Mixin&lt;/code&gt; è¿™ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module&lt;/code&gt;ã€‚è€Œè¿™ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config&lt;/code&gt; å±æ€§å…¶å®å°±æ˜¯ CocoaPods ä¸­çš„&lt;strong&gt;ä¸€äº›å…¨å±€é…ç½®å˜é‡&lt;/strong&gt;å’Œ&lt;strong&gt;ä¸€äº›é…ç½®å­—æ®µ&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹å¦‚æˆ‘ä»¬åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;write_lockfiles&lt;/code&gt;  æ–¹æ³•ä¸­æ¥æŸ¥çœ‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config&lt;/code&gt; çš„ç”¨æ³•ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;write_lockfiles&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# è·å– lockfile æ•°æ®&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@lockfile&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;generate_lockfile&lt;/span&gt;
	
	&lt;span class=&quot;c1&quot;&gt;# å°† lockfile æ•°æ®å†™å…¥ Podfile.lock &lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;UI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;- Writing Lockfile in &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;UI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;lockfile_path&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@lockfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write_to_disk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;lockfile_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

	&lt;span class=&quot;c1&quot;&gt;# å°† lockfile æ•°æ®å†™å…¥ manifest.lock &lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;UI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;- Writing Manifest in &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;UI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sandbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;manifest_path&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@lockfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write_to_disk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sandbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;manifest_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™é‡Œé¢çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config&lt;/code&gt; å°±æ˜¯é€šè¿‡ Mix-in æ–¹å¼æ‹¿è¿›æ¥çš„å˜é‡ï¼Œæ„åœ¨æ›´åŠ å®¹æ˜“çš„å»è®¿é—®é‚£äº›å…¨å±€å˜é‡å’Œé…ç½®å­—æ®µã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬åœ¨å†™å…¥æ–‡ä»¶çš„ä½ç½®ä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼Œå¯ä»¥æ¸…æ¥šçš„æ‰“å° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lockfile_path&lt;/code&gt; ï¼›å½“ç„¶æˆ‘ä¹Ÿå¯ä»¥ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config&lt;/code&gt; æ‰“å°å…¶ä»–çš„é‡è¦ä¿¡æ¯ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;lockfile_path&lt;/span&gt;     &lt;span class=&quot;c1&quot;&gt;# lockfile çš„ Path&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;installation_root&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# æ‰§è¡Œ install çš„ç›®å½•&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;podfile&lt;/span&gt;           &lt;span class=&quot;c1&quot;&gt;# è§£æåçš„ Podfile å®ä¾‹&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sandbox&lt;/span&gt;           &lt;span class=&quot;c1&quot;&gt;# å½“å‰å·¥ç¨‹çš„ sandbox ç›®å½•&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å…·ä½“çš„å±æ€§å¯ä»¥æŸ¥çœ‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config.rb&lt;/code&gt; ä¸­çš„ä»£ç æ¥ç¡®å®šã€‚æ—¢ç„¶ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Config&lt;/code&gt; å·²ç»å˜æˆä¸€ä¸ª Mix-in ï¼Œåœ¨ CocoaPods ä¸­å¼•å…¥çš„åœ°æ–¹è‡ªç„¶å°±ä¼šå¾ˆå¤šäº†ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia20201008222206.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;ç®€å•è¯´ä¸€å¥-duck-typing-æ€æƒ³&quot;&gt;ç®€å•è¯´ä¸€å¥ Duck Typing æ€æƒ³&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä¸‹é¢æ˜¯ä¸€ç‚¹å¯¹äºç¼–ç¨‹æ€æƒ³çš„æ€è€ƒï¼Œå¯ä»¥ä¸çœ‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æœ€åæˆ‘ä»¬æ¥è¯´ä¸€ä¸ªé«˜çº§çš„ä¸œè¥¿ï¼ˆå…¶å®åªæ˜¯åå­—å¾ˆé«˜çº§ï¼‰ï¼Œé‚£å°±æ˜¯ Duck Typingï¼Œåœ¨å¾ˆå¤šä¹¦ä¸­ä¹Ÿè¢«ç§°ä½œ&lt;strong&gt;é¸­å­ç±»å‹&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;Duck Typing æè¿°çš„æ˜¯è¿™ä¹ˆä¸€ä¸ªæ€æƒ³ï¼š&lt;strong&gt;å¦‚æœä¸€ä¸ªäº‹ç‰©ä¸æ˜¯é¸­å­ï¼ˆDuckï¼‰ï¼Œå¦‚æœå®ƒèµ°èµ·è·¯æ¥åƒä¸€åªé¸­å­ï¼Œå«èµ·æ¥ä¹Ÿåƒä¸€åªé¸­å­ï¼Œå³æˆ‘ä»¬å¯ä»¥è¯´å®ƒä»è¡¨ç°æ¥çœ‹åƒä¸€åªé¸­å­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥è®¤ä¸ºå®ƒæ˜¯ä¸€åªé¸­å­&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ç§æ€æƒ³åº”ç”¨åˆ°ç¼–ç¨‹ä¸­æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ&lt;strong&gt;ç®€è€Œè¨€ä¹‹ï¼Œä¸€ä¸ªçº¦å®šè¦æ±‚å¿…é¡»å®ç°æŸäº›åŠŸèƒ½ï¼Œè€ŒæŸä¸ªç±»å®ç°ç±»è¿™ä¸ªåŠŸèƒ½ï¼Œå°±å¯ä»¥æŠŠè¿™ä¸ªç±»å½“ä½œçº¦å®šçš„å…·ä½“å®ç°æ¥ä½¿ç”¨&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬ä»è¿™ä¸ªè§’åº¦æ¥çœ‹ï¼Œå…¶å® Mix-in è¿™ç§æ¨¡å¼å°±æ›´åŠ åŒºåˆ«äºå¤šç»§æ‰¿ï¼Œè€Œæ˜¯ä¸€ç§ Duck Typing æ€æƒ³çš„è¯­æ³•ç³–ã€‚æˆ‘ä»¬ä¸ç”¨å°†ä¸€å±‚å±‚ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;interface&lt;/code&gt; å…¨éƒ¨ç»§æ‰¿ï¼Œè€Œæ˜¯&lt;strong&gt;å£°æ˜å³å®ç°&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;Duck Typing æ˜¯ä¸€ç§è®¾è®¡è¯­è¨€çš„æ€æƒ³ï¼Œå¦‚æœä½ æƒ³äº†è§£çš„æ›´å¤šï¼Œä¹Ÿå¯ä»¥ä» Duck Test è¿™ç§æµ‹è¯•æ–¹å¼å¼€å§‹äº†è§£ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia20201008222222.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h1&gt;

&lt;p&gt;æœ¬æ–‡ä» CocoaPods ä¸­ä½¿ç”¨åˆ°çš„ Ruby è¯­æ³•ç‰¹æ€§è¯´èµ·ï¼Œè®²è¿°äº†åœ¨ Ruby å½“ä¸­ï¼Œä¸ºäº†è§£å†³å¤šç»§æ‰¿ä¸­çš„é—®é¢˜ä»è€Œå¼•å…¥çš„ Mix-in æ¨¡å¼ï¼Œå¹¶ä¸” Ruby ä¹Ÿä¸ºå…¶å®šä¹‰äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;include&lt;/code&gt; å…³é”®å­—çš„è¯­æ³•ç³–ã€‚ä» Mix-in æ¨¡å¼é‡Œï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£å¤šç»§æ‰¿çš„ä¸€äº›ç¼ºç‚¹ï¼Œå¹¶ä¸”æ‡‚å¾—æå‡ºäº† Mix-in æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜ã€‚æœ€åç¨å¾®å¼•å…¥äº† Duck Typing è¿™ç§ç¨‹åºè®¾è®¡æ€æƒ³ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªè¡Œç ”ç©¶ã€‚&lt;/p&gt;

&lt;h1 id=&quot;çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†&quot;&gt;çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†&lt;/h1&gt;

&lt;p&gt;è¿™é‡Œç½—åˆ—äº†ä¸€äº›é—®é¢˜ç”¨æ¥è€ƒå¯Ÿä½ æ˜¯å¦å·²ç»æŒæ¡äº†è¿™ç¯‡æ–‡ç« ï¼Œå¦‚æœæ²¡æœ‰å»ºè®®ä½ åŠ å…¥&lt;strong&gt;æ”¶è—&lt;/strong&gt;å†æ¬¡é˜…è¯»ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ä»€ä¹ˆæ˜¯ Mix-inï¼Œå®ƒä¸å¤šç»§æ‰¿æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;Mix-in åœ¨å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸­æ˜¯å¦‚ä½•è½åœ°çš„ï¼Ÿåˆ†åˆ«è¯´è¯´ Javaã€Rubyã€Swiftï¼Ÿ&lt;/li&gt;
  &lt;li&gt;å¤šç»§æ‰¿çš„ç¼ºç‚¹æœ‰ä»€ä¹ˆï¼Ÿ&lt;/li&gt;
  &lt;li&gt;åœ¨ CocoaPods ä¸­æ˜¯å¦‚ä½•ä½¿ç”¨ Mix-in ç‰¹æ€§çš„ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;</content><author><name>å†¬ç“œ</name><email>gua@desgard.com</email></author><category term="CocoaPods å†é™©è®°" /><category term="Ruby in CocoaPods" /><category term="Ruby" /><summary type="html">CocoaPods æ˜¯ä½¿ç”¨ Ruby è¿™é—¨è„šæœ¬è¯­è¨€å®ç°çš„å·¥å…·ã€‚Ruby æœ‰å¾ˆå¤šä¼˜è´¨çš„ç‰¹æ€§è¢« CocoaPods æ‰€åˆ©ç”¨ï¼Œä¸ºäº†åœ¨åç»­çš„æºç é˜…è¯»ä¸­ä¸ä¼šè¢«è¿™äº›ç”¨æ³•é˜»å¡ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªç³»åˆ—ä¸­ï¼Œä¼šç»™å‡ºä¸€äº› CocoaPods çš„ç•ªå¤–ç¯‡ï¼Œæ¥ä»‹ç» Ruby åŠå…¶å½“ä¸­çš„ä¸€äº›è¯­è¨€æ€æƒ³ã€‚ é¢å‘å¯¹è±¡ä¸­çš„ç»§æ‰¿ æ„é€ ä¸€ä¸ªåŠ¨ç‰©ç±» Mix-in åœ¨æœ‰äº›ç¼–ç¨‹ä¹¦ä¸­ä¹Ÿè¢«ç¿»è¯‘æˆã€Œæ··å…¥æ¨¡å¼ã€ã€‚æ ¹æ®å­—é¢æ„æ€ï¼ŒMix-in å°±æ˜¯é€šè¿‡â€œæ··å…¥â€é¢å¤–çš„åŠŸèƒ½ï¼Œä»è€Œç®€åŒ–å¤šå±‚æ¬¡çš„å¤æ‚ç»§æ‰¿å…³ç³»ã€‚ æˆ‘ä»¬ä¸¾ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ã€‚å‡å¦‚æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ª Animal ç±»ï¼Œå¹¶ä¸”è¦å®ç°ä¸€ä¸‹å››ç§åŠ¨ç‰©çš„å®šä¹‰ï¼š Dog - ç‹— Bat - è™è  Parrot - é¹¦é¹‰ Ostrich - é¸µé¸Ÿ å¦‚æœæŒ‰ç…§å“ºä¹³åŠ¨ç‰©å’Œé¸Ÿç±»åŠ¨ç‰©æ¥å½’ç±»ï¼Œåˆ™å¯ä»¥è®¾è®¡å‡ºä»¥ä¸‹ç±»çš„å±‚çº§å…³ç³»ï¼š ä½†å¦‚æœæŒ‰ç…§â€œèƒ½è·‘â€å’Œâ€œèƒ½é£â€æ¥å½’ç±»ï¼Œåˆ™åº”è¯¥è®¾è®¡ä»¥ä¸‹çš„ç±»å±‚æ¬¡ï¼š ä½†æ˜¯åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­åˆæƒ³æ‹¥æœ‰ä¹‹å‰å“ºä¹³åŠ¨ç‰©å’Œé¸Ÿç±»åŠ¨ç‰©ä¹Ÿå¢åŠ è¿›æ¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦è®¾è®¡æ›´åŠ å¤æ‚çš„å±‚æ¬¡ï¼š åŠ¨ç‰© å“ºä¹³åŠ¨ç‰©ï¼ˆMammalï¼‰ èƒ½é£ï¼ˆMFlyï¼‰ èƒ½è·‘ï¼ˆMRunï¼‰ é¸Ÿç±»åŠ¨ç‰©ï¼ˆBirdï¼‰ èƒ½é£ï¼ˆBFlyï¼‰ èƒ½è·‘ï¼ˆBRunï¼‰ å¦‚æœç»§ç»­å¢åŠ åˆ†ç±»æ‰‹æ®µï¼Œä¾‹å¦‚â€œå® ç‰©ç±»â€å’Œâ€œéå® ç‰©ç±»â€ï¼Œåˆ™ç±»çš„æ•°é‡å°±ä¼šä»¥æŒ‡æ•°çº§åˆ«å¢é•¿ï¼Œéš¾ä»¥ç»´æŠ¤ä¸”å¯è¯»æ€§æå·®ã€‚ é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥ç”¨ä»€ä¹ˆæ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ ä½¿ç”¨å¤šç»§æ‰¿è§£å†³ é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§å“ºä¹³åŠ¨ç‰©å’Œé¸Ÿç±»åŠ¨ç‰©æ¥è¿›è¡Œç»§æ‰¿å…³ç³»çš„æè¿°ã€‚ç”±äº Python æ”¯æŒå¤šç»§æ‰¿è¯­æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸‹é¢ç”¨ Python æ¥æè¿°ä¸€ä¸‹ä½¿ç”¨å¤šç»§æ‰¿æ¥æè¿°ä¸Šè¿°åœºæ™¯ï¼š class Animal(object): pass # åŠ¨ç‰©å¤§ç±» class Mammal(Animal): pass class Bird(Animal): pass ç°åœ¨ï¼Œæˆ‘ä»¬ç»™åŠ¨ç‰©åŠ ä¸ŠåŠ ä¸Š Runnable å’Œ Flyable çš„åŠŸèƒ½ï¼Œå½“æˆ‘ä»¬å®šä¹‰å¥½è¿™ä¸¤ä¸ªæè¿°èƒ½åŠ›çš„ç±»ï¼Œä½¿ç”¨å¤šç»§æ‰¿æ¥æè¿°æ¯ä¸ªåŠ¨ç‰©å³å¯ï¼š # æè¿°èƒ½åŠ›çš„ç±» class Runnable(object): def run(self): print('Running...') class Flyable(object): def fly(self): print('Flying...') # æ¯ä¸ªåŠ¨ç‰© class Dog(Mammal, Runnable): pass class Bat(Mammal, Flyable): pass é€šè¿‡å¤šé‡ç»§æ‰¿ï¼Œä¸€ä¸ªå­ç±»å¯ä»¥è·å¾—å¤šä¸ªçˆ¶ç±»çš„æ‰€æœ‰åŠŸèƒ½ï¼Œå¹¶ä¸”å…¶ç»§æ‰¿çš„å…³ç³»æ ‘å¦‚ä¸‹ï¼š å¤šç»§æ‰¿çš„é—®é¢˜ Ruby è¿™é—¨è¯­è¨€æ˜¯ä¸æ”¯æŒå¤šç»§æ‰¿çš„ï¼Œå–è€Œä»£ä¹‹æ˜¯ä½¿ç”¨ Mix-inã€‚é‚£ä¹ˆå¤šç»§æ‰¿åˆ°åº•æœ‰ä»€ä¹ˆæ ·çš„é—®é¢˜å‘¢ï¼Ÿ åœ¨ã€Œæ¾æœ¬è¡Œå¼˜çš„ç¨‹åºä¸–ç•Œã€ä¸­ï¼Œä½œè€…åˆ—ä¸¾äº†ä»¥ä¸‹ä¸‰ç‚¹ï¼š ç»“æ„å¤æ‚åŒ– - å¦‚æœæ˜¯å•ç»§æ‰¿ï¼Œä¸€ä¸ªç±»çš„çˆ¶ç±»æ˜¯ä»€ä¹ˆï¼Œçˆ¶ç±»çš„çˆ¶ç±»æ˜¯ä»€ä¹ˆï¼Œè¿™äº›ååˆ†æ˜ç¡®ã€‚å› ä¸ºå•ä¸€ç»§æ‰¿å…³ç³»ä¸­ï¼Œæ˜¯ä¸€æ£µå¤šå‰æ ‘ç»“æ„ã€‚ä½†æ˜¯å¦‚æœæ˜¯å¤šé‡ç»§æ‰¿ï¼Œç»§æ‰¿å…³ç³»å°±ååˆ†å¤æ‚äº†ã€‚ ä¼˜å…ˆé¡ºåºæ¨¡ç³Š - å‡å¦‚æœ‰ Aã€C åŒæ—¶ç»§æ‰¿äº†åŸºç±»ï¼ŒB ç»§æ‰¿äº† Aï¼Œç„¶å D åˆåŒæ—¶ç»§æ‰¿äº† B å’Œ Cï¼Œæ‰€ä»¥æ­¤æ—¶ D ç»§æ‰¿çˆ¶ç±»æ–¹æ³•çš„é¡ºåºåº”è¯¥æ˜¯ D â‡’ B â‡’ A â‡’ C è¿˜æ˜¯ D â‡’ B â‡’ C â‡’ Aï¼Ÿåˆæˆ–è€…æ˜¯å…¶ä»–é¡ºåºï¼Ÿå¦‚æ­¤ä¼˜å…ˆé¡ºåºååˆ†æ¨¡ç³Šã€‚ åŠŸèƒ½å†²çª - å› ä¸ºå¤šé‡ç»§æ‰¿æœ‰å¤šä¸ªçˆ¶ç±»ï¼Œæ‰€ä»¥å½“ä¸åŒçš„çˆ¶ç±»ä¸­æ›´æœ‰ç›¸åŒçš„æ–¹æ³•æ—¶å°±ä¼šäº§ç”Ÿå†²çªã€‚å¦‚æœ B å’Œ C åŒæ—¶åˆæœ‰ç›¸åŒçš„æ–¹æ³•æ—¶ï¼ŒD ç»§æ‰¿çš„æ˜¯å“ªä¸ªå®ç°å°±ä¼šäº§ç”Ÿå†²çªã€‚ ä½†æ˜¯å•ä¸€ç»§æ‰¿åˆä¼šæœ‰ä¸Šæ–‡æåˆ°çš„ç¼ºé™·ã€‚é‚£ä¹ˆæˆ‘ä»¬è¦å¦‚ä½•å¹³è¡¡è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿå…¶å®æ–¹æ³•å¾ˆç®€å•ï¼Œå¼•å…¥â€œå—é™åˆ¶çš„å¤šé‡ç»§æ‰¿â€ç‰¹æ€§å³å¯ã€‚ æŠ›å¼€å„ä¸ªç¼–ç¨‹è¯­è¨€åªè®¨è®ºé¢å‘å¯¹è±¡æ€æƒ³ï¼Œç»§æ‰¿å…³ç³»åœ¨æœ€ç»ˆçš„è¡¨ç°ç»“æœä¸Šå¾€å¾€åªæœ‰ä¸¤ç§å«ä¹‰ï¼š ç±»æœ‰å“ªäº›æ–¹æ³• - å­ç±»å¯¹äºçˆ¶ç±»å±æ€§æè¿°çš„ç»§æ‰¿ï¼› ç±»çš„æ–¹æ³•å…·ä½“çš„å®ç°æ˜¯ä»€ä¹ˆæ ·çš„ - å­ç±»å¯¹äºçˆ¶ç±»æ–¹æ³•å®ç°é€»è¾‘çš„ç»§æ‰¿ï¼› åœ¨é™æ€è¯­è¨€ä¸­ï¼Œè¿™ä¸¤è€…çš„åŒºåˆ«æ›´åŠ çš„æ˜æ˜¾ï¼Œå‡ ä¹éƒ½æ˜¯ä»¥å…³é”®å­—æ¥åšå«ä¹‰çš„éš”ç¦»ã€‚ä¾‹å¦‚ Java ä¸­ç”¨ extend å®ç°å•ä¸€ç»§æ‰¿ï¼Œä½¿ç”¨ implements æ¥é—´æ¥å®ç°å¤šé‡ç»§æ‰¿ï¼›åœ¨ Swift ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿä¼šä½¿ç”¨ class å’Œ protocol æ¥åŒºåˆ«ä¸¤ç§åœºæ™¯ã€‚ ä½†æ˜¯ä»…ä»…æ˜¯åŒºåˆ†äº†ä¸Šè¿°ä¸¤ç§ç»§æ‰¿å«ä¹‰ï¼Œè¿™å¹¶ä¸å®Œç¾ã€‚Java ä¸­ç”¨ implements æ¥å®ç°å¤šé‡ç»§æ‰¿ï¼Œè™½ç„¶é¿å…æ¥åŠŸèƒ½çš„å†²çªæ€§ï¼Œä½†æ˜¯ implements æ˜¯æ— æ³•å…±äº«çš„ï¼ˆè¿™é‡Œçš„å‰ææ˜¯ Java 8 ä¹‹å‰ï¼Œåœ¨ Java 8 ä¹‹åï¼Œinterface å¯ä»¥ä½¿ç”¨ default å…³é”®å­—å¢åŠ é»˜è®¤å®ç°ï¼‰ï¼Œå¦‚æœæƒ³å®ç°å…±äº«å°±è¦ç”¨ç»„åˆæ¨¡å¼æ¥è°ƒç”¨åˆ«çš„ class ä»è€Œå®ç°å…±é€šåŠŸèƒ½ï¼Œååˆ†éº»çƒ¦ã€‚ åœ¨å¦‚æ­¤èƒŒæ™¯ä¸‹æˆ‘ä»¬æ¥ä»‹ç» Ruby ä¸­çš„ Mix-in æ¨¡å¼ã€‚ Mix-in ä»¥åŠå…¶æ„ä¹‰ ä¸Šé¢è¯´åˆ°ï¼Œæˆ‘ä»¬éœ€è¦æä¾›ä¸€ç§â€œå—é™åˆ¶çš„å¤šé‡ç»§æ‰¿â€çš„ç‰¹æ®Šçš„ç»§æ‰¿æ–¹å¼ï¼Œæˆ‘ä»¬å°†è¿™ç§ç»§æ‰¿ç®€åŒ–ç§°å‘¼ä¸ºè§„æ ¼ç»§æ‰¿ã€‚ç®€å•æ¥è®²ï¼Œè§„æ ¼ç»§æ‰¿å°±æ˜¯æŒ‡ä¸ä½†ä¼šå°†æ–¹æ³•åç»§æ‰¿ä¸‹å»ï¼Œå¹¶ä¸”å¯ä»¥å®šä¹‰æŸäº›ç»§æ‰¿æ–¹æ³•çš„é»˜è®¤å®ç°ã€‚ å¦‚æœä½ æ˜¯ Swift ç©å®¶ï¼Œé‚£ä¹ˆä¼šç«‹é©¬ååº”è¿‡æ¥ï¼Œè¿™å°±æ˜¯ protocol çš„ extension é»˜è®¤å®ç°ã€‚æ˜¯çš„ï¼ŒMix-in å°±æ˜¯è¿™ä¸ªå«ä¹‰ã€‚åœ¨ Ruby ä¸­ Mix-in çš„è¯­æ³•æ˜¯é€šè¿‡ module å’Œ include æ–¹å¼æ¥å®ç°çš„ï¼Œæˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­è¯´æ˜ä¸€ä¸‹ã€‚ class Animal end class Mammal &amp;lt; Animal end class Bird &amp;lt; Animal end module RunMixin def run puts &quot;I can run&quot; end end module FlyMinxin def fly puts &quot;I can fly&quot; end end class Dog &amp;lt; Mammal include RunMixin end class Parrot &amp;lt; Bird include FlyMinxin end dog = Dog.new dog.run # &quot;I can run&quot; parrot = Parrot.new parrot.fly # &quot;I can fly&quot; é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å°† Run å’Œ Fly çš„èƒ½åŠ›æŠ½è±¡æˆäº†ä¸¤ä¸ª module ï¼Œå½“æè¿°å¯¹åº” class æ—¶éœ€è¦çš„æ—¶å€™ï¼Œå°±ä½¿ç”¨ Min-in æ¨¡å¼å°†å…¶ include å°±å¯ä»¥è·å¾—å¯¹åº”èƒ½åŠ›ã€‚ é‚£ä¹ˆå¦‚æœæˆ‘ä»¬å°† Mammal å“ºä¹³åŠ¨ç‰©å’Œ Bird é¸Ÿç±»åŠ¨ç‰©å°è£…æˆ Mix-in ï¼Œå¹¶å°† Fly å’Œ Run åšæˆä¸€çº§ class è¿™æ ·å¯ä»¥å—ï¼Ÿåœ¨å®ç°ä¸Šæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å¹¶ä¸æ¨èã€‚ è¿™é‡Œç®€å•è¯´ä¸€ä¸‹åŸå› ï¼šå› ä¸º Mix-in æœŸæœ›æ˜¯ä¸€ä¸ªè¡Œä¸ºçš„é›†åˆï¼Œå¹¶ä¸”è¿™ä¸ªè¡Œä¸ºå¯ä»¥æ·»åŠ åˆ°ä»»æ„çš„ class ä¸­ã€‚ä»æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œç»§æ‰¿æè¿°çš„æ˜¯â€œå®ƒæ˜¯ä»€ä¹ˆâ€ï¼Œè€Œ Mix-in æè¿°çš„æ˜¯â€œå®ƒèƒ½åšä»€ä¹ˆâ€ã€‚ä»è¿™ä¸€ç‚¹å‡ºå‘ï¼ŒMix-in çš„è®¾è®¡æ˜¯å•ä¸€èŒè´£çš„ï¼Œå¹¶ä¸” Mix-in å®é™…ä¸Šå¯¹å®¿ä¸»ç±»ä¸€æ— æ‰€çŸ¥ï¼Œä¹Ÿæœ‰ä¸€ç§æƒ…å†µæ˜¯åªè¦å®¿ä¸»ç±»æœ‰æŸä¸ªå±æ€§ï¼Œå°±å¯ä»¥åŠ å…¥ Mix-inã€‚ Mix-in in CocoaPods åœ¨ CocoaPods çš„ config.rb ä¸­ï¼Œå…¶ä¸­æœ‰å¾ˆå¤šå…³äº Pods çš„é…ç½®å­—æ®µã€CocoaPods çš„ä¸€äº›å…³é”®ç›®å½•ï¼Œå¹¶ä¸”è¿˜æŒæœ‰ä¸€äº›å•ä¾‹çš„ Managerã€‚ åœ¨ã€Œæ•´ä½“æŠŠæ¡ CocoaPods æ ¸å¿ƒç»„ä»¶ã€ä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»æ¥ pod install çš„è¿‡ç¨‹éƒ½æ˜¯åœ¨ installer.rb ä¸­å®Œæˆçš„ï¼Œè€Œè¿™ä¸ª Installer çš„ class ï¼Œä¸­çš„å®šä¹‰æ˜¯è¿™æ ·çš„ï¼š module Pod class Installer autoload :Analyzer, 'cocoapods/installer/analyzer' autoload :InstallationOptions, 'cocoapods/installer/installation_options' autoload :PostInstallHooksContext, 'cocoapods/installer/post_install_hooks_context' #... include Config::Mixin #... end end æˆ‘ä»¬å¯ä»¥çœ‹åˆ° Installer æ‹¿å…¥äº† Config::Mixin è¿™ä¸ª moduleã€‚è€Œè¿™ä¸ª config å±æ€§å…¶å®å°±æ˜¯ CocoaPods ä¸­çš„ä¸€äº›å…¨å±€é…ç½®å˜é‡å’Œä¸€äº›é…ç½®å­—æ®µã€‚ ä¾‹å¦‚æˆ‘ä»¬åœ¨ write_lockfiles æ–¹æ³•ä¸­æ¥æŸ¥çœ‹ config çš„ç”¨æ³•ï¼š def write_lockfiles # è·å– lockfile æ•°æ® @lockfile = generate_lockfile # å°† lockfile æ•°æ®å†™å…¥ Podfile.lock UI.message &quot;- Writing Lockfile in #{UI.path config.lockfile_path}&quot; do @lockfile.write_to_disk(config.lockfile_path) end # å°† lockfile æ•°æ®å†™å…¥ manifest.lock UI.message &quot;- Writing Manifest in #{UI.path sandbox.manifest_path}&quot; do @lockfile.write_to_disk(sandbox.manifest_path) end end è¿™é‡Œé¢çš„ config å°±æ˜¯é€šè¿‡ Mix-in æ–¹å¼æ‹¿è¿›æ¥çš„å˜é‡ï¼Œæ„åœ¨æ›´åŠ å®¹æ˜“çš„å»è®¿é—®é‚£äº›å…¨å±€å˜é‡å’Œé…ç½®å­—æ®µã€‚ æˆ‘ä»¬åœ¨å†™å…¥æ–‡ä»¶çš„ä½ç½®ä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼Œå¯ä»¥æ¸…æ¥šçš„æ‰“å° lockfile_path ï¼›å½“ç„¶æˆ‘ä¹Ÿå¯ä»¥ä½¿ç”¨ config æ‰“å°å…¶ä»–çš„é‡è¦ä¿¡æ¯ï¼š config.lockfile_path # lockfile çš„ Path config.installation_root # æ‰§è¡Œ install çš„ç›®å½• config.podfile # è§£æåçš„ Podfile å®ä¾‹ config.sandbox # å½“å‰å·¥ç¨‹çš„ sandbox ç›®å½• # ... å…·ä½“çš„å±æ€§å¯ä»¥æŸ¥çœ‹ config.rb ä¸­çš„ä»£ç æ¥ç¡®å®šã€‚æ—¢ç„¶ Config å·²ç»å˜æˆä¸€ä¸ª Mix-in ï¼Œåœ¨ CocoaPods ä¸­å¼•å…¥çš„åœ°æ–¹è‡ªç„¶å°±ä¼šå¾ˆå¤šäº†ï¼š ç®€å•è¯´ä¸€å¥ Duck Typing æ€æƒ³ ä¸‹é¢æ˜¯ä¸€ç‚¹å¯¹äºç¼–ç¨‹æ€æƒ³çš„æ€è€ƒï¼Œå¯ä»¥ä¸çœ‹ã€‚ æœ€åæˆ‘ä»¬æ¥è¯´ä¸€ä¸ªé«˜çº§çš„ä¸œè¥¿ï¼ˆå…¶å®åªæ˜¯åå­—å¾ˆé«˜çº§ï¼‰ï¼Œé‚£å°±æ˜¯ Duck Typingï¼Œåœ¨å¾ˆå¤šä¹¦ä¸­ä¹Ÿè¢«ç§°ä½œé¸­å­ç±»å‹ã€‚ Duck Typing æè¿°çš„æ˜¯è¿™ä¹ˆä¸€ä¸ªæ€æƒ³ï¼šå¦‚æœä¸€ä¸ªäº‹ç‰©ä¸æ˜¯é¸­å­ï¼ˆDuckï¼‰ï¼Œå¦‚æœå®ƒèµ°èµ·è·¯æ¥åƒä¸€åªé¸­å­ï¼Œå«èµ·æ¥ä¹Ÿåƒä¸€åªé¸­å­ï¼Œå³æˆ‘ä»¬å¯ä»¥è¯´å®ƒä»è¡¨ç°æ¥çœ‹åƒä¸€åªé¸­å­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥è®¤ä¸ºå®ƒæ˜¯ä¸€åªé¸­å­ã€‚ è¿™ç§æ€æƒ³åº”ç”¨åˆ°ç¼–ç¨‹ä¸­æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿç®€è€Œè¨€ä¹‹ï¼Œä¸€ä¸ªçº¦å®šè¦æ±‚å¿…é¡»å®ç°æŸäº›åŠŸèƒ½ï¼Œè€ŒæŸä¸ªç±»å®ç°ç±»è¿™ä¸ªåŠŸèƒ½ï¼Œå°±å¯ä»¥æŠŠè¿™ä¸ªç±»å½“ä½œçº¦å®šçš„å…·ä½“å®ç°æ¥ä½¿ç”¨ã€‚ æˆ‘ä»¬ä»è¿™ä¸ªè§’åº¦æ¥çœ‹ï¼Œå…¶å® Mix-in è¿™ç§æ¨¡å¼å°±æ›´åŠ åŒºåˆ«äºå¤šç»§æ‰¿ï¼Œè€Œæ˜¯ä¸€ç§ Duck Typing æ€æƒ³çš„è¯­æ³•ç³–ã€‚æˆ‘ä»¬ä¸ç”¨å°†ä¸€å±‚å±‚ interface å…¨éƒ¨ç»§æ‰¿ï¼Œè€Œæ˜¯å£°æ˜å³å®ç°ã€‚ Duck Typing æ˜¯ä¸€ç§è®¾è®¡è¯­è¨€çš„æ€æƒ³ï¼Œå¦‚æœä½ æƒ³äº†è§£çš„æ›´å¤šï¼Œä¹Ÿå¯ä»¥ä» Duck Test è¿™ç§æµ‹è¯•æ–¹å¼å¼€å§‹äº†è§£ã€‚ æ€»ç»“ æœ¬æ–‡ä» CocoaPods ä¸­ä½¿ç”¨åˆ°çš„ Ruby è¯­æ³•ç‰¹æ€§è¯´èµ·ï¼Œè®²è¿°äº†åœ¨ Ruby å½“ä¸­ï¼Œä¸ºäº†è§£å†³å¤šç»§æ‰¿ä¸­çš„é—®é¢˜ä»è€Œå¼•å…¥çš„ Mix-in æ¨¡å¼ï¼Œå¹¶ä¸” Ruby ä¹Ÿä¸ºå…¶å®šä¹‰äº† module å’Œ include å…³é”®å­—çš„è¯­æ³•ç³–ã€‚ä» Mix-in æ¨¡å¼é‡Œï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£å¤šç»§æ‰¿çš„ä¸€äº›ç¼ºç‚¹ï¼Œå¹¶ä¸”æ‡‚å¾—æå‡ºäº† Mix-in æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜ã€‚æœ€åç¨å¾®å¼•å…¥äº† Duck Typing è¿™ç§ç¨‹åºè®¾è®¡æ€æƒ³ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªè¡Œç ”ç©¶ã€‚ çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç† è¿™é‡Œç½—åˆ—äº†ä¸€äº›é—®é¢˜ç”¨æ¥è€ƒå¯Ÿä½ æ˜¯å¦å·²ç»æŒæ¡äº†è¿™ç¯‡æ–‡ç« ï¼Œå¦‚æœæ²¡æœ‰å»ºè®®ä½ åŠ å…¥æ”¶è—å†æ¬¡é˜…è¯»ï¼š ä»€ä¹ˆæ˜¯ Mix-inï¼Œå®ƒä¸å¤šç»§æ‰¿æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ Mix-in åœ¨å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸­æ˜¯å¦‚ä½•è½åœ°çš„ï¼Ÿåˆ†åˆ«è¯´è¯´ Javaã€Rubyã€Swiftï¼Ÿ å¤šç»§æ‰¿çš„ç¼ºç‚¹æœ‰ä»€ä¹ˆï¼Ÿ åœ¨ CocoaPods ä¸­æ˜¯å¦‚ä½•ä½¿ç”¨ Mix-in ç‰¹æ€§çš„ï¼Ÿ</summary></entry><entry><title type="html">æ•´ä½“æŠŠæ¡ CocoaPods æ ¸å¿ƒç»„ä»¶</title><link href="https://www.desgard.com/2020/08/17/cocoapods-story-2.html" rel="alternate" type="text/html" title="æ•´ä½“æŠŠæ¡ CocoaPods æ ¸å¿ƒç»„ä»¶" /><published>2020-08-17T00:00:00-08:00</published><updated>2020-08-17T00:00:00-08:00</updated><id>https://www.desgard.com/2020/08/17/cocoapods-story-2</id><content type="html" xml:base="https://www.desgard.com/2020/08/17/cocoapods-story-2.html">&lt;h1 id=&quot;å¼•å­&quot;&gt;å¼•å­&lt;/h1&gt;

&lt;p&gt;åœ¨ä¸Šæ–‡ &lt;a href=&quot;/2020/06/11/cocoapods-story-1.html&quot;&gt;ç‰ˆæœ¬ç®¡ç†å·¥å…·åŠ Ruby å·¥å…·é“¾ç¯å¢ƒ&lt;/a&gt; ä¸­ï¼Œæˆ‘ä»¬èŠåˆ°å¦‚ä½•ç»Ÿä¸€ç®¡ç†å›¢é˜Ÿå°ä¼™ä¼´çš„ CocoaPods ç”Ÿäº§ç¯å¢ƒåŠä½¿ç”¨åˆ°çš„ Ruby å·¥å…·é“¾ã€‚ä»Šå¤©è®©æˆ‘ä»¬å°†ç›®å…‰è½¬åˆ° CocoaPods èº«ä¸Šï¼Œä¸€èµ·æ¥èŠèŠå®ƒçš„ä¸»è¦æ„æˆï¼Œä»¥åŠå„ä¸ªç»„ä»¶åœ¨æ•´ä¸ª Pods å·¥ä½œæµçš„å…³ç³»ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä¸ºäº†æ•´ä½“æŠŠæ¡ &lt;em&gt;CocoaPods&lt;/em&gt; è¿™ä¸ªé¡¹ç›®ï¼Œå»ºè®®å¤§å®¶å»å…¥é—¨ä¸€ä¸‹ Ruby è¿™é—¨è„šæœ¬è¯­è¨€ã€‚å¦å¤–æœ¬æ–‡åŸºäº CocoaPods 1.9.2 ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;cocoapods-çš„æ ¸å¿ƒç»„ä»¶&quot;&gt;CocoaPods çš„æ ¸å¿ƒç»„ä»¶&lt;/h1&gt;

&lt;p&gt;ä½œä¸ºåŒ…ç®¡ç†å·¥å…·ï¼ŒCocoaPods éšç€ Apple ç”Ÿæ€çš„è“¬å‹ƒå‘å±•ä¹Ÿåœ¨ä¸æ–­è¿­ä»£å’Œè¿›åŒ–ï¼Œå¹¶ä¸”å„éƒ¨åˆ†æ ¸å¿ƒåŠŸèƒ½ä¹Ÿéƒ½æ¼”åŒ–å‡ºç›¸å¯¹ç‹¬ç«‹çš„ç»„ä»¶ã€‚è¿™äº›åŠŸèƒ½ç‹¬ç«‹çš„ç»„ä»¶ï¼Œå‡æ‹†åˆ†å‡ºä¸€ä¸ªä¸ªç‹¬ç«‹çš„ Gem åŒ…ï¼Œè€Œ CocoaPods åˆ™æ˜¯è¿™äº›ç»„ä»¶çš„â€œé›†å¤§æˆè€…â€ã€‚&lt;/p&gt;

&lt;h2 id=&quot;cocoapods-ä¾èµ–æ€»è§ˆ&quot;&gt;CocoaPods ä¾èµ–æ€»è§ˆ&lt;/h2&gt;

&lt;p&gt;æˆ‘ä»¬çŸ¥é“åœ¨ Pod ç®¡ç†çš„é¡¹ç›®ä¸­ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; æ–‡ä»¶é‡Œæè¿°äº†å®ƒæ‰€ä¾èµ–çš„ dependenciesï¼Œç±»ä¼¼çš„ Gem çš„ä¾èµ–å¯ä»¥åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt; ä¸­æŸ¥çœ‹ã€‚é‚£ CocoaPods çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt; æœ‰å“ªäº›ä¾èµ–å‘¢ï¼Ÿ&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;SKIP_UNRELEASED_VERSIONS&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://rubygems.org'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gemspec&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'json'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:git&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://github.com/segiddins/json.git'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:branch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'seg-1.7.7-ruby-2.2'&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:development&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cp_gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'claide'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;                &lt;span class=&quot;s1&quot;&gt;'CLAide'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cp_gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-core'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;        &lt;span class=&quot;s1&quot;&gt;'Core'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1-9-stable'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cp_gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-deintegrate'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-deintegrate'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cp_gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-downloader'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;s1&quot;&gt;'cocoapods-downloader'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cp_gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-plugins'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;     &lt;span class=&quot;s1&quot;&gt;'cocoapods-plugins'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cp_gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-search'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;      &lt;span class=&quot;s1&quot;&gt;'cocoapods-search'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cp_gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-stats'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;       &lt;span class=&quot;s1&quot;&gt;'cocoapods-stats'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cp_gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-trunk'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;       &lt;span class=&quot;s1&quot;&gt;'cocoapods-trunk'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cp_gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-try'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;         &lt;span class=&quot;s1&quot;&gt;'cocoapods-try'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cp_gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'molinillo'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;             &lt;span class=&quot;s1&quot;&gt;'Molinillo'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cp_gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'nanaimo'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;               &lt;span class=&quot;s1&quot;&gt;'Nanaimo'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cp_gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'xcodeproj'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;             &lt;span class=&quot;s1&quot;&gt;'Xcodeproj'&lt;/span&gt;
   
  &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods-dependencies'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'~&amp;gt; 1.0.beta.1'&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# Integration tests&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'diffy'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'clintegracon'&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# Code Quality&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'inch_by_inch'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'rubocop'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'danger'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:debugging&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods_debug'&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'rb-fsevent'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'kicker'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'awesome_print'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ruby-prof'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:platforms&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:ruby&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt; ä¸­æˆ‘ä»¬çœ‹åˆ°å¾ˆå¤šé€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cp_gem&lt;/code&gt; è£…è½½çš„ Gem åº“ï¼Œå…¶æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;cp_gem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;repo_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'master'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;path: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SKIP_UNRELEASED_VERSIONS&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;opts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;
           &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;../&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;repo_name&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
         &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
           &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;https://github.com/CocoaPods/&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;repo_name&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.git&quot;&lt;/span&gt;
           &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:git&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:branch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
         &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;opts&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å®ƒæ˜¯ç”¨äºæ–¹ä¾¿å¼€å‘å’Œè°ƒè¯•ï¼Œå½“ &lt;em&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;**SKIP_UNRELEASED_VERSIONS**&lt;/code&gt;&lt;/em&gt; ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;false &amp;amp;&amp;amp; path&lt;/code&gt; ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;true&lt;/code&gt; æ—¶ä¼šä½¿ç”¨ä¸æœ¬åœ°çš„ &lt;em&gt;CocoaPods&lt;/em&gt; é¡¹ç›®åŒçº§ç›®å½•ä¸‹çš„ git ä»“åº“ï¼Œå¦åˆ™ä¼šä½¿ç”¨å¯¹åº”çš„é¡¹ç›®ç›´æ¥é€šè¿‡ Gem åŠ è½½ã€‚&lt;/p&gt;

&lt;p&gt;é€šè¿‡ç®€å•çš„ç›®å½•åˆ†å‰²å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt; ç®¡ç†ï¼Œå°±å®ç°äº†æœ€åŸºæœ¬åˆæœ€ç›´è§‚çš„&lt;strong&gt;çƒ­æ’æ‹”&lt;/strong&gt;ï¼Œå¯¹ç»„ä»¶å¼€å‘ååˆ†å‹å¥½ã€‚æ‰€ä»¥ä½ åªè¦å°†å¤šä¸ªä»“åº“å¦‚ä¸‹å›¾æ–¹å¼æ’åˆ—ï¼Œå³å¯å®ç°è·¨ä»“åº“ç»„ä»¶å¼€å‘ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;lrwxr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;  &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gua&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;staff&lt;/span&gt;    &lt;span class=&quot;mi&quot;&gt;31&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Jul&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;34&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;CocoaPods&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;lrwxr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;  &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gua&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;staff&lt;/span&gt;    &lt;span class=&quot;mi&quot;&gt;26&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Jul&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;31&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;27&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Core&lt;/span&gt; 
&lt;span class=&quot;n&quot;&gt;lrwxr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;  &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gua&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;staff&lt;/span&gt;    &lt;span class=&quot;mi&quot;&gt;31&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Jul&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;31&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Molinillo&lt;/span&gt; 
&lt;span class=&quot;n&quot;&gt;lrwxr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;  &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gua&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;staff&lt;/span&gt;    &lt;span class=&quot;mi&quot;&gt;31&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Aug&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Xcodeproj&lt;/span&gt; 
&lt;span class=&quot;n&quot;&gt;lrwxr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;  &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gua&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;staff&lt;/span&gt;    &lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Jul&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;31&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;14&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cocoapods&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;downloader&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;ç»„ä»¶æ„æˆå’Œå¯¹åº”èŒè´£&quot;&gt;ç»„ä»¶æ„æˆå’Œå¯¹åº”èŒè´£&lt;/h2&gt;

&lt;p&gt;é€šè¿‡ä¸Šé¢å¯¹äº &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt; çš„ç®€å•åˆ†æï¼Œå¯ä»¥çœ‹å‡º &lt;em&gt;CocoaPods&lt;/em&gt; ä¸ä»…ä»…æ˜¯ä¸€ä¸ªä»“åº“é‚£ä¹ˆç®€å•ï¼Œå®ƒä½œä¸ºä¸€ä¸ªä¸‰æ–¹åº“ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œå¯¹è‡ªèº«ç»„ä»¶çš„ç®¡ç†å’Œç»„ä»¶åŒ–ä¹Ÿæ˜¯ååˆ†è®²ç©¶çš„ã€‚æˆ‘ä»¬ç»§ç»­æ¥çœ‹è¿™ä»½ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt; ä¸­çš„æ ¸å¿ƒå¼€å‘ç»„ä»¶ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1597548346444-64c7e854-dc0c-4c68-b4d4-5d96724dacc0.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;claide&quot;&gt;CLAide&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;The CLAide gem is a simple command line parser, which provides an API that allows you to quickly create a full featured command-line interface.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/CocoaPods/CLAide&quot;&gt;CLAide&lt;/a&gt; è™½ç„¶æ˜¯ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œè§£é‡Šå™¨ï¼Œä½†å®ƒæä¾›äº†åŠŸèƒ½é½å…¨çš„å‘½ä»¤è¡Œç•Œé¢å’Œ APIã€‚å®ƒä¸ä»…è´Ÿè´£è§£ææˆ‘ä»¬ä½¿ç”¨åˆ°çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods&lt;/code&gt; å‘½ä»¤ï¼Œå¦‚ï¼š&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod install&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod update&lt;/code&gt; ç­‰ï¼Œè¿˜å¯ç”¨äºå°è£…å¸¸ç”¨çš„ä¸€äº›è„šæœ¬ï¼Œå°†å…¶æ‰“åŒ…æˆç®€å•çš„å‘½ä»¤è¡Œå°å·¥å…·ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ps. æ‰€è°“å‘½ä»¤è¡Œè§£é‡Šå™¨å°±æ˜¯ä»æ ‡å‡†è¾“å…¥æˆ–è€…æ–‡ä»¶ä¸­è¯»å–å‘½ä»¤å¹¶æ‰§è¡Œçš„ç¨‹åºã€‚è¯¦è§ &lt;a href=&quot;https://www.wikiwand.com/en/Command-line_argument_parsing&quot;&gt;Wiki&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;cocoapods-core&quot;&gt;cocoapods-core&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;The CocoaPods-Core gem provides support to work with the models of CocoaPods, for example the Podspecs or the Podfile.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/CocoaPods/Core&quot;&gt;CocoaPods-Core&lt;/a&gt; ç”¨äº CocoaPods ä¸­æ¨¡æ¿æ–‡ä»¶çš„è§£æï¼ŒåŒ…æ‹¬ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.podspec&lt;/code&gt;ï¼Œä»¥åŠæ‰€æœ‰çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.lock&lt;/code&gt; æ–‡ä»¶ä¸­ç‰¹æ®Šçš„ YAML æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;h3 id=&quot;cocoapods-downloader&quot;&gt;cocoapods-downloader&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;The Cocoapods-downloader gem is a small library that provides downloaders for various source control types (HTTP/SVN/Git/Mercurial). It can deal with tags, commits, revisions, branches, extracting files from zips and almost anything these source control system would use.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/CocoaPods/cocoapods-downloader&quot;&gt;Cocoapods-Downloader&lt;/a&gt; æ˜¯ç”¨äºä¸‹è½½æºç çš„å°å·¥å…·ï¼Œå®ƒæ”¯æŒå„ç§ç±»å‹çš„ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼ŒåŒ…æ‹¬ HTTP / SVN / Git / Mercurialã€‚å®ƒå¯ä»¥æä¾› &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tags&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;commites&lt;/code&gt;ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;revisions&lt;/code&gt;ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;branches&lt;/code&gt; ä»¥åŠ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;zips&lt;/code&gt; æ–‡ä»¶çš„ä¸‹è½½å’Œè§£å‹ç¼©æ“ä½œã€‚&lt;/p&gt;

&lt;h3 id=&quot;molinillo&quot;&gt;Molinillo&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;The Molinillo gem is a generic dependency resolution algorithm, used in CocoaPods, Bundler and RubyGems.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/CocoaPods/Molinillo/blob/master/ARCHITECTURE.md&quot;&gt;Molinillo&lt;/a&gt; æ˜¯ CocoaPods å¯¹äºä¾èµ–ä»²è£ç®—æ³•çš„å°è£…ï¼Œå®ƒæ˜¯ä¸€ä¸ªå…·æœ‰å‰å‘æ£€å¯Ÿçš„å›æº¯ç®—æ³•ã€‚ä¸ä»…åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods&lt;/code&gt; ä¸­ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Bundler&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RubyGems&lt;/code&gt; ä¹Ÿæ˜¯ä½¿ç”¨çš„è¿™ä¸€å¥—ä»²è£ç®—æ³•ã€‚&lt;/p&gt;

&lt;h3 id=&quot;xcodeproj&quot;&gt;Xcodeproj&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;The Xcodeproj gem lets you create and modify Xcode projects from Ruby. Script boring management tasks or build Xcode-friendly libraries. Also includes support for Xcode workspaces (.xcworkspace) and configuration files (.xcconfig).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/CocoaPods/Xcodeproj&quot;&gt;Xcodeproj&lt;/a&gt; å¯é€šè¿‡ Ruby æ¥æ“ä½œ Xcode é¡¹ç›®çš„åˆ›å»ºå’Œç¼–è¾‘ç­‰ã€‚å¯å‹å¥½çš„æ”¯æŒ Xcode é¡¹ç›®çš„è„šæœ¬ç®¡ç†å’Œ libraries æ„å»ºï¼Œä»¥åŠ Xcode å·¥ä½œç©ºé—´ (.xcworkspace) Â å’Œé…ç½®æ–‡ä»¶ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.xcconfig&lt;/code&gt; çš„ç®¡ç†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;cocoapods-plugins&quot;&gt;cocoapods-plugins&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;CocoaPods plugin which shows info about available CocoaPods plugins or helps you get started developing a new plugin. Yeah, itâ€™s very meta.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cocoapods-plugins&lt;/code&gt; æ’ä»¶ç®¡ç†åŠŸèƒ½ï¼Œå…¶ä¸­æœ‰ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod plugin&lt;/code&gt; å…¨å¥—å‘½ä»¤ï¼Œæ”¯æŒå¯¹äº CocoaPods æ’ä»¶çš„åˆ—è¡¨ä¸€è§ˆï¼ˆlistï¼‰ã€æœç´¢ï¼ˆsearchï¼‰ã€åˆ›å»ºï¼ˆcreateï¼‰åŠŸèƒ½ã€‚
å½“ç„¶ï¼Œä¸Šé¢è¿˜æœ‰å¾ˆå¤šç»„ä»¶è¿™é‡Œå°±ä¸ä¸€ä¸€ä»‹ç»äº†ã€‚é€šè¿‡æŸ¥çœ‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt; å¯ä»¥çœ‹å‡º Pod å¯¹äºç»„ä»¶çš„æ‹†åˆ†ç²’åº¦æ˜¯æ¯”è¾ƒç»†å¾®çš„ï¼Œé€šè¿‡å¯¹å„ç§ç»„ä»¶çš„ç»„åˆè¾¾åˆ°ç°åœ¨çš„å®Œæ•´ç‰ˆæœ¬ã€‚è¿™äº›ç»„ä»¶ä¸­ï¼Œç¬”è€…çš„äº†è§£ä¹Ÿååˆ†æœ‰é™ï¼Œä¸è¿‡æˆ‘ä»¬ä¼šåœ¨ä¹‹åçš„ä¸€ç³»åˆ—æ–‡ç« æ¥é€ä¸€ä»‹ç»å­¦ä¹ ã€‚&lt;/p&gt;

&lt;h1 id=&quot;cocoapods-åˆæ¢&quot;&gt;CocoaPods åˆæ¢&lt;/h1&gt;

&lt;p&gt;æ¥ä¸‹æ¥ï¼Œç»“åˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod install&lt;/code&gt; å®‰è£…æµç¨‹æ¥å±•ç¤ºå„ä¸ªç»„ä»¶åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods&lt;/code&gt; å·¥ä½œæµä¸­çš„ä¸Šä¸‹æ¸¸å…³ç³»ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å‘½ä»¤å…¥å£&quot;&gt;å‘½ä»¤å…¥å£&lt;/h2&gt;

&lt;p&gt;æ¯å½“æˆ‘ä»¬è¾“å…¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod xxx&lt;/code&gt; å‘½ä»¤æ—¶ï¼Œç³»ç»Ÿä¼šé¦–å…ˆè°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod&lt;/code&gt; å‘½ä»¤ã€‚æ‰€æœ‰çš„å‘½ä»¤éƒ½æ˜¯åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/bin&lt;/code&gt; ç›®å½•ä¸‹å­˜æ”¾çš„è„šæœ¬ï¼Œå½“ç„¶ Ruby ç¯å¢ƒçš„ä¹Ÿä¸ä¾‹å¤–ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;which pod&lt;/code&gt; æ¥æŸ¥çœ‹å‘½ä»¤æ‰€åœ¨ä½ç½®ï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;which pod
/Users/edmond/.rvm/gems/ruby-2.6.1/bin/pod
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;è¿™é‡Œçš„æ˜¾ç¤ºè·¯å¾„ä¸æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/bin/pod&lt;/code&gt; çš„åŸå› æ˜¯å› ä¸ºä½¿ç”¨ &lt;em&gt;RVM&lt;/em&gt; è¿›è¡Œç‰ˆæœ¬æ§åˆ¶çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æˆ‘ä»¬é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cat&lt;/code&gt; å‘½ä»¤æ¥æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªå…¥å£è„šæœ¬æ‰§è¡Œäº†ä»€ä¹ˆã€‚&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /Users/edmond/.rvm/gems/ruby-2.6.1/bin/pod
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¾“å‡ºå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#!/usr/bin/env ruby_executable_hooks&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'rubygems'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&amp;gt;= 0.a&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ARGV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;first&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/\A_(.*)_\z/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Gem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;correct?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;ARGV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;shift&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Gem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;respond_to?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:activate_bin_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;load&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Gem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;activate_bin_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'cocoapods'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'pod'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;cocoapods&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;load&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Gem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;bin_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cocoapods&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;pod&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç¨‹åº CocoaPods æ˜¯ä½œä¸º Gem è¢«å®‰è£…çš„ï¼Œæ­¤è„šæœ¬ç”¨äºå”¤èµ· CocoaPodsã€‚é€»è¾‘æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ªå•çº¯çš„å‘½ä»¤è½¬å‘ã€‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem.activate_bin_path&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem.bin_path&lt;/code&gt; ç”¨äºæ‰¾åˆ° CocoaPods çš„å®‰è£…ç›®å½• &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cocoapods/bin&lt;/code&gt;ï¼Œæœ€ç»ˆåŠ è½½è¯¥ç›®å½•ä¸‹çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/pod&lt;/code&gt; æ–‡ä»¶&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#!/usr/bin/env ruby&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# ... å¿½ç•¥ä¸€äº›å¯¹äºç¼–ç å¤„ç†çš„ä»£ç &lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods'&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# è¿™é‡Œæ‰‹åŠ¨è¾“å‡ºä¸€ä¸‹è°ƒç”¨æ ˆï¼Œæ¥å…³æ³¨ä¸€ä¸‹&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;caller&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# å¦‚æœç¯å¢ƒé…ç½®ä¸­æŒ‡å®šäº† ruby-prof é…ç½®æ–‡ä»¶ï¼Œä¼šå¯¹æ‰§è¡Œå‘½ä»¤è¿‡ç¨‹è¿›è¡Œæ€§èƒ½ç›‘æ§&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;profile_filename&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'COCOAPODS_PROFILE'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ruby-prof'&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ä¾æ®é…ç½®æ–‡ä»¶ç±»å‹åŠ è½½ä¸åŒçš„ reporter è§£æå™¨&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;profile_filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'w'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;io&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;reporter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;RubyProf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;profile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Pod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ARGV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;io&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Pod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ARGV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸€èµ·æ¥æŸ¥çœ‹ä¸€ä¸‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod&lt;/code&gt; å‘½ä»¤çš„è¾“å‡ºç»“æœï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;pod
/Users/edmond/.rvm/gems/ruby-2.6.1/bin/pod:24:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;load&lt;span class=&quot;s1&quot;&gt;'
/Users/edmond/.rvm/gems/ruby-2.6.1/bin/pod:24:in `&amp;lt;main&amp;gt;'&lt;/span&gt;
/Users/edmond/.rvm/gems/ruby-2.6.1/bin/ruby_executable_hooks:24:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'
/Users/edmond/.rvm/gems/ruby-2.6.1/bin/ruby_executable_hooks:24:in `&amp;lt;main&amp;gt;'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ruby_executable_hooks é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bin&lt;/code&gt; ç›®å½•ä¸‹çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod&lt;/code&gt; å…¥å£å”¤é†’ï¼Œå†é€šè¿‡ &lt;a href=&quot;https://www.infoq.com/articles/eval-options-in-ruby/&quot;&gt;eval&lt;/a&gt; çš„æ‰‹æ®µè°ƒèµ·æˆ‘ä»¬éœ€è¦çš„ CocoaPods å·¥ç¨‹ã€‚è¿™æ˜¯ RVM çš„è‡ªèº«è¡Œä¸ºï¼Œå®ƒåˆ©ç”¨äº† &lt;a href=&quot;https://github.com/rvm/executable-hooks&quot;&gt;executable-hook&lt;/a&gt; æ¥æ³¨å…¥ Gems æ’ä»¶æ¥å®šåˆ¶æ‰©å±•ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ps. å¤§å¤šæ•°åŠ¨æ€è¯­è¨€éƒ½æ”¯æŒ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval&lt;/code&gt; è¿™ä¸€ç¥å¥‡çš„å‡½æ•°ã€‚æ‰“ Â Lisp å¼€å§‹å°±æ”¯æŒäº†ï¼Œå®ƒé€šè¿‡æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹ä½œä¸ºå‚æ•°ï¼Œå°†å…¶è§£ææˆè¯­å¥å¹¶æ··åˆåœ¨å½“å‰ä½œç”¨åŸŸå†…è¿è¡Œã€‚è¯¦ç»†å¯ä»¥å‚è€ƒè¿™ç¯‡ &lt;a href=&quot;https://ruby-china.org/topics/31465&quot;&gt;æ–‡ç« &lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;åœ¨å…¥å£çš„æœ€åéƒ¨åˆ†ï¼Œé€šè¿‡è°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod::Command.run(ARGV)&lt;/code&gt;ï¼Œå®ä¾‹åŒ–äº†ä¸€ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CLAide::Command&lt;/code&gt; å¯¹è±¡ï¼Œå¼€å§‹æˆ‘ä»¬çš„ &lt;strong&gt;CLAide å‘½ä»¤è§£æé˜¶æ®µ&lt;/strong&gt;ã€‚è¿™é‡Œä¸å¯¹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CLAide&lt;/code&gt; è¿™ä¸ªå‘½ä»¤è§£æå·¥å…·åšè¿‡å¤šçš„åˆ†æï¼Œè¿™ä¸ªæ˜¯åé¢ç³»åˆ—æ–‡ç« çš„å†…å®¹ã€‚è¿™é‡Œæˆ‘ä»¬ä»…ä»…éœ€è¦çŸ¥é“ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ¯ä¸ª CLAide Â å‘½ä»¤çš„æ‰§è¡Œï¼Œæœ€ç»ˆéƒ½ä¼šå¯¹åº”åˆ°å…·ä½“ Command Class çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run&lt;/code&gt; æ–¹æ³•ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;Pod å‘½ä»¤å¯¹åº”çš„ run æ–¹æ³•å®ç°å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Pod&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Command&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Install&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Command&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;# ... &lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# åˆ¤æ–­æ˜¯å¦å­˜åœ¨ Podfile æ–‡ä»¶&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;verify_podfile_exists!&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# ä» Config ä¸­è·å–ä¸€ä¸ª Instraller å®ä¾‹&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;installer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;installer_for_config&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# é»˜è®¤æ˜¯ä¸æ‰§è¡Œ update&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;installer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;repo_update&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;repo_update?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:default&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;installer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;update&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;installer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;deployment&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@deployment&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# install çš„çœŸæ­£è¿‡ç¨‹&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;installer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;install!&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šè¿°æ‰€è§çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Command::Install&lt;/code&gt; ç±»å¯¹åº”çš„å‘½ä»¤ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod install&lt;/code&gt;ã€‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod install&lt;/code&gt; è¿‡ç¨‹æ˜¯ä¾èµ–äº &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; æ–‡ä»¶çš„ï¼Œæ‰€ä»¥åœ¨å…¥å£å¤„ä¼šåšæ£€æµ‹ï¼Œå¦‚æœä¸å­˜åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; åˆ™ç›´æ¥æŠ›å‡º &lt;strong&gt;No â€˜Podfileâ€™ found in the project directory&lt;/strong&gt; çš„å¼‚å¸¸ è­¦å‘Šå¹¶ç»“æŸå‘½ä»¤ã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ‰§è¡ŒåŠŸèƒ½ä¸»ä½“&quot;&gt;æ‰§è¡ŒåŠŸèƒ½ä¸»ä½“&lt;/h2&gt;

&lt;p&gt;åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;installer&lt;/code&gt; å®ä¾‹ç»„è£…å®Œæˆä¹‹åï¼Œè°ƒç”¨å…¶ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;install!&lt;/code&gt; æ–¹æ³•ï¼Œè¿™æ—¶å€™æ‰è¿›å…¥äº†æˆ‘ä»¬ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod install&lt;/code&gt; å‘½ä»¤çš„ä¸»ä½“éƒ¨åˆ†ï¼Œæµç¨‹å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1597548346455-524a8937-0a85-4875-ac07-c195a7208b4c.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¯¹åº”çš„å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;install!&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;prepare&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;resolve_dependencies&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;download_dependencies&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;validate_targets&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;installation_options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;skip_pods_project_generation?&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;show_skip_pods_project_generation_message&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;integrate&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;write_lockfiles&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;perform_post_install_actions&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;integrate&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;generate_pods_project&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;installation_options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;integrate_targets?&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;integrate_user_project&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;UI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;section&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Skipping User Project Integration'&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;1-install-ç¯å¢ƒå‡†å¤‡prepare&quot;&gt;1. Install ç¯å¢ƒå‡†å¤‡ï¼ˆprepareï¼‰&lt;/h3&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;prepare&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# å¦‚æœæ£€æµ‹å‡ºå½“å‰ç›®å½•æ˜¯ Podsï¼Œç›´æ¥ raise ç»ˆæ­¢&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;start_with?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sandbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Command should be run from a directory outside Pods directory.'&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n\t&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;Current directory is &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;UI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Pathname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Informative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;UI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Preparing'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# å¦‚æœ lock æ–‡ä»¶çš„ CocoaPods ä¸»ç‰ˆæœ¬å’Œå½“å‰ç‰ˆæœ¬ä¸åŒï¼Œå°†ä»¥æ–°ç‰ˆæœ¬çš„é…ç½®å¯¹ xcodeproj å·¥ç¨‹æ–‡ä»¶è¿›è¡Œæ›´æ–°&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;deintegrate_if_different_major_version&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# å¯¹ sandbox(Pods) ç›®å½•å»ºç«‹å­ç›®å½•ç»“æ„&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;sandbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;prepare&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# æ£€æµ‹ PluginManager æ˜¯å¦æœ‰ pre-install çš„ plugin&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ensure_plugins_are_installed!&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# æ‰§è¡Œæ’ä»¶ä¸­ pre-install çš„æ‰€æœ‰ hooks æ–¹æ³•&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;run_plugins_pre_install_hooks&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;prepare&lt;/code&gt; é˜¶æ®µä¼šå°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod install&lt;/code&gt; çš„ç¯å¢ƒå‡†å¤‡å®Œæˆï¼ŒåŒ…æ‹¬&lt;strong&gt;ç‰ˆæœ¬ä¸€è‡´æ€§&lt;/strong&gt;ã€&lt;strong&gt;ç›®å½•ç»“æ„&lt;/strong&gt;ä»¥åŠå°† &lt;em&gt;pre-install&lt;/em&gt; çš„è£…è½½æ’ä»¶è„šæœ¬å…¨éƒ¨å–å‡ºï¼Œå¹¶æ‰§è¡Œå¯¹åº”çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pre_install&lt;/code&gt; hookã€‚&lt;/p&gt;

&lt;h3 id=&quot;2-è§£å†³ä¾èµ–å†²çªresolve_dependencies&quot;&gt;2. è§£å†³ä¾èµ–å†²çªï¼ˆresolve_dependenciesï¼‰&lt;/h3&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;resolve_dependencies&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# è·å– Sources&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;plugin_sources&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;run_source_provider_hooks&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# åˆ›å»ºä¸€ä¸ª Analyzer&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;analyzer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;create_analyzer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plugin_sources&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# å¦‚æœå¸¦æœ‰ repo_update æ ‡è®°&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;UI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;section&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Updating local specs repositories'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# æ‰§è¡Œ Analyzer çš„æ›´æ–° Repo æ“ä½œ&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;analyzer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;update_repositories&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;repo_update?&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;UI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;section&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Analyzing dependencies'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# ä» analyzer å–å‡ºæœ€æ–°çš„åˆ†æç»“æœï¼Œ@analysis_resultï¼Œ@aggregate_targetsï¼Œ@pod_targets&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;analyze&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;analyzer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# æ‹¼å†™é”™è¯¯é™çº§è¯†åˆ«ï¼Œç™½åå•è¿‡æ»¤&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;validate_build_configurations&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# å¦‚æœ deployment? ä¸º trueï¼Œä¼šéªŒè¯ podfile &amp;amp; lockfile æ˜¯å¦éœ€è¦æ›´æ–°&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;UI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;section&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Verifying no changes'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;verify_no_podfile_changes!&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;verify_no_lockfile_changes!&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;deployment?&lt;/span&gt;
 
    &lt;span class=&quot;n&quot;&gt;analyzer&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¾èµ–è§£æè¿‡ç¨‹å°±æ˜¯é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile.lock&lt;/code&gt; ä»¥åŠæ²™ç›’ä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;manifest&lt;/code&gt; ç”Ÿæˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Analyzer&lt;/code&gt; å¯¹è±¡ã€‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Analyzer&lt;/code&gt; å†…éƒ¨ä¼šä½¿ç”¨ &lt;em&gt;Molinillo&lt;/em&gt; ï¼ˆå…·ä½“çš„æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Molinillo::DependencyGraph&lt;/code&gt; å›¾ç®—æ³•ï¼‰è§£æå¾—åˆ°ä¸€å¼ ä¾èµ–å…³ç³»è¡¨ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ps. é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Analyzer&lt;/code&gt; èƒ½è·å–åˆ°å¾ˆå¤šä¾èµ–ä¿¡æ¯ï¼Œä¾‹å¦‚ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; æ–‡ä»¶çš„ä¾èµ–åˆ†æç»“æœï¼Œä¹Ÿå¯ä»¥ä» &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;specs_by_target&lt;/code&gt; æ¥æŸ¥çœ‹å„ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target&lt;/code&gt; ç›¸å…³çš„ specsã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¦å¤–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ analyze çš„è¿‡ç¨‹ä¸­æœ‰ä¸€ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pre_download&lt;/code&gt; çš„é˜¶æ®µï¼Œå³åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--verbose&lt;/code&gt; ä¸‹çœ‹åˆ°çš„ &lt;strong&gt;Fetching external sources&lt;/strong&gt; è¿‡ç¨‹ã€‚è¿™ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pre_download&lt;/code&gt; é˜¶æ®µ&lt;strong&gt;ä¸å±äºä¾èµ–ä¸‹è½½&lt;/strong&gt;è¿‡ç¨‹ï¼Œè€Œæ˜¯åœ¨å½“å‰çš„&lt;strong&gt;ä¾èµ–åˆ†æ&lt;/strong&gt;é˜¶æ®µã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ps. è¯¥è¿‡ç¨‹ä¸»è¦æ˜¯è§£å†³å½“æˆ‘ä»¬åœ¨é€šè¿‡ Git åœ°å€å¼•å…¥çš„ Pod ä»“åº“çš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿæ— æ³•ä»é»˜è®¤çš„ Source æ‹¿åˆ°å¯¹åº”çš„ Specï¼Œéœ€è¦ç›´æ¥è®¿é—®æˆ‘ä»¬çš„ Git åœ°å€ä¸‹è½½ä»“åº“çš„ zip åŒ…ï¼Œå¹¶å–å‡ºå¯¹åº”çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;podspec&lt;/code&gt; æ–‡ä»¶ï¼Œä»è€Œè¿›è¡Œå¯¹æ¯”åˆ†æã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;3-ä¸‹è½½ä¾èµ–æ–‡ä»¶download_dependencies&quot;&gt;3. ä¸‹è½½ä¾èµ–æ–‡ä»¶ï¼ˆdownload_dependenciesï¼‰&lt;/h3&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;download_dependencies&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;UI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;section&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Downloading dependencies'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# åˆå§‹åŒ– sandbox æ–‡ä»¶è®¿é—®å™¨&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;create_file_accessors&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# æ„é€  Pod Source Installer&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;install_pod_sources&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# æ‰§è¡Œ podfile å®šä¹‰çš„ pre install çš„ hooks&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;run_podfile_pre_install_hooks&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# æ ¹æ®é…ç½®æ¸…ç† pod sources ä¿¡æ¯ï¼Œä¸»è¦æ˜¯æ¸…ç†æ— ç”¨ platform ç›¸å…³å†…å®¹&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;clean_pod_sources&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;create_file_accessors&lt;/code&gt; ä¸­ä¼šåˆ›å»ºæ²™ç›’ç›®å½•çš„æ–‡ä»¶è®¿é—®å™¨ï¼Œé€šè¿‡æ„é€  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FileAccessor&lt;/code&gt; å®ä¾‹æ¥è§£ææ²™ç›’ä¸­çš„å„ç§æ–‡ä»¶ã€‚æ¥ç€æ˜¯æœ€é‡è¦çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;install_pod_sources&lt;/code&gt; è¿‡ç¨‹ï¼Œå®ƒä¼šè°ƒç”¨å¯¹åº” Pod çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;install!&lt;/code&gt; æ–¹æ³•è¿›è¡Œèµ„æºä¸‹è½½ã€‚&lt;br /&gt;
&lt;br /&gt;å…ˆæ¥çœ‹çœ‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;install_pod_sources&lt;/code&gt; æ–¹æ³•çš„å®ç°ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;install_pod_sources&lt;/span&gt;
 &lt;span class=&quot;vi&quot;&gt;@installed_specs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
 &lt;span class=&quot;c1&quot;&gt;# install çš„ Pod åªéœ€è¦è¿™ä¸¤ç§çŠ¶æ€ï¼Œadded å’Œ changed çŠ¶æ€çš„å¹¶é›†&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;pods_to_install&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sandbox_state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;added&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sandbox_state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;changed&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;title_options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:verbose_prefix&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'-&amp;gt; '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;green&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
 &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;root_specs&quot;&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;root_specs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
   &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
 &lt;span class=&quot;c1&quot;&gt;# å°† Podfile è§£æåæ’åºå¤„ç†&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;root_specs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sort_by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
   &lt;span class=&quot;c1&quot;&gt;# å¦‚æœæ˜¯ added æˆ– changed çŠ¶æ€çš„ Pod&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pods_to_install&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;include?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
     &lt;span class=&quot;c1&quot;&gt;# å¦‚æœæ˜¯ changed çŠ¶æ€å¹¶ä¸” manifest å·²ç»æœ‰è®°å½•&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sandbox_state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;changed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;include?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sandbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;manifest&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;# ç‰ˆæœ¬æ›´æ–°&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;current_version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;version&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;# è¢«æ›´æ–°ç‰ˆæœ¬è®°å½•&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;previous_version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sandbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;manifest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;# å˜åŠ¨è®°å½•&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;has_changed_version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;previous_version&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;# æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ…å« spec.name çš„ Podï¼Œè·å–å¯¹åº”çš„ Repoï¼Œå…¶å®å°±æ˜¯ find æ–¹æ³•&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;current_repo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;analysis_result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;specs_by_source&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;detect&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;include?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;# è·å–å½“å‰ä»“åº“&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;current_repo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_repo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_repo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;# è·å–ä¹‹å‰è¯¥ä»“åº“çš„ä¿¡æ¯&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;previous_spec_repo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sandbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;manifest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;spec_repo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;# æ˜¯å¦ä»“åº“æœ‰å˜åŠ¨&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;has_changed_repo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;previous_spec_repo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;nil?&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current_repo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current_repo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;previous_spec_repo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

       &lt;span class=&quot;c1&quot;&gt;# é€šè¿‡ title è¾“å‡ºä¸Šé¢çš„è¯¦ç»†å˜æ›´ä¿¡æ¯&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;# é changed çŠ¶æ€ï¼Œå±•ç¤º Installing è¿™ä¸ªæ˜¯ç»å¸¸è§çš„ log&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Installing &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
     &lt;span class=&quot;no&quot;&gt;UI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;titled_section&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;green&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title_options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;# é€šè¿‡ name æ‹¿åˆ°å¯¹åº”çš„ installerï¼Œè®°å½•åˆ° @pod_installers ä¸­&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;install_source_of_pod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
     &lt;span class=&quot;c1&quot;&gt;# å¦‚æœæ²¡æœ‰ changed æƒ…å†µï¼Œç›´æ¥å±•ç¤º Usingï¼Œä¹Ÿæ˜¯ç»å¸¸è§åˆ°çš„ log&lt;/span&gt;
     &lt;span class=&quot;no&quot;&gt;UI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;titled_section&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Using &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title_options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;# # é€šè¿‡ sandbox, specs çš„ platform ä¿¡æ¯ç”Ÿæˆ Installer å®ä¾‹ï¼Œè®°å½•åˆ° @pod_installers ä¸­&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;create_pod_installer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# é€šè¿‡ç¼“å­˜è¿”å› PodSourceInstaller å®ä¾‹&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;create_pod_installer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pod_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;specs_by_platform&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;specs_for_pod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pod_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
 
    &lt;span class=&quot;c1&quot;&gt;# å½“é€šè¿‡ pod_name æ— æ³•æ‰¾åˆ°å¯¹åº”çš„ pod_target æˆ– platform é…ç½®ï¼Œä¸»åŠ¨æŠ›å‡ºé”™è¯¯ä¿¡æ¯&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;specs_by_platform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;empty?&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;requiring_targets&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pod_targets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;recursive_dependent_targets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;any?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pod_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pod_name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# message = &quot;...&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;StandardError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# é€šè¿‡ sandbox, specs çš„ platform ä¿¡æ¯ç”Ÿæˆ Installer å®ä¾‹&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pod_installer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;PodSourceInstaller&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sandbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;podfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;specs_by_platform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:can_cache&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;installation_options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;clean?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pod_installers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pod_installer&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pod_installer&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# å¦‚æœ resolver å£°æ˜ä¸€ä¸ª Pod å·²ç»å®‰è£…æˆ–è€…å·²ç»å­˜åœ¨ï¼Œå°†ä¼šå°†å…¶åˆ é™¤å¹¶é‡æ–°å®‰è£…ã€‚å¦‚æœä¸å­˜åœ¨åˆ™ç›´æ¥å®‰è£…ã€‚&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;install_source_of_pod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pod_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;pod_installer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;create_pod_installer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pod_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;pod_installer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;install!&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@installed_specs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;concat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pod_installer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;specs_by_platform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;uniq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨æ–¹æ³•çš„å¼€å§‹ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;root_specs&lt;/code&gt; æ–¹æ³•æ˜¯é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;analysis_result&lt;/code&gt; æ‹¿å‡ºæ‰€æœ‰æ ¹ specã€‚&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;root_specs&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;analysis_result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;specifications&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;uniq&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;ä¸‹é¢å†æ¥çœ‹çœ‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod_installer&lt;/code&gt; ä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;install!&lt;/code&gt; æ–¹æ³•ï¼Œä¸»è¦æ˜¯é€šè¿‡è°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cocoapods-downloader&lt;/code&gt; ç»„ä»¶ï¼Œå°† Pod å¯¹åº”çš„ Source ä¸‹è½½åˆ°æœ¬åœ°ã€‚å®ç°å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;install!&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;download_source&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;predownloaded?&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;local?&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;PodSourcePreparer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root_spec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;prepare!&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;local?&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;sandbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;remove_local_podspec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;predownloaded?&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;local?&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;external?&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;4-éªŒè¯-targets-validate_targets&quot;&gt;4. éªŒè¯ targets (validate_targets)&lt;/h3&gt;

&lt;p&gt;ç”¨æ¥éªŒè¯ä¹‹å‰æµç¨‹ä¸­çš„äº§ç‰© (pod æ‰€ç”Ÿæˆçš„ Targets) çš„åˆæ³•æ€§ã€‚ä¸»è¦ä½œç”¨å°±æ˜¯æ„é€  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TargetValidator&lt;/code&gt;ï¼Œå¹¶æ‰§è¡Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;validate!&lt;/code&gt; æ–¹æ³•ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;validate_targets&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;validator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Xcode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;TargetValidator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aggregate_targets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pod_targets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;installation_options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;validator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;validate!&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;validate!&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;verify_no_duplicate_framework_and_library_names&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;verify_no_static_framework_transitive_dependencies&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;verify_swift_pods_swift_version&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;verify_swift_pods_have_module_dependencies&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;verify_no_multiple_project_names&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;installation_options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;generate_multiple_pod_projects?&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;éªŒè¯ç¯èŠ‚åœ¨æ•´ä¸ª Install è¿‡ç¨‹ä¸­ä»…å å¾ˆå°çš„ä¸€éƒ¨åˆ†ã€‚å› ä¸ºåªæ˜¯éªŒè¯éƒ¨åˆ†ï¼Œæ˜¯å®Œå…¨è§£è€¦çš„ã€‚&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;verify_no_duplicate_framework_and_library_names&lt;/strong&gt;&lt;br /&gt;éªŒè¯æ˜¯å¦æœ‰é‡åçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;framework&lt;/code&gt;ï¼Œå¦‚æœæœ‰å†²çªä¼šç›´æ¥æŠ›å‡º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;frameworks with conflicting names&lt;/code&gt; å¼‚å¸¸ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;verify_no_static_framework_transitive_dependencies&lt;/strong&gt;&lt;br /&gt;éªŒè¯åŠ¨æ€åº“ä¸­æ˜¯å¦æœ‰é™æ€é“¾æ¥åº“ (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.a&lt;/code&gt; æˆ–è€… &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.framework&lt;/code&gt;) ä¾èµ–ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¼šè§¦å‘ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;transitive dependencies that include static binaries...&lt;/code&gt; é”™è¯¯ã€‚å‡è®¾å­˜åœ¨ä»¥ä¸‹åœºæ™¯ï¼š
    &lt;ol&gt;
      &lt;li&gt;ç»„ä»¶ A å’Œç»„ä»¶ B åŒæ—¶ä¾èµ–äº†ç»„ä»¶ Cï¼ŒC ä¸ºé™æ€åº“ï¼Œå¦‚ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Weibo_SDK&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;ç»„ä»¶ A ä¾èµ–ç»„ä»¶ Bï¼Œè€Œç»„ä»¶ B çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.podspec&lt;/code&gt; æ–‡ä»¶ä¸­å­˜åœ¨ä»¥ä¸‹è®¾ç½®æ—¶ï¼Œç»„ä»¶ B å°†è¢«åˆ¤å®šä¸ºå­˜åœ¨é™æ€åº“ä¾èµ–ï¼š
        &lt;ol&gt;
          &lt;li&gt;podspec è®¾ç½®äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;s.static_framework = true&lt;/code&gt;&lt;/li&gt;
          &lt;li&gt;podspec ä»¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;s.dependency 'xxx_SDK&lt;/code&gt; ä¾èµ–äº†é™æ€åº“ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xxx_SDK&lt;/code&gt;&lt;/li&gt;
          &lt;li&gt;podspec ä»¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;s.vendored_libraries = 'libxxx.a'&lt;/code&gt; æ–¹å¼å†…åµŒäº†é™æ€åº“ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libxxx&lt;/code&gt;&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ­¤æ—¶å¦‚æœé¡¹ç›®çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; è®¾ç½®äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;use_framework!&lt;/code&gt; ä»¥åŠ¨æ€é“¾æ¥æ–¹å¼æ‰“åŒ…çš„æ—¶ï¼Œåˆ™ä¼šè§¦å‘è¯¥é”™è¯¯ã€‚
&lt;strong&gt;é—®é¢˜åŸå› &lt;/strong&gt;
Podfile ä¸­ä¸ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;use_frameworks!&lt;/code&gt; æ—¶ï¼Œæ¯ä¸ª pod æ˜¯ä¼šç”Ÿæˆç›¸åº”çš„ .aï¼ˆé™æ€é“¾æ¥åº“ï¼‰æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ static libraries æ¥ç®¡ç† pod ä»£ç ï¼Œåœ¨ Linked æ—¶ä¼šåŒ…å«è¯¥ pod å¼•ç”¨çš„å…¶ä»–çš„ pod çš„ .a æ–‡ä»¶ã€‚
Podfile ä¸­ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;use_frameworks!&lt;/code&gt; æ—¶æ˜¯ä¼šç”Ÿæˆç›¸åº”çš„ .framework æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ dynamic frameworks çš„æ–¹å¼æ¥ç®¡ç† pod ä»£ç ï¼Œåœ¨ Linked æ—¶ä¼šåŒ…å«è¯¥ pod å¼•ç”¨çš„å…¶ä»–çš„ pod çš„ .framework æ–‡ä»¶ã€‚
ä¸Šè¿°åœºæ™¯ä¸­è™½ç„¶ä»¥ framework çš„æ–¹å¼å¼•ç”¨äº† B ç»„ä»¶ï¼Œç„¶è€Œ B ç»„ä»¶å®é™…ä¸Šæ˜¯ä¸€ä¸ªé™æ€åº“ï¼Œéœ€è¦æ‹·è´å¹¶é“¾æ¥åˆ°è¯¥ pod ä¸­ï¼Œç„¶è€Œ dynamic frameworks æ–¹å¼å¹¶ä¸ä¼šè¿™ä¹ˆåšï¼Œæ‰€ä»¥å°±æŠ¥é”™äº†ã€‚
&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;&lt;/p&gt;
  &lt;ol&gt;
    &lt;li&gt;ä¿®æ”¹ pod åº“ä¸­ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;podspec&lt;/code&gt;ï¼Œå¢åŠ  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod_target_xcconfig&lt;/code&gt;ï¼Œå®šä¹‰å¥½ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FRAMEWORK_SEARCH_PATHS&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;OTHER_LDFLAGS&lt;/code&gt; ä¸¤ä¸ªç¯å¢ƒå˜é‡ï¼›&lt;/li&gt;
    &lt;li&gt;hook &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;verify_no_static_framework_transitive_dependencies&lt;/code&gt; çš„æ–¹æ³•ï¼Œå°†å…¶å¹²æ‰ï¼&lt;a href=&quot;https://github.com/CocoaPods/CocoaPods/issues/3289&quot;&gt;å¯¹åº” issue&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;ä¿®æ”¹ pod åº“ä¸­ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;podspec&lt;/code&gt;ï¼Œå¼€å¯ static_framework é…ç½® &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;s.static_framework = true&lt;/code&gt;&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;verify_swift_pods_swift_version&lt;/strong&gt;&lt;br /&gt;ç¡®ä¿ Swift Pod çš„ Swift ç‰ˆæœ¬æ­£ç¡®é…ç½®ä¸”äº’ç›¸å…¼å®¹çš„ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;verify_swift_pods_have_module_dependencies&lt;/strong&gt;&lt;br /&gt;æ£€æµ‹ Swift åº“çš„ä¾èµ–åº“æ˜¯å¦æ”¯æŒäº† moduleï¼Œè¿™é‡Œçš„ module ä¸»è¦æ˜¯é’ˆå¯¹ Objective-C åº“è€Œè¨€ã€‚&lt;br /&gt;é¦–å…ˆï¼ŒSwift æ˜¯å¤©ç„¶æ”¯æŒ module ç³»ç»Ÿæ¥ç®¡ç†ä»£ç çš„ï¼ŒSwift Module æ˜¯æ„å»ºåœ¨ &lt;a href=&quot;http://clang.llvm.org/docs/Modules.html&quot;&gt;LLVM Module&lt;/a&gt; ä¹‹ä¸Šçš„æ¨¡å—ç³»ç»Ÿã€‚Swift åº“åœ¨è§£æåä¼šç”Ÿæˆå¯¹åº”çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;modulemap&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;umbrella.h&lt;/code&gt; æ–‡ä»¶ï¼Œè¿™æ˜¯ LLVM Module çš„æ ‡é…ï¼ŒåŒæ · Objective-C ä¹Ÿæ˜¯æ”¯æŒ LLVM Moduleã€‚&lt;strong&gt;å½“æˆ‘ä»¬ä»¥ Dynamic Framework çš„æ–¹å¼å¼•å…¥ Objective-C åº“æ—¶ï¼ŒXcode æ”¯æŒé…ç½®å¹¶ç”Ÿæˆ headerï¼Œè€Œé™æ€åº“ .a éœ€è¦è‡ªå·±ç¼–å†™å¯¹åº”çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;umbrella.h&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;modulemap&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;br /&gt;å…¶æ¬¡ï¼Œå¦‚æœä½ çš„ Swift Pod ä¾èµ–äº† Objective-C åº“ï¼Œåˆå¸Œæœ›ä»¥é™æ€é“¾æ¥çš„æ–¹å¼æ¥æ‰“åŒ… Swift Pod æ—¶ï¼Œå°±éœ€è¦ä¿è¯ Objective-C åº“å¯ç”¨äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;modular_headers&lt;/code&gt;ï¼Œè¿™æ · CocoaPods ä¼šä¸ºæˆ‘ä»¬ç”Ÿæˆå¯¹åº” &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;modulemap&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;umbrella.h&lt;/code&gt; æ¥æ”¯æŒ LLVM Moduleã€‚ä½ å¯ä»¥ä»è¿™ä¸ªåœ°å€ - &lt;a href=&quot;http://blog.cocoapods.org/CocoaPods-1.5.0/&quot;&gt;http://blog.cocoapods.org/CocoaPods-1.5.0/&lt;/a&gt; æŸ¥çœ‹åˆ°æ›´å¤šç»†èŠ‚ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;verify_no_pods_used_with_multiple_swift_versions&lt;/strong&gt;&lt;br /&gt;æ£€æµ‹æ˜¯å¦æ‰€æœ‰çš„ &lt;em&gt;Pod Target&lt;/em&gt; ä¸­ç‰ˆæœ¬ä¸€è‡´æ€§é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ç”¨ä¸€ä¸ªæµç¨‹å›¾æ¥æ¦‚æ‹¬è¿™ä¸€éªŒè¯ç¯èŠ‚ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1597632866989-c759882d-e061-49e5-974e-abaa9d429746.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;5ç”Ÿæˆå·¥ç¨‹-integrate&quot;&gt;5.ç”Ÿæˆå·¥ç¨‹ (Integrate)&lt;/h3&gt;

&lt;p&gt;å·¥ç¨‹æ–‡ä»¶çš„ç”Ÿæˆæ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod install&lt;/code&gt; çš„æœ€åä¸€æ­¥ï¼Œä»–ä¼šå°†ä¹‹å‰ç‰ˆæœ¬ä»²è£åçš„æ‰€æœ‰ç»„ä»¶é€šè¿‡ Project æ–‡ä»¶çš„å½¢å¼ç»„ç»‡èµ·æ¥ï¼Œå¹¶ä¸”ä¼šå¯¹ Project ä¸­åšä¸€äº›ç”¨æˆ·æŒ‡å®šçš„é…ç½®ã€‚&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;integrate&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;generate_pods_project&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;installation_options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;integrate_targets?&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# é›†æˆç”¨æˆ·é…ç½®ï¼Œè¯»å–ä¾èµ–é¡¹ï¼Œä½¿ç”¨ xcconfig æ¥é…ç½®&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;integrate_user_project&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;UI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;section&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Skipping User Project Integration'&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;generate_pods_project&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# åˆ›å»º stage sanbox ç”¨äºä¿å­˜å®‰è£…å‰çš„æ²™ç›’çŠ¶æ€ï¼Œä»¥æ”¯æŒå¢é‡ç¼–è¯‘çš„å¯¹æ¯”&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;stage_sandbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sandbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pod_targets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# æ£€æŸ¥æ˜¯å¦æ”¯æŒå¢é‡ç¼–è¯‘ï¼Œå¦‚æœæ”¯æŒå°†è¿”å› cache result&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;cache_analysis_result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;analyze_project_cache&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# éœ€è¦é‡æ–°ç”Ÿæˆçš„ target&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pod_targets_to_generate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cache_analysis_result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pod_targets_to_generate&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# éœ€è¦é‡æ–°ç”Ÿæˆçš„ aggregate target&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;aggregate_targets_to_generate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cache_analysis_result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;aggregate_targets_to_generate&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# æ¸…ç†éœ€è¦é‡æ–°ç”Ÿæˆ target çš„ header å’Œ pod folders&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;clean_sandbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pod_targets_to_generate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# ç”Ÿæˆ Pod Projectï¼Œç»„è£… sandbox ä¸­æ‰€æœ‰ Pod çš„ pathã€build settingã€æºæ–‡ä»¶å¼•ç”¨ã€é™æ€åº“æ–‡ä»¶ã€èµ„æºæ–‡ä»¶ç­‰&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;create_and_save_projects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pod_targets_to_generate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aggregate_targets_to_generate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                &lt;span class=&quot;n&quot;&gt;cache_analysis_result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;build_configurations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cache_analysis_result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;project_object_version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# SandboxDirCleaner ç”¨äºæ¸…ç†å¢é‡ pod å®‰è£…ä¸­çš„æ— ç”¨ headersã€target support files ç›®å½•&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;SandboxDirCleaner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sandbox&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pod_targets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aggregate_targets&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;clean!&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# æ›´æ–°å®‰è£…åçš„ cache ç»“æœåˆ°ç›®å½• `Pods/.project_cache` ä¸‹&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;update_project_cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cache_analysis_result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;target_installation_results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;install&lt;/code&gt; è¿‡ç¨‹ä¸­ï¼Œé™¤å»ä¾èµ–ä»²è£éƒ¨åˆ†å’Œä¸‹è½½éƒ¨åˆ†çš„æ—¶é—´æ¶ˆè€—ï¼Œåœ¨å·¥ç¨‹æ–‡ä»¶ç”Ÿæˆä¹Ÿä¼šæœ‰ç›¸å¯¹è¾ƒå¤§çš„æ—¶é—´å¼€é”€ã€‚è¿™é‡Œå¾€å¾€ä¹Ÿæ˜¯é€Ÿåº¦ä¼˜åŒ–æ ¸å¿ƒä½ç½®ã€‚&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;ed8d8f7d&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;0x6-å†™å…¥ä¾èµ–-write_lockfiles&quot;&gt;0x6 å†™å…¥ä¾èµ– (write_lockfiles)&lt;/h3&gt;

&lt;p&gt;&lt;br /&gt;å°†ä¾èµ–æ›´æ–°å†™å…¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile.lock&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Manifest.lock&lt;/code&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;7a0ee745&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;0x7-ç»“æŸå›è°ƒperform_post_install_action&quot;&gt;0x7 ç»“æŸå›è°ƒï¼ˆperform_post_install_actionï¼‰&lt;/h3&gt;

&lt;p&gt;&lt;br /&gt;æœ€åä¸€æ­¥æ”¶å°¾å·¥ä½œï¼Œä¸ºæ‰€æœ‰æ’ä»¶æä¾› post-installation æ“ä½œä»¥åŠ hookã€‚&lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;perform_post_install_actions&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# è°ƒç”¨ HooksManager æ‰§è¡Œæ¯ä¸ªæ’ä»¶çš„ post_install æ–¹æ³• &lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;run_plugins_post_install_hooks&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# æ‰“å°è¿‡æœŸ pod target è­¦å‘Š&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;warn_for_deprecations&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# å¦‚æœ pod é…ç½®äº† script phases è„šæœ¬ï¼Œä¼šä¸»åŠ¨è¾“å‡ºä¸€æ¡æç¤ºæ¶ˆæ¯&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;warn_for_installed_script_phases&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# è¾“å‡ºç»“æŸä¿¡æ¯ `Pod installation complete!`&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;print_post_install_message&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;æ ¸å¿ƒç»„ä»¶åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod install&lt;/code&gt; å„é˜¶æ®µçš„ä½œç”¨å¦‚ä¸‹ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1597548346418-0d77991c-01f8-4615-b17c-1feecb5187c5.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h1&gt;

&lt;p&gt;&lt;br /&gt;å½“æˆ‘ä»¬çŸ¥é“ CocoaPods åœ¨ install çš„å¤§è‡´è¿‡ç¨‹åï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…¶åšä¸€äº›ä¿®æ”¹å’Œæ§åˆ¶ã€‚ä¾‹å¦‚çŸ¥é“äº†æ’ä»¶çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pre_install&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;post_install&lt;/code&gt; çš„å…·ä½“æ—¶æœºï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; ä¸­æ‰§è¡Œå¯¹åº”çš„ Ruby è„šæœ¬ï¼Œè¾¾åˆ°æˆ‘ä»¬çš„é¢„æœŸã€‚åŒæ—¶äº†è§£ install è¿‡ç¨‹ä¹Ÿæœ‰åŠ©äºæˆ‘ä»¬è¿›è¡Œæ¯ä¸ªé˜¶æ®µçš„æ€§èƒ½åˆ†æï¼Œä»¥ä¼˜åŒ–å’Œæé«˜ Install æ•ˆç‡ã€‚&lt;br /&gt;
&lt;br /&gt;åç»­ï¼Œå°†å­¦ä¹  CocoaPods ä¸­æ¯ä¸€ä¸ªç»„ä»¶çš„å®ç°ï¼Œå°†æ‰€æœ‰çš„é—®é¢˜åœ¨ä»£ç ä¸­æ‰¾åˆ°ç­”æ¡ˆã€‚&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a name=&quot;c6813027&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†&quot;&gt;çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†&lt;/h1&gt;

&lt;p&gt;&lt;br /&gt;è¿™é‡Œç½—åˆ—äº†å››ä¸ªé—®é¢˜ç”¨æ¥è€ƒå¯Ÿä½ æ˜¯å¦å·²ç»æŒæ¡äº†è¿™ç¯‡æ–‡ç« ï¼Œå¦‚æœæ²¡æœ‰å»ºè®®ä½ åŠ å…¥&lt;strong&gt;æ”¶è—&lt;/strong&gt;å†æ¬¡é˜…è¯»ï¼š&lt;br /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ç®€å•æ¦‚è¿° CocoaPods çš„æ ¸å¿ƒæ¨¡å—ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod&lt;/code&gt; å‘½ä»¤æ˜¯å¦‚ä½•æ‰¾åˆ°å¹¶å¯åŠ¨ CocoaPods ç¨‹åºçš„ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;ç®€è¿° pod install æµç¨‹ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;resolve_dependencies&lt;/code&gt; é˜¶æ®µä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pre_download&lt;/code&gt; æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;validate_targets&lt;/code&gt; éƒ½åšäº†å“ªäº›æ ¡éªŒå·¥ä½œï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;</content><author><name>å†¬ç“œ</name><email>gua@desgard.com</email></author><category term="CocoaPods å†é™©è®°" /><category term="Ruby" /><summary type="html">å¼•å­ åœ¨ä¸Šæ–‡ ç‰ˆæœ¬ç®¡ç†å·¥å…·åŠ Ruby å·¥å…·é“¾ç¯å¢ƒ ä¸­ï¼Œæˆ‘ä»¬èŠåˆ°å¦‚ä½•ç»Ÿä¸€ç®¡ç†å›¢é˜Ÿå°ä¼™ä¼´çš„ CocoaPods ç”Ÿäº§ç¯å¢ƒåŠä½¿ç”¨åˆ°çš„ Ruby å·¥å…·é“¾ã€‚ä»Šå¤©è®©æˆ‘ä»¬å°†ç›®å…‰è½¬åˆ° CocoaPods èº«ä¸Šï¼Œä¸€èµ·æ¥èŠèŠå®ƒçš„ä¸»è¦æ„æˆï¼Œä»¥åŠå„ä¸ªç»„ä»¶åœ¨æ•´ä¸ª Pods å·¥ä½œæµçš„å…³ç³»ã€‚ ä¸ºäº†æ•´ä½“æŠŠæ¡ CocoaPods è¿™ä¸ªé¡¹ç›®ï¼Œå»ºè®®å¤§å®¶å»å…¥é—¨ä¸€ä¸‹ Ruby è¿™é—¨è„šæœ¬è¯­è¨€ã€‚å¦å¤–æœ¬æ–‡åŸºäº CocoaPods 1.9.2 ç‰ˆæœ¬ã€‚ CocoaPods çš„æ ¸å¿ƒç»„ä»¶ ä½œä¸ºåŒ…ç®¡ç†å·¥å…·ï¼ŒCocoaPods éšç€ Apple ç”Ÿæ€çš„è“¬å‹ƒå‘å±•ä¹Ÿåœ¨ä¸æ–­è¿­ä»£å’Œè¿›åŒ–ï¼Œå¹¶ä¸”å„éƒ¨åˆ†æ ¸å¿ƒåŠŸèƒ½ä¹Ÿéƒ½æ¼”åŒ–å‡ºç›¸å¯¹ç‹¬ç«‹çš„ç»„ä»¶ã€‚è¿™äº›åŠŸèƒ½ç‹¬ç«‹çš„ç»„ä»¶ï¼Œå‡æ‹†åˆ†å‡ºä¸€ä¸ªä¸ªç‹¬ç«‹çš„ Gem åŒ…ï¼Œè€Œ CocoaPods åˆ™æ˜¯è¿™äº›ç»„ä»¶çš„â€œé›†å¤§æˆè€…â€ã€‚ CocoaPods ä¾èµ–æ€»è§ˆ æˆ‘ä»¬çŸ¥é“åœ¨ Pod ç®¡ç†çš„é¡¹ç›®ä¸­ï¼ŒPodfile æ–‡ä»¶é‡Œæè¿°äº†å®ƒæ‰€ä¾èµ–çš„ dependenciesï¼Œç±»ä¼¼çš„ Gem çš„ä¾èµ–å¯ä»¥åœ¨ Gemfile ä¸­æŸ¥çœ‹ã€‚é‚£ CocoaPods çš„ Gemfile æœ‰å“ªäº›ä¾èµ–å‘¢ï¼Ÿ SKIP_UNRELEASED_VERSIONS = false # ... source 'https://rubygems.org' gemspec gem 'json', :git =&amp;gt; 'https://github.com/segiddins/json.git', :branch =&amp;gt; 'seg-1.7.7-ruby-2.2' group :development do cp_gem 'claide', 'CLAide' cp_gem 'cocoapods-core', 'Core', '1-9-stable' cp_gem 'cocoapods-deintegrate', 'cocoapods-deintegrate' cp_gem 'cocoapods-downloader', 'cocoapods-downloader' cp_gem 'cocoapods-plugins', 'cocoapods-plugins' cp_gem 'cocoapods-search', 'cocoapods-search' cp_gem 'cocoapods-stats', 'cocoapods-stats' cp_gem 'cocoapods-trunk', 'cocoapods-trunk' cp_gem 'cocoapods-try', 'cocoapods-try' cp_gem 'molinillo', 'Molinillo' cp_gem 'nanaimo', 'Nanaimo' cp_gem 'xcodeproj', 'Xcodeproj' gem 'cocoapods-dependencies', '~&amp;gt; 1.0.beta.1' # ... # Integration tests gem 'diffy' gem 'clintegracon' # Code Quality gem 'inch_by_inch' gem 'rubocop' gem 'danger' end group :debugging do gem 'cocoapods_debug' gem 'rb-fsevent' gem 'kicker' gem 'awesome_print' gem 'ruby-prof', :platforms =&amp;gt; [:ruby] end ä¸Šé¢çš„ Gemfile ä¸­æˆ‘ä»¬çœ‹åˆ°å¾ˆå¤šé€šè¿‡ cp_gem è£…è½½çš„ Gem åº“ï¼Œå…¶æ–¹æ³•å¦‚ä¸‹ï¼š def cp_gem(name, repo_name, branch = 'master', path: false) return gem name if SKIP_UNRELEASED_VERSIONS opts = if path { :path =&amp;gt; &quot;../#{repo_name}&quot; } else url = &quot;https://github.com/CocoaPods/#{repo_name}.git&quot; { :git =&amp;gt; url, :branch =&amp;gt; branch } end gem name, opts end å®ƒæ˜¯ç”¨äºæ–¹ä¾¿å¼€å‘å’Œè°ƒè¯•ï¼Œå½“ **SKIP_UNRELEASED_VERSIONS** ä¸º false &amp;amp;&amp;amp; path ä¸º true æ—¶ä¼šä½¿ç”¨ä¸æœ¬åœ°çš„ CocoaPods é¡¹ç›®åŒçº§ç›®å½•ä¸‹çš„ git ä»“åº“ï¼Œå¦åˆ™ä¼šä½¿ç”¨å¯¹åº”çš„é¡¹ç›®ç›´æ¥é€šè¿‡ Gem åŠ è½½ã€‚ é€šè¿‡ç®€å•çš„ç›®å½•åˆ†å‰²å’Œ Gemfile ç®¡ç†ï¼Œå°±å®ç°äº†æœ€åŸºæœ¬åˆæœ€ç›´è§‚çš„çƒ­æ’æ‹”ï¼Œå¯¹ç»„ä»¶å¼€å‘ååˆ†å‹å¥½ã€‚æ‰€ä»¥ä½ åªè¦å°†å¤šä¸ªä»“åº“å¦‚ä¸‹å›¾æ–¹å¼æ’åˆ—ï¼Œå³å¯å®ç°è·¨ä»“åº“ç»„ä»¶å¼€å‘ï¼š $ ls -l lrwxr-xr-x 1 gua staff 31 Jul 30 21:34 CocoaPods lrwxr-xr-x 1 gua staff 26 Jul 31 13:27 Core lrwxr-xr-x 1 gua staff 31 Jul 31 10:14 Molinillo lrwxr-xr-x 1 gua staff 31 Aug 15 11:32 Xcodeproj lrwxr-xr-x 1 gua staff 42 Jul 31 10:14 cocoapods-downloader ç»„ä»¶æ„æˆå’Œå¯¹åº”èŒè´£ é€šè¿‡ä¸Šé¢å¯¹äº Gemfile çš„ç®€å•åˆ†æï¼Œå¯ä»¥çœ‹å‡º CocoaPods ä¸ä»…ä»…æ˜¯ä¸€ä¸ªä»“åº“é‚£ä¹ˆç®€å•ï¼Œå®ƒä½œä¸ºä¸€ä¸ªä¸‰æ–¹åº“ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œå¯¹è‡ªèº«ç»„ä»¶çš„ç®¡ç†å’Œç»„ä»¶åŒ–ä¹Ÿæ˜¯ååˆ†è®²ç©¶çš„ã€‚æˆ‘ä»¬ç»§ç»­æ¥çœ‹è¿™ä»½ Gemfile ä¸­çš„æ ¸å¿ƒå¼€å‘ç»„ä»¶ï¼š CLAide The CLAide gem is a simple command line parser, which provides an API that allows you to quickly create a full featured command-line interface. CLAide è™½ç„¶æ˜¯ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œè§£é‡Šå™¨ï¼Œä½†å®ƒæä¾›äº†åŠŸèƒ½é½å…¨çš„å‘½ä»¤è¡Œç•Œé¢å’Œ APIã€‚å®ƒä¸ä»…è´Ÿè´£è§£ææˆ‘ä»¬ä½¿ç”¨åˆ°çš„ Pods å‘½ä»¤ï¼Œå¦‚ï¼špod install, pod update ç­‰ï¼Œè¿˜å¯ç”¨äºå°è£…å¸¸ç”¨çš„ä¸€äº›è„šæœ¬ï¼Œå°†å…¶æ‰“åŒ…æˆç®€å•çš„å‘½ä»¤è¡Œå°å·¥å…·ã€‚ ps. æ‰€è°“å‘½ä»¤è¡Œè§£é‡Šå™¨å°±æ˜¯ä»æ ‡å‡†è¾“å…¥æˆ–è€…æ–‡ä»¶ä¸­è¯»å–å‘½ä»¤å¹¶æ‰§è¡Œçš„ç¨‹åºã€‚è¯¦è§ Wikiã€‚ cocoapods-core The CocoaPods-Core gem provides support to work with the models of CocoaPods, for example the Podspecs or the Podfile. CocoaPods-Core ç”¨äº CocoaPods ä¸­æ¨¡æ¿æ–‡ä»¶çš„è§£æï¼ŒåŒ…æ‹¬ Podfileã€.podspecï¼Œä»¥åŠæ‰€æœ‰çš„ .lock æ–‡ä»¶ä¸­ç‰¹æ®Šçš„ YAML æ–‡ä»¶ã€‚ cocoapods-downloader The Cocoapods-downloader gem is a small library that provides downloaders for various source control types (HTTP/SVN/Git/Mercurial). It can deal with tags, commits, revisions, branches, extracting files from zips and almost anything these source control system would use. Cocoapods-Downloader æ˜¯ç”¨äºä¸‹è½½æºç çš„å°å·¥å…·ï¼Œå®ƒæ”¯æŒå„ç§ç±»å‹çš„ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼ŒåŒ…æ‹¬ HTTP / SVN / Git / Mercurialã€‚å®ƒå¯ä»¥æä¾› tagsã€commitesï¼Œrevisionsï¼Œbranches ä»¥åŠ zips æ–‡ä»¶çš„ä¸‹è½½å’Œè§£å‹ç¼©æ“ä½œã€‚ Molinillo The Molinillo gem is a generic dependency resolution algorithm, used in CocoaPods, Bundler and RubyGems. Molinillo æ˜¯ CocoaPods å¯¹äºä¾èµ–ä»²è£ç®—æ³•çš„å°è£…ï¼Œå®ƒæ˜¯ä¸€ä¸ªå…·æœ‰å‰å‘æ£€å¯Ÿçš„å›æº¯ç®—æ³•ã€‚ä¸ä»…åœ¨ Pods ä¸­ï¼ŒBundler å’Œ RubyGems ä¹Ÿæ˜¯ä½¿ç”¨çš„è¿™ä¸€å¥—ä»²è£ç®—æ³•ã€‚ Xcodeproj The Xcodeproj gem lets you create and modify Xcode projects from Ruby. Script boring management tasks or build Xcode-friendly libraries. Also includes support for Xcode workspaces (.xcworkspace) and configuration files (.xcconfig). Xcodeproj å¯é€šè¿‡ Ruby æ¥æ“ä½œ Xcode é¡¹ç›®çš„åˆ›å»ºå’Œç¼–è¾‘ç­‰ã€‚å¯å‹å¥½çš„æ”¯æŒ Xcode é¡¹ç›®çš„è„šæœ¬ç®¡ç†å’Œ libraries æ„å»ºï¼Œä»¥åŠ Xcode å·¥ä½œç©ºé—´ (.xcworkspace) Â å’Œé…ç½®æ–‡ä»¶ .xcconfig çš„ç®¡ç†ã€‚ cocoapods-plugins CocoaPods plugin which shows info about available CocoaPods plugins or helps you get started developing a new plugin. Yeah, itâ€™s very meta. cocoapods-plugins æ’ä»¶ç®¡ç†åŠŸèƒ½ï¼Œå…¶ä¸­æœ‰ pod plugin å…¨å¥—å‘½ä»¤ï¼Œæ”¯æŒå¯¹äº CocoaPods æ’ä»¶çš„åˆ—è¡¨ä¸€è§ˆï¼ˆlistï¼‰ã€æœç´¢ï¼ˆsearchï¼‰ã€åˆ›å»ºï¼ˆcreateï¼‰åŠŸèƒ½ã€‚ å½“ç„¶ï¼Œä¸Šé¢è¿˜æœ‰å¾ˆå¤šç»„ä»¶è¿™é‡Œå°±ä¸ä¸€ä¸€ä»‹ç»äº†ã€‚é€šè¿‡æŸ¥çœ‹ Gemfile å¯ä»¥çœ‹å‡º Pod å¯¹äºç»„ä»¶çš„æ‹†åˆ†ç²’åº¦æ˜¯æ¯”è¾ƒç»†å¾®çš„ï¼Œé€šè¿‡å¯¹å„ç§ç»„ä»¶çš„ç»„åˆè¾¾åˆ°ç°åœ¨çš„å®Œæ•´ç‰ˆæœ¬ã€‚è¿™äº›ç»„ä»¶ä¸­ï¼Œç¬”è€…çš„äº†è§£ä¹Ÿååˆ†æœ‰é™ï¼Œä¸è¿‡æˆ‘ä»¬ä¼šåœ¨ä¹‹åçš„ä¸€ç³»åˆ—æ–‡ç« æ¥é€ä¸€ä»‹ç»å­¦ä¹ ã€‚ CocoaPods åˆæ¢ æ¥ä¸‹æ¥ï¼Œç»“åˆ pod install å®‰è£…æµç¨‹æ¥å±•ç¤ºå„ä¸ªç»„ä»¶åœ¨ Pods å·¥ä½œæµä¸­çš„ä¸Šä¸‹æ¸¸å…³ç³»ã€‚ å‘½ä»¤å…¥å£ æ¯å½“æˆ‘ä»¬è¾“å…¥ pod xxx å‘½ä»¤æ—¶ï¼Œç³»ç»Ÿä¼šé¦–å…ˆè°ƒç”¨ pod å‘½ä»¤ã€‚æ‰€æœ‰çš„å‘½ä»¤éƒ½æ˜¯åœ¨ /bin ç›®å½•ä¸‹å­˜æ”¾çš„è„šæœ¬ï¼Œå½“ç„¶ Ruby ç¯å¢ƒçš„ä¹Ÿä¸ä¾‹å¤–ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ which pod æ¥æŸ¥çœ‹å‘½ä»¤æ‰€åœ¨ä½ç½®ï¼š $ which pod /Users/edmond/.rvm/gems/ruby-2.6.1/bin/pod è¿™é‡Œçš„æ˜¾ç¤ºè·¯å¾„ä¸æ˜¯ /usr/local/bin/pod çš„åŸå› æ˜¯å› ä¸ºä½¿ç”¨ RVM è¿›è¡Œç‰ˆæœ¬æ§åˆ¶çš„ã€‚ æˆ‘ä»¬é€šè¿‡ cat å‘½ä»¤æ¥æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªå…¥å£è„šæœ¬æ‰§è¡Œäº†ä»€ä¹ˆã€‚ $ cat /Users/edmond/.rvm/gems/ruby-2.6.1/bin/pod è¾“å‡ºå¦‚ä¸‹ï¼š #!/usr/bin/env ruby_executable_hooks require 'rubygems' version = &quot;&amp;gt;= 0.a&quot; str = ARGV.first if str str = str.b[/\A_(.*)_\z/, 1] if str and Gem::Version.correct?(str) version = str ARGV.shift end end if Gem.respond_to?(:activate_bin_path) load Gem.activate_bin_path('cocoapods', 'pod', version) else gem &quot;cocoapods&quot;, version load Gem.bin_path(&quot;cocoapods&quot;, &quot;pod&quot;, version) end ç¨‹åº CocoaPods æ˜¯ä½œä¸º Gem è¢«å®‰è£…çš„ï¼Œæ­¤è„šæœ¬ç”¨äºå”¤èµ· CocoaPodsã€‚é€»è¾‘æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ªå•çº¯çš„å‘½ä»¤è½¬å‘ã€‚Gem.activate_bin_path å’Œ Gem.bin_path ç”¨äºæ‰¾åˆ° CocoaPods çš„å®‰è£…ç›®å½• cocoapods/binï¼Œæœ€ç»ˆåŠ è½½è¯¥ç›®å½•ä¸‹çš„ /pod æ–‡ä»¶ #!/usr/bin/env ruby # ... å¿½ç•¥ä¸€äº›å¯¹äºç¼–ç å¤„ç†çš„ä»£ç  require 'cocoapods' # è¿™é‡Œæ‰‹åŠ¨è¾“å‡ºä¸€ä¸‹è°ƒç”¨æ ˆï¼Œæ¥å…³æ³¨ä¸€ä¸‹ puts caller # å¦‚æœç¯å¢ƒé…ç½®ä¸­æŒ‡å®šäº† ruby-prof é…ç½®æ–‡ä»¶ï¼Œä¼šå¯¹æ‰§è¡Œå‘½ä»¤è¿‡ç¨‹è¿›è¡Œæ€§èƒ½ç›‘æ§ if profile_filename = ENV['COCOAPODS_PROFILE'] require 'ruby-prof' # ä¾æ®é…ç½®æ–‡ä»¶ç±»å‹åŠ è½½ä¸åŒçš„ reporter è§£æå™¨ # ... File.open(profile_filename, 'w') do |io| reporter.new(RubyProf.profile { Pod::Command.run(ARGV) }).print(io) end else Pod::Command.run(ARGV) end ä¸€èµ·æ¥æŸ¥çœ‹ä¸€ä¸‹ pod å‘½ä»¤çš„è¾“å‡ºç»“æœï¼š $ pod /Users/edmond/.rvm/gems/ruby-2.6.1/bin/pod:24:in `load' /Users/edmond/.rvm/gems/ruby-2.6.1/bin/pod:24:in `&amp;lt;main&amp;gt;' /Users/edmond/.rvm/gems/ruby-2.6.1/bin/ruby_executable_hooks:24:in `eval' /Users/edmond/.rvm/gems/ruby-2.6.1/bin/ruby_executable_hooks:24:in `&amp;lt;main&amp;gt;' ruby_executable_hooks é€šè¿‡ bin ç›®å½•ä¸‹çš„ pod å…¥å£å”¤é†’ï¼Œå†é€šè¿‡ eval çš„æ‰‹æ®µè°ƒèµ·æˆ‘ä»¬éœ€è¦çš„ CocoaPods å·¥ç¨‹ã€‚è¿™æ˜¯ RVM çš„è‡ªèº«è¡Œä¸ºï¼Œå®ƒåˆ©ç”¨äº† executable-hook æ¥æ³¨å…¥ Gems æ’ä»¶æ¥å®šåˆ¶æ‰©å±•ã€‚ ps. å¤§å¤šæ•°åŠ¨æ€è¯­è¨€éƒ½æ”¯æŒ eval è¿™ä¸€ç¥å¥‡çš„å‡½æ•°ã€‚æ‰“ Â Lisp å¼€å§‹å°±æ”¯æŒäº†ï¼Œå®ƒé€šè¿‡æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹ä½œä¸ºå‚æ•°ï¼Œå°†å…¶è§£ææˆè¯­å¥å¹¶æ··åˆåœ¨å½“å‰ä½œç”¨åŸŸå†…è¿è¡Œã€‚è¯¦ç»†å¯ä»¥å‚è€ƒè¿™ç¯‡ æ–‡ç« ã€‚ åœ¨å…¥å£çš„æœ€åéƒ¨åˆ†ï¼Œé€šè¿‡è°ƒç”¨ Pod::Command.run(ARGV)ï¼Œå®ä¾‹åŒ–äº†ä¸€ä¸ª CLAide::Command å¯¹è±¡ï¼Œå¼€å§‹æˆ‘ä»¬çš„ CLAide å‘½ä»¤è§£æé˜¶æ®µã€‚è¿™é‡Œä¸å¯¹ CLAide è¿™ä¸ªå‘½ä»¤è§£æå·¥å…·åšè¿‡å¤šçš„åˆ†æï¼Œè¿™ä¸ªæ˜¯åé¢ç³»åˆ—æ–‡ç« çš„å†…å®¹ã€‚è¿™é‡Œæˆ‘ä»¬ä»…ä»…éœ€è¦çŸ¥é“ï¼š æ¯ä¸ª CLAide Â å‘½ä»¤çš„æ‰§è¡Œï¼Œæœ€ç»ˆéƒ½ä¼šå¯¹åº”åˆ°å…·ä½“ Command Class çš„ run æ–¹æ³•ã€‚ Pod å‘½ä»¤å¯¹åº”çš„ run æ–¹æ³•å®ç°å¦‚ä¸‹ï¼š module Pod class Command class Install &amp;lt; Command # ... def run # åˆ¤æ–­æ˜¯å¦å­˜åœ¨ Podfile æ–‡ä»¶ verify_podfile_exists! # ä» Config ä¸­è·å–ä¸€ä¸ª Instraller å®ä¾‹ installer = installer_for_config # é»˜è®¤æ˜¯ä¸æ‰§è¡Œ update installer.repo_update = repo_update?(:default =&amp;gt; false) installer.update = false installer.deployment = @deployment # install çš„çœŸæ­£è¿‡ç¨‹ installer.install! end end end end ä¸Šè¿°æ‰€è§çš„ Command::Install ç±»å¯¹åº”çš„å‘½ä»¤ä¸º pod installã€‚pod install è¿‡ç¨‹æ˜¯ä¾èµ–äº Podfile æ–‡ä»¶çš„ï¼Œæ‰€ä»¥åœ¨å…¥å£å¤„ä¼šåšæ£€æµ‹ï¼Œå¦‚æœä¸å­˜åœ¨ Podfile åˆ™ç›´æ¥æŠ›å‡º No â€˜Podfileâ€™ found in the project directory çš„å¼‚å¸¸ è­¦å‘Šå¹¶ç»“æŸå‘½ä»¤ã€‚ æ‰§è¡ŒåŠŸèƒ½ä¸»ä½“ åœ¨ installer å®ä¾‹ç»„è£…å®Œæˆä¹‹åï¼Œè°ƒç”¨å…¶ install! æ–¹æ³•ï¼Œè¿™æ—¶å€™æ‰è¿›å…¥äº†æˆ‘ä»¬ pod install å‘½ä»¤çš„ä¸»ä½“éƒ¨åˆ†ï¼Œæµç¨‹å¦‚ä¸‹å›¾ï¼š å¯¹åº”çš„å®ç°å¦‚ä¸‹ï¼š def install! prepare resolve_dependencies download_dependencies validate_targets if installation_options.skip_pods_project_generation? show_skip_pods_project_generation_message else integrate end write_lockfiles perform_post_install_actions end def integrate generate_pods_project if installation_options.integrate_targets? integrate_user_project else UI.section 'Skipping User Project Integration' end end 1. Install ç¯å¢ƒå‡†å¤‡ï¼ˆprepareï¼‰ def prepare # å¦‚æœæ£€æµ‹å‡ºå½“å‰ç›®å½•æ˜¯ Podsï¼Œç›´æ¥ raise ç»ˆæ­¢ if Dir.pwd.start_with?(sandbox.root.to_path) message = 'Command should be run from a directory outside Pods directory.' message &amp;lt;&amp;lt; &quot;\n\n\tCurrent directory is #{UI.path(Pathname.pwd)}\n&quot; raise Informative, message end UI.message 'Preparing' do # å¦‚æœ lock æ–‡ä»¶çš„ CocoaPods ä¸»ç‰ˆæœ¬å’Œå½“å‰ç‰ˆæœ¬ä¸åŒï¼Œå°†ä»¥æ–°ç‰ˆæœ¬çš„é…ç½®å¯¹ xcodeproj å·¥ç¨‹æ–‡ä»¶è¿›è¡Œæ›´æ–° deintegrate_if_different_major_version # å¯¹ sandbox(Pods) ç›®å½•å»ºç«‹å­ç›®å½•ç»“æ„ sandbox.prepare # æ£€æµ‹ PluginManager æ˜¯å¦æœ‰ pre-install çš„ plugin ensure_plugins_are_installed! # æ‰§è¡Œæ’ä»¶ä¸­ pre-install çš„æ‰€æœ‰ hooks æ–¹æ³• run_plugins_pre_install_hooks end end åœ¨ prepare é˜¶æ®µä¼šå°† pod install çš„ç¯å¢ƒå‡†å¤‡å®Œæˆï¼ŒåŒ…æ‹¬ç‰ˆæœ¬ä¸€è‡´æ€§ã€ç›®å½•ç»“æ„ä»¥åŠå°† pre-install çš„è£…è½½æ’ä»¶è„šæœ¬å…¨éƒ¨å–å‡ºï¼Œå¹¶æ‰§è¡Œå¯¹åº”çš„ pre_install hookã€‚ 2. è§£å†³ä¾èµ–å†²çªï¼ˆresolve_dependenciesï¼‰ def resolve_dependencies # è·å– Sources plugin_sources = run_source_provider_hooks # åˆ›å»ºä¸€ä¸ª Analyzer analyzer = create_analyzer(plugin_sources) # å¦‚æœå¸¦æœ‰ repo_update æ ‡è®° UI.section 'Updating local specs repositories' do # æ‰§è¡Œ Analyzer çš„æ›´æ–° Repo æ“ä½œ analyzer.update_repositories end if repo_update? UI.section 'Analyzing dependencies' do # ä» analyzer å–å‡ºæœ€æ–°çš„åˆ†æç»“æœï¼Œ@analysis_resultï¼Œ@aggregate_targetsï¼Œ@pod_targets analyze(analyzer) # æ‹¼å†™é”™è¯¯é™çº§è¯†åˆ«ï¼Œç™½åå•è¿‡æ»¤ validate_build_configurations end # å¦‚æœ deployment? ä¸º trueï¼Œä¼šéªŒè¯ podfile &amp;amp; lockfile æ˜¯å¦éœ€è¦æ›´æ–° UI.section 'Verifying no changes' do verify_no_podfile_changes! verify_no_lockfile_changes! end if deployment? analyzer end ä¾èµ–è§£æè¿‡ç¨‹å°±æ˜¯é€šè¿‡ Podfileã€Podfile.lock ä»¥åŠæ²™ç›’ä¸­çš„ manifest ç”Ÿæˆ Analyzer å¯¹è±¡ã€‚Analyzer å†…éƒ¨ä¼šä½¿ç”¨ Molinillo ï¼ˆå…·ä½“çš„æ˜¯ Molinillo::DependencyGraph å›¾ç®—æ³•ï¼‰è§£æå¾—åˆ°ä¸€å¼ ä¾èµ–å…³ç³»è¡¨ã€‚ ps. é€šè¿‡ Analyzer èƒ½è·å–åˆ°å¾ˆå¤šä¾èµ–ä¿¡æ¯ï¼Œä¾‹å¦‚ Podfile æ–‡ä»¶çš„ä¾èµ–åˆ†æç»“æœï¼Œä¹Ÿå¯ä»¥ä» specs_by_target æ¥æŸ¥çœ‹å„ä¸ª target ç›¸å…³çš„ specsã€‚ å¦å¤–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ analyze çš„è¿‡ç¨‹ä¸­æœ‰ä¸€ä¸ª pre_download çš„é˜¶æ®µï¼Œå³åœ¨ --verbose ä¸‹çœ‹åˆ°çš„ Fetching external sources è¿‡ç¨‹ã€‚è¿™ä¸ª pre_download é˜¶æ®µä¸å±äºä¾èµ–ä¸‹è½½è¿‡ç¨‹ï¼Œè€Œæ˜¯åœ¨å½“å‰çš„ä¾èµ–åˆ†æé˜¶æ®µã€‚ ps. è¯¥è¿‡ç¨‹ä¸»è¦æ˜¯è§£å†³å½“æˆ‘ä»¬åœ¨é€šè¿‡ Git åœ°å€å¼•å…¥çš„ Pod ä»“åº“çš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿæ— æ³•ä»é»˜è®¤çš„ Source æ‹¿åˆ°å¯¹åº”çš„ Specï¼Œéœ€è¦ç›´æ¥è®¿é—®æˆ‘ä»¬çš„ Git åœ°å€ä¸‹è½½ä»“åº“çš„ zip åŒ…ï¼Œå¹¶å–å‡ºå¯¹åº”çš„ podspec æ–‡ä»¶ï¼Œä»è€Œè¿›è¡Œå¯¹æ¯”åˆ†æã€‚ 3. ä¸‹è½½ä¾èµ–æ–‡ä»¶ï¼ˆdownload_dependenciesï¼‰ def download_dependencies UI.section 'Downloading dependencies' do # åˆå§‹åŒ– sandbox æ–‡ä»¶è®¿é—®å™¨ create_file_accessors # æ„é€  Pod Source Installer install_pod_sources # æ‰§è¡Œ podfile å®šä¹‰çš„ pre install çš„ hooks run_podfile_pre_install_hooks # æ ¹æ®é…ç½®æ¸…ç† pod sources ä¿¡æ¯ï¼Œä¸»è¦æ˜¯æ¸…ç†æ— ç”¨ platform ç›¸å…³å†…å®¹ clean_pod_sources end end åœ¨ create_file_accessors ä¸­ä¼šåˆ›å»ºæ²™ç›’ç›®å½•çš„æ–‡ä»¶è®¿é—®å™¨ï¼Œé€šè¿‡æ„é€  FileAccessor å®ä¾‹æ¥è§£ææ²™ç›’ä¸­çš„å„ç§æ–‡ä»¶ã€‚æ¥ç€æ˜¯æœ€é‡è¦çš„ install_pod_sources è¿‡ç¨‹ï¼Œå®ƒä¼šè°ƒç”¨å¯¹åº” Pod çš„ install! æ–¹æ³•è¿›è¡Œèµ„æºä¸‹è½½ã€‚ å…ˆæ¥çœ‹çœ‹ install_pod_sources æ–¹æ³•çš„å®ç°ï¼š def install_pod_sources @installed_specs = [] # install çš„ Pod åªéœ€è¦è¿™ä¸¤ç§çŠ¶æ€ï¼Œadded å’Œ changed çŠ¶æ€çš„å¹¶é›† pods_to_install = sandbox_state.added | sandbox_state.changed title_options = { :verbose_prefix =&amp;gt; '-&amp;gt; '.green } puts &quot;root_specs&quot; root_specs.each do |item| puts item end # å°† Podfile è§£æåæ’åºå¤„ç† root_specs.sort_by(&amp;amp;:name).each do |spec| # å¦‚æœæ˜¯ added æˆ– changed çŠ¶æ€çš„ Pod if pods_to_install.include?(spec.name) # å¦‚æœæ˜¯ changed çŠ¶æ€å¹¶ä¸” manifest å·²ç»æœ‰è®°å½• if sandbox_state.changed.include?(spec.name) &amp;amp;&amp;amp; sandbox.manifest # ç‰ˆæœ¬æ›´æ–° current_version = spec.version # è¢«æ›´æ–°ç‰ˆæœ¬è®°å½• previous_version = sandbox.manifest.version(spec.name) # å˜åŠ¨è®°å½• has_changed_version = current_version != previous_version # æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ…å« spec.name çš„ Podï¼Œè·å–å¯¹åº”çš„ Repoï¼Œå…¶å®å°±æ˜¯ find æ–¹æ³• current_repo = analysis_result.specs_by_source.detect { |key, values| break key if values.map(&amp;amp;:name).include?(spec.name) } # è·å–å½“å‰ä»“åº“ current_repo &amp;amp;&amp;amp;= current_repo.url || current_repo.name # è·å–ä¹‹å‰è¯¥ä»“åº“çš„ä¿¡æ¯ previous_spec_repo = sandbox.manifest.spec_repo(spec.name) # æ˜¯å¦ä»“åº“æœ‰å˜åŠ¨ has_changed_repo = !previous_spec_repo.nil? &amp;amp;&amp;amp; current_repo &amp;amp;&amp;amp; (current_repo != previous_spec_repo) # é€šè¿‡ title è¾“å‡ºä¸Šé¢çš„è¯¦ç»†å˜æ›´ä¿¡æ¯ title = ... else # é changed çŠ¶æ€ï¼Œå±•ç¤º Installing è¿™ä¸ªæ˜¯ç»å¸¸è§çš„ log title = &quot;Installing #{spec}&quot; end UI.titled_section(title.green, title_options) do # é€šè¿‡ name æ‹¿åˆ°å¯¹åº”çš„ installerï¼Œè®°å½•åˆ° @pod_installers ä¸­ install_source_of_pod(spec.name) end else # å¦‚æœæ²¡æœ‰ changed æƒ…å†µï¼Œç›´æ¥å±•ç¤º Usingï¼Œä¹Ÿæ˜¯ç»å¸¸è§åˆ°çš„ log UI.titled_section(&quot;Using #{spec}&quot;, title_options) do # # é€šè¿‡ sandbox, specs çš„ platform ä¿¡æ¯ç”Ÿæˆ Installer å®ä¾‹ï¼Œè®°å½•åˆ° @pod_installers ä¸­ create_pod_installer(spec.name) end end end end # é€šè¿‡ç¼“å­˜è¿”å› PodSourceInstaller å®ä¾‹ def create_pod_installer(pod_name) specs_by_platform = specs_for_pod(pod_name) # å½“é€šè¿‡ pod_name æ— æ³•æ‰¾åˆ°å¯¹åº”çš„ pod_target æˆ– platform é…ç½®ï¼Œä¸»åŠ¨æŠ›å‡ºé”™è¯¯ä¿¡æ¯ if specs_by_platform.empty? requiring_targets = pod_targets.select { |pt| pt.recursive_dependent_targets.any? { |dt| dt.pod_name == pod_name } } # message = &quot;...&quot; raise StandardError, message end # é€šè¿‡ sandbox, specs çš„ platform ä¿¡æ¯ç”Ÿæˆ Installer å®ä¾‹ pod_installer = PodSourceInstaller.new(sandbox, podfile, specs_by_platform, :can_cache =&amp;gt; installation_options.clean?) pod_installers &amp;lt;&amp;lt; pod_installer pod_installer end # å¦‚æœ resolver å£°æ˜ä¸€ä¸ª Pod å·²ç»å®‰è£…æˆ–è€…å·²ç»å­˜åœ¨ï¼Œå°†ä¼šå°†å…¶åˆ é™¤å¹¶é‡æ–°å®‰è£…ã€‚å¦‚æœä¸å­˜åœ¨åˆ™ç›´æ¥å®‰è£…ã€‚ def install_source_of_pod(pod_name) pod_installer = create_pod_installer(pod_name) pod_installer.install! @installed_specs.concat(pod_installer.specs_by_platform.values.flatten.uniq) end åœ¨æ–¹æ³•çš„å¼€å§‹ï¼Œroot_specs æ–¹æ³•æ˜¯é€šè¿‡ analysis_result æ‹¿å‡ºæ‰€æœ‰æ ¹ specã€‚ def root_specs analysis_result.specifications.map(&amp;amp;:root).uniq end ä¸‹é¢å†æ¥çœ‹çœ‹ pod_installer ä¸­çš„ install! æ–¹æ³•ï¼Œä¸»è¦æ˜¯é€šè¿‡è°ƒç”¨ cocoapods-downloader ç»„ä»¶ï¼Œå°† Pod å¯¹åº”çš„ Source ä¸‹è½½åˆ°æœ¬åœ°ã€‚å®ç°å¦‚ä¸‹ï¼š def install! download_source unless predownloaded? || local? PodSourcePreparer.new(root_spec, root).prepare! if local? sandbox.remove_local_podspec(name) unless predownloaded? || local? || external? end 4. éªŒè¯ targets (validate_targets) ç”¨æ¥éªŒè¯ä¹‹å‰æµç¨‹ä¸­çš„äº§ç‰© (pod æ‰€ç”Ÿæˆçš„ Targets) çš„åˆæ³•æ€§ã€‚ä¸»è¦ä½œç”¨å°±æ˜¯æ„é€  TargetValidatorï¼Œå¹¶æ‰§è¡Œ validate! æ–¹æ³•ï¼š def validate_targets validator = Xcode::TargetValidator.new(aggregate_targets, pod_targets, installation_options) validator.validate! end def validate! verify_no_duplicate_framework_and_library_names verify_no_static_framework_transitive_dependencies verify_swift_pods_swift_version verify_swift_pods_have_module_dependencies verify_no_multiple_project_names if installation_options.generate_multiple_pod_projects? end éªŒè¯ç¯èŠ‚åœ¨æ•´ä¸ª Install è¿‡ç¨‹ä¸­ä»…å å¾ˆå°çš„ä¸€éƒ¨åˆ†ã€‚å› ä¸ºåªæ˜¯éªŒè¯éƒ¨åˆ†ï¼Œæ˜¯å®Œå…¨è§£è€¦çš„ã€‚ verify_no_duplicate_framework_and_library_nameséªŒè¯æ˜¯å¦æœ‰é‡åçš„ frameworkï¼Œå¦‚æœæœ‰å†²çªä¼šç›´æ¥æŠ›å‡º frameworks with conflicting names å¼‚å¸¸ã€‚ verify_no_static_framework_transitive_dependencieséªŒè¯åŠ¨æ€åº“ä¸­æ˜¯å¦æœ‰é™æ€é“¾æ¥åº“ (.a æˆ–è€… .framework) ä¾èµ–ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¼šè§¦å‘ transitive dependencies that include static binaries... é”™è¯¯ã€‚å‡è®¾å­˜åœ¨ä»¥ä¸‹åœºæ™¯ï¼š ç»„ä»¶ A å’Œç»„ä»¶ B åŒæ—¶ä¾èµ–äº†ç»„ä»¶ Cï¼ŒC ä¸ºé™æ€åº“ï¼Œå¦‚ Weibo_SDK ç»„ä»¶ A ä¾èµ–ç»„ä»¶ Bï¼Œè€Œç»„ä»¶ B çš„ .podspec æ–‡ä»¶ä¸­å­˜åœ¨ä»¥ä¸‹è®¾ç½®æ—¶ï¼Œç»„ä»¶ B å°†è¢«åˆ¤å®šä¸ºå­˜åœ¨é™æ€åº“ä¾èµ–ï¼š podspec è®¾ç½®äº† s.static_framework = true podspec ä»¥ s.dependency 'xxx_SDK ä¾èµ–äº†é™æ€åº“ xxx_SDK podspec ä»¥ s.vendored_libraries = 'libxxx.a' æ–¹å¼å†…åµŒäº†é™æ€åº“ libxxx æ­¤æ—¶å¦‚æœé¡¹ç›®çš„ Podfile è®¾ç½®äº† use_framework! ä»¥åŠ¨æ€é“¾æ¥æ–¹å¼æ‰“åŒ…çš„æ—¶ï¼Œåˆ™ä¼šè§¦å‘è¯¥é”™è¯¯ã€‚ é—®é¢˜åŸå›  Podfile ä¸­ä¸ä½¿ç”¨ use_frameworks! æ—¶ï¼Œæ¯ä¸ª pod æ˜¯ä¼šç”Ÿæˆç›¸åº”çš„ .aï¼ˆé™æ€é“¾æ¥åº“ï¼‰æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ static libraries æ¥ç®¡ç† pod ä»£ç ï¼Œåœ¨ Linked æ—¶ä¼šåŒ…å«è¯¥ pod å¼•ç”¨çš„å…¶ä»–çš„ pod çš„ .a æ–‡ä»¶ã€‚ Podfile ä¸­ä½¿ç”¨ use_frameworks! æ—¶æ˜¯ä¼šç”Ÿæˆç›¸åº”çš„ .framework æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ dynamic frameworks çš„æ–¹å¼æ¥ç®¡ç† pod ä»£ç ï¼Œåœ¨ Linked æ—¶ä¼šåŒ…å«è¯¥ pod å¼•ç”¨çš„å…¶ä»–çš„ pod çš„ .framework æ–‡ä»¶ã€‚ ä¸Šè¿°åœºæ™¯ä¸­è™½ç„¶ä»¥ framework çš„æ–¹å¼å¼•ç”¨äº† B ç»„ä»¶ï¼Œç„¶è€Œ B ç»„ä»¶å®é™…ä¸Šæ˜¯ä¸€ä¸ªé™æ€åº“ï¼Œéœ€è¦æ‹·è´å¹¶é“¾æ¥åˆ°è¯¥ pod ä¸­ï¼Œç„¶è€Œ dynamic frameworks æ–¹å¼å¹¶ä¸ä¼šè¿™ä¹ˆåšï¼Œæ‰€ä»¥å°±æŠ¥é”™äº†ã€‚ è§£å†³æ–¹æ¡ˆ ä¿®æ”¹ pod åº“ä¸­ podspecï¼Œå¢åŠ  pod_target_xcconfigï¼Œå®šä¹‰å¥½ FRAMEWORK_SEARCH_PATHS å’Œ OTHER_LDFLAGS ä¸¤ä¸ªç¯å¢ƒå˜é‡ï¼› hook verify_no_static_framework_transitive_dependencies çš„æ–¹æ³•ï¼Œå°†å…¶å¹²æ‰ï¼å¯¹åº” issue ä¿®æ”¹ pod åº“ä¸­ podspecï¼Œå¼€å¯ static_framework é…ç½® s.static_framework = true verify_swift_pods_swift_versionç¡®ä¿ Swift Pod çš„ Swift ç‰ˆæœ¬æ­£ç¡®é…ç½®ä¸”äº’ç›¸å…¼å®¹çš„ã€‚ verify_swift_pods_have_module_dependenciesæ£€æµ‹ Swift åº“çš„ä¾èµ–åº“æ˜¯å¦æ”¯æŒäº† moduleï¼Œè¿™é‡Œçš„ module ä¸»è¦æ˜¯é’ˆå¯¹ Objective-C åº“è€Œè¨€ã€‚é¦–å…ˆï¼ŒSwift æ˜¯å¤©ç„¶æ”¯æŒ module ç³»ç»Ÿæ¥ç®¡ç†ä»£ç çš„ï¼ŒSwift Module æ˜¯æ„å»ºåœ¨ LLVM Module ä¹‹ä¸Šçš„æ¨¡å—ç³»ç»Ÿã€‚Swift åº“åœ¨è§£æåä¼šç”Ÿæˆå¯¹åº”çš„ modulemap å’Œ umbrella.h æ–‡ä»¶ï¼Œè¿™æ˜¯ LLVM Module çš„æ ‡é…ï¼ŒåŒæ · Objective-C ä¹Ÿæ˜¯æ”¯æŒ LLVM Moduleã€‚å½“æˆ‘ä»¬ä»¥ Dynamic Framework çš„æ–¹å¼å¼•å…¥ Objective-C åº“æ—¶ï¼ŒXcode æ”¯æŒé…ç½®å¹¶ç”Ÿæˆ headerï¼Œè€Œé™æ€åº“ .a éœ€è¦è‡ªå·±ç¼–å†™å¯¹åº”çš„ umbrella.h å’Œ modulemapã€‚å…¶æ¬¡ï¼Œå¦‚æœä½ çš„ Swift Pod ä¾èµ–äº† Objective-C åº“ï¼Œåˆå¸Œæœ›ä»¥é™æ€é“¾æ¥çš„æ–¹å¼æ¥æ‰“åŒ… Swift Pod æ—¶ï¼Œå°±éœ€è¦ä¿è¯ Objective-C åº“å¯ç”¨äº† modular_headersï¼Œè¿™æ · CocoaPods ä¼šä¸ºæˆ‘ä»¬ç”Ÿæˆå¯¹åº” modulemap å’Œ umbrella.h æ¥æ”¯æŒ LLVM Moduleã€‚ä½ å¯ä»¥ä»è¿™ä¸ªåœ°å€ - http://blog.cocoapods.org/CocoaPods-1.5.0/ æŸ¥çœ‹åˆ°æ›´å¤šç»†èŠ‚ã€‚ verify_no_pods_used_with_multiple_swift_versionsæ£€æµ‹æ˜¯å¦æ‰€æœ‰çš„ Pod Target ä¸­ç‰ˆæœ¬ä¸€è‡´æ€§é—®é¢˜ã€‚ ç”¨ä¸€ä¸ªæµç¨‹å›¾æ¥æ¦‚æ‹¬è¿™ä¸€éªŒè¯ç¯èŠ‚ï¼š 5.ç”Ÿæˆå·¥ç¨‹ (Integrate) å·¥ç¨‹æ–‡ä»¶çš„ç”Ÿæˆæ˜¯ pod install çš„æœ€åä¸€æ­¥ï¼Œä»–ä¼šå°†ä¹‹å‰ç‰ˆæœ¬ä»²è£åçš„æ‰€æœ‰ç»„ä»¶é€šè¿‡ Project æ–‡ä»¶çš„å½¢å¼ç»„ç»‡èµ·æ¥ï¼Œå¹¶ä¸”ä¼šå¯¹ Project ä¸­åšä¸€äº›ç”¨æˆ·æŒ‡å®šçš„é…ç½®ã€‚ def integrate generate_pods_project if installation_options.integrate_targets? # é›†æˆç”¨æˆ·é…ç½®ï¼Œè¯»å–ä¾èµ–é¡¹ï¼Œä½¿ç”¨ xcconfig æ¥é…ç½® integrate_user_project else UI.section 'Skipping User Project Integration' end end def generate_pods_project # åˆ›å»º stage sanbox ç”¨äºä¿å­˜å®‰è£…å‰çš„æ²™ç›’çŠ¶æ€ï¼Œä»¥æ”¯æŒå¢é‡ç¼–è¯‘çš„å¯¹æ¯” stage_sandbox(sandbox, pod_targets) # æ£€æŸ¥æ˜¯å¦æ”¯æŒå¢é‡ç¼–è¯‘ï¼Œå¦‚æœæ”¯æŒå°†è¿”å› cache result cache_analysis_result = analyze_project_cache # éœ€è¦é‡æ–°ç”Ÿæˆçš„ target pod_targets_to_generate = cache_analysis_result.pod_targets_to_generate # éœ€è¦é‡æ–°ç”Ÿæˆçš„ aggregate target aggregate_targets_to_generate = cache_analysis_result.aggregate_targets_to_generate # æ¸…ç†éœ€è¦é‡æ–°ç”Ÿæˆ target çš„ header å’Œ pod folders clean_sandbox(pod_targets_to_generate) # ç”Ÿæˆ Pod Projectï¼Œç»„è£… sandbox ä¸­æ‰€æœ‰ Pod çš„ pathã€build settingã€æºæ–‡ä»¶å¼•ç”¨ã€é™æ€åº“æ–‡ä»¶ã€èµ„æºæ–‡ä»¶ç­‰ create_and_save_projects(pod_targets_to_generate, aggregate_targets_to_generate, cache_analysis_result.build_configurations, cache_analysis_result.project_object_version) # SandboxDirCleaner ç”¨äºæ¸…ç†å¢é‡ pod å®‰è£…ä¸­çš„æ— ç”¨ headersã€target support files ç›®å½• SandboxDirCleaner.new(sandbox, pod_targets, aggregate_targets).clean! # æ›´æ–°å®‰è£…åçš„ cache ç»“æœåˆ°ç›®å½• `Pods/.project_cache` ä¸‹ update_project_cache(cache_analysis_result, target_installation_results) end åœ¨ install è¿‡ç¨‹ä¸­ï¼Œé™¤å»ä¾èµ–ä»²è£éƒ¨åˆ†å’Œä¸‹è½½éƒ¨åˆ†çš„æ—¶é—´æ¶ˆè€—ï¼Œåœ¨å·¥ç¨‹æ–‡ä»¶ç”Ÿæˆä¹Ÿä¼šæœ‰ç›¸å¯¹è¾ƒå¤§çš„æ—¶é—´å¼€é”€ã€‚è¿™é‡Œå¾€å¾€ä¹Ÿæ˜¯é€Ÿåº¦ä¼˜åŒ–æ ¸å¿ƒä½ç½®ã€‚ 0x6 å†™å…¥ä¾èµ– (write_lockfiles) å°†ä¾èµ–æ›´æ–°å†™å…¥ Podfile.lock å’Œ Manifest.lock 0x7 ç»“æŸå›è°ƒï¼ˆperform_post_install_actionï¼‰ æœ€åä¸€æ­¥æ”¶å°¾å·¥ä½œï¼Œä¸ºæ‰€æœ‰æ’ä»¶æä¾› post-installation æ“ä½œä»¥åŠ hookã€‚ def perform_post_install_actions # è°ƒç”¨ HooksManager æ‰§è¡Œæ¯ä¸ªæ’ä»¶çš„ post_install æ–¹æ³• run_plugins_post_install_hooks # æ‰“å°è¿‡æœŸ pod target è­¦å‘Š warn_for_deprecations # å¦‚æœ pod é…ç½®äº† script phases è„šæœ¬ï¼Œä¼šä¸»åŠ¨è¾“å‡ºä¸€æ¡æç¤ºæ¶ˆæ¯ warn_for_installed_script_phases # è¾“å‡ºç»“æŸä¿¡æ¯ `Pod installation complete!` print_post_install_message end æ ¸å¿ƒç»„ä»¶åœ¨ pod install å„é˜¶æ®µçš„ä½œç”¨å¦‚ä¸‹ï¼š æ€»ç»“ å½“æˆ‘ä»¬çŸ¥é“ CocoaPods åœ¨ install çš„å¤§è‡´è¿‡ç¨‹åï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…¶åšä¸€äº›ä¿®æ”¹å’Œæ§åˆ¶ã€‚ä¾‹å¦‚çŸ¥é“äº†æ’ä»¶çš„ pre_install å’Œ post_install çš„å…·ä½“æ—¶æœºï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ Podfile ä¸­æ‰§è¡Œå¯¹åº”çš„ Ruby è„šæœ¬ï¼Œè¾¾åˆ°æˆ‘ä»¬çš„é¢„æœŸã€‚åŒæ—¶äº†è§£ install è¿‡ç¨‹ä¹Ÿæœ‰åŠ©äºæˆ‘ä»¬è¿›è¡Œæ¯ä¸ªé˜¶æ®µçš„æ€§èƒ½åˆ†æï¼Œä»¥ä¼˜åŒ–å’Œæé«˜ Install æ•ˆç‡ã€‚ åç»­ï¼Œå°†å­¦ä¹  CocoaPods ä¸­æ¯ä¸€ä¸ªç»„ä»¶çš„å®ç°ï¼Œå°†æ‰€æœ‰çš„é—®é¢˜åœ¨ä»£ç ä¸­æ‰¾åˆ°ç­”æ¡ˆã€‚ çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç† è¿™é‡Œç½—åˆ—äº†å››ä¸ªé—®é¢˜ç”¨æ¥è€ƒå¯Ÿä½ æ˜¯å¦å·²ç»æŒæ¡äº†è¿™ç¯‡æ–‡ç« ï¼Œå¦‚æœæ²¡æœ‰å»ºè®®ä½ åŠ å…¥æ”¶è—å†æ¬¡é˜…è¯»ï¼š ç®€å•æ¦‚è¿° CocoaPods çš„æ ¸å¿ƒæ¨¡å—ï¼Ÿ pod å‘½ä»¤æ˜¯å¦‚ä½•æ‰¾åˆ°å¹¶å¯åŠ¨ CocoaPods ç¨‹åºçš„ï¼Ÿ ç®€è¿° pod install æµç¨‹ï¼Ÿ resolve_dependencies é˜¶æ®µä¸­çš„ pre_download æ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ validate_targets éƒ½åšäº†å“ªäº›æ ¡éªŒå·¥ä½œï¼Ÿ</summary></entry><entry><title type="html">ä¸ºä»€ä¹ˆä½¿ç”¨æ±‡ç¼–å¯ä»¥ Hook objc_msgSendï¼ˆä¸‹ï¼‰- å®ç°ä¸åˆ†æ</title><link href="https://www.desgard.com/2020/08/05/why-hook-msg_objc-can-use-asm-2.html" rel="alternate" type="text/html" title="ä¸ºä»€ä¹ˆä½¿ç”¨æ±‡ç¼–å¯ä»¥ Hook objc_msgSendï¼ˆä¸‹ï¼‰- å®ç°ä¸åˆ†æ" /><published>2020-08-05T00:00:00-08:00</published><updated>2020-08-05T00:00:00-08:00</updated><id>https://www.desgard.com/2020/08/05/why-hook-msg_objc-can-use-asm-2</id><content type="html" xml:base="https://www.desgard.com/2020/08/05/why-hook-msg_objc-can-use-asm-2.html">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;èƒŒæ™¯&lt;/h1&gt;

&lt;p&gt;åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† ARM64 ä¸­çš„æ±‡ç¼–åŸºç¡€ï¼Œå¹¶ä¸”çŸ¥é“äº†åœ¨æ±‡ç¼–å½“ä¸­ï¼Œè°ƒç”¨ä¸€ä¸ªæ–¹æ³•çš„å‰ååœ¨æ ˆç©ºé—´æ˜¯æ€æ ·è¡¨ç°çš„ï¼Œä»¥åŠå†…å­˜ä¸­çš„å‡ ä¸ªç‰¹æ®Šå¯„å­˜å™¨æ˜¯å¦‚ä½•æ“ä½œçš„ã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†è¯¦ç»†åˆ†æä¸€ä¸‹ä½¿ç”¨æ±‡ç¼–æ¥ Hook &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt; æ–¹æ³•çš„å…¨éƒ¨æµç¨‹ã€‚&lt;/p&gt;

&lt;h1 id=&quot;hook-æ€è·¯æ¢³ç†&quot;&gt;Hook æ€è·¯æ¢³ç†&lt;/h1&gt;

&lt;p&gt;å¯¹äº &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt; è¿™ä¸ªæˆ‘ä»¬è¦ Hook çš„æ–¹æ³•ï¼Œæˆ‘ä»¬é¦–å…ˆè¦ææ¸…æ¥šï¼Œè¿™æ˜¯ä¸€ä¸ªä»€ä¹ˆæ ·çš„æ–¹æ³•ï¼Ÿæˆ‘éœ€è¦ç”¨ä»€ä¹ˆæ–¹æ¡ˆæ‰èƒ½ Hook åˆ°å®ƒçš„å…¥å£ã€‚é¦–å…ˆæˆ‘ä»¬æ¥æ•´ç†ä»¥ä¸‹æˆ‘ä»¬æ‹¥æœ‰çš„ Hook æ–¹æ¡ˆï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;åŸºäº Objective-C Runtime çš„ Method Swizzling&lt;/strong&gt;ï¼šä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class_replaceMethod&lt;/code&gt; æ–¹æ³•ï¼›&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;åŸºäº fishhook çš„ Hook&lt;/strong&gt;ï¼šç”±äºåœ¨ Mach-O å½“ä¸­ï¼Œæœ‰ Bind å’Œ Lazy Bind çš„ä¸¤ä¸ªæ¦‚å¿µï¼Œæ‰€ä»¥ Facebook é€šè¿‡ä¿®æ”¹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__la_symbol&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__nl_symbol&lt;/code&gt; ä¸¤ä¸ªè¡¨çš„æŒ‡é’ˆï¼Œåœ¨äºŒæ¬¡è°ƒç”¨çš„æ—¶å€™ï¼Œç›´æ¥é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__la_symbol_ptr&lt;/code&gt; æ‰¾åˆ°å‡½æ•°åœ°å€ç›´æ¥è°ƒç”¨ï¼Œä»è€Œä¸ç”¨å¤šæ¬¡ç¹ççš„è¿›è¡Œå‡½æ•°å¯»å€ï¼›&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;åŸºäº Dobby çš„ Inline Hook&lt;/strong&gt;ï¼š&lt;strong&gt;Dobby æ˜¯é€šè¿‡æ’å…¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__zDATA&lt;/code&gt; æ®µå’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__zTEXT&lt;/code&gt; æ®µåˆ° Mach-O ä¸­&lt;/strong&gt;ã€‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__zDATA&lt;/code&gt; ç”¨æ¥è®°å½• Hook ä¿¡æ¯ï¼ˆHook æ•°é‡ã€æ¯ä¸ª Hook æ–¹æ³•çš„åœ°å€ï¼‰ã€æ¯ä¸ª Hook æ–¹æ³•çš„ä¿¡æ¯ï¼ˆå‡½æ•°åœ°å€ã€è·³è½¬æŒ‡ä»¤åœ°å€ã€å†™ Hook å‡½æ•°çš„æ¥å£åœ°å€ï¼‰ã€æ¯ä¸ª Hook çš„æ¥å£ï¼ˆæŒ‡é’ˆï¼‰ã€‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__zText&lt;/code&gt; ç”¨æ¥è®°å½•æ¯ä¸ª Hook å‡½æ•°çš„è·³è½¬æŒ‡ä»¤ã€‚Dobby é€šè¿‡ mmap æŠŠæ•´ä¸ª Mach-O æ–‡ä»¶æ˜ å°„åˆ°ç”¨æˆ·çš„å†…å­˜ç©ºé—´ï¼Œå†™å…¥å®Œæˆä¿å­˜æœ¬åœ°ã€‚&lt;strong&gt;æ‰€ä»¥ Dobby å¹¶ä¸æ˜¯åœ¨åŸ Mach-O ä¸Šè¿›è¡Œæ“ä½œï¼Œè€Œæ˜¯é‡æ–°ç”Ÿæˆå¹¶æ›¿æ¢ã€‚&lt;/strong&gt;å…³äº Dobby ä¸­çš„å¥‡æŠ€æ·«å·§è¿˜æœ‰å¾ˆå¤šï¼Œå¦‚æœæœ‰å¯èƒ½åç»­ä¼šå‡ºä¸€ä¸ªåˆ†ææ–‡ç« ï¼ˆæ’æ——å­ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å½“ç„¶ï¼Œæˆç†Ÿçš„ Hook æ–¹æ¡ˆè¿˜æœ‰å¾ˆå¤šï¼Œå¹¶ä¸”è¿™äº›ç»å¸¸å‡ºç°åœ¨é€†å‘å·¥ç¨‹ä¸­ï¼Œæˆ‘è¿™é‡Œåªæ˜¯åˆ—ä¸¾äº†æœ€å¸¸ç”¨çš„ä¸‰ä¸ªã€‚&lt;/p&gt;

&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯-inline-hook&quot;&gt;ä»€ä¹ˆæ˜¯ Inline Hook&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆç»™ä¸ªå®šä¹‰ï¼š&lt;strong&gt;Inline Hook å°±æ˜¯åœ¨è¿è¡Œçš„æµç¨‹ä¸­æ’å…¥è·³è½¬æŒ‡ä»¤æ¥æŠ¢å¤ºè¿è¡Œæµç¨‹çš„ä¸€ä¸ªæ–¹æ³•&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardiaInline_Hook_.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸Šå›¾å±•ç¤ºäº† Inline Hook å¤§è‡´çš„æ€è·¯ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;å°†åŸå‡½æ•°çš„å‰  N ä¸ªå­—èŠ‚æ¬è¿åˆ° Hook å‡½æ•°çš„å‰ N ä¸ªå­—èŠ‚ï¼›&lt;/li&gt;
  &lt;li&gt;ç„¶åå°†åŸå‡½æ•°çš„å‰ N ä¸ªå­—èŠ‚å¡«å……è·³è½¬åˆ° Hook å‡½æ•°çš„è·³è½¬æŒ‡ä»¤ï¼›&lt;/li&gt;
  &lt;li&gt;åœ¨ Hook å‡½æ•°æœ«å°¾å‡ ä¸ªå­—èŠ‚å¡«å……è·³è½¬å›åŸå‡½æ•° +N çš„è·³è½¬æŒ‡ä»¤ï¼›&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä»¥ä¸Šçš„ N æœ‰å¤šå¤§ï¼Œå–å†³äºä½ çš„è·³è½¬æŒ‡ä»¤å†™å¾—æœ‰å¤šå¤§ï¼ˆå ç”¨äº†å¤šå°‘æŒ‡ä»¤ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;ç›¸è¾ƒä¸ Inline Hookï¼Œ fishhook ä½¿ç”¨çš„æ˜¯å¾ˆ Trick çš„æ–¹å¼ï¼Œ&lt;strong&gt;é€šè¿‡åŠ«æŒ stub ä»è€Œè¾¾åˆ°æ›¿æ¢çš„ç›®çš„&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;åœ¨ç½—å·çš„ã€ŒiOS åº”ç”¨é€†å‘ä¸å®‰å…¨ä¹‹é“ã€ä¸­å°† fishhook å½’ç±»æˆ Inline Hookã€‚ä»å¹¿ä¹‰çš„å®šä¹‰ä¸Šæ¥è¯´ï¼Œåªè¦å®Œæˆé‡å®šå‘åˆ°æˆ‘ä»¬è‡ªå·±çš„æ–¹æ³•ï¼Œå¹¶åœ¨è¿œæ–¹æ³•å‰åå¯å®šåˆ¶å¤„ç†å°±å¯ä»¥ç®—ä½œ Inline Hookã€‚ä½†æ˜¯æˆ‘å’Œé¡µé¢ä»”è®¨è®ºçš„ç»“æœæ˜¯ï¼Œ&lt;strong&gt;è¿™é‡Œçš„ Inline åº”è¯¥è¦ç†è§£ä¸º Inline Modification&lt;/strong&gt;ï¼Œè¿™ç§æŠ€æœ¯é€šå¸¸å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¦†ç›–æ–¹æ³•å¼€å¤´æŒ‡ä»¤ä¸­çš„å‰å‡ ä¸ªå­—èŠ‚ï¼Œå®Œæˆ Hook æ–¹æ³•çš„é‡å®šå‘å·¥ä½œã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;fishhook-å®Œæˆè·³è½¬&quot;&gt;fishhook å®Œæˆè·³è½¬&lt;/h1&gt;

&lt;h3 id=&quot;æ±‡ç¼–å®ç°çš„-objc_msgsend-ä¸ºä»€ä¹ˆå¯ä»¥å½“ä½œ-c-æ–¹æ³•&quot;&gt;æ±‡ç¼–å®ç°çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt; ä¸ºä»€ä¹ˆå¯ä»¥å½“ä½œ C æ–¹æ³•ï¼Ÿ&lt;/h3&gt;

&lt;p&gt;é€šè¿‡æŸ¥çœ‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt; ï¼Œæˆ‘ä»¬çŸ¥é“ Runtime çš„ Method Swizzling å¹¶ä¸é€‚ç”¨ï¼Œå› ä¸ºå®ƒå¹¶ä¸æ˜¯ Objective-C æ–¹æ³•ï¼Œè°ƒç”¨æ—¶å¹¶ä¸ä¼šæœ‰æˆ‘ä»¬ç»å¸¸è¯´çš„â€œæ¶ˆæ¯è½¬å‘â€ï¼›é€šè¿‡æŸ¥çœ‹ Runtime æºç ï¼Œæˆ‘ä»¬å‘ç° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt; æ˜¯ä½¿ç”¨çº¯æ±‡ç¼–å®ç°å‡½æ•°ï¼Œé€šè¿‡&lt;a href=&quot;https://github.com/RetVal/objc-runtime/blob/57c4bc7b95efb6ef5b903ab7844c859a9faef3ad/runtime/Messengers.subproj/objc-msg-arm64.s#L334-L573&quot;&gt;æ±‡ç¼–æ–‡ä»¶&lt;/a&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»¥ä¸‹å®šä¹‰ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-wasm&quot;&gt;ENTRY _objc_msgSend
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™é‡Œçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ENTRY&lt;/code&gt; æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿåœ¨æ–‡ä»¶ä¸­ç»§ç»­æœç´¢ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ENTRY&lt;/code&gt; æˆ‘ä»¬æ‰¾åˆ°äº†è¿™ä¹ˆä¸€ä¸ªå®ï¼š&lt;/p&gt;

&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;macro&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ENTRY&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* name */&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;align&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;globl&lt;/span&gt;    &lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endmacro&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªæ±‡ç¼–å®ï¼Œè¡¨ç¤ºåœ¨ text æ®µå®šä¹‰ä¸€ä¸ª global çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_objc_msgSend&lt;/code&gt; ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$0&lt;/code&gt; å…¶å®å°±æ˜¯è¿™ä¸ªå®ä¼ å…¥çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ–¹æ³•å…¥å£ã€‚æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å°†è¿™ä¸ªå®æ¥å±•å¼€ï¼š&lt;/p&gt;

&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;align&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;globl&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_objc_msgSend&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™é‡Œæˆ‘ä»¬å‘ç°ï¼Œ&lt;strong&gt;åœ¨ç¬¬ä¸‰è¡Œçš„ä½ç½®é€šè¿‡ C çš„ name mangling å‘½åè§„åˆ™ï¼Œå°†ç¬¦å· &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_objc_msgSend&lt;/code&gt; æ˜ å°„ä¸º C çš„å…¨å±€æ–¹æ³•ç¬¦å·&lt;/strong&gt;ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ®µæ±‡ç¼–å¯ä»¥é€šè¿‡å¤´æ–‡ä»¶å£°æ˜ï¼Œ&lt;strong&gt;ä¾¿å·²å®Œæˆäº† C çš„å‡½æ•°å®šä¹‰ã€‚æˆ‘ä»¬åœ¨åç»­å¤„ç†çš„æ—¶å€™å¯ä»¥å°†å…¶è§†ä¸º C æ–¹æ³•ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ MachOView æ¥éªŒè¯è¿™ä¸ªç¬¦å·åã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardiaUntitled.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™é‡Œå¦‚æœä¸å¤ªæ˜ç™½å¦‚ä½•ä½¿ç”¨çº¯æ±‡ç¼–å®ç° C æ–¹æ³•ï¼Œå¯ä»¥çœ‹é«˜çº§é¡µé¢ä»”çš„è¿™ç¯‡æ–‡ç« ã€Œåœ¨Xcodeå·¥ç¨‹ä¸­åµŒå…¥æ±‡ç¼–ä»£ç ã€ã€‚&lt;/p&gt;

&lt;h2 id=&quot;fishhook-å®ç°çš„åŸºç¡€&quot;&gt;fishhook å®ç°çš„åŸºç¡€&lt;/h2&gt;

&lt;p&gt;æ—¢ç„¶æˆ‘ä»¬å°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt; å·²ç»è§†ä½œ C æ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘å°±å¯ä»¥ä½¿ç”¨ fishhook æ¥å®Œæˆ &lt;strong&gt;Inline Hook çš„ç¬¬ä¸€æ­¥ï¼šè·³åˆ° Hook æ–¹æ³•&lt;/strong&gt;ã€‚fishhook æ˜¯å¦‚ä½•åšçš„å‘¢ï¼Ÿå®ƒæ˜¯åœ¨ä»€ä¹ˆé˜¶æ®µå®Œæˆè¿™ä¸ªåŠ¨ä½œçš„ï¼Ÿæ¥çœ‹ä¸‹å›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardiaApp_.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬çŸ¥é“ï¼ŒApple è‡ªèº«çš„å…±äº«ç¼“å­˜åº“å…¶å®ä¸ä¼šç¼–è¯‘è¿›æˆ‘ä»¬è‡ªå·±çš„ Mach-O ä¸­çš„ï¼Œè€Œæ˜¯åœ¨ App å¯åŠ¨åçš„åŠ¨æ€é“¾æ¥æ‰ä¼šå»åšé‡ç»‘å®šæ“ä½œã€‚è¿™é‡Œæˆ‘ä»¬è¦å¦‚ä½•å»éªŒè¯å‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬å†™ä¸€ä¸ª fishhook çš„ demoï¼š&lt;/p&gt;

&lt;div class=&quot;language-objectivec highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#import &quot;ViewController.h&quot;
#import &quot;fishhook.h&quot;
&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ViewController&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ori_nslog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...);&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;new_nslog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//è‡ªå®šä¹‰çš„æ›¿æ¢å‡½æ•°&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;format&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;stringByAppendingFormat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot; Gua &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ori_nslog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;viewDidLoad&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;super&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;hello world&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rebinding&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nslog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;nslog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;NSLog&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;nslog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replacement&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_nslog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;nslog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replaced&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ori_nslog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;rebind_symbols&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rebinding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]){&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nslog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;touchesBegan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UITouch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;touches&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;withEvent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIEvent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;event&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;hello world&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç¼–è¯‘è¿è¡Œä¹‹åå‘ç°è¾“å‡º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hello world&lt;/code&gt; ï¼Œç‚¹å‡»å±å¹•åï¼ŒæˆåŠŸ Hook &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSLog&lt;/code&gt; æ–¹æ³•ï¼Œè¾“å‡º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hello world Gua&lt;/code&gt; ã€‚&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;2020&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;08&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mo&quot;&gt;02&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;41&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;846939&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0800&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TestHook&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;13516&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;519138&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;world&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;2020&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;08&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mo&quot;&gt;02&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;41&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;53&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;681944&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0800&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TestHook&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;13516&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;519138&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;world&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Gua&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸ºä»€ä¹ˆå¯ä»¥ Hookï¼Ÿå‡½æ•°åœ°å€ä¸æ˜¯åœ¨ç¼–è¯‘ä¹‹åå°±ç¡®å®šäº†å—ï¼Ÿ&lt;/p&gt;

&lt;p&gt;å…¶å®å¹¶ä¸æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nm -n&lt;/code&gt; å‘½ä»¤æ¥æŸ¥çœ‹ä¸€ä¸‹æ‰€æœ‰çš„æ–¹æ³•ç¬¦åˆåŠå…¶å¯¹åº”åœ°å€ï¼š&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nm&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TestHook&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TestHook&lt;/span&gt;
								 &lt;span class=&quot;n&quot;&gt;U&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_NSLog&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;U&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_NSStringFromClass&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;U&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_OBJC_CLASS_&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_UIResponder&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;U&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_OBJC_CLASS_&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_UISceneConfiguration&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;U&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_OBJC_CLASS_&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_UIViewController&lt;/span&gt;
                 &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
								 &lt;span class=&quot;n&quot;&gt;U&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_objc_msgSend&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;U&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_objc_msgSendSuper2&lt;/span&gt;
                 &lt;span class=&quot;n&quot;&gt;U&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_objc_opt_class&lt;/span&gt;
								 &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;mo&quot;&gt;00000001000066&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;90&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_ori_nslog&lt;/span&gt;
&lt;span class=&quot;mo&quot;&gt;00000001000066&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;98&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__rebindings_head&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥å‘ç°ï¼Œå…¶å® &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSLog&lt;/code&gt;  æ–¹æ³•å…¶å®å¹¶æ²¡æœ‰åœ°å€ï¼Œè¿™äº›ç³»ç»Ÿåº“å‡½æ•°å¹¶ä¸ä¼šæ‰“å…¥åˆ°æˆ‘ä»¬çš„ App åŒ…ä¸­ï¼›å½“æˆ‘ä»¬ä½¿ç”¨å®ƒä»¬æ—¶ï¼Œ&lt;strong&gt;dyld å°±è¦ä»å…±äº«çš„åŠ¨æ€åº“ä¸­æŸ¥æ‰¾å¯¹åº”æ–¹æ³•ï¼Œç„¶åå°†å…·ä½“çš„å‡½æ•°åœ°å€ç»‘å®šåˆ°ä¹‹å‰å£°æ˜çš„åœ°æ–¹&lt;/strong&gt;ï¼Œä»è€Œå®ç°ç³»ç»Ÿåº“æ–¹æ³•çš„è°ƒç”¨ã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–è¯´å¥é¢˜å¤–è¯ä½œä¸ºäº†è§£ï¼Œ&lt;strong&gt;å¯¹äºè¿™ç§å¯åœ¨ä¸»å­˜ä¸­ä»»æ„ä½ç½®æ­£ç¡®åœ°æ‰§è¡Œï¼Œå¹¶ä¸”ä¸å—å…¶ç»å¯¹åœ°å€å½±å“çš„æŠ€æœ¯&lt;/strong&gt;ï¼Œåœ¨è®¡ç®—æœºé¢†åŸŸç§°ä¹‹ä¸º &lt;strong&gt;PICï¼ˆPosition Independent Codeï¼‰æŠ€æœ¯&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;fishhook-å¯¹äº-mach-o-åˆ©ç”¨&quot;&gt;fishhook å¯¹äº Mach-O åˆ©ç”¨&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ Mach-O ä¸­ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__DATA&lt;/code&gt; æ®µæœ‰ä¸¤ä¸ª Section ä¸åŠ¨æ€ç¬¦å·ç»‘å®šæœ‰å…³ç³»ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__nl_symbol_ptr&lt;/code&gt; ï¼šå­˜å‚¨äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;non-lazily&lt;/code&gt; ç»‘å®šçš„ç¬¦å·ï¼Œè¿™äº›ç¬¦å·åœ¨ Mach-O åŠ è½½çš„æ—¶å€™ç»‘å®šå®Œæˆï¼›&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__la_symbol_ptr&lt;/code&gt; ï¼šå­˜å‚¨äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lazy&lt;/code&gt; ç»‘å®šçš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ï¼Œç”± &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dyld_stub_binder&lt;/code&gt; è¿›è¡Œç»‘å®šï¼›&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ—¢ç„¶ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__la_symbol_ptr&lt;/code&gt; å­˜å‚¨äº†æ‰€æœ‰ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lazy&lt;/code&gt; ç»‘å®šçš„æ–¹æ³•ï¼Œ&lt;strong&gt;é‚£ä¹Ÿå°±æ˜¯è¯´åœ¨è¿™äº›ä½ç½®åº”è¯¥å­˜å‚¨äº†å¯¹åº”æ–¹æ³•çš„åœ°å€ã€‚&lt;/strong&gt;æˆ‘ä»¬é€šè¿‡ lldb æ¥éªŒè¯ä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬åœ¨ç¬¬ä¸€ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hello world&lt;/code&gt; çš„ä½ç½®å¢åŠ æ–­ç‚¹ï¼Œå¹¶ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;image list&lt;/code&gt; å‘½ä»¤æ¥è·å– App çš„åŸºåœ°å€ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardiaUntitled%201.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çš„ App åŸºåœ°å€ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0x00000001063b6000&lt;/code&gt; ã€‚å½“ç„¶ä½ åšå®éªŒçš„æ—¶å€™å¯èƒ½åŸºåœ°å€ä¼šæœ‰æ‰€æ”¹å˜ï¼Œå› ä¸º ASLRï¼ˆAddress Spce Layout Randomizatioï¼‰ çš„ç¼˜æ•…ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶åæˆ‘ä»¬ä½¿ç”¨ MachOView æ¥æŸ¥çœ‹åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__la_symbol_str&lt;/code&gt; ä¸­çš„åç§»é‡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia20200830151333.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å‘ç°æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0x5000&lt;/code&gt; ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lldb&lt;/code&gt; ä¸­ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x&lt;/code&gt; å‘½ä»¤æ¥æŸ¥çœ‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0x00000001063b6000 + 0x5000&lt;/code&gt; çš„æ•°æ®æ˜¯ä»€ä¹ˆï¼š&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lldb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00000001063b6000&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x5000&lt;/span&gt;
&lt;span class=&quot;mh&quot;&gt;0x1063bb000&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f0&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;83&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;mo&quot;&gt;06&lt;/span&gt; &lt;span class=&quot;mo&quot;&gt;01&lt;/span&gt; &lt;span class=&quot;mo&quot;&gt;00&lt;/span&gt; &lt;span class=&quot;mo&quot;&gt;00&lt;/span&gt; &lt;span class=&quot;mo&quot;&gt;00&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;69&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;98&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;93&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ff&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;mo&quot;&gt;00&lt;/span&gt; &lt;span class=&quot;mo&quot;&gt;00&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;..;.....&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;....&lt;/span&gt;
&lt;span class=&quot;mh&quot;&gt;0x1063bb010&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;23&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;53&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;49&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ff&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;mo&quot;&gt;00&lt;/span&gt; &lt;span class=&quot;mo&quot;&gt;00&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;54&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;84&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;mo&quot;&gt;06&lt;/span&gt; &lt;span class=&quot;mo&quot;&gt;01&lt;/span&gt; &lt;span class=&quot;mo&quot;&gt;00&lt;/span&gt; &lt;span class=&quot;mo&quot;&gt;00&lt;/span&gt; &lt;span class=&quot;mo&quot;&gt;00&lt;/span&gt;  &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;S2I&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;....&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.;.....&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å‘ç°åœ¨æ­¤ä½ç½®çš„æ•°æ®æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0x01063b83f0&lt;/code&gt; ã€‚ä½¿ç”¨åæ±‡ç¼– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dis&lt;/code&gt; å‘½ä»¤ï¼Œ æ¥çœ‹å¯¹åº”åœ°å€æ‰€æŒ‡å‘çš„ä»£ç æ®µï¼š&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lldb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dis&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x01063b83f0&lt;/span&gt;
    &lt;span class=&quot;mh&quot;&gt;0x1063b83f0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pushq&lt;/span&gt;  &lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x0&lt;/span&gt;
    &lt;span class=&quot;mh&quot;&gt;0x1063b83f5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;jmp&lt;/span&gt;    &lt;span class=&quot;mh&quot;&gt;0x1063b83e0&lt;/span&gt;
    &lt;span class=&quot;mh&quot;&gt;0x1063b83fa&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pushq&lt;/span&gt;  &lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0xd&lt;/span&gt;
    &lt;span class=&quot;mh&quot;&gt;0x1063b83ff&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;jmp&lt;/span&gt;    &lt;span class=&quot;mh&quot;&gt;0x1063b83e0&lt;/span&gt;
    &lt;span class=&quot;mh&quot;&gt;0x1063b8404&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pushq&lt;/span&gt;  &lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x127&lt;/span&gt;                    &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;imm&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x127&lt;/span&gt; 
    &lt;span class=&quot;mh&quot;&gt;0x1063b8409&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;jmp&lt;/span&gt;    &lt;span class=&quot;mh&quot;&gt;0x1063b83e0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;é‚£ä¹ˆè¿™æ®µä»£ç åˆ°åº•æ˜¯æˆ‘ä»¬çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSLog&lt;/code&gt; çš„ä»£ç å—ï¼Ÿæˆ‘ä»¬å¯ä»¥ç›´æ¥å¯¹å½“å‰æ–­ç‚¹å¯¹æ ˆé¡¶è¿›è¡Œä¸€æ¬¡åæ±‡ç¼–æ¥ç¡®å®šä¸€ä¸‹ç»“æœã€‚åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lldb&lt;/code&gt; ä¸­ç›´æ¥è¾“å…¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dis&lt;/code&gt; å‘½ä»¤ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia20200830151401.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°æ±‡ç¼–ä¸­ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;callq&lt;/code&gt;  å‘½ä»¤å¯¹åº”å¯¹åœ°å€æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0x1063b8354&lt;/code&gt; ã€‚å¯¹è¿™ä¸ªåœ°å€å†æ¬¡è¿›è¡Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dis -s&lt;/code&gt; åæ±‡ç¼–æ¥æŸ¥çœ‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia20200830151426.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å‘ç°å…¶ä¸­ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0x00000001063b83f0&lt;/code&gt; è¿™ä¸ªå¾…è·³è½¬çš„åœ°å€ï¼Œå°±æ˜¯ä¸Šé¢ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0x00000001063b6000 + 0x5000&lt;/code&gt; è¿™ä¸ªä½ç½®å­˜å‚¨çš„åœ°å€ã€‚&lt;/p&gt;

&lt;p&gt;å†è¿™ä¹‹åï¼Œæˆ‘ä»¬å†å¯¹ç‚¹å‡»äº‹ä»¶ä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NSLog&lt;/code&gt; æ–¹æ³•ä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼Œå¹¶ä¸”ç‚¹å‡»ä¸€ä¸‹æ¨¡æ‹Ÿå™¨å±å¹•æ¥è§¦å‘ä¸€ä¸‹ã€‚æˆ‘ä»¬å†ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dis -s&lt;/code&gt; ä¸¤ä¸ªå‘½ä»¤æ¥æŸ¥çœ‹ä¸€ä¸‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0x00000001063b6000 + 0x5000&lt;/code&gt; ä¸­çš„æ–°æ•°æ®ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia20200830151447.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å‘ç°ï¼Œå…¶æŒ‡å‘åœ°å€å·²ç»å˜æˆäº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0x01063b7380&lt;/code&gt; ï¼Œä½¿ç”¨åæ±‡ç¼– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dis&lt;/code&gt; å‘½ä»¤æ¥æŸ¥çœ‹çš„æ—¶å€™ï¼Œä¹Ÿç»™å‡ºäº†ç›¸åº”çš„å‡½æ•°ç¬¦å· &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;new_nslog&lt;/code&gt; ã€‚è‡³æ­¤ï¼Œfishhook Hook C æ–¹æ³•å·²ç»å®Œæˆã€‚&lt;/p&gt;

&lt;h2 id=&quot;fishhook-æ€è·¯æ€»ç»“&quot;&gt;fishhook æ€è·¯æ€»ç»“&lt;/h2&gt;

&lt;p&gt;å…¶å® fishhook çš„ Hook æ€è·¯ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸Šè¿°æ‰€æè¿°çš„ï¼Œå½“ç¬¬ä¸€æ¬¡è°ƒç”¨ç³»ç»ŸåŠ¨æ€åº“ä¸­ C æ–¹æ³•æ—¶ï¼Œå»æ›¿æ¢æ‰ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__la_symbol_str&lt;/code&gt; çš„æŒ‡é’ˆã€‚ä½†æ˜¯å®ƒçš„é€»è¾‘è¦æ¯”è¿™ä¸ªæ€è·¯è¿˜æ˜¯è¦å¤æ‚ä¸€äº›ï¼Œæ¯”å¦‚ fishhook è¦è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ä½¿ç”¨æ•°æ®ç»“æ„æ¥æè¿°æ‰€æœ‰ Hook æ–¹æ³•ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;å¦‚ä½•é€šè¿‡æ–¹æ³•åæ¥æ‰¾åˆ°å¯¹åº”çš„ Lazy æŒ‡é’ˆï¼Ÿ&lt;/li&gt;
  &lt;li&gt;å¦‚ä½•è®¡ç®—å¯¹åº”æ–¹æ³•çš„åœ°å€ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;å¦‚æœæ˜¯é Lazy è¡¨ä¸­è¦å¦‚ä½•å¤„ç†ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;å¦‚ä½•æŸ¥æ‰¾åˆ°å¯¹åº”ç¬¦å·åç§°ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¯¸å¦‚æ­¤ç±»çš„é—®é¢˜è¿˜æœ‰å¾ˆå¤šã€‚å¦‚æœæƒ³çœ‹å…·ä½“çš„å®ç°ï¼Œæ¨èå»é˜…è¯»æºç ã€‚å½“ç„¶æˆ‘ä»¬å½’çº³ fishhook æ¥ä¿®æ”¹ C æ–¹æ³•çš„æœ¬è´¨ï¼Œé‚£å°±æ˜¯ï¼š&lt;strong&gt;dyld æ›´æ–° Mach-O äºŒè¿›åˆ¶çš„ __DATA segment çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__la_symbol_str&lt;/code&gt; ä¸­çš„æŒ‡é’ˆï¼Œä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rebind_symbol&lt;/code&gt; æ–¹æ³•æ›´æ–°ä¸¤ä¸ªç¬¦å·ä½ç½®æ¥è¿›è¡Œç¬¦å·çš„é‡æ–°ç»‘å®šã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardiaAug-05-2020_08-52-49.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;å†…è”æ±‡ç¼–å®ç°-hook&quot;&gt;å†…è”æ±‡ç¼–å®ç° Hook&lt;/h1&gt;

&lt;p&gt;ä¸Šæ–‡è®²è¿°äº†ä½¿ç”¨ fishhook æ¥ Hook ç³»ç»Ÿåº“ä¸­çš„ C æ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å·²ç»å®Œæˆäº†ä»¥ä¸‹è¿™ä¸¤ä¸ªé˜¶æ®µï¼ˆç»¿è‰²ä½ç½®ï¼‰ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia20200830151609.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ¢å¥è¯è¯´ä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šè¿‡ fishhook å·²ç»å®Œæˆäº†å…¥å£çš„é‡å®šå‘ã€‚ä½†æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt; è¿™ä¸ªåŸæ–¹æ³•æˆ‘ä»¬åˆæ˜¯ä¸èƒ½ä¸å»è°ƒç”¨çš„ï¼Œ&lt;strong&gt;å› ä¸ºæˆ‘ä»¬åªæ˜¯å¸Œæœ›åœ¨ Hook çš„å‰åï¼Œå¢åŠ è‡ªå®šä¹‰çš„äº‹ä»¶ï¼Œå¹¶ä¸æƒ³å»å®Œæ•´æ›¿æ¢åŸå…ˆçš„æ¶ˆæ¯è½¬å‘é€»è¾‘ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œ&lt;strong&gt;æˆ‘ä»¬åªè¦åœ¨ Hook æ–¹æ³•ä¸­è°ƒç”¨åŸå‡½æ•°å°±å¯ä»¥è§£å†³é—®é¢˜äº†ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯æ–°çš„é—®é¢˜åˆå‡ºç°äº†ï¼&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt; åˆ°åº•åº”è¯¥å¦‚ä½•ä¼ å‚å‘¢ï¼Ÿ&lt;/p&gt;

&lt;h2 id=&quot;objc_msgsend-æ–¹æ³•å®šä¹‰&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt; æ–¹æ³•å®šä¹‰&lt;/h2&gt;

&lt;p&gt;åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;message.h&lt;/code&gt; æ–‡ä»¶ä¸­ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt; æœ‰å¦‚ä¸‹å®šä¹‰ï¼š&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;objc_msgSend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_Nullable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SEL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_Nonnull&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;op&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...)&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;OBJC_AVAILABLE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;çœ‹äº†å‡½æ•°å®šä¹‰ï¼Œéš¾ç‚¹å…¶å®å°±æ˜¯ä¸å®šå‚æ•°ã€‚æ—¢ç„¶æ˜¯ä¸å®šå‚æ•°ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸å®šå‚æ•°çš„åŸç†ï¼Œåœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;va_list&lt;/code&gt; æ¥è§£ææ•°ç»„ï¼Œå°±å¯ä»¥è·å–åˆ°æ‰€æœ‰å‚æ•°äº†ã€‚è™½ç„¶ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;va_list&lt;/code&gt; æ˜¯è¡Œçš„é€šçš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦è€ƒè™‘ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;va_list&lt;/code&gt; åœ¨ä¸åŒå¹³å°ä¸Šçš„æ•°æ®ç»“æ„å·®å¼‚ã€‚è¿™ä¸€ç‚¹å¯ä»¥å‚çœ‹å‰è¾ˆ &lt;em&gt;bang&lt;/em&gt; åœ¨å¼€å‘ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;JSPatch&lt;/code&gt; çš„æ—¶å€™æ‰€åšçš„ç¬”è®°&lt;a href=&quot;https://github.com/bang590/JSPatch/wiki/JSPatch-%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E8%AF%A6%E8%A7%A3&quot;&gt;ã€ŒJSPatch å®ç°åŸç†è¯¦è§£ã€&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;è¿™ä¸ªå…¶å®æˆ‘ä¹Ÿå’Œé¡µé¢ä»”è®¨è®ºäº†ä¸€ç•ªã€‚é¡µé¢ä»”è¯´å…¶å®ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;va_list&lt;/code&gt; å¯å˜å‚æ•°åº”è¯¥ä¼šæœ‰å¾ˆå¤§çš„å‘ï¼Œå› ä¸ºåœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt; æ–¹æ³•ä¸­ä¸æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„å¯å˜å‚æ•°ã€‚å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ã€ŒApple ä¸ºä»€ä¹ˆè¦ä¿®æ”¹ objc_msgSend çš„åŸå‹ã€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä½†æ—¢ç„¶éƒ½å·²ç»å¯¹ä¸åŒå¹³å°åšå·®å¼‚åŒ–å¤„ç†äº†ï¼Œ&lt;strong&gt;é‚£ä¹ˆå¹²è„†å°±ç›´æ¥ä½¿ç”¨å†…è”æ±‡ç¼–æ¥å®ç°ä¼ å‚é€»è¾‘å°±å¯ä»¥äº†&lt;/strong&gt;ï¼Ÿåœ¨ç›®å‰çš„ Hook æ–¹æ¡ˆä¸­ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥ä½¿ç”¨ ARM æ±‡ç¼–æ¥å¤„ç†çš„ã€‚&lt;/p&gt;

&lt;h2 id=&quot;è®°å½•ä¸Šä¸‹æ–‡&quot;&gt;è®°å½•ä¸Šä¸‹æ–‡&lt;/h2&gt;

&lt;p&gt;é€šè¿‡ä¸Šä¸€ç¯‡æ–‡ç« ã€Œä¸ºä»€ä¹ˆä½¿ç”¨æ±‡ç¼–å¯ä»¥ Hook objc_msgSendï¼ˆä¸Šï¼‰- æ±‡ç¼–åŸºç¡€ã€ï¼Œæˆ‘ä»¬äº†è§£åˆ° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X0 - X7&lt;/code&gt; ç”¨æ¥å­˜å‚¨ä¼ é€’å‚æ•°ï¼Œæˆ‘ä»¬ä»…ä»ä¸€ä¸ªæ–¹æ³•ä½“çš„è§’åº¦ä¸Šæ¥è®²ï¼Œå¯èƒ½å‚æ•°å·²ç»æ˜¯ä¸Šä¸‹æ–‡çš„å…¨éƒ¨å†…å®¹äº†ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä»å¯„å­˜å™¨çš„è§’åº¦ä¸Šæ¥çœ‹é—®é¢˜ï¼Œä¸Šä¸‹æ–‡å†…å®¹è¿˜æœ‰å…¶ä»–çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Q0 - Q7&lt;/code&gt; è¿™å…«ä¸ªæµ®ç‚¹æ•°å¯„å­˜å™¨ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ä¸ºäº†ä¿å­˜æ–¹æ³•çš„ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬&lt;strong&gt;é€šè¿‡å°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X0 - X9&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Q0 - Q7&lt;/code&gt; è¿™äº›å¯„å­˜å™¨çš„å€¼å‹æ ˆï¼Œä»è€Œè®°å½•ä¸‹è°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt; æ–¹æ³•çš„æ‰€æœ‰ä¸Šä¸‹æ–‡&lt;/strong&gt;ï¼Œå…¶å‹æ ˆæ–¹æ³•ç›´æ¥æ¨¡ä»¿ä¸Šæ–‡ä¸­è°ƒç”¨å‡½æ•°æ—¶çš„å‹æ ˆæ–¹æ³•å³å¯ï¼š&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;æŒ‡å‘æ ˆé¡¶&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;ä¿å­˜&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;ï¼Œåç§»åœ°å€åˆ°&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;å¯„å­˜å™¨&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;stp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;stp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;stp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;stp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;ä¿å­˜&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
&lt;span class=&quot;n&quot;&gt;stp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;stp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;stp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;stp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;stp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸ºä»€ä¹ˆè¿™é‡Œå¤„ç†å‚æ•° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X0-X7&lt;/code&gt; è¦è®°å½•ï¼Œè¿˜éœ€è¦è®°å½• &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X8&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X9&lt;/code&gt; ä¸¤ä¸ªå¯„å­˜å™¨å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pre_objc_msgSend&lt;/code&gt; ä¼šå¯¹å…¶æ”¹å˜ã€‚ä¸ºäº†è¿˜åŸä¹‹å‰æ‰€æœ‰å¯„å­˜å™¨çš„çŠ¶æ€ï¼Œæœ€ä¿é™©çš„æ–¹å¼å°±æ˜¯å…¨éƒ¨è®°å½•ã€‚&lt;/p&gt;

&lt;h2 id=&quot;è°ƒç”¨-pre_objc_msgsend-æ–¹æ³•&quot;&gt;è°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pre_objc_msgSend&lt;/code&gt; æ–¹æ³•&lt;/h2&gt;

&lt;p&gt;åœ¨ä¿å­˜å®Œä¸Šä¸‹æ–‡ä¹‹åï¼Œå®šä¹‰ä¸€ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pre_objc_msgSend&lt;/code&gt; çš„æ–¹æ³•ï¼Œå…¶ä½œç”¨æ˜¯ç”¨æ¥è‡ªå·±å®šåˆ¶ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt; ä¹‹å‰å‘ç”Ÿçš„äº‹æƒ…ã€‚&lt;/p&gt;

&lt;p&gt;å¾€å¾€æˆ‘ä»¬ Hook &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt; çš„ç›®çš„ï¼Œå°±æ˜¯æƒ³è®°å½•æ–¹æ³•çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ä¾‹å¦‚æˆ‘ä»¬æƒ³åº¦é‡æ…¢å‡½æ•°çš„æ—¶é—´ï¼Œåˆ™æˆ‘ä»¬éœ€è¦å…¶&lt;strong&gt;æ–¹æ³•å&lt;/strong&gt;ã€&lt;strong&gt;æ‰€åœ¨çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Class&lt;/code&gt;&lt;/strong&gt; ä»¥åŠ&lt;strong&gt;å…¶ä¸Šå±‚è°ƒç”¨æ–¹æ³•å’Œå†å²å †æ ˆ&lt;/strong&gt;ç­‰ã€‚é‚£ä¹ˆåœ¨å®šä¹‰ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pre_objc_msgSend&lt;/code&gt; æ–¹æ³•çš„å¦‚å‚æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id self&lt;/code&gt; ï¼ˆ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;self&lt;/code&gt; å®ä¾‹æŒ‡é’ˆï¼‰ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SEL _cmd&lt;/code&gt; ï¼ˆæ–¹æ³• IDï¼‰ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;uintptr_t lr&lt;/code&gt; ï¼ˆ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;LR&lt;/code&gt; å¯„å­˜å™¨ï¼Œå‡½æ•°è°ƒç”¨åçš„è¿”å›åœ°å€ï¼‰ä¼ å…¥å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;è¿™é‡Œçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;LR&lt;/code&gt; è®°å½•å…¶å®å¹¶ä¸æ˜¯ä¸ºæˆ‘ä»¬ä¸šåŠ¡è€ŒæœåŠ¡çš„ï¼Œè€Œæ˜¯éœ€è¦ä¸ºå †æ ˆè®°å½•ï¼Œè¿™æ ·åœ¨ Hook çš„æœ€åå¯ä»¥è·³è½¬å›ä¸Šä¸€å±‚æ–¹æ³•&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹åº”çš„ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå¸¦æœ‰è¿™ä¸‰ä¸ªå‚æ•°çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pre_objc_msgSend&lt;/code&gt; æ–¹æ³•ï¼š&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pre_objc_msgSend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SEL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uintptr_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;c1&quot;&gt;// pre action...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸ºäº†å°†å¯¹åº”çš„å‚æ•°ä¼ å…¥ï¼Œæˆ‘ä»¬åˆ©ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X0-X2&lt;/code&gt; å¯„å­˜å™¨æ¥ä¼ å‚ã€‚å› ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X0&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X1&lt;/code&gt; å¯¹åº”çš„å°±æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;self&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_cmd&lt;/code&gt; ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;LR&lt;/code&gt; ä¼ é€’åˆ° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X2&lt;/code&gt; ä¸­å³å¯ï¼š&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;å°†&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lr&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;ä¼ å…¥&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;mov&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lr&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®ç°è°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pre_objc_msgSend&lt;/code&gt; æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘å…ˆç»™å‡ºæ±‡ç¼–ï¼Œç„¶åæˆ‘ä»¬æ¥è§£æå®ƒçš„æ„æ€ï¼š&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;__asm&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;stp x8, x9, [sp, #-16]!&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;__asm&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;mov x12, %0&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;r&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pre_objc_msgSend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;__asm&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ldp x8, x9, [sp], #16&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;__asm&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;blr x12&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç¬¬ä¸€è¡Œå’Œç¬¬ä¸‰è¡Œæ˜¯ç”¨æ¥è®°å½•å’Œæ¢å¤ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X8&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X9&lt;/code&gt; ä¸¤ä¸ªå¯„å­˜å™¨ï¼Œå…¶åŸå› æ˜¯å› ä¸ºä½¿ç”¨äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;%0&lt;/code&gt; è¿™ä¸ª&lt;strong&gt;æŒ‡ä»¤æ“ä½œæ•°&lt;/strong&gt;ï¼Œè¿™æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;ä¸ºäº†è®²è§£æ–¹ä¾¿ï¼Œä¸¾ä¸€ä¸ªå…¶ä»–çš„ä¾‹å­ã€‚å‡å¦‚æˆ‘æƒ³ä½¿ç”¨å†…è”æ±‡ç¼–å†™ä¸€ä¸ªåŠ æ³•å‡½æ•°ï¼Œæˆ‘å¯ä»¥å†™å‡ºä»¥ä¸‹ä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;language-objectivec highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;arm_sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;asm&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;volatile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;add %0, %1, %2&quot;&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;// 1&lt;/span&gt;
                 &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;=r&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;// 2&lt;/span&gt;
                 &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;r&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;r&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 3&lt;/span&gt;
                 &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;viewDidLoad&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;super&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arm_sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;sum = %d&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// sum = 5&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;è¿™ä¸€è¡Œç§°ä½œ&lt;strong&gt;æ±‡ç¼–è¯­å¥æ¨¡ç‰ˆ&lt;/strong&gt;ã€‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;%0&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;%1&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;%2&lt;/code&gt; ä»£è¡¨æŒ‡ä»¤æ“ä½œæ•°ï¼Œä¹Ÿå¯ä»¥ä»£è¡¨é€šç”¨å¯„å­˜å™¨ï¼ˆ&lt;strong&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸æ˜¯ ARM æ±‡ç¼–ï¼Œè€Œæ˜¯åŸºäºæ±‡ç¼–çš„ä¸Šå±‚è¯­è¨€&lt;/strong&gt;ï¼‰ã€‚åˆ†åˆ«ä»£è¡¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sum&lt;/code&gt; ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;b&lt;/code&gt;ï¼ˆä¸ºä»€ä¹ˆæ˜¯è¿™ä¸ªé¡ºåºï¼Ÿå¯ä»¥çœ‹ä¸‹é¢çš„ 2 å’Œ 3ï¼‰ã€‚è¿™ç§æ“ä½œæ•°åœ¨æ±‡ç¼–è¯­å¥æ¨¡ç‰ˆä¸­åªèƒ½æœ‰ 10 ä¸ªï¼Œå³ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;%0 - %9&lt;/code&gt; ã€‚å½“ç„¶è¿™é‡Œçš„ä»£ç åœ¨ Xcode å¯èƒ½ä¼šæœ‰ warningï¼ŒXcode å»ºè®®æˆ‘ä»¬ä¿®æ”¹æˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;%w0&lt;/code&gt; ï¼Œè¿™ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;w&lt;/code&gt; ä»£è¡¨è¿™ä¸ª&lt;strong&gt;å˜é‡çš„å®½åº¦ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;w&lt;/code&gt; æ˜¯ 32 ä½ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x&lt;/code&gt; æ˜¯ 64 ä½ã€‚&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;ç¬¬ä¸€ä¸ªå†’å· &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:&lt;/code&gt; åˆ†å‰²çš„ä½ç½®æ˜¯&lt;strong&gt;è¾“å‡ºå‚æ•°&lt;/strong&gt;ã€‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;=r&lt;/code&gt; å…¶å®æ˜¯ä¸¤ä¸ªæ“ä½œç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†å¼€æ¥çœ‹ã€‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;**=&lt;/code&gt; ä»£è¡¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sum&lt;/code&gt; å˜é‡æ˜¯è¾“å‡ºæ“ä½œç¬¦ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;r&lt;/code&gt; ä»£è¡¨æŒ‰ç…§é¡ºåºä¸æŸä¸ªé€šç”¨å¯„å­˜å™¨ç›¸å…³è”ï¼Œç”±äºå®ƒæ˜¯ç¬¬ä¸€ä¸ªå…³è”çš„ï¼Œè‡ªç„¶å°±è¿›å…¥äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;%0&lt;/code&gt;**ã€‚&lt;/li&gt;
  &lt;li&gt;ç¬¬äºŒä¸ªå†’å· &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:&lt;/code&gt; åˆ†å‰²çš„ä½ç½®æ˜¯&lt;strong&gt;è¾“å…¥å‚æ•°&lt;/strong&gt;ã€‚ç»§ç»­ä½¿ç”¨æ“ä½œç¬¦ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;r&lt;/code&gt; å°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;b&lt;/code&gt; ä»¥æ­¤æ”¾å…¥é€šç”¨å¯„å­˜å™¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;%1&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;%2&lt;/code&gt; ä¸­ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ææ‡‚äº†è¿™ä¸ªä½ åº”è¯¥å°±å¯ä»¥æ˜ç™½ä¸Šé¢é‚£ä¸ªï¼š&lt;/p&gt;

&lt;div class=&quot;language-objectivec highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;__asm&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;mov x12, %0&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;r&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pre_objc_msgSend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ˜¯ä»€ä¹ˆæ„æ€ã€‚å¯¹çš„ï¼Œå…¶å®å°±æ˜¯æŠŠ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pre_objc_msgSend&lt;/code&gt; çš„åœ°å€å–å‡ºï¼Œç„¶åæ”¾åˆ° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X12&lt;/code&gt; å¯„å­˜å™¨ã€‚&lt;/p&gt;

&lt;p&gt;é‚£ä¹ˆä¸ºä»€ä¹ˆè¦è®°å½•å’Œæ¢å¤ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X8&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X9&lt;/code&gt; ä¸¤ä¸ªå¯„å­˜å™¨å‘¢ï¼Ÿæˆ‘ä»¬åœ¨è¿™é‡Œå…ˆè®°ä½ä¸€ä¸ªç»“è®ºï¼š&lt;strong&gt;å½“ä½¿ç”¨æ±‡ç¼–è¯­å¥æ¨¡ç‰ˆæ—¶ï¼Œå°±ä¼šç”¨åˆ° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X8&lt;/code&gt; ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X9&lt;/code&gt; å¯„å­˜å™¨ï¼Œå› ä¸ºå®ƒçš„ä¸‹å±‚å®ç°æ˜¯é€šè¿‡è¿™äº›é€šç”¨å¯„å­˜å™¨æ¥åšçš„ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ä¸ºäº†æ¢å¤ä¹‹å‰çš„ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬å°±å†ä¸€æ¬¡çš„åˆ©ç”¨æ ˆæ¥ä¿å­˜ä¸€ä¸‹è¿™ä¸¤ä¸ªé€šç”¨å¯„å­˜å™¨ï¼Œåœ¨æ­£å¼è°ƒç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pre_objc_msgSend&lt;/code&gt; æ–¹æ³•ä¹‹å‰å°†å…¶å¤åŸå³å¯ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åä¸€è¡Œä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;blr x12&lt;/code&gt; ï¼Œæ­£å¼è°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pre_objc_msgSend&lt;/code&gt; æ–¹æ³•ã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ¢å¤ä¸Šä¸‹æ–‡å¹¶è°ƒç”¨åŸå‡½æ•°&quot;&gt;æ¢å¤ä¸Šä¸‹æ–‡å¹¶è°ƒç”¨åŸå‡½æ•°&lt;/h2&gt;

&lt;p&gt;æ¢å¤ä¸Šä¸‹æ–‡å’Œä¹‹å‰çš„è®°å½•ä¸Šä¸‹æ–‡æ˜¯é€†æ“ä½œï¼Œæ‰€ä»¥ä¸åšè¿‡å¤šåˆ†æï¼š&lt;/p&gt;

&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;ldp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ldp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ldp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ldp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ldp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;ldp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ldp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ldp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ldp&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;q7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç»§ç»­ä½¿ç”¨æˆ‘ä»¬ä¸Šè¿°æ–¹æ³•è¿›è¡Œè°ƒç”¨çš„å†…è”æ±‡ç¼–ä»£ç æ¥è°ƒç”¨è¿œæ–¹æ³• &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt; ã€‚åœ¨è¿™é‡Œå‡è®¾æˆ‘ä»¬å·²ç»ä½¿ç”¨ fishhook å°†å…¶å®ç° Hook åˆ°æˆ‘ä»¬æ–°çš„å†…è”æ±‡ç¼–æ–¹æ³•ä½“ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hook_objc_msgSend&lt;/code&gt; ï¼ŒåŸæ–¹æ³•æ”¾åˆ° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;origin_objc_msgSend&lt;/code&gt; ä¸Šã€‚æ‰€ä»¥å¯¹åº”çš„å†…è”æ±‡ç¼–ä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;language-objectivec highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;__asm&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;stp x8, x9, [sp, #-16]!&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;__asm&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;mov x12, %0&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;r&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;origin_objc_msgSend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;__asm&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ldp x8, x9, [sp], #16&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;__asm&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;blr x12&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;è°ƒç”¨-post_objc_msgsend-å¹¶æ¢å¤-lr&quot;&gt;è°ƒç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;post_objc_msgSend&lt;/code&gt; å¹¶æ¢å¤ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;LR&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;åœ¨ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬è®²è¿°è¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;LR&lt;/code&gt; å¯„å­˜å™¨æ˜¯ç”¨æ¥è®°å½•&lt;strong&gt;å‡½æ•°è°ƒç”¨å®Œæˆæ—¶çš„è¿”å›åœ°å€&lt;/strong&gt;çš„ã€‚ä½†æ˜¯ç»å†äº†å’±ä»¬å¤šæ¬¡å…¶ä»–æ–¹æ³•çš„è°ƒç”¨ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•ç¡®å®š &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;LR&lt;/code&gt; çš„å€¼æ˜¯æ­£ç¡®çš„ã€‚&lt;strong&gt;æ‰€ä»¥åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hook_objc_msgSend&lt;/code&gt; æ–¹æ³•çš„æœ€åï¼Œæˆ‘ä»¬éœ€è¦å°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;LR&lt;/code&gt; å€¼è¿›è¡Œæ¢å¤ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;é‚£ä¹ˆæˆ‘ä»¬ç”¨ä»€ä¹ˆæ–¹æ³•æ¥æ¢å¤ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;LR&lt;/code&gt; å¯„å­˜å™¨å€¼å‘¢ï¼Ÿ&lt;strong&gt;è¿™é‡Œæœ‰ä¸€ç§æ¯”è¾ƒ trick çš„æ–¹æ³•ï¼Œå°±æ˜¯ç”¨ä¸€ä¸ªå…¨å±€æ•°ç»„æ¥è®°å½• &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;LR&lt;/code&gt; å¯„å­˜å™¨çš„å€¼&lt;/strong&gt;ã€‚æˆ‘ä»¬ç”¨æ•°ç»„æ¥æ¨¡æ‹Ÿä¸€ä¸ªæ ˆç»“æ„ï¼Œå…¶å®å°±å¯ä»¥å¯¹åº”çš„æ‰¾åˆ°å…¶  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;LR&lt;/code&gt; ï¼ˆä¹Ÿè®¸ä½ ä¼šè¯´è¿™é‡Œ&lt;strong&gt;ä¼šæœ‰çº¿ç¨‹å®‰å…¨çš„é—®é¢˜&lt;/strong&gt;ã€‚æ˜¯çš„ï¼Œæˆ‘åœ¨è¿™é‡Œåªæ˜¯åšä¸€ä¸ªç¤ºä¾‹ï¼Œå¦‚æœä½ æœ‰æ›´åŠ å¥å£®çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å»æ‰©å†™ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬æ”¹å†™ä¸€ä¸‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pre_objc_msgSend&lt;/code&gt; æ–¹æ³•æ¥è®°å½• &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;LR&lt;/code&gt; çš„å€¼ï¼š&lt;/p&gt;

&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// å‡è®¾æ–¹æ³•è°ƒç”¨æœ€å¤šæœ‰ 10000 å±‚&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;uintptr_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l_ptr_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// LR æ ˆçš„æ¸¸æ ‡&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cur&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pre_objc_msgSend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SEL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uintptr_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;before objc msgSend&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;c1&quot;&gt;// è®°å½• lrï¼Œä¸”æ¸¸æ ‡ +1&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;l_ptr_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cur&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ ¹æ®ä¹‹å‰çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬çŸ¥é“æ–¹æ³•çš„è¿”å›å€¼åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ret&lt;/code&gt; ä¹‹åï¼Œä¼šè¢«å­˜å…¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X0&lt;/code&gt; å¯„å­˜å™¨ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;post_objc_msgSend&lt;/code&gt; ä¸­å°†ä¸Šæ–‡è®°å½•çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;LR&lt;/code&gt; å€¼è¿”å›ï¼Œç„¶ååœ¨ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X0&lt;/code&gt; å¯„å­˜å™¨æ¥æ¢å¤ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;LR&lt;/code&gt; å¯„å­˜å™¨ã€‚&lt;/p&gt;

&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// è¿”å›è®°å½•çš„ lr å€¼&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;uintptr_t&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;post_objc_msgSend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cur&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;cur&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l_ptr_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// hook_objc_msgSend å†…éƒ¨&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// çœç•¥ ä¿å­˜ä¸Šä¸‹æ–‡è¿‡ç¨‹&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;__asm&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;stp x8, x9, [sp, #-16]!&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;__asm&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;mov x12, %0&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;r&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post_objc_msgSend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;__asm&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ldp x8, x9, [sp], #16&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;__asm&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;blr x12&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// æ¢å¤ lr&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;__asm&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;mov lr, x0&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// çœç•¥ æ¢å¤ä¸Šä¸‹æ–‡è¿‡ç¨‹&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// return&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;__asm&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ret&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†ä½¿ç”¨å†…è”æ±‡ç¼–æ¥ Hook &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt; æ–¹æ³•çš„å…¨éƒ¨å®ç°ä»£ç ã€‚&lt;/p&gt;

&lt;h1 id=&quot;ç®€å•å°è£…&quot;&gt;ç®€å•å°è£…&lt;/h1&gt;

&lt;p&gt;åœ¨ä¸Šé¢çš„å…¨æµç¨‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»å…¨éƒ¨è§£æäº† Hook &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt; çš„å…¨éƒ¨å®ç°ç»†èŠ‚ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°ï¼Œå…¶å®ä¸»è¦çš„å­æ“ä½œå°±åˆ†æˆ 3 ä¸ªï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;è®°å½•ä¸Šä¸‹æ–‡ï¼›&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;æ¢å¤ä¸Šä¸‹æ–‡ï¼›&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;è°ƒç”¨æ–¹æ³•ï¼›&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨&lt;strong&gt;å®&lt;/strong&gt;æ¥å¯¹è¿™ä¸‰ä¸ªå­æ“ä½œè¿›è¡ŒæŠ½è±¡å°è£…ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ä¸‹é¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬å°†ä¸‰ä¸ªæ“ä½œåˆ†åˆ«å°è£…æˆäº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;save()&lt;/code&gt; ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load()&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;call(value)&lt;/code&gt; ä¸‰ä¸ªå®ï¼Œè¿™æ ·åœ¨ Hook æµç¨‹ä¸Šå°±ä¸€ç›®äº†ç„¶äº†ã€‚&lt;/p&gt;

&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#import &quot;objc_msgSend_hook.h&quot;
#import &quot;fishhook.h&quot;
#include &amp;lt;dispatch/dispatch.h&amp;gt;
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define call(value) \
__asm volatile (&quot;stp x8, x9, [sp, #-16]!\n&quot;); \
__asm volatile (&quot;mov x12, %0\n&quot; :: &quot;r&quot;(value)); \
__asm volatile (&quot;ldp x8, x9, [sp], #16\n&quot;); \
__asm volatile (&quot;blr x12\n&quot;);
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define save() \
__asm volatile ( \
&quot;stp x8, x9, [sp, #-16]!\n&quot; \
&quot;stp x6, x7, [sp, #-16]!\n&quot; \
&quot;stp x4, x5, [sp, #-16]!\n&quot; \
&quot;stp x2, x3, [sp, #-16]!\n&quot; \
&quot;stp x0, x1, [sp, #-16]!\n&quot;);
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define load() \
__asm volatile ( \
&quot;ldp x0, x1, [sp], #16\n&quot; \
&quot;ldp x2, x3, [sp], #16\n&quot; \
&quot;ldp x4, x5, [sp], #16\n&quot; \
&quot;ldp x6, x7, [sp], #16\n&quot; \
&quot;ldp x8, x9, [sp], #16\n&quot; );
&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;__unused&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orig_objc_msgSend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SEL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...);&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;uintptr_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l_ptr_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cur&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pre_objc_msgSend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SEL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;uintptr_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;pre action...&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;c1&quot;&gt;// åšä¸€ä¸ªç®€å•å¯¹æµ‹è¯•ï¼Œè¾“å‡º ObjC æ–¹æ³•å&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object_getClassName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;l_ptr_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cur&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;uintptr_t&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;post_objc_msgSend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;post action...&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cur&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;cur&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l_ptr_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;__attribute__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__naked__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hook_Objc_msgSend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// è®°å½•ä¸Šä¸‹æ–‡&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;// å°† lr ä¼ å…¥ x2 ç”¨äº pre_objc_msgSend ä¼ å‚&lt;/span&gt;
    &lt;span class=&quot;kr&quot;&gt;__asm&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;mov x2, lr&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// è°ƒç”¨ pre_objc_msgSend&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pre_objc_msgSend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// è¿˜åŸä¸Šä¸‹æ–‡&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;// è°ƒç”¨ objc_msgSend åŸæ–¹æ³•&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orig_objc_msgSend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;// è®°å½•ä¸Šä¸‹æ–‡&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;// è°ƒç”¨ post_objc_msgSend&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post_objc_msgSend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;// è¿˜åŸ lr&lt;/span&gt;
    &lt;span class=&quot;kr&quot;&gt;__asm&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;mov lr, x0&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;// è¿˜åŸä¸Šä¸‹æ–‡&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;// return&lt;/span&gt;
    &lt;span class=&quot;kr&quot;&gt;__asm&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;volatile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ret&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#pragma mark public
&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// å¯åŠ¨Hook å…¥å£&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hookStart&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dispatch_once_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;onceToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;dispatch_once&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;onceToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;rebind_symbols&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;rebinding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]){&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
                &lt;span class=&quot;s&quot;&gt;&quot;objc_msgSend&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
                &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hook_Objc_msgSend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
                &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orig_objc_msgSend&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸ºä»€ä¹ˆæˆ‘åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load()&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;save()&lt;/code&gt; æ–¹æ³•ä¸­æ²¡æœ‰è®°å½•å’Œå¤åŸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Q0 - Q7&lt;/code&gt; å¯„å­˜å™¨æƒ…å†µï¼Ÿ&lt;strong&gt;å› ä¸ºæˆ‘ä»¬åœ¨æ•´ä¸ªçš„æµç¨‹ä¸­å¹¶æ²¡æœ‰ç”¨åˆ°æµ®ç‚¹æ•°&lt;/strong&gt;ã€‚æ‰€ä»¥è¿™äº›å¯„å­˜å™¨æ˜¯ä¸ä¼šè¢«ä¿®æ”¹çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç®€åŒ–è¿™ä¸ªå†™æ³•ã€‚&lt;/p&gt;

&lt;p&gt;ä»è¿™ä¸ªç‚¹å¯ä»¥å¼•å‡ºï¼Œ&lt;strong&gt;å…¶å® Hook æ–¹æ³•å’Œå†…è”æ±‡ç¼–æ˜¯å…·æœ‰è€¦åˆçš„ï¼ˆé€šç”¨å¯„å­˜å™¨å°±é‚£ä¹ˆå‡ ä¸ªï¼Œå¤§å®¶å…¬ç”¨ï¼‰ï¼Œä½ éœ€è¦ä¸º Hook æ–¹æ³•ä¸­çš„å®ç°æ¥å®šåˆ¶å†…è”æ±‡ç¼–çš„å®ç°ï¼Œæ‰èƒ½å¤Ÿæ»¡è¶³æ•´ä½“çš„éœ€æ±‚å®ç°&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pre_objc_msgSend&lt;/code&gt; ä¸­å¢åŠ äº†æ‰“å°æ–¹æ³•åå’Œç±»åçš„æµ‹è¯•æ–¹æ³•ï¼Œè¿è¡Œåå¯ä»¥çœ‹åˆ°æ•ˆæœå¦‚ä¸‹å›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia20200830151645.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;çœ‹åˆ°è¿™ä¸ªè¾“å‡ºï¼Œèªæ˜çš„ä½ ä¸€å®šå·²ç»æƒ³åˆ°äº†çº¿ç¨‹å®‰å…¨çš„é—®é¢˜äº†ğŸ˜„ã€‚&lt;/p&gt;

&lt;p&gt;è¿™æ˜¯ç•™ç»™ä½ åé¢çš„å»¶ä¼¸ä½œä¸šï¼Œå¸Œæœ›ä½ å¯ä»¥ç»§ç»­è¿™ä¸ªé—®é¢˜çš„æ¢ç©¶å’Œæ€è€ƒã€‚&lt;/p&gt;

&lt;h1 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h1&gt;

&lt;p&gt;æœ¬æ–‡æ¢ç©¶äº†ä½¿ç”¨ &lt;strong&gt;fishhook + å†…è”æ±‡ç¼–&lt;/strong&gt;å®ç° Hook &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt; çš„å…¨éƒ¨å®ç°åŠå…¶å†…åœ¨åŸç†ã€‚å…¶ä¸­çŸ¥è¯†åŒ…æ‹¬ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ä»€ä¹ˆæ˜¯ Inline Hook æŠ€æœ¯ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;fishhook çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/li&gt;
  &lt;li&gt;ä¸ºä»€ä¹ˆ fishhook å¯ä»¥ Hook &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;objc_msgSend&lt;/code&gt; æ–¹æ³•ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;å¦‚ä½•ä½¿ç”¨å†…è”æ±‡ç¼–æ¥è¿›è¡Œè®°å½•ä¸Šä¸‹æ–‡å’Œè¿˜åŸä¸Šä¸‹æ–‡æ“ä½œï¼Ÿ&lt;/li&gt;
  &lt;li&gt;å¦‚ä½•ä½¿ç”¨å†…è”æ±‡ç¼–é€šè¿‡æ–¹æ³•åœ°å€è°ƒç”¨æ–¹æ³•ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;æ±‡ç¼–è¯­å¥æ¨¡ç‰ˆçš„ç®€å•ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä»¥ä¸Šé—®é¢˜ä¹Ÿç”¨äºè€ƒå¯Ÿä½ æ˜¯å¦å¯¹è¿™ç¯‡æ–‡ç« å®Œå…¨æŒæ¡ï¼Œå¦‚æœæ²¡æœ‰å»ºè®®&lt;strong&gt;æ·»åŠ æ”¶è—&lt;/strong&gt;å†æ¬¡é˜…è¯»ã€‚&lt;/p&gt;

&lt;p&gt;å½“ç„¶è¿™ä¸ªå®ç°åªæ˜¯ä¸€ä¸ªå·¥å…·ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥åšå¾ˆå¤šä½ éœ€è¦çš„äº‹æƒ…ã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–ï¼Œææ‡‚äº†è¿™ç¯‡æ–‡ç« ä¹‹åï¼Œæˆ‘æ¨èä½ å»å†å»çœ‹ä¸€çœ‹æˆ´é“­è€å¸ˆçš„ã€ŒiOS å¼€å‘é«˜æ‰‹è¯¾ - 01 ï½œ App å¯åŠ¨é€Ÿåº¦æ€ä¹ˆåšä¼˜åŒ–ä¸ç›‘æ§ã€ï¼ˆå¹¶æ— åˆ©ç›Šï¼Œå•çº¯æ¨èã€‚è¿™ä¸€ç« èŠ‚å¯å…è´¹è¯•è¯»ï¼‰ï¼Œæˆ‘ç›¸ä¿¡å¾ˆå¤šéš¾ç‚¹åœ°æ–¹éƒ½ä¼šè¿åˆƒè€Œè§£äº†ã€‚&lt;/p&gt;

&lt;h1 id=&quot;æ–‡ç« ä¹¦ç±å¼•ç”¨ä¸é¸£è°¢&quot;&gt;æ–‡ç« ä¹¦ç±å¼•ç”¨ä¸é¸£è°¢&lt;/h1&gt;

&lt;p&gt;ç‰¹åˆ«æ„Ÿè°¢å¥½å‹ @é«˜çº§é¡µé¢ä»”ã€@Boyangã€@Jadynã€@é…¸èœé±¼ã€@linxi å¯¹äºæ–‡ç« çš„æ–§æ­£ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ã€Œåœ¨Xcodeå·¥ç¨‹ä¸­åµŒå…¥æ±‡ç¼–ä»£ç  Â· é«˜çº§é¡µé¢ä»”ã€&lt;/li&gt;
  &lt;li&gt;ã€ŒiOS åº”ç”¨é€†å‘ä¸å®‰å…¨ä¹‹é“ Â· ç½—å·ã€&lt;/li&gt;
  &lt;li&gt;ã€Œè·Ÿæˆ´é“­å­¦ iOS ç¼–ç¨‹ - ç†é¡ºæ ¸å¿ƒçŸ¥è¯†ç‚¹ Â· æˆ´é“­ã€&lt;/li&gt;
&lt;/ul&gt;</content><author><name>å†¬ç“œ</name><email>gua@desgard.com</email></author><category term="iOS æ–¹æ¡ˆä¹‹æœ¬" /><summary type="html">èƒŒæ™¯ åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† ARM64 ä¸­çš„æ±‡ç¼–åŸºç¡€ï¼Œå¹¶ä¸”çŸ¥é“äº†åœ¨æ±‡ç¼–å½“ä¸­ï¼Œè°ƒç”¨ä¸€ä¸ªæ–¹æ³•çš„å‰ååœ¨æ ˆç©ºé—´æ˜¯æ€æ ·è¡¨ç°çš„ï¼Œä»¥åŠå†…å­˜ä¸­çš„å‡ ä¸ªç‰¹æ®Šå¯„å­˜å™¨æ˜¯å¦‚ä½•æ“ä½œçš„ã€‚ ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†è¯¦ç»†åˆ†æä¸€ä¸‹ä½¿ç”¨æ±‡ç¼–æ¥ Hook objc_msgSend æ–¹æ³•çš„å…¨éƒ¨æµç¨‹ã€‚ Hook æ€è·¯æ¢³ç† å¯¹äº objc_msgSend è¿™ä¸ªæˆ‘ä»¬è¦ Hook çš„æ–¹æ³•ï¼Œæˆ‘ä»¬é¦–å…ˆè¦ææ¸…æ¥šï¼Œè¿™æ˜¯ä¸€ä¸ªä»€ä¹ˆæ ·çš„æ–¹æ³•ï¼Ÿæˆ‘éœ€è¦ç”¨ä»€ä¹ˆæ–¹æ¡ˆæ‰èƒ½ Hook åˆ°å®ƒçš„å…¥å£ã€‚é¦–å…ˆæˆ‘ä»¬æ¥æ•´ç†ä»¥ä¸‹æˆ‘ä»¬æ‹¥æœ‰çš„ Hook æ–¹æ¡ˆï¼š åŸºäº Objective-C Runtime çš„ Method Swizzlingï¼šä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ class_replaceMethod æ–¹æ³•ï¼› åŸºäº fishhook çš„ Hookï¼šç”±äºåœ¨ Mach-O å½“ä¸­ï¼Œæœ‰ Bind å’Œ Lazy Bind çš„ä¸¤ä¸ªæ¦‚å¿µï¼Œæ‰€ä»¥ Facebook é€šè¿‡ä¿®æ”¹ __la_symbol å’Œ __nl_symbol ä¸¤ä¸ªè¡¨çš„æŒ‡é’ˆï¼Œåœ¨äºŒæ¬¡è°ƒç”¨çš„æ—¶å€™ï¼Œç›´æ¥é€šè¿‡ __la_symbol_ptr æ‰¾åˆ°å‡½æ•°åœ°å€ç›´æ¥è°ƒç”¨ï¼Œä»è€Œä¸ç”¨å¤šæ¬¡ç¹ççš„è¿›è¡Œå‡½æ•°å¯»å€ï¼› åŸºäº Dobby çš„ Inline Hookï¼šDobby æ˜¯é€šè¿‡æ’å…¥ __zDATA æ®µå’Œ __zTEXT æ®µåˆ° Mach-O ä¸­ã€‚__zDATA ç”¨æ¥è®°å½• Hook ä¿¡æ¯ï¼ˆHook æ•°é‡ã€æ¯ä¸ª Hook æ–¹æ³•çš„åœ°å€ï¼‰ã€æ¯ä¸ª Hook æ–¹æ³•çš„ä¿¡æ¯ï¼ˆå‡½æ•°åœ°å€ã€è·³è½¬æŒ‡ä»¤åœ°å€ã€å†™ Hook å‡½æ•°çš„æ¥å£åœ°å€ï¼‰ã€æ¯ä¸ª Hook çš„æ¥å£ï¼ˆæŒ‡é’ˆï¼‰ã€‚__zText ç”¨æ¥è®°å½•æ¯ä¸ª Hook å‡½æ•°çš„è·³è½¬æŒ‡ä»¤ã€‚Dobby é€šè¿‡ mmap æŠŠæ•´ä¸ª Mach-O æ–‡ä»¶æ˜ å°„åˆ°ç”¨æˆ·çš„å†…å­˜ç©ºé—´ï¼Œå†™å…¥å®Œæˆä¿å­˜æœ¬åœ°ã€‚æ‰€ä»¥ Dobby å¹¶ä¸æ˜¯åœ¨åŸ Mach-O ä¸Šè¿›è¡Œæ“ä½œï¼Œè€Œæ˜¯é‡æ–°ç”Ÿæˆå¹¶æ›¿æ¢ã€‚å…³äº Dobby ä¸­çš„å¥‡æŠ€æ·«å·§è¿˜æœ‰å¾ˆå¤šï¼Œå¦‚æœæœ‰å¯èƒ½åç»­ä¼šå‡ºä¸€ä¸ªåˆ†ææ–‡ç« ï¼ˆæ’æ——å­ï¼‰ã€‚ å½“ç„¶ï¼Œæˆç†Ÿçš„ Hook æ–¹æ¡ˆè¿˜æœ‰å¾ˆå¤šï¼Œå¹¶ä¸”è¿™äº›ç»å¸¸å‡ºç°åœ¨é€†å‘å·¥ç¨‹ä¸­ï¼Œæˆ‘è¿™é‡Œåªæ˜¯åˆ—ä¸¾äº†æœ€å¸¸ç”¨çš„ä¸‰ä¸ªã€‚ ä»€ä¹ˆæ˜¯ Inline Hook é¦–å…ˆç»™ä¸ªå®šä¹‰ï¼šInline Hook å°±æ˜¯åœ¨è¿è¡Œçš„æµç¨‹ä¸­æ’å…¥è·³è½¬æŒ‡ä»¤æ¥æŠ¢å¤ºè¿è¡Œæµç¨‹çš„ä¸€ä¸ªæ–¹æ³•ã€‚ ä¸Šå›¾å±•ç¤ºäº† Inline Hook å¤§è‡´çš„æ€è·¯ï¼š å°†åŸå‡½æ•°çš„å‰ N ä¸ªå­—èŠ‚æ¬è¿åˆ° Hook å‡½æ•°çš„å‰ N ä¸ªå­—èŠ‚ï¼› ç„¶åå°†åŸå‡½æ•°çš„å‰ N ä¸ªå­—èŠ‚å¡«å……è·³è½¬åˆ° Hook å‡½æ•°çš„è·³è½¬æŒ‡ä»¤ï¼› åœ¨ Hook å‡½æ•°æœ«å°¾å‡ ä¸ªå­—èŠ‚å¡«å……è·³è½¬å›åŸå‡½æ•° +N çš„è·³è½¬æŒ‡ä»¤ï¼› ä»¥ä¸Šçš„ N æœ‰å¤šå¤§ï¼Œå–å†³äºä½ çš„è·³è½¬æŒ‡ä»¤å†™å¾—æœ‰å¤šå¤§ï¼ˆå ç”¨äº†å¤šå°‘æŒ‡ä»¤ï¼‰ã€‚ ç›¸è¾ƒä¸ Inline Hookï¼Œ fishhook ä½¿ç”¨çš„æ˜¯å¾ˆ Trick çš„æ–¹å¼ï¼Œé€šè¿‡åŠ«æŒ stub ä»è€Œè¾¾åˆ°æ›¿æ¢çš„ç›®çš„ã€‚ åœ¨ç½—å·çš„ã€ŒiOS åº”ç”¨é€†å‘ä¸å®‰å…¨ä¹‹é“ã€ä¸­å°† fishhook å½’ç±»æˆ Inline Hookã€‚ä»å¹¿ä¹‰çš„å®šä¹‰ä¸Šæ¥è¯´ï¼Œåªè¦å®Œæˆé‡å®šå‘åˆ°æˆ‘ä»¬è‡ªå·±çš„æ–¹æ³•ï¼Œå¹¶åœ¨è¿œæ–¹æ³•å‰åå¯å®šåˆ¶å¤„ç†å°±å¯ä»¥ç®—ä½œ Inline Hookã€‚ä½†æ˜¯æˆ‘å’Œé¡µé¢ä»”è®¨è®ºçš„ç»“æœæ˜¯ï¼Œè¿™é‡Œçš„ Inline åº”è¯¥è¦ç†è§£ä¸º Inline Modificationï¼Œè¿™ç§æŠ€æœ¯é€šå¸¸å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¦†ç›–æ–¹æ³•å¼€å¤´æŒ‡ä»¤ä¸­çš„å‰å‡ ä¸ªå­—èŠ‚ï¼Œå®Œæˆ Hook æ–¹æ³•çš„é‡å®šå‘å·¥ä½œã€‚ fishhook å®Œæˆè·³è½¬ æ±‡ç¼–å®ç°çš„ objc_msgSend ä¸ºä»€ä¹ˆå¯ä»¥å½“ä½œ C æ–¹æ³•ï¼Ÿ é€šè¿‡æŸ¥çœ‹ objc_msgSend ï¼Œæˆ‘ä»¬çŸ¥é“ Runtime çš„ Method Swizzling å¹¶ä¸é€‚ç”¨ï¼Œå› ä¸ºå®ƒå¹¶ä¸æ˜¯ Objective-C æ–¹æ³•ï¼Œè°ƒç”¨æ—¶å¹¶ä¸ä¼šæœ‰æˆ‘ä»¬ç»å¸¸è¯´çš„â€œæ¶ˆæ¯è½¬å‘â€ï¼›é€šè¿‡æŸ¥çœ‹ Runtime æºç ï¼Œæˆ‘ä»¬å‘ç° objc_msgSend æ˜¯ä½¿ç”¨çº¯æ±‡ç¼–å®ç°å‡½æ•°ï¼Œé€šè¿‡æ±‡ç¼–æ–‡ä»¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»¥ä¸‹å®šä¹‰ï¼š ENTRY _objc_msgSend è¿™é‡Œçš„ ENTRY æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿåœ¨æ–‡ä»¶ä¸­ç»§ç»­æœç´¢ ENTRY æˆ‘ä»¬æ‰¾åˆ°äº†è¿™ä¹ˆä¸€ä¸ªå®ï¼š .macro ENTRY /* name */ .text .align 5 .globl $0 $0: .endmacro è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªæ±‡ç¼–å®ï¼Œè¡¨ç¤ºåœ¨ text æ®µå®šä¹‰ä¸€ä¸ª global çš„ _objc_msgSend ï¼Œ$0 å…¶å®å°±æ˜¯è¿™ä¸ªå®ä¼ å…¥çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ–¹æ³•å…¥å£ã€‚æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å°†è¿™ä¸ªå®æ¥å±•å¼€ï¼š .text .align 5 .globl _objc_msgSend ; ... è¿™é‡Œæˆ‘ä»¬å‘ç°ï¼Œåœ¨ç¬¬ä¸‰è¡Œçš„ä½ç½®é€šè¿‡ C çš„ name mangling å‘½åè§„åˆ™ï¼Œå°†ç¬¦å· _objc_msgSend æ˜ å°„ä¸º C çš„å…¨å±€æ–¹æ³•ç¬¦å·ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ®µæ±‡ç¼–å¯ä»¥é€šè¿‡å¤´æ–‡ä»¶å£°æ˜ï¼Œä¾¿å·²å®Œæˆäº† C çš„å‡½æ•°å®šä¹‰ã€‚æˆ‘ä»¬åœ¨åç»­å¤„ç†çš„æ—¶å€™å¯ä»¥å°†å…¶è§†ä¸º C æ–¹æ³•ã€‚ å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ MachOView æ¥éªŒè¯è¿™ä¸ªç¬¦å·åã€‚ è¿™é‡Œå¦‚æœä¸å¤ªæ˜ç™½å¦‚ä½•ä½¿ç”¨çº¯æ±‡ç¼–å®ç° C æ–¹æ³•ï¼Œå¯ä»¥çœ‹é«˜çº§é¡µé¢ä»”çš„è¿™ç¯‡æ–‡ç« ã€Œåœ¨Xcodeå·¥ç¨‹ä¸­åµŒå…¥æ±‡ç¼–ä»£ç ã€ã€‚ fishhook å®ç°çš„åŸºç¡€ æ—¢ç„¶æˆ‘ä»¬å°† objc_msgSend å·²ç»è§†ä½œ C æ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘å°±å¯ä»¥ä½¿ç”¨ fishhook æ¥å®Œæˆ Inline Hook çš„ç¬¬ä¸€æ­¥ï¼šè·³åˆ° Hook æ–¹æ³•ã€‚fishhook æ˜¯å¦‚ä½•åšçš„å‘¢ï¼Ÿå®ƒæ˜¯åœ¨ä»€ä¹ˆé˜¶æ®µå®Œæˆè¿™ä¸ªåŠ¨ä½œçš„ï¼Ÿæ¥çœ‹ä¸‹å›¾ï¼š æˆ‘ä»¬çŸ¥é“ï¼ŒApple è‡ªèº«çš„å…±äº«ç¼“å­˜åº“å…¶å®ä¸ä¼šç¼–è¯‘è¿›æˆ‘ä»¬è‡ªå·±çš„ Mach-O ä¸­çš„ï¼Œè€Œæ˜¯åœ¨ App å¯åŠ¨åçš„åŠ¨æ€é“¾æ¥æ‰ä¼šå»åšé‡ç»‘å®šæ“ä½œã€‚è¿™é‡Œæˆ‘ä»¬è¦å¦‚ä½•å»éªŒè¯å‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬å†™ä¸€ä¸ª fishhook çš„ demoï¼š #import &quot;ViewController.h&quot; #import &quot;fishhook.h&quot; @implementation ViewController static void (*ori_nslog)(NSString * format, ...); void new_nslog(NSString * format, ...) { //è‡ªå®šä¹‰çš„æ›¿æ¢å‡½æ•° format = [format stringByAppendingFormat:@&quot; Gua &quot;]; ori_nslog(format); } - (void)viewDidLoad { [super viewDidLoad]; NSLog(@&quot;hello world&quot;); struct rebinding nslog; nslog.name = &quot;NSLog&quot;; nslog.replacement = new_nslog; nslog.replaced = (void *)&amp;amp;ori_nslog; rebind_symbols((struct rebinding[1]){nslog}, 1); } - (void)touchesBegan:(NSSet&amp;lt;UITouch *&amp;gt; *)touches withEvent:(UIEvent *)event { NSLog(@&quot;hello world&quot;); } @end ç¼–è¯‘è¿è¡Œä¹‹åå‘ç°è¾“å‡º hello world ï¼Œç‚¹å‡»å±å¹•åï¼ŒæˆåŠŸ Hook NSLog æ–¹æ³•ï¼Œè¾“å‡º hello world Gua ã€‚ 2020-08-02 23:41:50.846939+0800 TestHook[13516:519138] hello world 2020-08-02 23:41:53.681944+0800 TestHook[13516:519138] hello world Gua ä¸ºä»€ä¹ˆå¯ä»¥ Hookï¼Ÿå‡½æ•°åœ°å€ä¸æ˜¯åœ¨ç¼–è¯‘ä¹‹åå°±ç¡®å®šäº†å—ï¼Ÿ å…¶å®å¹¶ä¸æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ nm -n å‘½ä»¤æ¥æŸ¥çœ‹ä¸€ä¸‹æ‰€æœ‰çš„æ–¹æ³•ç¬¦åˆåŠå…¶å¯¹åº”åœ°å€ï¼š $ nm -n TestHook.app/TestHook U _NSLog U _NSStringFromClass U _OBJC_CLASS_$_UIResponder U _OBJC_CLASS_$_UISceneConfiguration U _OBJC_CLASS_$_UIViewController ... U _objc_msgSend U _objc_msgSendSuper2 U _objc_opt_class ... 0000000100006690 b _ori_nslog 0000000100006698 b __rebindings_head åœ¨è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥å‘ç°ï¼Œå…¶å® NSLog æ–¹æ³•å…¶å®å¹¶æ²¡æœ‰åœ°å€ï¼Œè¿™äº›ç³»ç»Ÿåº“å‡½æ•°å¹¶ä¸ä¼šæ‰“å…¥åˆ°æˆ‘ä»¬çš„ App åŒ…ä¸­ï¼›å½“æˆ‘ä»¬ä½¿ç”¨å®ƒä»¬æ—¶ï¼Œdyld å°±è¦ä»å…±äº«çš„åŠ¨æ€åº“ä¸­æŸ¥æ‰¾å¯¹åº”æ–¹æ³•ï¼Œç„¶åå°†å…·ä½“çš„å‡½æ•°åœ°å€ç»‘å®šåˆ°ä¹‹å‰å£°æ˜çš„åœ°æ–¹ï¼Œä»è€Œå®ç°ç³»ç»Ÿåº“æ–¹æ³•çš„è°ƒç”¨ã€‚ å¦å¤–è¯´å¥é¢˜å¤–è¯ä½œä¸ºäº†è§£ï¼Œå¯¹äºè¿™ç§å¯åœ¨ä¸»å­˜ä¸­ä»»æ„ä½ç½®æ­£ç¡®åœ°æ‰§è¡Œï¼Œå¹¶ä¸”ä¸å—å…¶ç»å¯¹åœ°å€å½±å“çš„æŠ€æœ¯ï¼Œåœ¨è®¡ç®—æœºé¢†åŸŸç§°ä¹‹ä¸º PICï¼ˆPosition Independent Codeï¼‰æŠ€æœ¯ã€‚ fishhook å¯¹äº Mach-O åˆ©ç”¨ é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ Mach-O ä¸­ __DATA æ®µæœ‰ä¸¤ä¸ª Section ä¸åŠ¨æ€ç¬¦å·ç»‘å®šæœ‰å…³ç³»ï¼š __nl_symbol_ptr ï¼šå­˜å‚¨äº† non-lazily ç»‘å®šçš„ç¬¦å·ï¼Œè¿™äº›ç¬¦å·åœ¨ Mach-O åŠ è½½çš„æ—¶å€™ç»‘å®šå®Œæˆï¼› __la_symbol_ptr ï¼šå­˜å‚¨äº† lazy ç»‘å®šçš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ï¼Œç”± dyld_stub_binder è¿›è¡Œç»‘å®šï¼› æ—¢ç„¶ __la_symbol_ptr å­˜å‚¨äº†æ‰€æœ‰ lazy ç»‘å®šçš„æ–¹æ³•ï¼Œé‚£ä¹Ÿå°±æ˜¯è¯´åœ¨è¿™äº›ä½ç½®åº”è¯¥å­˜å‚¨äº†å¯¹åº”æ–¹æ³•çš„åœ°å€ã€‚æˆ‘ä»¬é€šè¿‡ lldb æ¥éªŒè¯ä¸€ä¸‹ã€‚ æˆ‘ä»¬åœ¨ç¬¬ä¸€ä¸ª hello world çš„ä½ç½®å¢åŠ æ–­ç‚¹ï¼Œå¹¶ä½¿ç”¨ image list å‘½ä»¤æ¥è·å– App çš„åŸºåœ°å€ï¼š åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çš„ App åŸºåœ°å€ä¸º 0x00000001063b6000 ã€‚å½“ç„¶ä½ åšå®éªŒçš„æ—¶å€™å¯èƒ½åŸºåœ°å€ä¼šæœ‰æ‰€æ”¹å˜ï¼Œå› ä¸º ASLRï¼ˆAddress Spce Layout Randomizatioï¼‰ çš„ç¼˜æ•…ã€‚ ç„¶åæˆ‘ä»¬ä½¿ç”¨ MachOView æ¥æŸ¥çœ‹åœ¨ __la_symbol_str ä¸­çš„åç§»é‡ã€‚ å‘ç°æ˜¯ 0x5000 ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ lldb ä¸­ä½¿ç”¨ x å‘½ä»¤æ¥æŸ¥çœ‹ 0x00000001063b6000 + 0x5000 çš„æ•°æ®æ˜¯ä»€ä¹ˆï¼š (lldb) x 0x00000001063b6000+0x5000 0x1063bb000: f0 83 3b 06 01 00 00 00 69 98 93 25 ff 7f 00 00 ..;.....i..%.... 0x1063bb010: 23 53 32 49 ff 7f 00 00 54 84 3b 06 01 00 00 00 #S2I....T.;..... å‘ç°åœ¨æ­¤ä½ç½®çš„æ•°æ®æ˜¯ 0x01063b83f0 ã€‚ä½¿ç”¨åæ±‡ç¼– dis å‘½ä»¤ï¼Œ æ¥çœ‹å¯¹åº”åœ°å€æ‰€æŒ‡å‘çš„ä»£ç æ®µï¼š (lldb) dis -s 0x01063b83f0 0x1063b83f0: pushq $0x0 0x1063b83f5: jmp 0x1063b83e0 0x1063b83fa: pushq $0xd 0x1063b83ff: jmp 0x1063b83e0 0x1063b8404: pushq $0x127 ; imm = 0x127 0x1063b8409: jmp 0x1063b83e0 é‚£ä¹ˆè¿™æ®µä»£ç åˆ°åº•æ˜¯æˆ‘ä»¬çš„ NSLog çš„ä»£ç å—ï¼Ÿæˆ‘ä»¬å¯ä»¥ç›´æ¥å¯¹å½“å‰æ–­ç‚¹å¯¹æ ˆé¡¶è¿›è¡Œä¸€æ¬¡åæ±‡ç¼–æ¥ç¡®å®šä¸€ä¸‹ç»“æœã€‚åœ¨ lldb ä¸­ç›´æ¥è¾“å…¥ dis å‘½ä»¤ï¼š å¯ä»¥çœ‹åˆ°æ±‡ç¼–ä¸­ callq å‘½ä»¤å¯¹åº”å¯¹åœ°å€æ˜¯ 0x1063b8354 ã€‚å¯¹è¿™ä¸ªåœ°å€å†æ¬¡è¿›è¡Œ dis -s åæ±‡ç¼–æ¥æŸ¥çœ‹ï¼š æˆ‘ä»¬å‘ç°å…¶ä¸­ 0x00000001063b83f0 è¿™ä¸ªå¾…è·³è½¬çš„åœ°å€ï¼Œå°±æ˜¯ä¸Šé¢ 0x00000001063b6000 + 0x5000 è¿™ä¸ªä½ç½®å­˜å‚¨çš„åœ°å€ã€‚ å†è¿™ä¹‹åï¼Œæˆ‘ä»¬å†å¯¹ç‚¹å‡»äº‹ä»¶ä¸­çš„ NSLog æ–¹æ³•ä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼Œå¹¶ä¸”ç‚¹å‡»ä¸€ä¸‹æ¨¡æ‹Ÿå™¨å±å¹•æ¥è§¦å‘ä¸€ä¸‹ã€‚æˆ‘ä»¬å†ä½¿ç”¨ x å’Œ dis -s ä¸¤ä¸ªå‘½ä»¤æ¥æŸ¥çœ‹ä¸€ä¸‹ 0x00000001063b6000 + 0x5000 ä¸­çš„æ–°æ•°æ®ï¼š æˆ‘ä»¬å‘ç°ï¼Œå…¶æŒ‡å‘åœ°å€å·²ç»å˜æˆäº† 0x01063b7380 ï¼Œä½¿ç”¨åæ±‡ç¼– dis å‘½ä»¤æ¥æŸ¥çœ‹çš„æ—¶å€™ï¼Œä¹Ÿç»™å‡ºäº†ç›¸åº”çš„å‡½æ•°ç¬¦å· new_nslog ã€‚è‡³æ­¤ï¼Œfishhook Hook C æ–¹æ³•å·²ç»å®Œæˆã€‚ fishhook æ€è·¯æ€»ç»“ å…¶å® fishhook çš„ Hook æ€è·¯ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸Šè¿°æ‰€æè¿°çš„ï¼Œå½“ç¬¬ä¸€æ¬¡è°ƒç”¨ç³»ç»ŸåŠ¨æ€åº“ä¸­ C æ–¹æ³•æ—¶ï¼Œå»æ›¿æ¢æ‰ __la_symbol_str çš„æŒ‡é’ˆã€‚ä½†æ˜¯å®ƒçš„é€»è¾‘è¦æ¯”è¿™ä¸ªæ€è·¯è¿˜æ˜¯è¦å¤æ‚ä¸€äº›ï¼Œæ¯”å¦‚ fishhook è¦è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š ä½¿ç”¨æ•°æ®ç»“æ„æ¥æè¿°æ‰€æœ‰ Hook æ–¹æ³•ï¼Ÿ å¦‚ä½•é€šè¿‡æ–¹æ³•åæ¥æ‰¾åˆ°å¯¹åº”çš„ Lazy æŒ‡é’ˆï¼Ÿ å¦‚ä½•è®¡ç®—å¯¹åº”æ–¹æ³•çš„åœ°å€ï¼Ÿ å¦‚æœæ˜¯é Lazy è¡¨ä¸­è¦å¦‚ä½•å¤„ç†ï¼Ÿ å¦‚ä½•æŸ¥æ‰¾åˆ°å¯¹åº”ç¬¦å·åç§°ï¼Ÿ è¯¸å¦‚æ­¤ç±»çš„é—®é¢˜è¿˜æœ‰å¾ˆå¤šã€‚å¦‚æœæƒ³çœ‹å…·ä½“çš„å®ç°ï¼Œæ¨èå»é˜…è¯»æºç ã€‚å½“ç„¶æˆ‘ä»¬å½’çº³ fishhook æ¥ä¿®æ”¹ C æ–¹æ³•çš„æœ¬è´¨ï¼Œé‚£å°±æ˜¯ï¼šdyld æ›´æ–° Mach-O äºŒè¿›åˆ¶çš„ __DATA segment çš„ __la_symbol_str ä¸­çš„æŒ‡é’ˆï¼Œä½¿ç”¨ rebind_symbol æ–¹æ³•æ›´æ–°ä¸¤ä¸ªç¬¦å·ä½ç½®æ¥è¿›è¡Œç¬¦å·çš„é‡æ–°ç»‘å®šã€‚ å†…è”æ±‡ç¼–å®ç° Hook ä¸Šæ–‡è®²è¿°äº†ä½¿ç”¨ fishhook æ¥ Hook ç³»ç»Ÿåº“ä¸­çš„ C æ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å·²ç»å®Œæˆäº†ä»¥ä¸‹è¿™ä¸¤ä¸ªé˜¶æ®µï¼ˆç»¿è‰²ä½ç½®ï¼‰ï¼š æ¢å¥è¯è¯´ä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šè¿‡ fishhook å·²ç»å®Œæˆäº†å…¥å£çš„é‡å®šå‘ã€‚ä½†æ˜¯ objc_msgSend è¿™ä¸ªåŸæ–¹æ³•æˆ‘ä»¬åˆæ˜¯ä¸èƒ½ä¸å»è°ƒç”¨çš„ï¼Œå› ä¸ºæˆ‘ä»¬åªæ˜¯å¸Œæœ›åœ¨ Hook çš„å‰åï¼Œå¢åŠ è‡ªå®šä¹‰çš„äº‹ä»¶ï¼Œå¹¶ä¸æƒ³å»å®Œæ•´æ›¿æ¢åŸå…ˆçš„æ¶ˆæ¯è½¬å‘é€»è¾‘ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬åªè¦åœ¨ Hook æ–¹æ³•ä¸­è°ƒç”¨åŸå‡½æ•°å°±å¯ä»¥è§£å†³é—®é¢˜äº†ã€‚ ä½†æ˜¯æ–°çš„é—®é¢˜åˆå‡ºç°äº†ï¼objc_msgSend åˆ°åº•åº”è¯¥å¦‚ä½•ä¼ å‚å‘¢ï¼Ÿ objc_msgSend æ–¹æ³•å®šä¹‰ åœ¨ message.h æ–‡ä»¶ä¸­ï¼Œobjc_msgSend æœ‰å¦‚ä¸‹å®šä¹‰ï¼š objc_msgSend(id _Nullable self, SEL _Nonnull op, ...) OBJC_AVAILABLE(10.0, 2.0, 9.0, 1.0, 2.0); çœ‹äº†å‡½æ•°å®šä¹‰ï¼Œéš¾ç‚¹å…¶å®å°±æ˜¯ä¸å®šå‚æ•°ã€‚æ—¢ç„¶æ˜¯ä¸å®šå‚æ•°ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸å®šå‚æ•°çš„åŸç†ï¼Œåœ¨ va_list æ¥è§£ææ•°ç»„ï¼Œå°±å¯ä»¥è·å–åˆ°æ‰€æœ‰å‚æ•°äº†ã€‚è™½ç„¶ä½¿ç”¨ va_list æ˜¯è¡Œçš„é€šçš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦è€ƒè™‘ va_list åœ¨ä¸åŒå¹³å°ä¸Šçš„æ•°æ®ç»“æ„å·®å¼‚ã€‚è¿™ä¸€ç‚¹å¯ä»¥å‚çœ‹å‰è¾ˆ bang åœ¨å¼€å‘ JSPatch çš„æ—¶å€™æ‰€åšçš„ç¬”è®°ã€ŒJSPatch å®ç°åŸç†è¯¦è§£ã€ã€‚ è¿™ä¸ªå…¶å®æˆ‘ä¹Ÿå’Œé¡µé¢ä»”è®¨è®ºäº†ä¸€ç•ªã€‚é¡µé¢ä»”è¯´å…¶å®ä½¿ç”¨ va_list å¯å˜å‚æ•°åº”è¯¥ä¼šæœ‰å¾ˆå¤§çš„å‘ï¼Œå› ä¸ºåœ¨ objc_msgSend æ–¹æ³•ä¸­ä¸æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„å¯å˜å‚æ•°ã€‚å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ã€ŒApple ä¸ºä»€ä¹ˆè¦ä¿®æ”¹ objc_msgSend çš„åŸå‹ã€ã€‚ ä½†æ—¢ç„¶éƒ½å·²ç»å¯¹ä¸åŒå¹³å°åšå·®å¼‚åŒ–å¤„ç†äº†ï¼Œé‚£ä¹ˆå¹²è„†å°±ç›´æ¥ä½¿ç”¨å†…è”æ±‡ç¼–æ¥å®ç°ä¼ å‚é€»è¾‘å°±å¯ä»¥äº†ï¼Ÿåœ¨ç›®å‰çš„ Hook æ–¹æ¡ˆä¸­ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥ä½¿ç”¨ ARM æ±‡ç¼–æ¥å¤„ç†çš„ã€‚ è®°å½•ä¸Šä¸‹æ–‡ é€šè¿‡ä¸Šä¸€ç¯‡æ–‡ç« ã€Œä¸ºä»€ä¹ˆä½¿ç”¨æ±‡ç¼–å¯ä»¥ Hook objc_msgSendï¼ˆä¸Šï¼‰- æ±‡ç¼–åŸºç¡€ã€ï¼Œæˆ‘ä»¬äº†è§£åˆ° X0 - X7 ç”¨æ¥å­˜å‚¨ä¼ é€’å‚æ•°ï¼Œæˆ‘ä»¬ä»…ä»ä¸€ä¸ªæ–¹æ³•ä½“çš„è§’åº¦ä¸Šæ¥è®²ï¼Œå¯èƒ½å‚æ•°å·²ç»æ˜¯ä¸Šä¸‹æ–‡çš„å…¨éƒ¨å†…å®¹äº†ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä»å¯„å­˜å™¨çš„è§’åº¦ä¸Šæ¥çœ‹é—®é¢˜ï¼Œä¸Šä¸‹æ–‡å†…å®¹è¿˜æœ‰å…¶ä»–çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ Q0 - Q7 è¿™å…«ä¸ªæµ®ç‚¹æ•°å¯„å­˜å™¨ã€‚ æ‰€ä»¥ä¸ºäº†ä¿å­˜æ–¹æ³•çš„ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬é€šè¿‡å°† X0 - X9ã€Q0 - Q7 è¿™äº›å¯„å­˜å™¨çš„å€¼å‹æ ˆï¼Œä»è€Œè®°å½•ä¸‹è°ƒç”¨ objc_msgSend æ–¹æ³•çš„æ‰€æœ‰ä¸Šä¸‹æ–‡ï¼Œå…¶å‹æ ˆæ–¹æ³•ç›´æ¥æ¨¡ä»¿ä¸Šæ–‡ä¸­è°ƒç”¨å‡½æ•°æ—¶çš„å‹æ ˆæ–¹æ³•å³å¯ï¼š ; sp æŒ‡å‘æ ˆé¡¶ ; ä¿å­˜ {q0 - q7} ï¼Œåç§»åœ°å€åˆ° sp å¯„å­˜å™¨ stp q6, q7, [sp, #-32]! stp q4, q5, [sp, #-32]! stp q2, q3, [sp, #-32]! stp q0, q1, [sp, #-32]! ; ä¿å­˜ {x0 - x8, lr} stp x8, x9, [sp, #-16]! stp x6, x7, [sp, #-16]! stp x4, x5, [sp, #-16]! stp x2, x3, [sp, #-16]! stp x0, x1, [sp, #-16]! ä¸ºä»€ä¹ˆè¿™é‡Œå¤„ç†å‚æ•° X0-X7 è¦è®°å½•ï¼Œè¿˜éœ€è¦è®°å½• X8 å’Œ X9 ä¸¤ä¸ªå¯„å­˜å™¨å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬åœ¨ pre_objc_msgSend ä¼šå¯¹å…¶æ”¹å˜ã€‚ä¸ºäº†è¿˜åŸä¹‹å‰æ‰€æœ‰å¯„å­˜å™¨çš„çŠ¶æ€ï¼Œæœ€ä¿é™©çš„æ–¹å¼å°±æ˜¯å…¨éƒ¨è®°å½•ã€‚ è°ƒç”¨ pre_objc_msgSend æ–¹æ³• åœ¨ä¿å­˜å®Œä¸Šä¸‹æ–‡ä¹‹åï¼Œå®šä¹‰ä¸€ä¸ª pre_objc_msgSend çš„æ–¹æ³•ï¼Œå…¶ä½œç”¨æ˜¯ç”¨æ¥è‡ªå·±å®šåˆ¶ objc_msgSend ä¹‹å‰å‘ç”Ÿçš„äº‹æƒ…ã€‚ å¾€å¾€æˆ‘ä»¬ Hook objc_msgSend çš„ç›®çš„ï¼Œå°±æ˜¯æƒ³è®°å½•æ–¹æ³•çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ä¾‹å¦‚æˆ‘ä»¬æƒ³åº¦é‡æ…¢å‡½æ•°çš„æ—¶é—´ï¼Œåˆ™æˆ‘ä»¬éœ€è¦å…¶æ–¹æ³•åã€æ‰€åœ¨çš„ Class ä»¥åŠå…¶ä¸Šå±‚è°ƒç”¨æ–¹æ³•å’Œå†å²å †æ ˆç­‰ã€‚é‚£ä¹ˆåœ¨å®šä¹‰ pre_objc_msgSend æ–¹æ³•çš„å¦‚å‚æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°† id self ï¼ˆself å®ä¾‹æŒ‡é’ˆï¼‰ï¼ŒSEL _cmd ï¼ˆæ–¹æ³• IDï¼‰ï¼Œuintptr_t lr ï¼ˆLR å¯„å­˜å™¨ï¼Œå‡½æ•°è°ƒç”¨åçš„è¿”å›åœ°å€ï¼‰ä¼ å…¥å³å¯ã€‚ è¿™é‡Œçš„ LR è®°å½•å…¶å®å¹¶ä¸æ˜¯ä¸ºæˆ‘ä»¬ä¸šåŠ¡è€ŒæœåŠ¡çš„ï¼Œè€Œæ˜¯éœ€è¦ä¸ºå †æ ˆè®°å½•ï¼Œè¿™æ ·åœ¨ Hook çš„æœ€åå¯ä»¥è·³è½¬å›ä¸Šä¸€å±‚æ–¹æ³•ã€‚ å¯¹åº”çš„ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå¸¦æœ‰è¿™ä¸‰ä¸ªå‚æ•°çš„ pre_objc_msgSend æ–¹æ³•ï¼š void pre_objc_msgSend(id self, SEL _cmd, uintptr_t lr) { // pre action... } ä¸ºäº†å°†å¯¹åº”çš„å‚æ•°ä¼ å…¥ï¼Œæˆ‘ä»¬åˆ©ç”¨ X0-X2 å¯„å­˜å™¨æ¥ä¼ å‚ã€‚å› ä¸º X0 å’Œ X1 å¯¹åº”çš„å°±æ˜¯ self å’Œ _cmd ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å°† LR ä¼ é€’åˆ° X2 ä¸­å³å¯ï¼š ; å°† lr ä¼ å…¥ x2 mov x2, lr æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®ç°è°ƒç”¨ pre_objc_msgSend æ–¹æ³•ã€‚ æˆ‘å…ˆç»™å‡ºæ±‡ç¼–ï¼Œç„¶åæˆ‘ä»¬æ¥è§£æå®ƒçš„æ„æ€ï¼š __asm volatile (&quot;stp x8, x9, [sp, #-16]!\n&quot;); __asm volatile (&quot;mov x12, %0\n&quot; : : &quot;r&quot;(&amp;amp;pre_objc_msgSend)); __asm volatile (&quot;ldp x8, x9, [sp], #16\n&quot;); __asm volatile (&quot;blr x12\n&quot;); ç¬¬ä¸€è¡Œå’Œç¬¬ä¸‰è¡Œæ˜¯ç”¨æ¥è®°å½•å’Œæ¢å¤ X8 å’Œ X9 ä¸¤ä¸ªå¯„å­˜å™¨ï¼Œå…¶åŸå› æ˜¯å› ä¸ºä½¿ç”¨äº† %0 è¿™ä¸ªæŒ‡ä»¤æ“ä½œæ•°ï¼Œè¿™æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿ ä¸ºäº†è®²è§£æ–¹ä¾¿ï¼Œä¸¾ä¸€ä¸ªå…¶ä»–çš„ä¾‹å­ã€‚å‡å¦‚æˆ‘æƒ³ä½¿ç”¨å†…è”æ±‡ç¼–å†™ä¸€ä¸ªåŠ æ³•å‡½æ•°ï¼Œæˆ‘å¯ä»¥å†™å‡ºä»¥ä¸‹ä»£ç ï¼š int arm_sum(int a, int b) { int sum = 0; asm volatile(&quot;add %0, %1, %2&quot; // 1 : &quot;=r&quot; (sum) // 2 : &quot;r&quot; (a), &quot;r&quot; (b) // 3 :); return sum; } - (void)viewDidLoad { [super viewDidLoad]; int a = arm_sum(2, 3); NSLog(@&quot;sum = %d&quot;, a); // sum = 5 } è¿™ä¸€è¡Œç§°ä½œæ±‡ç¼–è¯­å¥æ¨¡ç‰ˆã€‚%0ã€%1ã€%2 ä»£è¡¨æŒ‡ä»¤æ“ä½œæ•°ï¼Œä¹Ÿå¯ä»¥ä»£è¡¨é€šç”¨å¯„å­˜å™¨ï¼ˆéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸æ˜¯ ARM æ±‡ç¼–ï¼Œè€Œæ˜¯åŸºäºæ±‡ç¼–çš„ä¸Šå±‚è¯­è¨€ï¼‰ã€‚åˆ†åˆ«ä»£è¡¨ sum ã€a å’Œ bï¼ˆä¸ºä»€ä¹ˆæ˜¯è¿™ä¸ªé¡ºåºï¼Ÿå¯ä»¥çœ‹ä¸‹é¢çš„ 2 å’Œ 3ï¼‰ã€‚è¿™ç§æ“ä½œæ•°åœ¨æ±‡ç¼–è¯­å¥æ¨¡ç‰ˆä¸­åªèƒ½æœ‰ 10 ä¸ªï¼Œå³ %0 - %9 ã€‚å½“ç„¶è¿™é‡Œçš„ä»£ç åœ¨ Xcode å¯èƒ½ä¼šæœ‰ warningï¼ŒXcode å»ºè®®æˆ‘ä»¬ä¿®æ”¹æˆ %w0 ï¼Œè¿™ä¸ª w ä»£è¡¨è¿™ä¸ªå˜é‡çš„å®½åº¦ï¼Œw æ˜¯ 32 ä½ï¼Œx æ˜¯ 64 ä½ã€‚ ç¬¬ä¸€ä¸ªå†’å· : åˆ†å‰²çš„ä½ç½®æ˜¯è¾“å‡ºå‚æ•°ã€‚=r å…¶å®æ˜¯ä¸¤ä¸ªæ“ä½œç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†å¼€æ¥çœ‹ã€‚**= ä»£è¡¨ sum å˜é‡æ˜¯è¾“å‡ºæ“ä½œç¬¦ï¼Œr ä»£è¡¨æŒ‰ç…§é¡ºåºä¸æŸä¸ªé€šç”¨å¯„å­˜å™¨ç›¸å…³è”ï¼Œç”±äºå®ƒæ˜¯ç¬¬ä¸€ä¸ªå…³è”çš„ï¼Œè‡ªç„¶å°±è¿›å…¥äº† %0**ã€‚ ç¬¬äºŒä¸ªå†’å· : åˆ†å‰²çš„ä½ç½®æ˜¯è¾“å…¥å‚æ•°ã€‚ç»§ç»­ä½¿ç”¨æ“ä½œç¬¦ r å°† a å’Œ b ä»¥æ­¤æ”¾å…¥é€šç”¨å¯„å­˜å™¨ %1 å’Œ %2 ä¸­ã€‚ ææ‡‚äº†è¿™ä¸ªä½ åº”è¯¥å°±å¯ä»¥æ˜ç™½ä¸Šé¢é‚£ä¸ªï¼š __asm volatile (&quot;mov x12, %0\n&quot; : : &quot;r&quot;(&amp;amp;pre_objc_msgSend)); æ˜¯ä»€ä¹ˆæ„æ€ã€‚å¯¹çš„ï¼Œå…¶å®å°±æ˜¯æŠŠ pre_objc_msgSend çš„åœ°å€å–å‡ºï¼Œç„¶åæ”¾åˆ° X12 å¯„å­˜å™¨ã€‚ é‚£ä¹ˆä¸ºä»€ä¹ˆè¦è®°å½•å’Œæ¢å¤ X8 å’Œ X9 ä¸¤ä¸ªå¯„å­˜å™¨å‘¢ï¼Ÿæˆ‘ä»¬åœ¨è¿™é‡Œå…ˆè®°ä½ä¸€ä¸ªç»“è®ºï¼šå½“ä½¿ç”¨æ±‡ç¼–è¯­å¥æ¨¡ç‰ˆæ—¶ï¼Œå°±ä¼šç”¨åˆ° X8 ã€X9 å¯„å­˜å™¨ï¼Œå› ä¸ºå®ƒçš„ä¸‹å±‚å®ç°æ˜¯é€šè¿‡è¿™äº›é€šç”¨å¯„å­˜å™¨æ¥åšçš„ã€‚ æ‰€ä»¥ä¸ºäº†æ¢å¤ä¹‹å‰çš„ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬å°±å†ä¸€æ¬¡çš„åˆ©ç”¨æ ˆæ¥ä¿å­˜ä¸€ä¸‹è¿™ä¸¤ä¸ªé€šç”¨å¯„å­˜å™¨ï¼Œåœ¨æ­£å¼è°ƒç”¨pre_objc_msgSend æ–¹æ³•ä¹‹å‰å°†å…¶å¤åŸå³å¯ã€‚ æœ€åä¸€è¡Œä½¿ç”¨ blr x12 ï¼Œæ­£å¼è°ƒç”¨ pre_objc_msgSend æ–¹æ³•ã€‚ æ¢å¤ä¸Šä¸‹æ–‡å¹¶è°ƒç”¨åŸå‡½æ•° æ¢å¤ä¸Šä¸‹æ–‡å’Œä¹‹å‰çš„è®°å½•ä¸Šä¸‹æ–‡æ˜¯é€†æ“ä½œï¼Œæ‰€ä»¥ä¸åšè¿‡å¤šåˆ†æï¼š ldp x0, x1, [sp], #16 ldp x2, x3, [sp], #16 ldp x4, x5, [sp], #16 ldp x6, x7, [sp], #16 ldp x8, x9, [sp], #16 ldp q0, q1, [sp], #32 ldp q2, q3, [sp], #32 ldp q4, q5, [sp], #32 ldp q6, q7, [sp], #32 ç»§ç»­ä½¿ç”¨æˆ‘ä»¬ä¸Šè¿°æ–¹æ³•è¿›è¡Œè°ƒç”¨çš„å†…è”æ±‡ç¼–ä»£ç æ¥è°ƒç”¨è¿œæ–¹æ³• objc_msgSend ã€‚åœ¨è¿™é‡Œå‡è®¾æˆ‘ä»¬å·²ç»ä½¿ç”¨ fishhook å°†å…¶å®ç° Hook åˆ°æˆ‘ä»¬æ–°çš„å†…è”æ±‡ç¼–æ–¹æ³•ä½“ hook_objc_msgSend ï¼ŒåŸæ–¹æ³•æ”¾åˆ° origin_objc_msgSend ä¸Šã€‚æ‰€ä»¥å¯¹åº”çš„å†…è”æ±‡ç¼–ä»£ç ï¼š __asm volatile (&quot;stp x8, x9, [sp, #-16]!\n&quot;); __asm volatile (&quot;mov x12, %0\n&quot; : : &quot;r&quot;(&amp;amp;origin_objc_msgSend)); __asm volatile (&quot;ldp x8, x9, [sp], #16\n&quot;); __asm volatile (&quot;blr x12\n&quot;); è°ƒç”¨ post_objc_msgSend å¹¶æ¢å¤ LR åœ¨ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬è®²è¿°è¿‡ LR å¯„å­˜å™¨æ˜¯ç”¨æ¥è®°å½•å‡½æ•°è°ƒç”¨å®Œæˆæ—¶çš„è¿”å›åœ°å€çš„ã€‚ä½†æ˜¯ç»å†äº†å’±ä»¬å¤šæ¬¡å…¶ä»–æ–¹æ³•çš„è°ƒç”¨ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•ç¡®å®š LR çš„å€¼æ˜¯æ­£ç¡®çš„ã€‚æ‰€ä»¥åœ¨ hook_objc_msgSend æ–¹æ³•çš„æœ€åï¼Œæˆ‘ä»¬éœ€è¦å°† LR å€¼è¿›è¡Œæ¢å¤ã€‚ é‚£ä¹ˆæˆ‘ä»¬ç”¨ä»€ä¹ˆæ–¹æ³•æ¥æ¢å¤ LR å¯„å­˜å™¨å€¼å‘¢ï¼Ÿè¿™é‡Œæœ‰ä¸€ç§æ¯”è¾ƒ trick çš„æ–¹æ³•ï¼Œå°±æ˜¯ç”¨ä¸€ä¸ªå…¨å±€æ•°ç»„æ¥è®°å½• LR å¯„å­˜å™¨çš„å€¼ã€‚æˆ‘ä»¬ç”¨æ•°ç»„æ¥æ¨¡æ‹Ÿä¸€ä¸ªæ ˆç»“æ„ï¼Œå…¶å®å°±å¯ä»¥å¯¹åº”çš„æ‰¾åˆ°å…¶ LR ï¼ˆä¹Ÿè®¸ä½ ä¼šè¯´è¿™é‡Œä¼šæœ‰çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚æ˜¯çš„ï¼Œæˆ‘åœ¨è¿™é‡Œåªæ˜¯åšä¸€ä¸ªç¤ºä¾‹ï¼Œå¦‚æœä½ æœ‰æ›´åŠ å¥å£®çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å»æ‰©å†™ï¼‰ã€‚ æˆ‘ä»¬æ”¹å†™ä¸€ä¸‹ pre_objc_msgSend æ–¹æ³•æ¥è®°å½• LR çš„å€¼ï¼š // å‡è®¾æ–¹æ³•è°ƒç”¨æœ€å¤šæœ‰ 10000 å±‚ uintptr_t l_ptr_t[10000]; // LR æ ˆçš„æ¸¸æ ‡ int cur = 0; void pre_objc_msgSend(id self, SEL _cmd, uintptr_t lr) { printf(&quot;before objc msgSend\n&quot;); // è®°å½• lrï¼Œä¸”æ¸¸æ ‡ +1 l_ptr_t[cur ++] = lr; } æ ¹æ®ä¹‹å‰çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬çŸ¥é“æ–¹æ³•çš„è¿”å›å€¼åœ¨ ret ä¹‹åï¼Œä¼šè¢«å­˜å…¥ X0 å¯„å­˜å™¨ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨ post_objc_msgSend ä¸­å°†ä¸Šæ–‡è®°å½•çš„ LR å€¼è¿”å›ï¼Œç„¶ååœ¨ä½¿ç”¨ X0 å¯„å­˜å™¨æ¥æ¢å¤ LR å¯„å­˜å™¨ã€‚ // è¿”å›è®°å½•çš„ lr å€¼ uintptr_t post_objc_msgSend() { if (cur != 0) { cur --; } return l_ptr_t[cur]; } // hook_objc_msgSend å†…éƒ¨ ... // çœç•¥ ä¿å­˜ä¸Šä¸‹æ–‡è¿‡ç¨‹ ... __asm volatile (&quot;stp x8, x9, [sp, #-16]!\n&quot;); __asm volatile (&quot;mov x12, %0\n&quot; : : &quot;r&quot;(&amp;amp;post_objc_msgSend)); __asm volatile (&quot;ldp x8, x9, [sp], #16\n&quot;); __asm volatile (&quot;blr x12\n&quot;); // æ¢å¤ lr __asm volatile (&quot;mov lr, x0\n&quot;); // çœç•¥ æ¢å¤ä¸Šä¸‹æ–‡è¿‡ç¨‹ ... // return __asm volatile (&quot;ret\n&quot;); å¦‚æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†ä½¿ç”¨å†…è”æ±‡ç¼–æ¥ Hook objc_msgSend æ–¹æ³•çš„å…¨éƒ¨å®ç°ä»£ç ã€‚ ç®€å•å°è£… åœ¨ä¸Šé¢çš„å…¨æµç¨‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»å…¨éƒ¨è§£æäº† Hook objc_msgSend çš„å…¨éƒ¨å®ç°ç»†èŠ‚ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°ï¼Œå…¶å®ä¸»è¦çš„å­æ“ä½œå°±åˆ†æˆ 3 ä¸ªï¼š è®°å½•ä¸Šä¸‹æ–‡ï¼› æ¢å¤ä¸Šä¸‹æ–‡ï¼› è°ƒç”¨æ–¹æ³•ï¼› æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®æ¥å¯¹è¿™ä¸‰ä¸ªå­æ“ä½œè¿›è¡ŒæŠ½è±¡å°è£…ã€‚ åœ¨ä¸‹é¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬å°†ä¸‰ä¸ªæ“ä½œåˆ†åˆ«å°è£…æˆäº† save() ã€load() å’Œ call(value) ä¸‰ä¸ªå®ï¼Œè¿™æ ·åœ¨ Hook æµç¨‹ä¸Šå°±ä¸€ç›®äº†ç„¶äº†ã€‚ #import &quot;objc_msgSend_hook.h&quot; #import &quot;fishhook.h&quot; #include &amp;lt;dispatch/dispatch.h&amp;gt; #define call(value) \ __asm volatile (&quot;stp x8, x9, [sp, #-16]!\n&quot;); \ __asm volatile (&quot;mov x12, %0\n&quot; :: &quot;r&quot;(value)); \ __asm volatile (&quot;ldp x8, x9, [sp], #16\n&quot;); \ __asm volatile (&quot;blr x12\n&quot;); #define save() \ __asm volatile ( \ &quot;stp x8, x9, [sp, #-16]!\n&quot; \ &quot;stp x6, x7, [sp, #-16]!\n&quot; \ &quot;stp x4, x5, [sp, #-16]!\n&quot; \ &quot;stp x2, x3, [sp, #-16]!\n&quot; \ &quot;stp x0, x1, [sp, #-16]!\n&quot;); #define load() \ __asm volatile ( \ &quot;ldp x0, x1, [sp], #16\n&quot; \ &quot;ldp x2, x3, [sp], #16\n&quot; \ &quot;ldp x4, x5, [sp], #16\n&quot; \ &quot;ldp x6, x7, [sp], #16\n&quot; \ &quot;ldp x8, x9, [sp], #16\n&quot; ); __unused static id (*orig_objc_msgSend)(id, SEL, ...); uintptr_t l_ptr_t[10000]; int cur = 0; void pre_objc_msgSend(id self, SEL _cmd, uintptr_t lr) { printf(&quot;pre action...\n&quot;); // åšä¸€ä¸ªç®€å•å¯¹æµ‹è¯•ï¼Œè¾“å‡º ObjC æ–¹æ³•å printf(&quot;\t%s\n&quot;, object_getClassName(self)); printf(&quot;\t%s\n&quot;, _cmd); l_ptr_t[cur ++] = lr; } uintptr_t post_objc_msgSend() { printf(&quot;post action...\n&quot;); if (cur != 0) { cur --; } return l_ptr_t[cur]; } __attribute__((__naked__)) static void hook_Objc_msgSend() { // è®°å½•ä¸Šä¸‹æ–‡ save() // å°† lr ä¼ å…¥ x2 ç”¨äº pre_objc_msgSend ä¼ å‚ __asm volatile (&quot;mov x2, lr\n&quot;); // è°ƒç”¨ pre_objc_msgSend call(&amp;amp;pre_objc_msgSend) // è¿˜åŸä¸Šä¸‹æ–‡ load() // è°ƒç”¨ objc_msgSend åŸæ–¹æ³• call(orig_objc_msgSend) // è®°å½•ä¸Šä¸‹æ–‡ save() // è°ƒç”¨ post_objc_msgSend call(&amp;amp;post_objc_msgSend) // è¿˜åŸ lr __asm volatile (&quot;mov lr, x0\n&quot;); // è¿˜åŸä¸Šä¸‹æ–‡ load() // return __asm volatile (&quot;ret\n&quot;); } #pragma mark public // å¯åŠ¨Hook å…¥å£ void hookStart() { static dispatch_once_t onceToken; dispatch_once(&amp;amp;onceToken, ^{ rebind_symbols((struct rebinding[6]){ { &quot;objc_msgSend&quot;, (void *)hook_Objc_msgSend, (void **)&amp;amp;orig_objc_msgSend }, }, 1); }); } ä¸ºä»€ä¹ˆæˆ‘åœ¨ load() å’Œ save() æ–¹æ³•ä¸­æ²¡æœ‰è®°å½•å’Œå¤åŸ Q0 - Q7 å¯„å­˜å™¨æƒ…å†µï¼Ÿå› ä¸ºæˆ‘ä»¬åœ¨æ•´ä¸ªçš„æµç¨‹ä¸­å¹¶æ²¡æœ‰ç”¨åˆ°æµ®ç‚¹æ•°ã€‚æ‰€ä»¥è¿™äº›å¯„å­˜å™¨æ˜¯ä¸ä¼šè¢«ä¿®æ”¹çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç®€åŒ–è¿™ä¸ªå†™æ³•ã€‚ ä»è¿™ä¸ªç‚¹å¯ä»¥å¼•å‡ºï¼Œå…¶å® Hook æ–¹æ³•å’Œå†…è”æ±‡ç¼–æ˜¯å…·æœ‰è€¦åˆçš„ï¼ˆé€šç”¨å¯„å­˜å™¨å°±é‚£ä¹ˆå‡ ä¸ªï¼Œå¤§å®¶å…¬ç”¨ï¼‰ï¼Œä½ éœ€è¦ä¸º Hook æ–¹æ³•ä¸­çš„å®ç°æ¥å®šåˆ¶å†…è”æ±‡ç¼–çš„å®ç°ï¼Œæ‰èƒ½å¤Ÿæ»¡è¶³æ•´ä½“çš„éœ€æ±‚å®ç°ã€‚ æˆ‘åœ¨ pre_objc_msgSend ä¸­å¢åŠ äº†æ‰“å°æ–¹æ³•åå’Œç±»åçš„æµ‹è¯•æ–¹æ³•ï¼Œè¿è¡Œåå¯ä»¥çœ‹åˆ°æ•ˆæœå¦‚ä¸‹å›¾ï¼š çœ‹åˆ°è¿™ä¸ªè¾“å‡ºï¼Œèªæ˜çš„ä½ ä¸€å®šå·²ç»æƒ³åˆ°äº†çº¿ç¨‹å®‰å…¨çš„é—®é¢˜äº†ğŸ˜„ã€‚ è¿™æ˜¯ç•™ç»™ä½ åé¢çš„å»¶ä¼¸ä½œä¸šï¼Œå¸Œæœ›ä½ å¯ä»¥ç»§ç»­è¿™ä¸ªé—®é¢˜çš„æ¢ç©¶å’Œæ€è€ƒã€‚ æ€»ç»“ æœ¬æ–‡æ¢ç©¶äº†ä½¿ç”¨ fishhook + å†…è”æ±‡ç¼–å®ç° Hook objc_msgSend çš„å…¨éƒ¨å®ç°åŠå…¶å†…åœ¨åŸç†ã€‚å…¶ä¸­çŸ¥è¯†åŒ…æ‹¬ï¼š ä»€ä¹ˆæ˜¯ Inline Hook æŠ€æœ¯ï¼Ÿ fishhook çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ ä¸ºä»€ä¹ˆ fishhook å¯ä»¥ Hook objc_msgSend æ–¹æ³•ï¼Ÿ å¦‚ä½•ä½¿ç”¨å†…è”æ±‡ç¼–æ¥è¿›è¡Œè®°å½•ä¸Šä¸‹æ–‡å’Œè¿˜åŸä¸Šä¸‹æ–‡æ“ä½œï¼Ÿ å¦‚ä½•ä½¿ç”¨å†…è”æ±‡ç¼–é€šè¿‡æ–¹æ³•åœ°å€è°ƒç”¨æ–¹æ³•ï¼Ÿ æ±‡ç¼–è¯­å¥æ¨¡ç‰ˆçš„ç®€å•ä½¿ç”¨ã€‚ ä»¥ä¸Šé—®é¢˜ä¹Ÿç”¨äºè€ƒå¯Ÿä½ æ˜¯å¦å¯¹è¿™ç¯‡æ–‡ç« å®Œå…¨æŒæ¡ï¼Œå¦‚æœæ²¡æœ‰å»ºè®®æ·»åŠ æ”¶è—å†æ¬¡é˜…è¯»ã€‚ å½“ç„¶è¿™ä¸ªå®ç°åªæ˜¯ä¸€ä¸ªå·¥å…·ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥åšå¾ˆå¤šä½ éœ€è¦çš„äº‹æƒ…ã€‚ å¦å¤–ï¼Œææ‡‚äº†è¿™ç¯‡æ–‡ç« ä¹‹åï¼Œæˆ‘æ¨èä½ å»å†å»çœ‹ä¸€çœ‹æˆ´é“­è€å¸ˆçš„ã€ŒiOS å¼€å‘é«˜æ‰‹è¯¾ - 01 ï½œ App å¯åŠ¨é€Ÿåº¦æ€ä¹ˆåšä¼˜åŒ–ä¸ç›‘æ§ã€ï¼ˆå¹¶æ— åˆ©ç›Šï¼Œå•çº¯æ¨èã€‚è¿™ä¸€ç« èŠ‚å¯å…è´¹è¯•è¯»ï¼‰ï¼Œæˆ‘ç›¸ä¿¡å¾ˆå¤šéš¾ç‚¹åœ°æ–¹éƒ½ä¼šè¿åˆƒè€Œè§£äº†ã€‚ æ–‡ç« ä¹¦ç±å¼•ç”¨ä¸é¸£è°¢ ç‰¹åˆ«æ„Ÿè°¢å¥½å‹ @é«˜çº§é¡µé¢ä»”ã€@Boyangã€@Jadynã€@é…¸èœé±¼ã€@linxi å¯¹äºæ–‡ç« çš„æ–§æ­£ã€‚ ã€Œåœ¨Xcodeå·¥ç¨‹ä¸­åµŒå…¥æ±‡ç¼–ä»£ç  Â· é«˜çº§é¡µé¢ä»”ã€ ã€ŒiOS åº”ç”¨é€†å‘ä¸å®‰å…¨ä¹‹é“ Â· ç½—å·ã€ ã€Œè·Ÿæˆ´é“­å­¦ iOS ç¼–ç¨‹ - ç†é¡ºæ ¸å¿ƒçŸ¥è¯†ç‚¹ Â· æˆ´é“­ã€</summary></entry><entry><title type="html">ç‰ˆæœ¬ç®¡ç†å·¥å…·åŠ Ruby å·¥å…·é“¾ç¯å¢ƒ</title><link href="https://www.desgard.com/2020/06/11/cocoapods-story-1.html" rel="alternate" type="text/html" title="ç‰ˆæœ¬ç®¡ç†å·¥å…·åŠ Ruby å·¥å…·é“¾ç¯å¢ƒ" /><published>2020-06-11T00:00:00-08:00</published><updated>2020-06-11T00:00:00-08:00</updated><id>https://www.desgard.com/2020/06/11/cocoapods-story-1</id><content type="html" xml:base="https://www.desgard.com/2020/06/11/cocoapods-story-1.html">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;èƒŒæ™¯&lt;/h1&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; ä½œä¸ºä¸šç•Œæ ‡å‡†ï¼Œå„ä½ iOS å¼€å‘åŒå­¦åº”è¯¥éƒ½ä¸é™Œç”Ÿã€‚ä¸è¿‡å¾ˆå¤šåŒå­¦å¯¹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; çš„ä½¿ç”¨åŸºæœ¬åœç•™åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod install&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod update&lt;/code&gt; ä¸Šã€‚ä¸€æ—¦é¡¹ç›®ç»„ä»¶åŒ–ï¼Œå„ä¸šåŠ¡çº¿é€»è¾‘æ‹†åˆ†åˆ°ç‹¬ç«‹çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod&lt;/code&gt; ä¸­åï¼Œå…‰äº†è§£å‡ ä¸ªç®€å• &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod&lt;/code&gt; å‘½ä»¤æ˜¯æ— æ³•æ»¡è¶³éœ€æ±‚çš„ï¼ŒåŒæ—¶è¿˜é¢ä¸´å¼€å‘ç¯å¢ƒçš„ä¸€è‡´æ€§ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod&lt;/code&gt; å‘½ä»¤æ‰§è¡Œä¸­çš„å„ç§å¼‚å¸¸é”™è¯¯ï¼Œéƒ½è¦æ±‚æˆ‘ä»¬å¯¹å…¶æœ‰æ›´æ·±å±‚çš„è®¤çŸ¥å’Œ ğŸ¤”ã€‚&lt;/p&gt;

&lt;p&gt;å…³äº &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; æ·±å…¥çš„æ–‡ç« æœ‰å¾ˆå¤šï¼Œæ¨è ObjC China çš„è¿™ç¯‡ï¼Œ&lt;a href=&quot;https://objccn.io/issue-6-4/&quot;&gt;æ·±å…¥ç†è§£ CocoaPods&lt;/a&gt;ï¼Œè€Œæœ¬æ–‡å¸Œæœ›ä»ä¾èµ–ç®¡ç†å·¥å…·çš„è§’åº¦æ¥è°ˆè°ˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; çš„ç®¡ç†ç†å¿µã€‚&lt;/p&gt;

&lt;h1 id=&quot;version-control-system-vcs&quot;&gt;Version Control System (VCS)&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;Version control systems are a category of software tools that help a software team manage changes to source code over time. Version control software keeps track of every modification to the code in a special kind of database.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ˜¯æ•æ·å¼€å‘çš„é‡è¦ä¸€ç¯ï¼Œä¸ºåç»­çš„æŒç»­é›†æˆæä¾›äº†ä¿éšœã€‚&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Source Code Manager&lt;/code&gt; (SCM) æºç ç®¡ç†å°±å±äº VCS çš„èŒƒå›´ä¹‹ä¸­ï¼Œç†ŸçŸ¥çš„å·¥å…·æœ‰å¦‚ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Git&lt;/code&gt; ã€‚è€Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; è¿™ç§é’ˆå¯¹å„ç§è¯­è¨€æ‰€æä¾›çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Package Manger (PM) &lt;/code&gt;ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯ SCM çš„ä¸€ç§ã€‚&lt;/p&gt;

&lt;p&gt;è€Œåƒ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Git&lt;/code&gt; æˆ– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SVN&lt;/code&gt; æ˜¯é’ˆå¯¹é¡¹ç›®çš„å•ä¸ªæ–‡ä»¶çš„è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œè€Œ PM åˆ™æ˜¯ä»¥æ¯ä¸ªç‹¬ç«‹çš„ Package ä½œä¸ºæœ€å°çš„ç®¡ç†å•å…ƒã€‚åŒ…ç®¡ç†å·¥å…·éƒ½æ˜¯ç»“åˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SCM&lt;/code&gt; æ¥å®Œæˆç®¡ç†å·¥ä½œï¼Œå¯¹äºè¢« PM æ¥ç®¡çš„ä¾èµ–åº“çš„æ–‡ä»¶ï¼Œé€šå¸¸ä¼šåœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Git&lt;/code&gt; çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.ignore&lt;/code&gt; æ–‡ä»¶ä¸­é€‰æ‹©å¿½ç•¥å®ƒä»¬ã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹å¦‚ï¼šåœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Node&lt;/code&gt; é¡¹ç›®ä¸­ä¸€èˆ¬ä¼šæŠŠ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; ç›®å½•ä¸‹çš„æ–‡ä»¶ ignore æ‰ï¼Œåœ¨ iOS/macOS é¡¹ç›®åˆ™æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;git-submodule&quot;&gt;Git Submodule&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1591500594410-f99fd015-3566-49c7-a11f-09f49b1ef142.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Git submodules allow you to keep a git repository as a subdirectory of another git repository. Git submodules are simply a reference to another repository at a particular snapshot in time. Git submodules enable a Git repository to incorporate and track version history of external code.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Git Submodules&lt;/code&gt; å¯ä»¥ç®—æ˜¯ PM çš„â€œé’æ˜¥ç‰ˆâ€ï¼Œå®ƒå°†å•ç‹¬çš„ Git ä»“åº“ä»¥å­ç›®å½•çš„å½¢å¼åµŒå…¥åœ¨å·¥ä½œç›®å½•ä¸­ã€‚å®ƒä¸å…·å¤‡ PM å·¥å…·æ‰€ç‰¹æœ‰çš„&lt;a href=&quot;https://semver.org/&quot;&gt;è¯­ä¹‰åŒ–ç‰ˆæœ¬&lt;/a&gt;ç®¡ç†ã€æ— æ³•å¤„ç†ä¾èµ–å…±äº«ä¸å†²çªç­‰ã€‚åªèƒ½ä¿å­˜æ¯ä¸ªä¾èµ–ä»“åº“çš„æ–‡ä»¶çŠ¶æ€ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Git&lt;/code&gt; åœ¨æäº¤æ›´æ–°æ—¶ï¼Œä¼šå¯¹æ‰€æœ‰æ–‡ä»¶åˆ¶ä½œä¸€ä¸ªå¿«ç…§å¹¶å°†å…¶å­˜åœ¨æ•°æ®åº“ä¸­ã€‚Git ç®¡ç†çš„æ–‡ä»¶å­˜åœ¨ 3 ç§çŠ¶æ€ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;working directorï¼š&lt;/strong&gt; å·¥ä½œç›®å½•ï¼Œå³æˆ‘ä»¬è‚‰çœ¼å¯è§çš„æ–‡ä»¶&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;stage areaï¼š&lt;/strong&gt; æš‚å­˜åŒº (æˆ–ç§° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;index area&lt;/code&gt; )ï¼Œå­˜åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.git/index&lt;/code&gt; ç›®å½•ä¸‹ï¼Œä¿å­˜çš„æ˜¯æ‰§è¡Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git add&lt;/code&gt; ç›¸å…³å‘½ä»¤åä»å·¥ä½œç›®å½•æ·»åŠ çš„æ–‡ä»¶ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;commit historyï¼š&lt;/strong&gt; æäº¤å†å²ï¼Œå­˜åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.git/&lt;/code&gt; ç›®å½•ä¸‹ï¼Œåˆ°è¿™ä¸ªçŠ¶æ€çš„æ–‡ä»¶æ”¹åŠ¨ç®—æ˜¯å…¥åº“æˆåŠŸï¼ŒåŸºæœ¬ä¸ä¼šä¸¢å¤±äº†ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1591356928689-4afddee3-9ca8-4392-8ccc-00ac114e4fe9.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Git submodule æ˜¯ä¾èµ– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.gitmodules&lt;/code&gt; æ–‡ä»¶æ¥è®°å½•å­æ¨¡å—çš„ã€‚&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;submodule&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ReactNative&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ReactNative&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;https&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:/&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;github&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;com&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;facebook&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ReactNative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;git&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.gitmodules&lt;/code&gt; ä»…è®°å½•äº† path å’Œ url ä»¥åŠæ¨¡å—åç§°çš„åŸºæœ¬ä¿¡æ¯ï¼Œ ä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦è®°å½•æ¯ä¸ª Submodule Repo çš„ commit ä¿¡æ¯ï¼Œè€Œè¿™ commit ä¿¡æ¯æ˜¯è®°å½•åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.git/modules&lt;/code&gt; ç›®å½•ä¸‹ã€‚åŒæ—¶è¢«æ·»åŠ åˆ° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.gitmodules&lt;/code&gt; ä¸­çš„ path ä¹Ÿä¼šè¢« git ç›´æ¥ ignore æ‰ã€‚&lt;/p&gt;

&lt;h2 id=&quot;package-manger&quot;&gt;Package Manger&lt;/h2&gt;

&lt;p&gt;ä½œä¸º Git Submodule çš„å¼ºåŒ–ç‰ˆï¼ŒPM åŸºæœ¬éƒ½å…·å¤‡äº†è¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ£€æŸ¥èƒ½åŠ›ï¼Œä¾èµ–é€’å½’æŸ¥æ‰¾ï¼Œä¾èµ–å†²çªè§£å†³ï¼Œä»¥åŠé’ˆå¯¹å…·ä½“ä¾èµ–çš„æ„å»ºèƒ½åŠ›å’ŒäºŒè¿›åˆ¶åŒ…ç­‰ã€‚ç®€å•å¯¹æ¯”å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;&lt;strong&gt;Key File&lt;/strong&gt;&lt;/th&gt;
      &lt;th&gt;&lt;strong&gt;Git submodule&lt;/strong&gt;&lt;/th&gt;
      &lt;th&gt;&lt;strong&gt;CocoaPods&lt;/strong&gt;&lt;/th&gt;
      &lt;th&gt;&lt;strong&gt;SPM&lt;/strong&gt;&lt;/th&gt;
      &lt;th&gt;&lt;strong&gt;npm&lt;/strong&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;æè¿°æ–‡ä»¶&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;.gitmodules&lt;/td&gt;
      &lt;td&gt;Podfile&lt;/td&gt;
      &lt;td&gt;Package.swift&lt;/td&gt;
      &lt;td&gt;Package.json&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;é”å­˜æ–‡ä»¶&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;.git/modules&lt;/td&gt;
      &lt;td&gt;Podfile.lock&lt;/td&gt;
      &lt;td&gt;Package.resolved&lt;/td&gt;
      &lt;td&gt;package-lock.json&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;ä» ğŸ‘† å¯è§ï¼ŒPM å·¥å…·åŸºæœ¬å›´ç»•è¿™ä¸ªä¸¤ä¸ªæ–‡ä»¶æ¥ç°å®åŒ…ç®¡ç†ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;æè¿°æ–‡ä»¶&lt;/strong&gt;ï¼šå£°æ˜äº†é¡¹ç›®ä¸­å­˜åœ¨å“ªäº›ä¾èµ–ï¼Œç‰ˆæœ¬é™åˆ¶ï¼›&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;é”å­˜æ–‡ä»¶ï¼ˆLock æ–‡ä»¶ï¼‰&lt;/strong&gt;ï¼šè®°å½•äº†ä¾èµ–åŒ…æœ€åä¸€æ¬¡æ›´æ–°æ—¶çš„å…¨ç‰ˆæœ¬åˆ—è¡¨ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;é™¤äº†è¿™ä¸¤ä¸ªæ–‡ä»¶ä¹‹å¤–ï¼Œä¸­å¿ƒåŒ–çš„ PM ä¸€èˆ¬ä¼šæä¾›ä¾èµ–åŒ…çš„æ‰˜ç®¡æœåŠ¡ï¼Œæ¯”å¦‚ npm æä¾›çš„ &lt;a href=&quot;https://www.npmjs.com/&quot;&gt;npmjs.com&lt;/a&gt; å¯ä»¥é›†ä¸­æŸ¥æ‰¾å’Œä¸‹è½½ npm åŒ…ã€‚å¦‚æœæ˜¯å»ä¸­å¿ƒåŒ–çš„ PM æ¯”å¦‚ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;iOS&lt;/code&gt; çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Carthage&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SPM&lt;/code&gt; å°±åªèƒ½é€šè¿‡ Git ä»“åº“çš„åœ°å€äº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;cocoapods&quot;&gt;CocoaPods&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1591610249202-498640a5-1265-4cbd-ad45-a23644b393e8.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt;Â æ˜¯å¼€å‘ iOS/macOS åº”ç”¨ç¨‹åºçš„ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“çš„ä¾èµ–ç®¡ç†å·¥å…·ã€‚ åˆ©ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt;ï¼Œå¯ä»¥å®šä¹‰è‡ªå·±çš„ä¾èµ–å…³ç³»ï¼ˆç®€ç§° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods&lt;/code&gt;ï¼‰ï¼Œä»¥åŠåœ¨æ•´ä¸ªå¼€å‘ç¯å¢ƒä¸­å¯¹ç¬¬ä¸‰æ–¹åº“çš„ç‰ˆæœ¬ç®¡ç†éå¸¸æ–¹ä¾¿ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢æˆ‘ä»¬ä»¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; ä¸ºä¾‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1591356928500-57c852dd-59f0-4983-8665-e2bd5d3eab88.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;podfile&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä»¥ DSLï¼ˆå…¶å®ç›´æ¥ç”¨äº† Ruby çš„è¯­æ³•ï¼‰æ¥æè¿°ä¾èµ–å…³ç³»ï¼Œç”¨äºå®šä¹‰é¡¹ç›®æ‰€éœ€è¦ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“ã€‚è¯¥æ–‡ä»¶æ”¯æŒé«˜åº¦å®šåˆ¶ï¼Œä½ å¯ä»¥æ ¹æ®ä¸ªäººå–œå¥½å¯¹å…¶åšå‡ºå®šåˆ¶ã€‚æ›´å¤šç›¸å…³ä¿¡æ¯ï¼Œè¯·æŸ¥é˜… &lt;a href=&quot;http://guides.cocoapods.org/syntax/podfile.html&quot;&gt;Podfile æŒ‡å—&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;podfilelock&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile.lock&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;è¿™æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; åˆ›å»ºçš„æœ€é‡è¦çš„æ–‡ä»¶ä¹‹ä¸€ã€‚å®ƒè®°å½•äº†éœ€è¦è¢«å®‰è£…çš„ Pod çš„æ¯ä¸ªå·²å®‰è£…çš„ç‰ˆæœ¬ã€‚å¦‚æœä½ æƒ³çŸ¥é“å·²å®‰è£…çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod&lt;/code&gt; æ˜¯å“ªä¸ªç‰ˆæœ¬ï¼Œå¯ä»¥æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶ã€‚æ¨èå°† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile.lock&lt;/code&gt; æ–‡ä»¶åŠ å…¥åˆ°ç‰ˆæœ¬æ§åˆ¶ä¸­ï¼Œè¿™æœ‰åŠ©äºæ•´ä¸ªå›¢é˜Ÿçš„ä¸€è‡´æ€§ã€‚&lt;/p&gt;

&lt;h3 id=&quot;manifestlock&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Manifest.lock&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;è¿™æ˜¯æ¯æ¬¡è¿è¡Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pod install&lt;/code&gt; å‘½ä»¤æ—¶åˆ›å»ºçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile.lock&lt;/code&gt; æ–‡ä»¶çš„å‰¯æœ¬ã€‚å¦‚æœä½ é‡è§è¿‡è¿™æ ·çš„é”™è¯¯ &lt;strong&gt;æ²™ç›’æ–‡ä»¶ä¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile.lock&lt;/code&gt; æ–‡ä»¶ä¸åŒæ­¥ (The sandbox is not in sync with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile.lock&lt;/code&gt;)&lt;/strong&gt;ï¼Œè¿™æ˜¯å› ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Manifest.lock&lt;/code&gt; æ–‡ä»¶å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile.lock&lt;/code&gt; æ–‡ä»¶ä¸ä¸€è‡´æ‰€å¼•èµ·ã€‚ç”±äº &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods&lt;/code&gt; æ‰€åœ¨çš„ç›®å½•å¹¶ä¸æ€»åœ¨ç‰ˆæœ¬æ§åˆ¶ä¹‹ä¸‹ï¼Œè¿™æ ·å¯ä»¥ä¿è¯å¼€å‘è€…è¿è¡Œ App ä¹‹å‰éƒ½èƒ½æ›´æ–°ä»–ä»¬çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pods&lt;/code&gt;ï¼Œå¦åˆ™ App å¯èƒ½ä¼š crashï¼Œæˆ–è€…åœ¨ä¸€äº›ä¸å¤ªæ˜æ˜¾çš„åœ°æ–¹ç¼–è¯‘å¤±è´¥ã€‚&lt;/p&gt;

&lt;h3 id=&quot;master-specs-repo&quot;&gt;Master Specs Repo&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;Ultimately, the goal is to improve discoverability of, and engagement in, third party open-source libraries, by creating a more centralized ecosystem.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä½œä¸ºåŒ…ç®¡ç†å·¥å…·ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; çš„ç›®æ ‡æ˜¯ä¸ºæˆ‘ä»¬æä¾›ä¸€ä¸ªæ›´åŠ é›†ä¸­çš„ç”Ÿæ€ç³»ç»Ÿï¼Œæ¥æé«˜ä¾èµ–åº“çš„å¯å‘ç°æ€§å’Œå‚ä¸åº¦ã€‚æœ¬è´¨ä¸Šæ˜¯ä¸ºäº†æä¾›æ›´å¥½çš„æ£€ç´¢å’ŒæŸ¥è¯¢åŠŸèƒ½ï¼Œå¯æƒœæˆä¸ºäº†å®ƒçš„é—®é¢˜ä¹‹ä¸€ã€‚å› ä¸º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; é€šè¿‡å®˜æ–¹çš„ Spec ä»“åº“æ¥ç®¡ç†è¿™äº›æ³¨å†Œçš„ä¾èµ–åº“ã€‚éšç€ä¸æ–­æ–°å¢çš„ä¾èµ–åº“å¯¼è‡´ Spec çš„æ›´æ–°å’Œç»´æŠ¤æˆä¸ºäº†ä½¿ç”¨è€…çš„åŒ…è¢±ã€‚&lt;/p&gt;

&lt;p&gt;å¥½åœ¨è¿™ä¸ªé—®é¢˜åœ¨ 1.7.2 ç‰ˆæœ¬ä¸­å·²ç»è§£å†³äº†ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; æä¾›äº† &lt;a href=&quot;http://blog.cocoapods.org/CocoaPods-1.7.2/&quot;&gt;Mater Repo CDN&lt;/a&gt; ï¼Œå¯ä»¥ç›´æ¥ CDN åˆ°å¯¹åº”çš„ Pod åœ°å€è€Œæ— éœ€åœ¨é€šè¿‡æœ¬åœ°çš„ Spec ä»“åº“äº†ã€‚åŒæ—¶åœ¨ 1.8 ç‰ˆæœ¬ä¸­ï¼Œå®˜æ–¹é»˜è®¤çš„ Spec ä»“åº“å·²æ›¿æ¢ä¸º CDNï¼Œå…¶åœ°å€ä¸º Â &lt;a href=&quot;https://cdn.cocoapods.org&quot;&gt;https://cdn.cocoapods.org&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1591356928577-dbe39320-0571-46f1-af74-9215de67e9e8.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;ruby-ç”Ÿæ€åŠå·¥å…·é“¾&quot;&gt;Ruby ç”Ÿæ€åŠå·¥å…·é“¾&lt;/h1&gt;

&lt;p&gt;å¯¹äºä¸€éƒ¨åˆ†ä»…æ¥è§¦è¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; çš„åŒå­¦ï¼Œå…¶ PM å¯èƒ½å¹¶ä¸ç†Ÿæ‚‰ã€‚å…¶å® &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; çš„æ€æƒ³å€Ÿé‰´äº†å…¶ä»–è¯­è¨€çš„ PM å·¥å…·ï¼Œä¾‹ï¼š&lt;a href=&quot;https://rubygems.org/&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RubyGems&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://bundler.io/&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Bundler&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://www.npmjs.com/&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;npm&lt;/code&gt;&lt;/a&gt; å’Œ &lt;a href=&quot;https://gradle.org/&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gradle&lt;/code&gt;&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬çŸ¥é“ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; æ˜¯é€šè¿‡ Ruby è¯­è¨€å®ç°çš„ã€‚å®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem&lt;/code&gt; åŒ…ã€‚ç†è§£äº† Ruby çš„ä¾èµ–ç®¡ç†æœ‰åŠ©äºæˆ‘ä»¬æ›´å¥½çš„ç®¡ç†ä¸åŒç‰ˆæœ¬çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; å’Œå…¶ä»– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem&lt;/code&gt;ã€‚åŒæ—¶èƒ½å¤Ÿä¿è¯å›¢é˜Ÿä¸­çš„æ‰€æœ‰åŒäº‹çš„å·¥å…·æ˜¯åœ¨åŒä¸€ä¸ªç‰ˆæœ¬ï¼Œè¿™ä¹Ÿç®—æ˜¯æ•æ·å¼€å‘çš„ä¿è¯å§ã€‚&lt;/p&gt;

&lt;h2 id=&quot;rvm--rbenv&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RVM&lt;/code&gt; &amp;amp; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbenv&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1591692379182-19a05f9c-2e20-4f53-9e73-eda10d2969ae.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://rvm.io/&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RVM&lt;/code&gt;&lt;/a&gt;&lt;/strong&gt; å’Œ &lt;strong&gt;&lt;a href=&quot;https://github.com/rbenv/rbenv&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbenv&lt;/code&gt;&lt;/a&gt;&lt;/strong&gt; éƒ½æ˜¯ç®¡ç†å¤šä¸ª Ruby ç¯å¢ƒçš„å·¥å…·ï¼Œå®ƒä»¬éƒ½èƒ½æä¾›ä¸åŒç‰ˆæœ¬çš„ Ruby ç¯å¢ƒç®¡ç†å’Œåˆ‡æ¢ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ªäººç›®å‰ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbenv&lt;/code&gt;ï¼Œè‡³äº &lt;a href=&quot;https://github.com/rbenv/rbenv/wiki/Why-rbenv%3F&quot;&gt;Why rbenv&lt;/a&gt; æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥çœ‹çœ‹ï¼Œæœ€ç»ˆè¿˜æ˜¯çœ‹ä¸ªäººã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1591356928575-cdb4c8e7-c5ea-4654-8b2c-89751b9dab21.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;rubygems&quot;&gt;RubyGems&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1591610289342-050f57ac-98c2-4cba-b766-a914977ce7c6.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The RubyGems software allows you to easily download, install, and use ruby software packages on your system. The software package is called a â€œgemâ€ which contains a packaged Ruby application or library.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://rubygems.org/&quot;&gt;RubyGems&lt;/a&gt; æ˜¯ Ruby çš„ä¸€ä¸ªåŒ…ç®¡ç†å·¥å…·ï¼Œè¿™é‡Œé¢ç®¡ç†ç€ç”¨ Ruby ç¼–å†™çš„å·¥å…·æˆ–ä¾èµ–æˆ‘ä»¬ç§°ä¹‹ä¸º Gemã€‚&lt;/p&gt;

&lt;p&gt;å¹¶ä¸” RubyGems è¿˜æä¾›äº† Ruby ç»„ä»¶çš„æ‰˜ç®¡æœåŠ¡ï¼Œå¯ä»¥é›†ä¸­å¼çš„æŸ¥æ‰¾å’Œå®‰è£… library å’Œ appsã€‚å½“æˆ‘ä»¬ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gem install xxx&lt;/code&gt; æ—¶ï¼Œä¼šé€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rubygems.org&lt;/code&gt; æ¥æŸ¥è¯¢å¯¹åº”çš„ Gem Packageã€‚è€Œ iOS æ—¥å¸¸ä¸­çš„å¾ˆå¤šå·¥å…·éƒ½æ˜¯ Gem æä¾›çš„ï¼Œä¾‹ï¼š&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Bundler&lt;/code&gt;ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fastlane&lt;/code&gt;ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jazzy&lt;/code&gt;ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨é»˜è®¤æƒ…å†µä¸‹ Gems æ€»æ˜¯ä¸‹è½½ library çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè¿™æ— æ³•ç¡®ä¿æ‰€å®‰è£…çš„ library ç‰ˆæœ¬ç¬¦åˆæˆ‘ä»¬é¢„æœŸã€‚å› æ­¤æˆ‘ä»¬è¿˜ç¼ºä¸€ä¸ªå·¥å…·ã€‚&lt;/p&gt;

&lt;h2 id=&quot;bundler&quot;&gt;Bundler&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1591610297193-96c92d15-aa48-4136-abf3-fd8dcb5f2835.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bundler.io/&quot;&gt;Bundler&lt;/a&gt; æ˜¯ç®¡ç† Gem ä¾èµ–çš„å·¥å…·ï¼Œå¯ä»¥éš”ç¦»ä¸åŒé¡¹ç›®ä¸­ Gem çš„ç‰ˆæœ¬å’Œä¾èµ–ç¯å¢ƒçš„å·®å¼‚ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª Gemã€‚&lt;/p&gt;

&lt;p&gt;Bundler é€šè¿‡è¯»å–é¡¹ç›®ä¸­çš„ä¾èµ–æè¿°æ–‡ä»¶ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt; ï¼Œæ¥ç¡®å®šå„ä¸ª Gems çš„ç‰ˆæœ¬å·æˆ–è€…èŒƒå›´ï¼Œæ¥æä¾›äº†ç¨³å®šçš„åº”ç”¨ç¯å¢ƒã€‚å½“æˆ‘ä»¬ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle install&lt;/code&gt; å®ƒä¼šç”Ÿæˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile.lock&lt;/code&gt; å°†å½“å‰ librarys ä½¿ç”¨çš„å…·ä½“ç‰ˆæœ¬å·å†™å…¥å…¶ä¸­ã€‚ä¹‹åï¼Œä»–äººå†é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle install&lt;/code&gt; æ¥å®‰è£… libaray æ—¶åˆ™ä¼šè¯»å– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile.lock&lt;/code&gt; ä¸­çš„ librarysã€ç‰ˆæœ¬ä¿¡æ¯ç­‰ã€‚&lt;/p&gt;

&lt;h3 id=&quot;gemfile&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;å¯ä»¥è¯´ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods**&lt;/code&gt; å…¶å®æ˜¯ iOS ç‰ˆçš„ RubyGems + Bundler ç»„åˆã€‚Bundler ä¾æ®é¡¹ç›®ä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt; æ–‡ä»¶æ¥ç®¡ç† Gemï¼Œè€Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; é€šè¿‡ Podfile æ¥ç®¡ç† Podã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bundler.io/v2.0/gemfile.html&quot;&gt;Gemfile&lt;/a&gt; é…ç½®å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://gems.example.com'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'cocoapods'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1.8.4'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'another_gem'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:git&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://looseyi.github.io.git'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:branch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'master'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¯è§ï¼ŒPodfile çš„ DSL å†™æ³•å’Œ Gemfile å¦‚å‡ºä¸€è¾™ã€‚é‚£ä»€ä¹ˆæƒ…å†µä¼šç”¨åˆ° Gemfile å‘¢ ï¼Ÿ&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; æ¯å¹´éƒ½ä¼šæœ‰ä¸€äº›é‡å¤§ç‰ˆæœ¬çš„å‡çº§ï¼Œå‰é¢èŠåˆ°è¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;install&lt;/code&gt; è¿‡ç¨‹ä¸­ä¼šå¯¹é¡¹ç›®çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.xcodeproj&lt;/code&gt; æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œä¸åŒç‰ˆæœ¬å…¶æœ‰æ‰€ä¸åŒï¼Œè¿™äº›åœ¨å˜æ›´éƒ½å¯èƒ½å¯¼è‡´å¤§é‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;conflicts&lt;/code&gt;ï¼Œå¤„ç†ä¸å¥½ï¼Œé¡¹ç›®å°±ä¸èƒ½æ­£å¸¸è¿è¡Œäº†ã€‚æˆ‘æƒ³ä½ ä¸€å®šä¸æ„¿æ„å»ä¿®æ”¹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.xcodeproj&lt;/code&gt; çš„å†²çªã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœé¡¹ç›®æ˜¯åŸºäº &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fastlane&lt;/code&gt; æ¥è¿›è¡ŒæŒç»­é›†æˆçš„ç›¸å…³å·¥ä½œä»¥åŠ App çš„æ‰“åŒ…å·¥ä½œç­‰ï¼Œä¹Ÿéœ€è¦å…¶ç‰ˆæœ¬ç®¡ç†ç­‰åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;h1 id=&quot;å¦‚ä½•å®‰è£…ä¸€å¥—å¯ç®¡æ§çš„-ruby-å·¥å…·é“¾&quot;&gt;å¦‚ä½•å®‰è£…ä¸€å¥—å¯ç®¡æ§çš„ Ruby å·¥å…·é“¾ï¼Ÿ&lt;/h1&gt;

&lt;p&gt;è®²å®Œäº†è¿™äº›å·¥å…·çš„åˆ†å·¥ï¼Œç„¶åæ¥è¯´è¯´å®é™…çš„è¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;homebrew&lt;/code&gt; + &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbenv&lt;/code&gt; + &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RubyGems&lt;/code&gt; + &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Bundler&lt;/code&gt; è¿™ä¸€æ•´å¥—å·¥å…·é“¾æ¥æ§åˆ¶ä¸€ä¸ªå·¥ç¨‹ä¸­ Ruby å·¥å…·çš„ç‰ˆæœ¬ä¾èµ–ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹æ˜¯æˆ‘è®¤ä¸ºæ¯”è¾ƒå¯æ§çš„ Ruby å·¥å…·é“¾åˆ†å±‚ç®¡ç†å›¾ã€‚ä¸‹é¢æˆ‘ä»¬é€ä¸€è®²è¿°æ¯ä¸€å±‚çš„ç®¡ç†æ–¹å¼ï¼Œä»¥åŠå®é™…çš„æ“ä½œæ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1591692591825-5e8b38bb-cf2d-4435-b9b1-704b02df1202.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;1-ä½¿ç”¨-homebrew-å®‰è£…-rbenv&quot;&gt;1. ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;homebrew&lt;/code&gt; å®‰è£… &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbenv&lt;/code&gt;&lt;/h2&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;rbenv
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å®‰è£…æˆåŠŸåè¾“å…¥ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbenv&lt;/code&gt;Â å°±å¯ä»¥çœ‹åˆ°ç›¸å…³æç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;rbenv

rbenv 1.1.2
Usage: rbenv &amp;lt;&lt;span class=&quot;nb&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&amp;lt;args&amp;gt;]

Some useful rbenv commands are:
   commands    List all available rbenv commands
   &lt;span class=&quot;nb&quot;&gt;local       &lt;/span&gt;Set or show the &lt;span class=&quot;nb&quot;&gt;local &lt;/span&gt;application-specific Ruby version
   global      Set or show the global Ruby version
   shell       Set or show the shell-specific Ruby version
   &lt;span class=&quot;nb&quot;&gt;install     &lt;/span&gt;Install a Ruby version using ruby-build
   uninstall   Uninstall a specific Ruby version
   rehash      Rehash rbenv shims &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;run this after installing executables&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
   version     Show the current Ruby version and its origin
   versions    List installed Ruby versions
   which       Display the full path to an executable
   whence      List all Ruby versions that contain the given executable

See &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;rbenv &lt;span class=&quot;nb&quot;&gt;help&lt;/span&gt; &amp;lt;&lt;span class=&quot;nb&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;' for information on a specific command.
For full documentation, see: https://github.com/rbenv/rbenv#readme
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;2-ä½¿ç”¨-rbenv-ç®¡ç†-ruby-ç‰ˆæœ¬&quot;&gt;2. ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbenv&lt;/code&gt; ç®¡ç† Ruby ç‰ˆæœ¬&lt;/h2&gt;

&lt;p&gt;ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbenv&lt;/code&gt;Â æ¥å®‰è£…ä¸€ä¸ª Ruby ç‰ˆæœ¬ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨åˆšåˆš  release Ruby 2.7ï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;rbenv &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;2.7.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™ä¸ªå®‰è£…è¿‡ç¨‹æœ‰äº›é•¿ï¼Œå› ä¸ºè¦ä¸‹è½½ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;openssl&lt;/code&gt; å’Œ Ruby çš„è§£é‡Šå™¨ï¼Œå¤§æ¦‚è¦ 20 åˆ†é’Ÿå·¦å³ã€‚&lt;/p&gt;

&lt;p&gt;å®‰è£…æˆåŠŸåï¼Œæˆ‘ä»¬è®©å…¶åœ¨æœ¬åœ°ç¯å¢ƒä¸­ç”Ÿæ•ˆï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;rbenv shell 2.7.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;è¾“å…¥ä¸Šè¿°å‘½ä»¤åï¼Œå¯èƒ½ä¼šæœ‰æŠ¥é”™ã€‚ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbenv&lt;/code&gt;Â æç¤ºæˆ‘ä»¬åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.zshrc&lt;/code&gt;Â ä¸­å¢åŠ ä¸€è¡Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;eval &quot;$(rbenv init -)&quot;&lt;/code&gt;Â è¯­å¥æ¥å¯¹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbenv&lt;/code&gt;Â ç¯å¢ƒè¿›è¡Œåˆå§‹åŒ–ã€‚å¦‚æœæŠ¥é”™ï¼Œæˆ‘ä»¬å¢åŠ å¹¶é‡å¯ç»ˆç«¯å³å¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ruby &lt;span class=&quot;nt&quot;&gt;--version&lt;/span&gt;
ruby 2.7.0p0 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;2019-12-25 revision 647ee6f091&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;x86_64-darwin19]
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;which ruby
/Users/gua/.rbenv/shims/ruby
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åˆ‡æ¢ä¹‹åæˆ‘ä»¬å‘ç° Ruby å·²ç»åˆ‡æ¢åˆ° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbenv&lt;/code&gt;Â çš„ç®¡ç†ç‰ˆæœ¬ï¼Œå¹¶ä¸”å…¶å¯åŠ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PATH&lt;/code&gt;Â ä¹Ÿå·²ç»å˜æˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbenv&lt;/code&gt;Â ç®¡ç†ä¸‹çš„ Rubyã€‚å¹¶ä¸”æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹ Ruby æ†ç»‘çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem&lt;/code&gt;Â çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PATH&lt;/code&gt;Â ï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;which gem
/Users/bytedance/.rbenv/shims/gem
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¯¹åº”çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem&lt;/code&gt;Â ä¹Ÿå·²ç»å˜æˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbenv&lt;/code&gt;Â ä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PATH&lt;/code&gt;Â ã€‚&lt;/p&gt;

&lt;h2 id=&quot;3-æŸ¥è¯¢ç³»ç»Ÿçº§-gem-ä¾èµ–&quot;&gt;3. æŸ¥è¯¢ç³»ç»Ÿçº§ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem&lt;/code&gt; ä¾èµ–&lt;/h2&gt;

&lt;p&gt;å¦‚æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbenv&lt;/code&gt; å·²ç»å¯¹ Ruby åŠå…¶ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem&lt;/code&gt;Â ç¯å¢ƒåœ¨ç‰ˆæœ¬ä¸Šè¿›è¡Œäº†ç¯å¢ƒéš”ç¦»ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gem list&lt;/code&gt;Â å‘½ä»¤æ¥æŸ¥è¯¢å½“å‰ç³»ç»Ÿç¯å¢ƒä¸‹æ‰€æœ‰çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem&lt;/code&gt;Â ä¾èµ–ï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gem list

&lt;span class=&quot;k&quot;&gt;***&lt;/span&gt; LOCAL GEMS &lt;span class=&quot;k&quot;&gt;***&lt;/span&gt;

activesupport &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;4.2.11.3&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
...
claide &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1.0.3&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
cocoapods &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1.9.3&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
cocoapods-core &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1.9.3&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
cocoapods-deintegrate &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1.0.4&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
cocoapods-downloader &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1.3.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
cocoapods-plugins &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1.0.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
cocoapods-search &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1.0.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
cocoapods-stats &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1.1.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
cocoapods-trunk &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1.5.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
cocoapods-try &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1.2.0&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è®°ä½è¿™é‡Œçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; ç‰ˆæœ¬ï¼Œæˆ‘ä»¬åé¢é¡¹ç›®ä¸­è¿˜ä¼šæŸ¥è¯¢ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æ­¤æˆ‘ä»¬å·²ç»å®Œæˆäº†å…¨éƒ¨çš„ Rubyã€Gem ç¯å¢ƒçš„é…ç½®ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€å¼ æ¼æ–—å›¾å†æ¥æ¢³ç†ä¸€ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;&quot; alt=&quot;image.png&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;å¦‚ä½•ä½¿ç”¨-bundler-ç®¡ç†å·¥ç¨‹ä¸­çš„-gem-ç¯å¢ƒ&quot;&gt;å¦‚ä½•ä½¿ç”¨ Bundler ç®¡ç†å·¥ç¨‹ä¸­çš„ Gem ç¯å¢ƒ&lt;/h1&gt;

&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥å®è·µä¸€ä¸‹ï¼Œå¦‚ä½•ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Bundler&lt;/code&gt; æ¥é”å®šé¡¹ç›®ä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem&lt;/code&gt; ç¯å¢ƒï¼Œä»è€Œè®©æ•´ä¸ªå›¢é˜Ÿç»Ÿä¸€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem&lt;/code&gt; ç¯å¢ƒä¸­çš„æ‰€æœ‰ Ruby å·¥å…·ç‰ˆæœ¬ã€‚ä»è€Œé¿å…æ–‡ä»¶å†²çªå’Œä¸å¿…è¦çš„é”™è¯¯ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢æ˜¯åœ¨å·¥ç¨‹ä¸­å¯¹äº &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem&lt;/code&gt; ç¯å¢ƒçš„å±‚çº§å›¾ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®ä¸­å¢åŠ ä¸€ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt; æè¿°ï¼Œä»è€Œé”å®šå½“å‰é¡¹ç›®ä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem&lt;/code&gt; ä¾èµ–ç¯å¢ƒã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Desgard/img/master/img/guardia1591770762979-60f1adee-7b73-4ca8-b6a1-dbc917ae024e.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹ä¹Ÿä¼šé€ä¸€è®²è¿°æ¯ä¸€å±‚çš„ç®¡ç†æ–¹å¼ï¼Œä»¥åŠå®é™…çš„æ“ä½œæ–¹æ³•ã€‚&lt;/p&gt;

&lt;h2 id=&quot;1-åœ¨-ios-å·¥ç¨‹ä¸­åˆå§‹åŒ–-bundler-ç¯å¢ƒ&quot;&gt;1. åœ¨ iOS å·¥ç¨‹ä¸­åˆå§‹åŒ– &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Bundler&lt;/code&gt; ç¯å¢ƒ&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆæˆ‘ä»¬æœ‰ä¸€ä¸ª iOS Demo å·¥ç¨‹ - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GuaDemo&lt;/code&gt;Â ï¼š&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-al&lt;/span&gt;
total 0
drwxr-xr-x   4 gua  staff   128 Jun 10 14:47 &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
drwxr-xr-x@ 52 gua  staff  1664 Jun 10 14:47 ..
drwxr-xr-x   8 gua  staff   256 Jun 10 14:47 GuaDemo
drwxr-xr-x@  5 gua  staff   160 Jun 10 14:47 GuaDemo.xcodeproj
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;é¦–å…ˆå…ˆæ¥åˆå§‹åŒ–ä¸€ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Bundler&lt;/code&gt;Â  ç¯å¢ƒï¼ˆå…¶å®å°±æ˜¯è‡ªåŠ¨åˆ›å»ºä¸€ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt;Â æ–‡ä»¶ï¼‰ï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;bundle init

Writing new Gemfile to /Users/Gua/GuaDemo/Gemfile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;2-åœ¨-gemfileä¸­å£°æ˜ä½¿ç”¨çš„-cocoapods-ç‰ˆæœ¬å¹¶å®‰è£…&quot;&gt;2. åœ¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt;Â ä¸­å£°æ˜ä½¿ç”¨çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; ç‰ˆæœ¬å¹¶å®‰è£…&lt;/h2&gt;

&lt;p&gt;ä¹‹åæˆ‘ä»¬ç¼–è¾‘ä¸€ä¸‹è¿™ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt; æ–‡ä»¶ï¼ŒåŠ å…¥æˆ‘ä»¬å½“å‰ç¯å¢ƒä¸­éœ€è¦ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods 1.5.3&lt;/code&gt; è¿™ä¸ªç‰ˆæœ¬ï¼Œåˆ™ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt;Â çš„ DSL ç¼–å†™ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# frozen_string_literal: true&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;https://rubygems.org&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;git_source&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:github&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;repo_name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;https://github.com/&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;repo_name&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# gem &quot;rails&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;cocoapods&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;1.5.3&quot;&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç¼–å†™ä¹‹åæ‰§è¡Œä¸€ä¸‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle install&lt;/code&gt;Â ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bundle&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;install&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Fetching&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;metadata&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;https&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:/&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gems&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ruby&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;china&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;com&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/............&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Resolving&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dependencies&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Fetching&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cocoapods&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Installing&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cocoapods&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Bundle&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;complete!&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Gemfile&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dependency&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gems&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;now&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;installed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å‘ç° &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods 1.5.3&lt;/code&gt;Â è¿™ä¸ªæŒ‡å®šç‰ˆæœ¬å·²ç»å®‰è£…æˆåŠŸï¼Œå¹¶ä¸”è¿˜ä¿å­˜äº†ä¸€ä»½ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile.lock&lt;/code&gt;Â æ–‡ä»¶ç”¨æ¥é”å­˜è¿™æ¬¡çš„ä¾èµ–ç»“æœã€‚&lt;/p&gt;

&lt;h2 id=&quot;3-ä½¿ç”¨å½“å‰ç¯å¢ƒä¸‹çš„-cocoapods-ç‰ˆæœ¬æ“ä½œ-ios-å·¥ç¨‹&quot;&gt;3. ä½¿ç”¨å½“å‰ç¯å¢ƒä¸‹çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; ç‰ˆæœ¬æ“ä½œ iOS å·¥ç¨‹&lt;/h2&gt;

&lt;p&gt;æ­¤æ—¶æˆ‘ä»¬å¯ä»¥æ£€æŸ¥ä¸€ä¸‹å½“å‰ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Bundler&lt;/code&gt; ç¯å¢ƒä¸‹çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem&lt;/code&gt;Â åˆ—è¡¨ï¼š&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bundle&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;list&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;***&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;LOCAL&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;GEMS&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;***&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;activesupport&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;4.2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;11.3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;atomos&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;bundler&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2.1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;CFPropertyList&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;3.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;claide&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cocoapods&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;å‘ç°ç›¸æ¯”äºå…¨å±€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem&lt;/code&gt; åˆ—è¡¨ï¼Œè¿™ä¸ªåˆ—è¡¨ç²¾ç®€äº†è®¸å¤šï¼Œå¹¶ä¸”ä¹Ÿåªæ˜¯åŸºç¡€ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem&lt;/code&gt; ä¾èµ–å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem&lt;/code&gt; ä¾èµ–ã€‚æ­¤æ—¶æˆ‘ä»¬ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle exec pod install&lt;/code&gt;Â æ¥æ‰§è¡Œ Install è¿™ä¸ªæ“ä½œï¼Œå°±å¯ä»¥ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods 1.5.3&lt;/code&gt;Â ç‰ˆæœ¬æ¥æ‰§è¡Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod&lt;/code&gt;Â æ“ä½œäº†ï¼ˆå½“ç„¶ï¼Œå‰ææ˜¯ä½ è¿˜éœ€è¦å†™ä¸€ä¸ª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile&lt;/code&gt; ï¼Œå¤§å®¶éƒ½æ˜¯ iOSer è¿™é‡Œå°±ç•¥è¿‡äº†ï¼‰ã€‚&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bundle&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;install&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Analyzing&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dependencies&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Downloading&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dependencies&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Installing&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SnapKit&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;5.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Integrating&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;project&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Please&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;close&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;any&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Xcode&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sessions&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`GuaDemo.xcworkspace`&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;project&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;now&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Sending&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stats&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Pod&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;installation&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;complete!&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;There&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dependency&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Podfile&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;total&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;installed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;å¯ä»¥å†æ¥çœ‹ä¸€ä¸‹ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Podfile.lock&lt;/code&gt;Â æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Podfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;lock&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;PODS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SnapKit&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;5.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;DEPENDENCIES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SnapKit&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&amp;gt;&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5.0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;SPEC&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;REPOS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;https&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:/&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;github&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;com&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cocoapods&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;specs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;git&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SnapKit&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;SPEC&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;CHECKSUMS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;SnapKit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;97&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b92857e3df3a0c71833cce143274bf6ef8e5eb&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;PODFILE&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;CHECKSUM&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a4b05aaf43554bc31c90f8dac5c2dc0490203e8&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;COCOAPODS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å‘ç°ä½¿ç”¨çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; çš„ç‰ˆæœ¬ç¡®å®æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1.5.3&lt;/code&gt; ã€‚è€Œå½“æˆ‘ä»¬ä¸ä½¿ç”¨ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle exec&lt;/code&gt;Â æ‰§è¡Œå‰ç¼€ï¼Œåˆ™ä¼šä½¿ç”¨ç³»ç»Ÿç¯å¢ƒä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; ç‰ˆæœ¬ã€‚å¦‚æ­¤æˆ‘ä»¬ä¹Ÿå°±éªŒè¯äº†å·¥ç¨‹ä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem&lt;/code&gt; ç¯å¢ƒå’Œç³»ç»Ÿä¸­çš„ç¯å¢ƒå¯ä»¥é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Bundler&lt;/code&gt; è¿›è¡Œéš”ç¦»ã€‚&lt;/p&gt;

&lt;h1 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;é€šè¿‡ç‰ˆæœ¬ç®¡ç†å·¥å…·æ¼”è¿›çš„è§’åº¦å¯ä»¥çœ‹å‡ºï¼ŒCocoaPods çš„è¯ç”Ÿå¹¶éä¸€è¹´è€Œå°±ï¼Œä¹Ÿæ˜¯ä¸æ–­åœ°å€Ÿé‰´å…¶ä»–ç®¡ç†å·¥å…·çš„ä¼˜ç‚¹ï¼Œä¸€ç‚¹ç‚¹çš„å‘å±•èµ·æ¥çš„ã€‚VCS å·¥å…·ä»æ—©æœŸçš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SVN&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Git&lt;/code&gt;ï¼Œå†ç»†åˆ†å‡º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Git Submodule&lt;/code&gt;ï¼Œå†åˆ°å„ä¸ªè¯­è¨€çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Package Manager&lt;/code&gt; ä¹Ÿæ˜¯ä¸€ç›´åœ¨å‘å±•çš„ã€‚&lt;/li&gt;
  &lt;li&gt;è™½ç„¶ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; ä½œä¸ºåŒ…ç®¡ç†å·¥å…·æ§åˆ¶ç€ iOS é¡¹ç›®çš„å„ç§ä¾èµ–åº“ï¼Œä½†å…¶è‡ªèº«åŒæ ·éµå¾ªç€ä¸¥æ ¼çš„ç‰ˆæœ¬æ§åˆ¶å¹¶ä¸æ–­è¿­ä»£ã€‚å¸Œæœ›å¤§å®¶å¯ä»¥ä»æœ¬æ–‡ä¸­è®¤è¯†åˆ°ç‰ˆæœ¬ç®¡ç†çš„é‡è¦æ€§ã€‚&lt;/li&gt;
  &lt;li&gt;é€šè¿‡å®æ“ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Bundler&lt;/code&gt; ç®¡ç†å·¥ç¨‹çš„å…¨æµç¨‹ï¼Œå­¦ä¹ äº† &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Bundler&lt;/code&gt; åŸºç¡€ï¼Œå¹¶å­¦ä¹ äº†å¦‚ä½•æ§åˆ¶ä¸€ä¸ªé¡¹ç›®ä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem&lt;/code&gt; ç‰ˆæœ¬ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åç»­æˆ‘ä»¬å°†ä¼šå›´ç»• &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; ï¼Œä»å·¥å…·é“¾é€æ¸æ·±å…¥åˆ°ç»†èŠ‚ï¼Œæ ¹æ®æˆ‘ä»¬çš„ä½¿ç”¨ç»éªŒï¼Œé€ä¸€è®²è§£ã€‚&lt;/p&gt;

&lt;h1 id=&quot;çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†&quot;&gt;çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†&lt;/h1&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PM&lt;/code&gt; æ˜¯å¦‚ä½•è¿›è¡Œä¾èµ–åº“çš„ç‰ˆæœ¬ç®¡ç†ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ruby&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RVM/rbenv&lt;/code&gt; ä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem&lt;/code&gt;ã€&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Bundler&lt;/code&gt; å’Œ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocaPods&lt;/code&gt; ä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/li&gt;
  &lt;li&gt;å¦‚ä½•é€šè¿‡ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Bundler&lt;/code&gt; æ¥ç®¡ç†å·¥ç¨‹ä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gem&lt;/code&gt; ç¯å¢ƒï¼Ÿå¦‚ä½•é”æ­»å·¥ç¨‹å†…éƒ¨çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CocoaPods&lt;/code&gt; ç‰ˆæœ¬ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;</content><author><name>å†¬ç“œ</name><email>gua@desgard.com</email></author><category term="CocoaPods å†é™©è®°" /><category term="Ruby" /><summary type="html">èƒŒæ™¯ CocoaPods ä½œä¸ºä¸šç•Œæ ‡å‡†ï¼Œå„ä½ iOS å¼€å‘åŒå­¦åº”è¯¥éƒ½ä¸é™Œç”Ÿã€‚ä¸è¿‡å¾ˆå¤šåŒå­¦å¯¹ CocoaPods çš„ä½¿ç”¨åŸºæœ¬åœç•™åœ¨ pod install å’Œ pod update ä¸Šã€‚ä¸€æ—¦é¡¹ç›®ç»„ä»¶åŒ–ï¼Œå„ä¸šåŠ¡çº¿é€»è¾‘æ‹†åˆ†åˆ°ç‹¬ç«‹çš„ Pod ä¸­åï¼Œå…‰äº†è§£å‡ ä¸ªç®€å• Pod å‘½ä»¤æ˜¯æ— æ³•æ»¡è¶³éœ€æ±‚çš„ï¼ŒåŒæ—¶è¿˜é¢ä¸´å¼€å‘ç¯å¢ƒçš„ä¸€è‡´æ€§ï¼ŒPod å‘½ä»¤æ‰§è¡Œä¸­çš„å„ç§å¼‚å¸¸é”™è¯¯ï¼Œéƒ½è¦æ±‚æˆ‘ä»¬å¯¹å…¶æœ‰æ›´æ·±å±‚çš„è®¤çŸ¥å’Œ ğŸ¤”ã€‚ å…³äº CocoaPods æ·±å…¥çš„æ–‡ç« æœ‰å¾ˆå¤šï¼Œæ¨è ObjC China çš„è¿™ç¯‡ï¼Œæ·±å…¥ç†è§£ CocoaPodsï¼Œè€Œæœ¬æ–‡å¸Œæœ›ä»ä¾èµ–ç®¡ç†å·¥å…·çš„è§’åº¦æ¥è°ˆè°ˆ CocoaPods çš„ç®¡ç†ç†å¿µã€‚ Version Control System (VCS) Version control systems are a category of software tools that help a software team manage changes to source code over time. Version control software keeps track of every modification to the code in a special kind of database. è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ˜¯æ•æ·å¼€å‘çš„é‡è¦ä¸€ç¯ï¼Œä¸ºåç»­çš„æŒç»­é›†æˆæä¾›äº†ä¿éšœã€‚Source Code Manager (SCM) æºç ç®¡ç†å°±å±äº VCS çš„èŒƒå›´ä¹‹ä¸­ï¼Œç†ŸçŸ¥çš„å·¥å…·æœ‰å¦‚ Git ã€‚è€Œ CocoaPods è¿™ç§é’ˆå¯¹å„ç§è¯­è¨€æ‰€æä¾›çš„ Package Manger (PM) ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯ SCM çš„ä¸€ç§ã€‚ è€Œåƒ Git æˆ– SVN æ˜¯é’ˆå¯¹é¡¹ç›®çš„å•ä¸ªæ–‡ä»¶çš„è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œè€Œ PM åˆ™æ˜¯ä»¥æ¯ä¸ªç‹¬ç«‹çš„ Package ä½œä¸ºæœ€å°çš„ç®¡ç†å•å…ƒã€‚åŒ…ç®¡ç†å·¥å…·éƒ½æ˜¯ç»“åˆ SCM æ¥å®Œæˆç®¡ç†å·¥ä½œï¼Œå¯¹äºè¢« PM æ¥ç®¡çš„ä¾èµ–åº“çš„æ–‡ä»¶ï¼Œé€šå¸¸ä¼šåœ¨ Git çš„ .ignore æ–‡ä»¶ä¸­é€‰æ‹©å¿½ç•¥å®ƒä»¬ã€‚ ä¾‹å¦‚ï¼šåœ¨ Node é¡¹ç›®ä¸­ä¸€èˆ¬ä¼šæŠŠ node_modules ç›®å½•ä¸‹çš„æ–‡ä»¶ ignore æ‰ï¼Œåœ¨ iOS/macOS é¡¹ç›®åˆ™æ˜¯ Podsã€‚ Git Submodule Git submodules allow you to keep a git repository as a subdirectory of another git repository. Git submodules are simply a reference to another repository at a particular snapshot in time. Git submodules enable a Git repository to incorporate and track version history of external code. Git Submodules å¯ä»¥ç®—æ˜¯ PM çš„â€œé’æ˜¥ç‰ˆâ€ï¼Œå®ƒå°†å•ç‹¬çš„ Git ä»“åº“ä»¥å­ç›®å½•çš„å½¢å¼åµŒå…¥åœ¨å·¥ä½œç›®å½•ä¸­ã€‚å®ƒä¸å…·å¤‡ PM å·¥å…·æ‰€ç‰¹æœ‰çš„è¯­ä¹‰åŒ–ç‰ˆæœ¬ç®¡ç†ã€æ— æ³•å¤„ç†ä¾èµ–å…±äº«ä¸å†²çªç­‰ã€‚åªèƒ½ä¿å­˜æ¯ä¸ªä¾èµ–ä»“åº“çš„æ–‡ä»¶çŠ¶æ€ã€‚ Git åœ¨æäº¤æ›´æ–°æ—¶ï¼Œä¼šå¯¹æ‰€æœ‰æ–‡ä»¶åˆ¶ä½œä¸€ä¸ªå¿«ç…§å¹¶å°†å…¶å­˜åœ¨æ•°æ®åº“ä¸­ã€‚Git ç®¡ç†çš„æ–‡ä»¶å­˜åœ¨ 3 ç§çŠ¶æ€ï¼š working directorï¼š å·¥ä½œç›®å½•ï¼Œå³æˆ‘ä»¬è‚‰çœ¼å¯è§çš„æ–‡ä»¶ stage areaï¼š æš‚å­˜åŒº (æˆ–ç§° index area )ï¼Œå­˜åœ¨ .git/index ç›®å½•ä¸‹ï¼Œä¿å­˜çš„æ˜¯æ‰§è¡Œ git add ç›¸å…³å‘½ä»¤åä»å·¥ä½œç›®å½•æ·»åŠ çš„æ–‡ä»¶ã€‚ commit historyï¼š æäº¤å†å²ï¼Œå­˜åœ¨ .git/ ç›®å½•ä¸‹ï¼Œåˆ°è¿™ä¸ªçŠ¶æ€çš„æ–‡ä»¶æ”¹åŠ¨ç®—æ˜¯å…¥åº“æˆåŠŸï¼ŒåŸºæœ¬ä¸ä¼šä¸¢å¤±äº†ã€‚ Git submodule æ˜¯ä¾èµ– .gitmodules æ–‡ä»¶æ¥è®°å½•å­æ¨¡å—çš„ã€‚ [submodule &quot;ReactNative&quot;] path = ReactNative url = https://github.com/facebook/ReactNative.git .gitmodules ä»…è®°å½•äº† path å’Œ url ä»¥åŠæ¨¡å—åç§°çš„åŸºæœ¬ä¿¡æ¯ï¼Œ ä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦è®°å½•æ¯ä¸ª Submodule Repo çš„ commit ä¿¡æ¯ï¼Œè€Œè¿™ commit ä¿¡æ¯æ˜¯è®°å½•åœ¨ .git/modules ç›®å½•ä¸‹ã€‚åŒæ—¶è¢«æ·»åŠ åˆ° .gitmodules ä¸­çš„ path ä¹Ÿä¼šè¢« git ç›´æ¥ ignore æ‰ã€‚ Package Manger ä½œä¸º Git Submodule çš„å¼ºåŒ–ç‰ˆï¼ŒPM åŸºæœ¬éƒ½å…·å¤‡äº†è¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ£€æŸ¥èƒ½åŠ›ï¼Œä¾èµ–é€’å½’æŸ¥æ‰¾ï¼Œä¾èµ–å†²çªè§£å†³ï¼Œä»¥åŠé’ˆå¯¹å…·ä½“ä¾èµ–çš„æ„å»ºèƒ½åŠ›å’ŒäºŒè¿›åˆ¶åŒ…ç­‰ã€‚ç®€å•å¯¹æ¯”å¦‚ä¸‹ï¼š Key File Git submodule CocoaPods SPM npm æè¿°æ–‡ä»¶ .gitmodules Podfile Package.swift Package.json é”å­˜æ–‡ä»¶ .git/modules Podfile.lock Package.resolved package-lock.json ä» ğŸ‘† å¯è§ï¼ŒPM å·¥å…·åŸºæœ¬å›´ç»•è¿™ä¸ªä¸¤ä¸ªæ–‡ä»¶æ¥ç°å®åŒ…ç®¡ç†ï¼š æè¿°æ–‡ä»¶ï¼šå£°æ˜äº†é¡¹ç›®ä¸­å­˜åœ¨å“ªäº›ä¾èµ–ï¼Œç‰ˆæœ¬é™åˆ¶ï¼› é”å­˜æ–‡ä»¶ï¼ˆLock æ–‡ä»¶ï¼‰ï¼šè®°å½•äº†ä¾èµ–åŒ…æœ€åä¸€æ¬¡æ›´æ–°æ—¶çš„å…¨ç‰ˆæœ¬åˆ—è¡¨ã€‚ é™¤äº†è¿™ä¸¤ä¸ªæ–‡ä»¶ä¹‹å¤–ï¼Œä¸­å¿ƒåŒ–çš„ PM ä¸€èˆ¬ä¼šæä¾›ä¾èµ–åŒ…çš„æ‰˜ç®¡æœåŠ¡ï¼Œæ¯”å¦‚ npm æä¾›çš„ npmjs.com å¯ä»¥é›†ä¸­æŸ¥æ‰¾å’Œä¸‹è½½ npm åŒ…ã€‚å¦‚æœæ˜¯å»ä¸­å¿ƒåŒ–çš„ PM æ¯”å¦‚ iOS çš„ Carthage å’Œ SPM å°±åªèƒ½é€šè¿‡ Git ä»“åº“çš„åœ°å€äº†ã€‚ CocoaPods CocoaPodsÂ æ˜¯å¼€å‘ iOS/macOS åº”ç”¨ç¨‹åºçš„ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“çš„ä¾èµ–ç®¡ç†å·¥å…·ã€‚ åˆ©ç”¨ CocoaPodsï¼Œå¯ä»¥å®šä¹‰è‡ªå·±çš„ä¾èµ–å…³ç³»ï¼ˆç®€ç§° Podsï¼‰ï¼Œä»¥åŠåœ¨æ•´ä¸ªå¼€å‘ç¯å¢ƒä¸­å¯¹ç¬¬ä¸‰æ–¹åº“çš„ç‰ˆæœ¬ç®¡ç†éå¸¸æ–¹ä¾¿ã€‚ ä¸‹é¢æˆ‘ä»¬ä»¥ CocoaPods ä¸ºä¾‹ã€‚ Podfile Podfile æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä»¥ DSLï¼ˆå…¶å®ç›´æ¥ç”¨äº† Ruby çš„è¯­æ³•ï¼‰æ¥æè¿°ä¾èµ–å…³ç³»ï¼Œç”¨äºå®šä¹‰é¡¹ç›®æ‰€éœ€è¦ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“ã€‚è¯¥æ–‡ä»¶æ”¯æŒé«˜åº¦å®šåˆ¶ï¼Œä½ å¯ä»¥æ ¹æ®ä¸ªäººå–œå¥½å¯¹å…¶åšå‡ºå®šåˆ¶ã€‚æ›´å¤šç›¸å…³ä¿¡æ¯ï¼Œè¯·æŸ¥é˜… Podfile æŒ‡å—ã€‚ Podfile.lock è¿™æ˜¯ CocoaPods åˆ›å»ºçš„æœ€é‡è¦çš„æ–‡ä»¶ä¹‹ä¸€ã€‚å®ƒè®°å½•äº†éœ€è¦è¢«å®‰è£…çš„ Pod çš„æ¯ä¸ªå·²å®‰è£…çš„ç‰ˆæœ¬ã€‚å¦‚æœä½ æƒ³çŸ¥é“å·²å®‰è£…çš„ Pod æ˜¯å“ªä¸ªç‰ˆæœ¬ï¼Œå¯ä»¥æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶ã€‚æ¨èå°† Podfile.lock æ–‡ä»¶åŠ å…¥åˆ°ç‰ˆæœ¬æ§åˆ¶ä¸­ï¼Œè¿™æœ‰åŠ©äºæ•´ä¸ªå›¢é˜Ÿçš„ä¸€è‡´æ€§ã€‚ Manifest.lock è¿™æ˜¯æ¯æ¬¡è¿è¡Œ pod install å‘½ä»¤æ—¶åˆ›å»ºçš„ Podfile.lock æ–‡ä»¶çš„å‰¯æœ¬ã€‚å¦‚æœä½ é‡è§è¿‡è¿™æ ·çš„é”™è¯¯ æ²™ç›’æ–‡ä»¶ä¸ Podfile.lock æ–‡ä»¶ä¸åŒæ­¥ (The sandbox is not in sync with the Podfile.lock)ï¼Œè¿™æ˜¯å› ä¸º Manifest.lock æ–‡ä»¶å’Œ Podfile.lock æ–‡ä»¶ä¸ä¸€è‡´æ‰€å¼•èµ·ã€‚ç”±äº Pods æ‰€åœ¨çš„ç›®å½•å¹¶ä¸æ€»åœ¨ç‰ˆæœ¬æ§åˆ¶ä¹‹ä¸‹ï¼Œè¿™æ ·å¯ä»¥ä¿è¯å¼€å‘è€…è¿è¡Œ App ä¹‹å‰éƒ½èƒ½æ›´æ–°ä»–ä»¬çš„ Podsï¼Œå¦åˆ™ App å¯èƒ½ä¼š crashï¼Œæˆ–è€…åœ¨ä¸€äº›ä¸å¤ªæ˜æ˜¾çš„åœ°æ–¹ç¼–è¯‘å¤±è´¥ã€‚ Master Specs Repo Ultimately, the goal is to improve discoverability of, and engagement in, third party open-source libraries, by creating a more centralized ecosystem. ä½œä¸ºåŒ…ç®¡ç†å·¥å…·ï¼ŒCocoaPods çš„ç›®æ ‡æ˜¯ä¸ºæˆ‘ä»¬æä¾›ä¸€ä¸ªæ›´åŠ é›†ä¸­çš„ç”Ÿæ€ç³»ç»Ÿï¼Œæ¥æé«˜ä¾èµ–åº“çš„å¯å‘ç°æ€§å’Œå‚ä¸åº¦ã€‚æœ¬è´¨ä¸Šæ˜¯ä¸ºäº†æä¾›æ›´å¥½çš„æ£€ç´¢å’ŒæŸ¥è¯¢åŠŸèƒ½ï¼Œå¯æƒœæˆä¸ºäº†å®ƒçš„é—®é¢˜ä¹‹ä¸€ã€‚å› ä¸º CocoaPods é€šè¿‡å®˜æ–¹çš„ Spec ä»“åº“æ¥ç®¡ç†è¿™äº›æ³¨å†Œçš„ä¾èµ–åº“ã€‚éšç€ä¸æ–­æ–°å¢çš„ä¾èµ–åº“å¯¼è‡´ Spec çš„æ›´æ–°å’Œç»´æŠ¤æˆä¸ºäº†ä½¿ç”¨è€…çš„åŒ…è¢±ã€‚ å¥½åœ¨è¿™ä¸ªé—®é¢˜åœ¨ 1.7.2 ç‰ˆæœ¬ä¸­å·²ç»è§£å†³äº†ï¼ŒCocoaPods æä¾›äº† Mater Repo CDN ï¼Œå¯ä»¥ç›´æ¥ CDN åˆ°å¯¹åº”çš„ Pod åœ°å€è€Œæ— éœ€åœ¨é€šè¿‡æœ¬åœ°çš„ Spec ä»“åº“äº†ã€‚åŒæ—¶åœ¨ 1.8 ç‰ˆæœ¬ä¸­ï¼Œå®˜æ–¹é»˜è®¤çš„ Spec ä»“åº“å·²æ›¿æ¢ä¸º CDNï¼Œå…¶åœ°å€ä¸º Â https://cdn.cocoapods.orgã€‚ Ruby ç”Ÿæ€åŠå·¥å…·é“¾ å¯¹äºä¸€éƒ¨åˆ†ä»…æ¥è§¦è¿‡ CocoaPods çš„åŒå­¦ï¼Œå…¶ PM å¯èƒ½å¹¶ä¸ç†Ÿæ‚‰ã€‚å…¶å® CocoaPods çš„æ€æƒ³å€Ÿé‰´äº†å…¶ä»–è¯­è¨€çš„ PM å·¥å…·ï¼Œä¾‹ï¼šRubyGems, Bundler, npm å’Œ Gradleã€‚ æˆ‘ä»¬çŸ¥é“ CocoaPods æ˜¯é€šè¿‡ Ruby è¯­è¨€å®ç°çš„ã€‚å®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ª Gem åŒ…ã€‚ç†è§£äº† Ruby çš„ä¾èµ–ç®¡ç†æœ‰åŠ©äºæˆ‘ä»¬æ›´å¥½çš„ç®¡ç†ä¸åŒç‰ˆæœ¬çš„ CocoaPods å’Œå…¶ä»– Gemã€‚åŒæ—¶èƒ½å¤Ÿä¿è¯å›¢é˜Ÿä¸­çš„æ‰€æœ‰åŒäº‹çš„å·¥å…·æ˜¯åœ¨åŒä¸€ä¸ªç‰ˆæœ¬ï¼Œè¿™ä¹Ÿç®—æ˜¯æ•æ·å¼€å‘çš„ä¿è¯å§ã€‚ RVM &amp;amp; rbenv RVM å’Œ rbenv éƒ½æ˜¯ç®¡ç†å¤šä¸ª Ruby ç¯å¢ƒçš„å·¥å…·ï¼Œå®ƒä»¬éƒ½èƒ½æä¾›ä¸åŒç‰ˆæœ¬çš„ Ruby ç¯å¢ƒç®¡ç†å’Œåˆ‡æ¢ã€‚ ä¸ªäººç›®å‰ä½¿ç”¨ rbenvï¼Œè‡³äº Why rbenv æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥çœ‹çœ‹ï¼Œæœ€ç»ˆè¿˜æ˜¯çœ‹ä¸ªäººã€‚ RubyGems The RubyGems software allows you to easily download, install, and use ruby software packages on your system. The software package is called a â€œgemâ€ which contains a packaged Ruby application or library. RubyGems æ˜¯ Ruby çš„ä¸€ä¸ªåŒ…ç®¡ç†å·¥å…·ï¼Œè¿™é‡Œé¢ç®¡ç†ç€ç”¨ Ruby ç¼–å†™çš„å·¥å…·æˆ–ä¾èµ–æˆ‘ä»¬ç§°ä¹‹ä¸º Gemã€‚ å¹¶ä¸” RubyGems è¿˜æä¾›äº† Ruby ç»„ä»¶çš„æ‰˜ç®¡æœåŠ¡ï¼Œå¯ä»¥é›†ä¸­å¼çš„æŸ¥æ‰¾å’Œå®‰è£… library å’Œ appsã€‚å½“æˆ‘ä»¬ä½¿ç”¨ gem install xxx æ—¶ï¼Œä¼šé€šè¿‡ rubygems.org æ¥æŸ¥è¯¢å¯¹åº”çš„ Gem Packageã€‚è€Œ iOS æ—¥å¸¸ä¸­çš„å¾ˆå¤šå·¥å…·éƒ½æ˜¯ Gem æä¾›çš„ï¼Œä¾‹ï¼šBundlerï¼Œfastlaneï¼Œjazzyï¼ŒCocoaPods ç­‰ã€‚ åœ¨é»˜è®¤æƒ…å†µä¸‹ Gems æ€»æ˜¯ä¸‹è½½ library çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè¿™æ— æ³•ç¡®ä¿æ‰€å®‰è£…çš„ library ç‰ˆæœ¬ç¬¦åˆæˆ‘ä»¬é¢„æœŸã€‚å› æ­¤æˆ‘ä»¬è¿˜ç¼ºä¸€ä¸ªå·¥å…·ã€‚ Bundler Bundler æ˜¯ç®¡ç† Gem ä¾èµ–çš„å·¥å…·ï¼Œå¯ä»¥éš”ç¦»ä¸åŒé¡¹ç›®ä¸­ Gem çš„ç‰ˆæœ¬å’Œä¾èµ–ç¯å¢ƒçš„å·®å¼‚ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª Gemã€‚ Bundler é€šè¿‡è¯»å–é¡¹ç›®ä¸­çš„ä¾èµ–æè¿°æ–‡ä»¶ Gemfile ï¼Œæ¥ç¡®å®šå„ä¸ª Gems çš„ç‰ˆæœ¬å·æˆ–è€…èŒƒå›´ï¼Œæ¥æä¾›äº†ç¨³å®šçš„åº”ç”¨ç¯å¢ƒã€‚å½“æˆ‘ä»¬ä½¿ç”¨ bundle install å®ƒä¼šç”Ÿæˆ Gemfile.lock å°†å½“å‰ librarys ä½¿ç”¨çš„å…·ä½“ç‰ˆæœ¬å·å†™å…¥å…¶ä¸­ã€‚ä¹‹åï¼Œä»–äººå†é€šè¿‡ bundle install æ¥å®‰è£… libaray æ—¶åˆ™ä¼šè¯»å– Gemfile.lock ä¸­çš„ librarysã€ç‰ˆæœ¬ä¿¡æ¯ç­‰ã€‚ Gemfile å¯ä»¥è¯´ CocoaPods** å…¶å®æ˜¯ iOS ç‰ˆçš„ RubyGems + Bundler ç»„åˆã€‚Bundler ä¾æ®é¡¹ç›®ä¸­çš„ Gemfile æ–‡ä»¶æ¥ç®¡ç† Gemï¼Œè€Œ CocoaPods é€šè¿‡ Podfile æ¥ç®¡ç† Podã€‚ Gemfile é…ç½®å¦‚ä¸‹ï¼š source 'https://gems.example.com' do gem 'cocoapods', '1.8.4' gem 'another_gem', :git =&amp;gt; 'https://looseyi.github.io.git', :branch =&amp;gt; 'master' end å¯è§ï¼ŒPodfile çš„ DSL å†™æ³•å’Œ Gemfile å¦‚å‡ºä¸€è¾™ã€‚é‚£ä»€ä¹ˆæƒ…å†µä¼šç”¨åˆ° Gemfile å‘¢ ï¼Ÿ CocoaPods æ¯å¹´éƒ½ä¼šæœ‰ä¸€äº›é‡å¤§ç‰ˆæœ¬çš„å‡çº§ï¼Œå‰é¢èŠåˆ°è¿‡ CocoaPods åœ¨ install è¿‡ç¨‹ä¸­ä¼šå¯¹é¡¹ç›®çš„ .xcodeproj æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œä¸åŒç‰ˆæœ¬å…¶æœ‰æ‰€ä¸åŒï¼Œè¿™äº›åœ¨å˜æ›´éƒ½å¯èƒ½å¯¼è‡´å¤§é‡ conflictsï¼Œå¤„ç†ä¸å¥½ï¼Œé¡¹ç›®å°±ä¸èƒ½æ­£å¸¸è¿è¡Œäº†ã€‚æˆ‘æƒ³ä½ ä¸€å®šä¸æ„¿æ„å»ä¿®æ”¹ .xcodeproj çš„å†²çªã€‚ å¦‚æœé¡¹ç›®æ˜¯åŸºäº fastlane æ¥è¿›è¡ŒæŒç»­é›†æˆçš„ç›¸å…³å·¥ä½œä»¥åŠ App çš„æ‰“åŒ…å·¥ä½œç­‰ï¼Œä¹Ÿéœ€è¦å…¶ç‰ˆæœ¬ç®¡ç†ç­‰åŠŸèƒ½ã€‚ å¦‚ä½•å®‰è£…ä¸€å¥—å¯ç®¡æ§çš„ Ruby å·¥å…·é“¾ï¼Ÿ è®²å®Œäº†è¿™äº›å·¥å…·çš„åˆ†å·¥ï¼Œç„¶åæ¥è¯´è¯´å®é™…çš„è¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ homebrew + rbenv + RubyGems + Bundler è¿™ä¸€æ•´å¥—å·¥å…·é“¾æ¥æ§åˆ¶ä¸€ä¸ªå·¥ç¨‹ä¸­ Ruby å·¥å…·çš„ç‰ˆæœ¬ä¾èµ–ã€‚ ä»¥ä¸‹æ˜¯æˆ‘è®¤ä¸ºæ¯”è¾ƒå¯æ§çš„ Ruby å·¥å…·é“¾åˆ†å±‚ç®¡ç†å›¾ã€‚ä¸‹é¢æˆ‘ä»¬é€ä¸€è®²è¿°æ¯ä¸€å±‚çš„ç®¡ç†æ–¹å¼ï¼Œä»¥åŠå®é™…çš„æ“ä½œæ–¹æ³•ã€‚ 1. ä½¿ç”¨ homebrew å®‰è£… rbenv $ brew install rbenv å®‰è£…æˆåŠŸåè¾“å…¥ rbenvÂ å°±å¯ä»¥çœ‹åˆ°ç›¸å…³æç¤ºï¼š $ rbenv rbenv 1.1.2 Usage: rbenv &amp;lt;command&amp;gt; [&amp;lt;args&amp;gt;] Some useful rbenv commands are: commands List all available rbenv commands local Set or show the local application-specific Ruby version global Set or show the global Ruby version shell Set or show the shell-specific Ruby version install Install a Ruby version using ruby-build uninstall Uninstall a specific Ruby version rehash Rehash rbenv shims (run this after installing executables) version Show the current Ruby version and its origin versions List installed Ruby versions which Display the full path to an executable whence List all Ruby versions that contain the given executable See `rbenv help &amp;lt;command&amp;gt;' for information on a specific command. For full documentation, see: https://github.com/rbenv/rbenv#readme 2. ä½¿ç”¨ rbenv ç®¡ç† Ruby ç‰ˆæœ¬ ä½¿ç”¨ rbenvÂ æ¥å®‰è£…ä¸€ä¸ª Ruby ç‰ˆæœ¬ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨åˆšåˆš release Ruby 2.7ï¼š $ rbenv install 2.7.0 è¿™ä¸ªå®‰è£…è¿‡ç¨‹æœ‰äº›é•¿ï¼Œå› ä¸ºè¦ä¸‹è½½ openssl å’Œ Ruby çš„è§£é‡Šå™¨ï¼Œå¤§æ¦‚è¦ 20 åˆ†é’Ÿå·¦å³ã€‚ å®‰è£…æˆåŠŸåï¼Œæˆ‘ä»¬è®©å…¶åœ¨æœ¬åœ°ç¯å¢ƒä¸­ç”Ÿæ•ˆï¼š $ rbenv shell 2.7.0 è¾“å…¥ä¸Šè¿°å‘½ä»¤åï¼Œå¯èƒ½ä¼šæœ‰æŠ¥é”™ã€‚ rbenvÂ æç¤ºæˆ‘ä»¬åœ¨ .zshrcÂ ä¸­å¢åŠ ä¸€è¡Œ eval &quot;$(rbenv init -)&quot;Â è¯­å¥æ¥å¯¹ rbenvÂ ç¯å¢ƒè¿›è¡Œåˆå§‹åŒ–ã€‚å¦‚æœæŠ¥é”™ï¼Œæˆ‘ä»¬å¢åŠ å¹¶é‡å¯ç»ˆç«¯å³å¯ã€‚ $ ruby --version ruby 2.7.0p0 (2019-12-25 revision 647ee6f091) [x86_64-darwin19] $ which ruby /Users/gua/.rbenv/shims/ruby åˆ‡æ¢ä¹‹åæˆ‘ä»¬å‘ç° Ruby å·²ç»åˆ‡æ¢åˆ° rbenvÂ çš„ç®¡ç†ç‰ˆæœ¬ï¼Œå¹¶ä¸”å…¶å¯åŠ¨ PATHÂ ä¹Ÿå·²ç»å˜æˆ rbenvÂ ç®¡ç†ä¸‹çš„ Rubyã€‚å¹¶ä¸”æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹ Ruby æ†ç»‘çš„ GemÂ çš„ PATHÂ ï¼š $ which gem /Users/bytedance/.rbenv/shims/gem å¯¹åº”çš„ GemÂ ä¹Ÿå·²ç»å˜æˆ rbenvÂ ä¸­çš„ PATHÂ ã€‚ 3. æŸ¥è¯¢ç³»ç»Ÿçº§ Gem ä¾èµ– å¦‚æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨ rbenv å·²ç»å¯¹ Ruby åŠå…¶ GemÂ ç¯å¢ƒåœ¨ç‰ˆæœ¬ä¸Šè¿›è¡Œäº†ç¯å¢ƒéš”ç¦»ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ gem listÂ å‘½ä»¤æ¥æŸ¥è¯¢å½“å‰ç³»ç»Ÿç¯å¢ƒä¸‹æ‰€æœ‰çš„ GemÂ ä¾èµ–ï¼š $ gem list *** LOCAL GEMS *** activesupport (4.2.11.3) ... claide (1.0.3) cocoapods (1.9.3) cocoapods-core (1.9.3) cocoapods-deintegrate (1.0.4) cocoapods-downloader (1.3.0) cocoapods-plugins (1.0.0) cocoapods-search (1.0.0) cocoapods-stats (1.1.0) cocoapods-trunk (1.5.0) cocoapods-try (1.2.0) è®°ä½è¿™é‡Œçš„ CocoaPods ç‰ˆæœ¬ï¼Œæˆ‘ä»¬åé¢é¡¹ç›®ä¸­è¿˜ä¼šæŸ¥è¯¢ã€‚ å¦‚æ­¤æˆ‘ä»¬å·²ç»å®Œæˆäº†å…¨éƒ¨çš„ Rubyã€Gem ç¯å¢ƒçš„é…ç½®ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€å¼ æ¼æ–—å›¾å†æ¥æ¢³ç†ä¸€ä¸‹ï¼š å¦‚ä½•ä½¿ç”¨ Bundler ç®¡ç†å·¥ç¨‹ä¸­çš„ Gem ç¯å¢ƒ ä¸‹é¢æˆ‘ä»¬æ¥å®è·µä¸€ä¸‹ï¼Œå¦‚ä½•ä½¿ç”¨ Bundler æ¥é”å®šé¡¹ç›®ä¸­çš„ Gem ç¯å¢ƒï¼Œä»è€Œè®©æ•´ä¸ªå›¢é˜Ÿç»Ÿä¸€ Gem ç¯å¢ƒä¸­çš„æ‰€æœ‰ Ruby å·¥å…·ç‰ˆæœ¬ã€‚ä»è€Œé¿å…æ–‡ä»¶å†²çªå’Œä¸å¿…è¦çš„é”™è¯¯ã€‚ ä¸‹é¢æ˜¯åœ¨å·¥ç¨‹ä¸­å¯¹äº Gem ç¯å¢ƒçš„å±‚çº§å›¾ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®ä¸­å¢åŠ ä¸€ä¸ª Gemfile æè¿°ï¼Œä»è€Œé”å®šå½“å‰é¡¹ç›®ä¸­çš„ Gem ä¾èµ–ç¯å¢ƒã€‚ ä»¥ä¸‹ä¹Ÿä¼šé€ä¸€è®²è¿°æ¯ä¸€å±‚çš„ç®¡ç†æ–¹å¼ï¼Œä»¥åŠå®é™…çš„æ“ä½œæ–¹æ³•ã€‚ 1. åœ¨ iOS å·¥ç¨‹ä¸­åˆå§‹åŒ– Bundler ç¯å¢ƒ é¦–å…ˆæˆ‘ä»¬æœ‰ä¸€ä¸ª iOS Demo å·¥ç¨‹ - GuaDemoÂ ï¼š $ ls -al total 0 drwxr-xr-x 4 gua staff 128 Jun 10 14:47 . drwxr-xr-x@ 52 gua staff 1664 Jun 10 14:47 .. drwxr-xr-x 8 gua staff 256 Jun 10 14:47 GuaDemo drwxr-xr-x@ 5 gua staff 160 Jun 10 14:47 GuaDemo.xcodeproj é¦–å…ˆå…ˆæ¥åˆå§‹åŒ–ä¸€ä¸ª BundlerÂ  ç¯å¢ƒï¼ˆå…¶å®å°±æ˜¯è‡ªåŠ¨åˆ›å»ºä¸€ä¸ª GemfileÂ æ–‡ä»¶ï¼‰ï¼š $ bundle init Writing new Gemfile to /Users/Gua/GuaDemo/Gemfile 2. åœ¨ GemfileÂ ä¸­å£°æ˜ä½¿ç”¨çš„ CocoaPods ç‰ˆæœ¬å¹¶å®‰è£… ä¹‹åæˆ‘ä»¬ç¼–è¾‘ä¸€ä¸‹è¿™ä¸ª Gemfile æ–‡ä»¶ï¼ŒåŠ å…¥æˆ‘ä»¬å½“å‰ç¯å¢ƒä¸­éœ€è¦ä½¿ç”¨ CocoaPods 1.5.3 è¿™ä¸ªç‰ˆæœ¬ï¼Œåˆ™ä½¿ç”¨ GemfileÂ çš„ DSL ç¼–å†™ä»¥ä¸‹å†…å®¹ï¼š # frozen_string_literal: true source &quot;https://rubygems.org&quot; git_source(:github) {|repo_name| &quot;https://github.com/#{repo_name}&quot; } # gem &quot;rails&quot; gem &quot;cocoapods&quot;, &quot;1.5.3&quot; ç¼–å†™ä¹‹åæ‰§è¡Œä¸€ä¸‹ bundle installÂ ï¼š $ bundle install Fetching gem metadata from https://gems.ruby-china.com/............ Resolving dependencies... ... Fetching cocoapods 1.5.3 Installing cocoapods 1.5.3 Bundle complete! 1 Gemfile dependency, 30 gems now installed. å‘ç° CocoaPods 1.5.3Â è¿™ä¸ªæŒ‡å®šç‰ˆæœ¬å·²ç»å®‰è£…æˆåŠŸï¼Œå¹¶ä¸”è¿˜ä¿å­˜äº†ä¸€ä»½ Gemfile.lockÂ æ–‡ä»¶ç”¨æ¥é”å­˜è¿™æ¬¡çš„ä¾èµ–ç»“æœã€‚ 3. ä½¿ç”¨å½“å‰ç¯å¢ƒä¸‹çš„ CocoaPods ç‰ˆæœ¬æ“ä½œ iOS å·¥ç¨‹ æ­¤æ—¶æˆ‘ä»¬å¯ä»¥æ£€æŸ¥ä¸€ä¸‹å½“å‰ Bundler ç¯å¢ƒä¸‹çš„ GemÂ åˆ—è¡¨ï¼š $ bundle exec gem list *** LOCAL GEMS *** activesupport (4.2.11.3) atomos (0.1.3) bundler (2.1.4) CFPropertyList (3.0.2) claide (1.0.3) cocoapods (1.5.3) ... å‘ç°ç›¸æ¯”äºå…¨å±€ Gem åˆ—è¡¨ï¼Œè¿™ä¸ªåˆ—è¡¨ç²¾ç®€äº†è®¸å¤šï¼Œå¹¶ä¸”ä¹Ÿåªæ˜¯åŸºç¡€ Gem ä¾èµ–å’Œ CocoaPods çš„ Gem ä¾èµ–ã€‚æ­¤æ—¶æˆ‘ä»¬ä½¿ç”¨ bundle exec pod installÂ æ¥æ‰§è¡Œ Install è¿™ä¸ªæ“ä½œï¼Œå°±å¯ä»¥ä½¿ç”¨ CocoaPods 1.5.3Â ç‰ˆæœ¬æ¥æ‰§è¡Œ PodÂ æ“ä½œäº†ï¼ˆå½“ç„¶ï¼Œå‰ææ˜¯ä½ è¿˜éœ€è¦å†™ä¸€ä¸ª Podfile ï¼Œå¤§å®¶éƒ½æ˜¯ iOSer è¿™é‡Œå°±ç•¥è¿‡äº†ï¼‰ã€‚ $ bundle exec pod install Analyzing dependencies Downloading dependencies Installing SnapKit (5.0.1) Integrating client project [!] Please close any current Xcode sessions and use `GuaDemo.xcworkspace` for this project from now on. Sending stats Pod installation complete! There is 1 dependency from the Podfile and 1 total pod installed. å¯ä»¥å†æ¥çœ‹ä¸€ä¸‹ Podfile.lockÂ æ–‡ä»¶ï¼š cat Podfile.lock PODS: - SnapKit (5.0.1) DEPENDENCIES: - SnapKit (~&amp;gt; 5.0.0) SPEC REPOS: https://github.com/cocoapods/specs.git: - SnapKit SPEC CHECKSUMS: SnapKit: 97b92857e3df3a0c71833cce143274bf6ef8e5eb PODFILE CHECKSUM: 1a4b05aaf43554bc31c90f8dac5c2dc0490203e8 COCOAPODS: 1.5.3 å‘ç°ä½¿ç”¨çš„ CocoaPods çš„ç‰ˆæœ¬ç¡®å®æ˜¯ 1.5.3 ã€‚è€Œå½“æˆ‘ä»¬ä¸ä½¿ç”¨ bundle execÂ æ‰§è¡Œå‰ç¼€ï¼Œåˆ™ä¼šä½¿ç”¨ç³»ç»Ÿç¯å¢ƒä¸­çš„ CocoaPods ç‰ˆæœ¬ã€‚å¦‚æ­¤æˆ‘ä»¬ä¹Ÿå°±éªŒè¯äº†å·¥ç¨‹ä¸­çš„ Gem ç¯å¢ƒå’Œç³»ç»Ÿä¸­çš„ç¯å¢ƒå¯ä»¥é€šè¿‡ Bundler è¿›è¡Œéš”ç¦»ã€‚ æ€»ç»“ é€šè¿‡ç‰ˆæœ¬ç®¡ç†å·¥å…·æ¼”è¿›çš„è§’åº¦å¯ä»¥çœ‹å‡ºï¼ŒCocoaPods çš„è¯ç”Ÿå¹¶éä¸€è¹´è€Œå°±ï¼Œä¹Ÿæ˜¯ä¸æ–­åœ°å€Ÿé‰´å…¶ä»–ç®¡ç†å·¥å…·çš„ä¼˜ç‚¹ï¼Œä¸€ç‚¹ç‚¹çš„å‘å±•èµ·æ¥çš„ã€‚VCS å·¥å…·ä»æ—©æœŸçš„ SVNã€Gitï¼Œå†ç»†åˆ†å‡º Git Submoduleï¼Œå†åˆ°å„ä¸ªè¯­è¨€çš„ Package Manager ä¹Ÿæ˜¯ä¸€ç›´åœ¨å‘å±•çš„ã€‚ è™½ç„¶ CocoaPods ä½œä¸ºåŒ…ç®¡ç†å·¥å…·æ§åˆ¶ç€ iOS é¡¹ç›®çš„å„ç§ä¾èµ–åº“ï¼Œä½†å…¶è‡ªèº«åŒæ ·éµå¾ªç€ä¸¥æ ¼çš„ç‰ˆæœ¬æ§åˆ¶å¹¶ä¸æ–­è¿­ä»£ã€‚å¸Œæœ›å¤§å®¶å¯ä»¥ä»æœ¬æ–‡ä¸­è®¤è¯†åˆ°ç‰ˆæœ¬ç®¡ç†çš„é‡è¦æ€§ã€‚ é€šè¿‡å®æ“ Bundler ç®¡ç†å·¥ç¨‹çš„å…¨æµç¨‹ï¼Œå­¦ä¹ äº† Bundler åŸºç¡€ï¼Œå¹¶å­¦ä¹ äº†å¦‚ä½•æ§åˆ¶ä¸€ä¸ªé¡¹ç›®ä¸­çš„ Gem ç‰ˆæœ¬ä¿¡æ¯ã€‚ åç»­æˆ‘ä»¬å°†ä¼šå›´ç»• CocoaPods ï¼Œä»å·¥å…·é“¾é€æ¸æ·±å…¥åˆ°ç»†èŠ‚ï¼Œæ ¹æ®æˆ‘ä»¬çš„ä½¿ç”¨ç»éªŒï¼Œé€ä¸€è®²è§£ã€‚ çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç† PM æ˜¯å¦‚ä½•è¿›è¡Œä¾èµ–åº“çš„ç‰ˆæœ¬ç®¡ç†ï¼Ÿ Ruby å’Œ RVM/rbenv ä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ Gemã€Bundler å’Œ CocaPods ä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ å¦‚ä½•é€šè¿‡ Bundler æ¥ç®¡ç†å·¥ç¨‹ä¸­çš„ Gem ç¯å¢ƒï¼Ÿå¦‚ä½•é”æ­»å·¥ç¨‹å†…éƒ¨çš„ CocoaPods ç‰ˆæœ¬ï¼Ÿ</summary></entry></feed>